(globalThis.webpackChunklightning_tunnel=globalThis.webpackChunklightning_tunnel||[]).push([["src_bootstrap_app_tsx-src_static_base_example-vesting_csv-src_static_base_example_csv-src_sta-765723"],{98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>c,default:()=>d});var n,i,r,a=s(92950);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},l.apply(this,arguments)}function o(e,t){let{title:s,titleId:o,...c}=e;return a.createElement("svg",l({width:96,height:96,viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},c),s?a.createElement("title",{id:o},s):null,n||(n=a.createElement("rect",{width:96,height:96,rx:24,fill:"#42E6EB"})),i||(i=a.createElement("path",{d:"M35.528 47.6849L67.0423 15.9004L67.9877 15L52.1855 40.4816L61.1896 39.0409L48.809 54.2128L57.4079 53.9427L29 81L41.3356 61.4161L33.9523 61.7763L44.1719 46.9195L35.528 47.6849Z",fill:"#233333"})),r||(r=a.createElement("path",{opacity:.5,fillRule:"evenodd",clipRule:"evenodd",d:"M48 74C62.3594 74 74 62.3594 74 48C74 40.004 70.3905 32.851 64.7119 28.0816L66.8996 24.7006C73.6723 30.2011 78 38.5951 78 48C78 64.5685 64.5685 78 48 78C44.7357 78 41.5931 77.4786 38.6511 76.5146L42.0603 73.3184C43.968 73.7642 45.9565 74 48 74ZM32.8095 69.1033C26.262 64.382 22 56.6887 22 48C22 33.6406 33.6406 22 48 22C50.4385 22 52.7986 22.3357 55.0366 22.9634L58.2158 19.7842C55.0272 18.6296 51.5871 18 48 18C31.4315 18 18 31.4315 18 48C18 58.0387 22.9307 66.9258 30.5025 72.3715L32.8095 69.1033Z",fill:"#233333"})))}const c=a.forwardRef(o),d=s.p+"static/media/logo.edd6e68b96629106774ae0fdbf3926d7.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return r.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return a.default}});var n=l(s(70854)),i=l(s(27803)),r=l(s(98463)),a=l(s(83272));function l(e){return e&&e.__esModule?e:{default:e}}const o=[n.default,i.default];t.h0=o},60:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>pr,__esModule:()=>dr.X$,logo:()=>dr.jY,panels:()=>dr.h0,readme:()=>dr.ng});var n=s(92950),i=s(55754),r=s(68275),a=s(45055),l=s(32671),o=s(97425),c=s(50794),d=s(4065),u=s(43785),p=s(99370);const h=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(r.util.explorer(t),"_blank")}),x=e=>(console.log("er",e),window.notify({type:"error",description:e.message})),m=async e=>fetch(e).then((function(e){var t;let s=null===(t=e.body)||void 0===t?void 0:t.getReader(),n=new TextDecoder("utf-8");return null===s||void 0===s?void 0:s.read().then((function(e){return n.decode(e.value)}))})),j=async e=>{const t=e.join(",");let s=`https://api.coingecko.com/api/v3/simple/price?ids=${t}&vs_currencies=usd`;const n=await r.DataLoader.load("fetchMulCGK"+t,(()=>fetch(s).then((e=>e.json())))),i={};for(const r in n)i[r]=n[r].usd;return i};const y={appId:"lightning_tunnel",url:"https://descartesnetwork.github.io/lightning-tunnel/index.js"},g={development:{...y},production:{...y}};var f=s(71256);const C=class{constructor(){this._wallet=window.sentre.solana,this._publicKey=new f.PublicKey("GuestAccount11111111111111111111111111111111"),this._init=async()=>{const e=await this._wallet.getAddress();this._publicKey=new f.PublicKey(e)},this.signTransaction=async e=>this._wallet.signTransaction(e),this.signAllTransactions=async e=>{let t=[];for(const s of e){const e=await this.signTransaction(s);t.push(e)}return t},this._init()}get publicKey(){return this._publicKey}},b={devnet:{node:r.rpc,utility:new o.Utility(new C,r.rpc,"AKTU61s8NJ8zJATQiceREdhXbedRnKrd1BVgnCuxmD2F"),fee:1e6,utilityProgram:"AKTU61s8NJ8zJATQiceREdhXbedRnKrd1BVgnCuxmD2F",taxman:"8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"},testnet:{node:r.rpc,utility:new o.Utility(new C,r.rpc),fee:1e6,utilityProgram:o.DEFAULT_SEN_UTILITY_PROGRAM_ID,taxman:"8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"},mainnet:{node:r.rpc,utility:new o.Utility(new C,r.rpc),fee:1e6,utilityProgram:o.DEFAULT_SEN_UTILITY_PROGRAM_ID,taxman:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}},w={manifest:g[r.env],sol:b[r.net]},{manifest:{appId:v}}=w,A=()=>{const e=(0,a.useLocation)(),t=(0,a.useHistory)(),s=(0,n.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),i=(0,n.useCallback)((e=>s.get(e)),[s]),r=(0,n.useCallback)((e=>{const t=new URLSearchParams;for(const s in e)t.set(s,e[s]);return t.toString()}),[]),l=(0,n.useMemo)((()=>`/app/${v}`),[]);return{getQuery:i,generateQuery:r,pushHistory:(0,n.useCallback)((e=>t.push(`${l}${e}`)),[l,t]),appRoute:l}};var T=s(19289);let S,k,R,N,B,E;!function(e){e[e.auto=1]="auto",e[e.manual=2]="manual"}(S||(S={})),function(e){e[e.SelectMethod=1]="SelectMethod",e[e.AddRecipient=2]="AddRecipient",e[e.ConfirmTransfer=3]="ConfirmTransfer"}(k||(k={})),function(e){e.activeKey="collapse-upload-csv"}(R||(R={})),function(e){e.waiting="Waiting",e.ready="Ready",e.claimed="Claimed",e.expired="Expired",e.loading="Loading"}(N||(N={})),function(e){e.Vesting="vesting",e.Dashboard="dashboard",e.Airdrop="airdrop"}(B||(B={})),function(e){e.valid="valid",e.invalid="invalid"}(E||(E={}));const D="MMM DD, YYYY HH:mm",M="all",Z="steps",z={step:k.SelectMethod},L=(0,T.createAsyncThunk)("steps/onSelectStep",(async e=>({step:e}))),W=(0,T.createSlice)({name:Z,initialState:z,reducers:{},extraReducers:e=>{e.addCase(L.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var U=s(73620),F=s(45263);let H;!function(e){e.six_months="6months",e.one_year="1y",e.tow_years="2y",e.four_years="4y"}(H||(H={}));const I=[{label:"6 months",value:H.six_months},{label:"1 year",value:H.one_year},{label:"2 years",value:H.tow_years},{label:"4 years",value:H.four_years}],P=()=>{const[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(I),a=(0,i.useSelector)((e=>e.recipients.expirationTime)),o=(0,i.useSelector)((e=>e.recipients.globalUnlockTime)),c=(0,i.useSelector)((e=>e.recipients.configs.distributeIn)),d=(0,i.useSelector)((e=>e.recipients.configs.frequency)),u=(0,i.useDispatch)(),p=e=>{t(e.target.value)},h=n=>{if(n)return u(ee({configs:{distributeIn:n}}));if(!(0,U.Z)(e))return;const i=[...s];return-1===i.findIndex((t=>t.value===e))&&i.push({label:e,value:e}),r(i),t(""),u(ee({configs:{distributeIn:e}}))},x=(0,n.useMemo)((()=>{const e=o+(0,U.Z)(c);return a<e&&a?"Must be less than the expiration time.":(0,U.Z)(c)<(0,U.Z)(d)?"Must be greater than the distribution frequency.":""}),[c,a,d,o]);return(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{className:"caption",children:"Distribute in"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Select,{className:"select-vesting-data",value:c,onChange:h,placement:"bottomRight",dropdownRender:t=>(0,F.jsxs)(F.Fragment,{children:[t,!(0,U.Z)(e)&&e&&(0,F.jsx)(l.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:"Wrong format"}),(0,F.jsx)(l.Input,{onChange:p,placeholder:"E.g: 1d, 1months, 1y,...",value:e,suffix:(0,F.jsx)(l.Button,{style:{color:"#42E6EB"},onClick:()=>h(),type:"text",children:"Add"})})]}),children:s.map(((e,t)=>{let{label:s,value:n}=e;return(0,F.jsx)(l.Select.Option,{value:n,children:s},t)}))})}),x&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:x})})]})};let G;!function(e){e.one="1months",e.three="3months",e.six="6months",e.twelve="12months"}(G||(G={}));const Y=[{label:"1 months",value:G.one},{label:"3 months",value:G.three},{label:"6 months",value:G.six},{label:"12 months",value:G.twelve}],K=()=>{const[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(Y),a=(0,i.useSelector)((e=>e.recipients.configs.frequency)),o=(0,i.useDispatch)(),c=e=>{t(e.target.value)};return(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{className:"caption",children:"Distribution frequency"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Select,{value:a,className:"select-vesting-data",placement:"bottomRight",onChange:e=>o(ee({configs:{frequency:e}})),dropdownRender:n=>(0,F.jsxs)(F.Fragment,{children:[n,!(0,U.Z)(e)&&e&&(0,F.jsx)(l.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:"Wrong format"}),(0,F.jsx)(l.Input,{onChange:c,placeholder:"E.g: 1d, 1months, 1y,...",value:e,suffix:(0,F.jsx)(l.Button,{style:{color:"#42E6EB"},onClick:()=>(n=>{if(n)return o(ee({configs:{frequency:n}}));if(!(0,U.Z)(e))return;const i=[...s];return-1===i.findIndex((t=>t.value===e))&&i.push({label:e,value:e}),r(i),t(""),o(ee({configs:{frequency:e}}))})(),type:"text",children:"Add"})})]}),children:s.map((e=>{let{label:t,value:s}=e;return(0,F.jsx)(l.Select.Option,{value:s,children:t},s)}))})})]})};let V;!function(e){e.one_months="1months",e.three_months="3months",e.six_months="6months",e.twelve="12months"}(V||(V={}));const O=[{label:"1 month",value:V.one_months},{label:"3 months",value:V.three_months},{label:"6 months",value:V.six_months},{label:"12 months",value:V.twelve}],J=()=>{const[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(O),a=(0,i.useSelector)((e=>e.recipients.configs.cliff)),o=(0,i.useDispatch)(),c=e=>{t(e.target.value)},d=n=>{if(n)return o(ee({configs:{cliff:n}}));if(!(0,U.Z)(e))return"Wrong format!";const i=[...s];return-1===i.findIndex((t=>t.value===e))&&i.push({label:e,value:e}),r(i),t(""),o(ee({configs:{cliff:e}}))};return(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{className:"caption",children:"Cliff"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Select,{className:"select-vesting-data",placement:"bottomRight",value:a,onChange:d,dropdownRender:t=>(0,F.jsxs)(F.Fragment,{children:[t,!(0,U.Z)(e)&&e&&(0,F.jsx)(l.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:"Wrong format"}),(0,F.jsx)(l.Input,{onChange:c,placeholder:"E.g: 1d, 1months, 1y,...",value:e,suffix:(0,F.jsx)(l.Button,{style:{color:"#42E6EB"},onClick:()=>d(),type:"text",children:"Add"})})]}),children:s.map((e=>{let{label:t,value:s}=e;return(0,F.jsx)(l.Select.Option,{value:s,children:t},s)}))})})]})},q="recipients",X={recipientInfos:{},expirationTime:0,globalUnlockTime:0,configs:{frequency:G.one,distributeIn:H.six_months,cliff:V.one_months}},Q=(0,T.createAsyncThunk)("recipients/setExpiration",(async e=>({expirationTime:e}))),_=(0,T.createAsyncThunk)("recipients/setGlobalUnlockTime",(async e=>({globalUnlockTime:e}))),$=(0,T.createAsyncThunk)("recipients/addRecipients",(async e=>{let{recipientInfos:t}=e;return{recipientInfos:t}})),ee=(0,T.createAsyncThunk)("recipients/setGlobalConfigs",(async(e,t)=>{let{configs:s}=e,{getState:n}=t;const{recipients:{configs:i}}=n();return{configs:{...i,...s}}})),te=(0,T.createAsyncThunk)("recipients/setRecipient",(async(e,t)=>{let{walletAddress:s,nextRecipients:n}=e,{getState:i}=t;const{recipients:{recipientInfos:r}}=i(),a={...r};return a[s]=n,{recipientInfos:a}})),se=(0,T.createAsyncThunk)("recipients/removeRecipient",(async e=>e)),ne=(0,T.createAsyncThunk)("recipients/editRecipient",(async(e,t)=>{let{walletAddress:s,configs:n,unlockTime:i}=e,{getState:r}=t;const{recipients:a}=r(),{distributeIn:l,frequency:o}=n;let c={...a.recipientInfos};const d=c[s],u=[];let p=0;for(const{amount:m}of d)p+=Number(m);const h=Math.floor((0,U.Z)(l)/(0,U.Z)(o)),x=Number(p)/h;for(let m=0;m<h;m++){let e=0,t=x;if(0===m&&(e=i),0!==m&&(e=(0,U.Z)(o)+u[m-1].unlockTime),m===h-1){let e=0;for(const{amount:t}of u)e+=Number(t);t=Number(p)-e}const n={address:s,amount:t.toString(),unlockTime:e};u[m]=n}return c[s]=u,{recipientInfos:c}})),ie=(0,T.createAsyncThunk)("recipients/removeRecipients",(async()=>({recipientInfos:{}}))),re=(0,T.createAsyncThunk)("recipients/addAmountAndTime",(async(e,t)=>{let{walletAddress:s,nextRecipientInfos:n}=e,{getState:i}=t;const{recipients:{recipientInfos:r}}=i(),a={...r};return a[s]=n,{recipientInfos:a}})),ae=(0,T.createSlice)({name:q,initialState:X,reducers:{},extraReducers:e=>{e.addCase(te.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ie.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Q.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(_.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ee.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(se.fulfilled,((e,t)=>{let{payload:s}=t;delete e.recipientInfos[s]})).addCase(ne.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase($.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(re.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var le=s(74939),oe=s(76347);const ce="empty",de=e=>{let{activeMintAddress:t,onSelect:s}=e;const[i,r]=(0,n.useState)(!1),a=(0,n.useCallback)((e=>{s(e),r(!1)}),[s]);return(0,F.jsxs)(n.Fragment,{children:[(0,F.jsx)(l.Button,{className:"select-token",type:"text",onClick:()=>r(!0),children:t!==ce?(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(le.Z,{mintAddress:t}),(0,F.jsx)(p.Z,{mintAddress:t}),(0,F.jsx)(u.Z,{name:"chevron-down-outline"})]}):(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(le.Z,{mintAddress:t}),(0,F.jsx)(l.Typography.Text,{children:"Select a token"}),(0,F.jsx)(u.Z,{name:"chevron-down-outline"})]})}),(0,F.jsx)(l.Modal,{visible:i,onCancel:()=>r(!1),footer:null,closable:!1,centered:!0,className:"card-lightning mint-select-modal",destroyOnClose:!0,children:(0,F.jsx)(oe.Z,{onChange:a})})]})};let ue;!function(e){e.Vesting="vesting",e.Airdrop="airdrop"}(ue||(ue={}));const pe="main",he={methodSelected:S.manual,mintSelected:ce,visible:!1,isTyping:!1,typeDistribute:ue.Airdrop,TGE:"",TGETime:0,metadataLoading:!0},xe=(0,T.createAsyncThunk)("main/onSelectMethod",(async e=>({methodSelected:e}))),me=(0,T.createAsyncThunk)("main/onSelectedMint",(async e=>({mintSelected:e}))),je=(0,T.createAsyncThunk)("main/setVisible",(async e=>({visible:e}))),ye=(0,T.createAsyncThunk)("main/setIsTyping",(async e=>({isTyping:e}))),ge=(0,T.createAsyncThunk)("main/setMetadataLoading",(async e=>({metadataLoading:e}))),fe=(0,T.createAsyncThunk)("main/setTypeDistribute",(async e=>({typeDistribute:e}))),Ce=(0,T.createAsyncThunk)("main/setTGE",(async e=>({TGE:e}))),be=(0,T.createAsyncThunk)("main/setTGETime",(async e=>({TGETime:e}))),we=(0,T.createSlice)({name:pe,initialState:he,reducers:{},extraReducers:e=>{e.addCase(xe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(me.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(je.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ye.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ge.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(fe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ce.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(be.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ve=()=>{const e=(0,i.useDispatch)(),{pushHistory:t}=A();return{onPushAndClear:async s=>(await e(L(k.SelectMethod)),await e(xe(S.manual)),await e(ie()),await e(_(0)),await e(Q(0)),await e(Ce("")),await e(be(0)),await e(me(ce)),t(s))}};var Ae=s(68532),Te=s(21995),Se=s.n(Te),ke=s(97429).Buffer;const Re=ke.from("00","hex"),Ne=e=>{const t=(e=>{const t=(0,Ae.decode)(e);let s=ke.from(t.subarray(28,32)).toString("utf8");for(;s[0]===Re.toString("utf8");)s=s.substring(1);return s})(e),s=ke.from((0,Ae.decode)(e).subarray(0,28));return`${(0,Ae.encode)(s)}.${t}`},Be={Hrn5D4pH4HFcKd747ScN8yCpd3dz6EBqAhfQmXpkqGxy:"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV",Cmt2nLjaM7nLNGZs2wcAJMfFum4D2PM33TwKPEQKNE1J:"ABbBcJot6XqnXZb7zYZZTzGigGVzrNzVE9GKXFmrMvpj","8n8A7bgr6sHL1otp6kGgCQG3Xp5Yzoi35a76pKWfvyHg":"CPXLk4MB3g33zJeACutBmGRb6pKSMZhp5kcePbf9DsNB","7wRiB8igG5jRgbfzPj1zE5hhZbBuZbVdsR5NC2Gtx9Qb":"21jcUMNiKaaFNq3eDo4nySD54vUDf6XAUZVUBmwuZJTm","6uVVZyqqeKQkRnN4jQQdQRkSwKbazREL6qLhAyhdJtai":"41LSqWQJvDWPRv9nyicp53wtqxNF3LTevJWjqkE6wVyu","7A5ARhScj8jzAPTW3BxC9KZ4EvKpPw56JhnQRe3Mi28m":"EP1yMZuf6N1opbxGiSwVhB9JjqZXernjCLYn14Z16KsH","6R1Ps8fpcyKitPXSRLC6LEwxQD55xhsQdhm5fo7vuyUL":"J1NvTcq7aovJ8AHGPxrtyy9tYqtjxhyE46DfXgqPdKd5",HxnkontNKgkiqfEjBBAwGhNUzxT1kbo1wnist9uXF2yt:"2dEJAyqPMGk9SUCjqof9wQUcGz86aAi8U28NugxQqcVZ","5cRUUtNPQCnes37zi3sPNMiXtWc3ZJXEM5HeHApdJfke":"6PXf86RUfdfdjJ8nnrpaTHXAip8x7QYuiudYFJMFsTFq",D4j54XeBo9RroPNyaof5mNRHm8tYYxjyxvqCETFweNLt:"GKyF9ELprcGR7mDunmNakxhGAStNAfJrnFkDj1Sccu4o",Gh8qs65djXDEFWdd4mwFL9V9wU4fm9MqRv7GWzvSebff:"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV",E1WXUW7NdvFp8FiAB7svQXMBQpmGigrkXu1JGyUSdeKJ:"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV",C76FwoBhiYUw7Xyy4RAg64AsfgnwEMkRspaKkFJ3WoVD:"4cEK5fgbUhQYGRSd7SoVtkbh64mKuPrjGUYdrsf25Lnf",G8cvHPc3gpePJTWW8TGLazQetWADsGEq3AJ811mQg3yY:"4cUqkWEo7qHobMJNa5fZnqXVG2GNELWymGwfMVF4BkgK","4G2oqkfLQRG4krwxs62Hg8qfwwBXhQYwE9Y8X3PLNkVq":"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV",Fni4hsJhNbmR5SPzAEwWhAheitMUXwkgzuxaYJqBwj6v:"ANoMdKCu9AWaHZsqdzMYB6YF1LwVyZeQ34Ljb4jHps5m",D6s2qUWxsQLStLi9C2H1WmDHaWzxi4YUDynZv843rx6U:"HRsTCgQPmGB4QdYWXM8tfxS6eA83zfeHbBQz6GeJ6iGK",HpEjDzeWCq7246LixtHuHo7xShcRVj4FUg9bXBpXyUg7:"aZC13AZobk4U5JT6t4CrjnCPws7WF2xBLhLq5XStMwZ","4CveZuhUGPVdw3HcJ1mmjzhucesy8xjneb5u2DDojPi5":"AyK7trE4i566MottykPRGoNox4wuB1cRfM86ucuXvMFH",A5kSXq4NtvN2xqZmEojCmit7ex3s1SgZZtfRZz2ywjt:"Aw2okzwhXpTYQck9bQ2t2kLjoU9755ZvNKo3PoGZXXCo","582ky9unMMM8Lc8uHKYaepRJqtchcTaRgZspPfGygnQi":"rSjzByxGE391hdcce4KQUoEYXsj68R3kfoU2Fydq8pK",CboRSes5dccLoJ52UarvC2ECoLaBeSLsD1WiYK7PxdEw:"BoU9a5MSSkEkk3xT7seWgBmS8rygdCR7ZnxHvyoTQyK9",DAD9gJrMnzaHSDv53x9v4cC9PXdZWQMGxZLy79TbgxCz:"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV","7sQJ452teHaPMHCHJvsAuLtDroMroom86oa2s4J2ftQ":"GxFDYhWfjUk28NwZ5JQF2Sj8UzNpM9rHNwkGLAFZb5zj","49bNtndoGunDXERTjzyHDkVYcWoUBsAgUGfEFVXyX7zJ":"mxKrsRbuPQiC3zYoYpQKUCfhH9JhbrkJ9DMJdVky5Lf",JCMRBB9XaTLXZcP25XZfLqCbhvRJLhRGRUjqxBWXaSGn:"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV","4jKEHGL4CGzQzPPPVADiVTBY3s5vp9ocx9zLMDUuHmLS":"6umYMomwYjDjfxUcyfkcYYUKkNsBj1XGxpEWSN45pY9H","82rfchPLnQJfWFobyfW7CrrGgnQMazMMja2oeHAYkuts":"767KgCcnLhLS4ffHdZCyrzi1YhZFYCJ75CdsWnzrasbZ","8bHeYep9S6AjG8q2rNuUYpEpeRZfNsw3z2WBhfizKTSR":"4TneEbEtRQTPQQ7gHaMnBi5YV8ZqFLhzELi7kZPT7jMu",AarmuVbMghjuqaEhmkEPDy1Ha2CJRJ9zWCasPzh4uKAp:"AkKAZ5B8TmZccjJWymUQJaXe1UPXga7FcdDiCX3eJQXu",DkbfWSBZ5P1umeXfepXWcPNx4r4p95vw4kFLbBo88eVa:"AEEUKbCrFsBteAsn2VxSUhMu7YE9yJNv6nhgfL9gPyTH",CC59ymB3rPYXVApmr5ZHndP9ftBRLFudh1PTwcPgEGFD:"7K97okP1yvBafsYRBWUwbLNePpGsHb9rhE453NfNcBrj","9yjtGutxVHD3sfcBi6aRaQicHKEnyhkHakDZ3588XajP":"BZLxMgpoeQdTfT9iPtDyq7KK7ZY8eGebRZNgT25LXaYj",B8xmHGrAsxD9jQchys6SXJYAypJ9sTB6MMfUAkSZBTgz:"BoU9a5MSSkEkk3xT7seWgBmS8rygdCR7ZnxHvyoTQyK9",DMKnrc88Ku3xP8RfqpTZ8PGZY4yr999rqJiRVrvZ3cK9:"FevWcHy4ypJW3ZEx89kbfwfXvqJcJniayoqPimzT2agK","6JED42JTTYpwhC2ceAjxedqWkkYUfhKzrNfHnqpdA3Ko":"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV","2oUy2kZDzNRc3i7uSJssn4b9zrvj1geJriSMJ8VfjK9T":"72XnUQhBMjKjqjx2kyA1uB5pbuWz1cFq7dxAR5VAxH3R",EvzBQ4UZUJ28ASy46RYm4jWu9fYhPzbioVSwEMFodtz6:"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV",AHNaGUgxitjn63RcVeisWtUWdBezqwihxJz2V1h3m72F:"2ZA9AJwwHN8SnKKSFQ1yeyddLKHMoDFUVTnuYzUq4Djh","8jAXUagrMTWoHNktdB1o35iBSEVLw6yvvxNsxbC9iuuJ":"HKhtjDJLDxc4H1hyW6v2p9F8vCRmubHVGFaTZFJNqFsy","5ZsKjqS6EzYskyRwKU2xdsw8fRnZMNVuwWNPiYtVyhkt":"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV",BUo1ZR8582QrCiGvsx5sSxMuSAn43pP5AGGK32z8QwEb:"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV","2pTwgGkHue9RuABXZBwFVS74CwA6Y21zi2TvezEDaAer":"6a65Pf2sRZnxATHYdntmHuYj7dLSKvD9LprWava2uRRM",EUEY1S77ZwtZywYrLQLJoctAUKMVrUEi4ZmpkbkGUbf6:"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV",DYVkwwMRLSpzWqGSQkTnDbH1V9JBoUF84NYf2r5qpyoo:"4U49gBDu4g87GpeDTr3nQAV8Q2uyRZ6Jy2UYEWnNfwD5","9922eBNh6iWwDy3SDv34jSXnKKDvaez4bJ6YZJgu4YBc":"BCPJwWFh2ncnt9b43jw2wTUBRB7e9tTs8dTjss7He8VR",EQrQM57kjXwWqrYvpnvzLYMYG5yReXHkHRa419D3C8HV:"4Eoktmv9YeCK2w9mxnzZAJtZJycQLjcU3ixeKxrFoKoH",HBbfehNYmCFy7YEx82ACj76ste5Xg1deF8WChe4m6A3x:"2LD2HchUjgJL4Ho734SFa9iaCC4iiMbJzbKrfjRnW51D",EgebbkvwtD9SYj4x3jLp4b7GMtrhGyicYqmPFQzASAJL:"7UoKx3bAf9ooL6nvhis5cYeQjzpGSeCnXhnzCK1pU5yD",YAo7cKAyYjCM8gFaDA6pK7ZSNfjsdHSyFSwYKwCXxgT:"dQSfiTaJ3g2XsSkN9hexrSioYAX9WnghhYqYxi8sbej",CSfCqiwcc6pZ8ARKzWbfUoJW4k4m7MDoXWqYbvEyXQkc:"2CrevgwNvQZUr5m98Q1DrvqicBruovV3G27Sy4NVFRrj",DHjNjyAXTLPejDPCSJBxjYXz59iBqv9R32sNPqUfhKnr:"GJ6kYACnnx19Q4WSdewSdpdnSiCvM4xLcqRPz5DoBF5d","5yushasaLjqrPgg9CmTXvp5uSJLSeNfuJwgw499zLWdm":"5Ko1uXVrqhm2VW2e4W5SiB4kvaRCeyNwYfoD3Q9aA6CB",CpbBx4t2dZkfWGvTgomccDhTyynuTVmrw6uCuk9feTJ1:"5Hfry9o7ohWmDm27HgtA6Nm48rbnj8V9P5aBG8LQj2vo","7KX4NzXf3GKsAqcsM8tjirZZkcRP6uStDtzzkuSW2WmV":"6e49dFAnDbeQBsTTJN8y673y1ypLh4goaNvNZch9UEKM",Db15DWzdEPZCvHztG55EoUNjDov9D5HyBbiDNsbAyJUg:"HHuD2ZsoEsPh1Jat1dzbRKDXPmdJaDXpYVEVAuXhY79u",EdWWi3FebVN8e6h7Nsho6Qipe4JuvpJzwYDeZJsgeyNU:"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV",AW5cpdGzzKk8az2GdgdrMYkkAiznfeT4XZD1Jro6kh9g:"4oALdQoBLnEfqDu1HBxAPHt6B1iMWNgHdLRooyfRK8sM","9LfCf2TTHNWsXT5GXhhX7NrFaeWD9MgCDzWEp13nzA9p":"AcFbTzzcs8jope4TJxARLJ5XUPvMfQ1RcJ4ar3mLgs8F","8psBBtYv2Mxy8dn6oUAasUrG3DrUxRWvAFPH367CFe7d":"DHGex3oCA3cbkBFcPWS9u76BDCTEPwqeM1uBCEG4NWHh","8mhrx6D6PpyMMMwRwGqyurUWRDAnaTzsgtCdNmx4idSQ":"5MCRPsT8XeAEY7UAfcJbs8Ka7nFrmJYprXqA4sFAZvS7","6jkoaTyABqFRinESuS2orFBKv86rFdexKPzcgWhAEAzr":"4np6BHqFjBaEBy2BRgjwn2yBZUCZfEUfBReQ6VwF8cBD",Cg4ZFSFA3Zvazu3Cy8FacHufv5HBJEenwaZ3syptTXHC:"FtKMsVYbbLWi36iZHYBCnkL4rxexp77cDQkujPpRxti7","3ESTJHJNS2FsTXyCbbTCiT6UJhTYbFhZ2BJGTuuuZZwv":"8mkTWWZuWUG9mhnzkChfoXALE1RGUtHLJpt6r6R4W1qV",WELVDZYMffoumnyNDZEWdFH18K3sPh5KsEztNgL8i1U:"7MHHYKyxMRTSWwteUcYePs9HtQkTCJ7Wi6ZCjzPLHwd5",CwaV5AUSUxXd8qWFxaKzb5g4wrUJ8rTXEHLU3kMg3BFU:"2EP6we5hEFtnGqSZrMVz3GpCGiNs6yHXEnEui7x69979","6YbEcAhtbdugMityFt8wHGCa8fw7K4Co7JZATrxM9sUG":"GQyywMrvYitAvaVBUtXLhgbqFAYPpxU6eFBKbcC9DdiT",ErpAzLjs62TwkqeafEeSVG5UffqTURDMx7tBxx846xyE:"H2dLTgmxEZLj7F9foK4YspuACmxcQ4kpa2qnw9RTAdZV",DNAeRS8rtGcfoXgvSrwKWz8fBfwWhstsFktRQB4M4c5i:"BGPtvDCiKJ4T5oWuXGoHqdXQaJQkfqdKG4udMkxvF4w",hbmsAZVewCnGFkTXePhNcdea3cnLqcZZG4ybCGwoDyK:"8ket7o5KGwFhWYDMyj4HhSExGRCqaKiVs7SkmNXNf9K1","5gHxpdyoirFphGW8kprP63AqiAxYTB2PdUqUQUosUeUJ":"AKAcSJpYcbTWztFoo5FM9gHesFxWSunStC5g6tbFFYVq",KJu2jrpbnxc2U9gP7mnVEq8B8cEBCAVpjMBp4RB6vKu:"Avf2Ed8Vxw75NBNrAdp6qM5fDfykJv7SfFiGMMbjxfCf"};var Ee=s(97429).Buffer;const De=()=>{const e=(0,i.useSelector)((e=>e.distributors)),t=(0,i.useSelector)((e=>e.metadatas));return(0,n.useCallback)((s=>{const{metadata:n}=e[s];let i=(0,Ae.encode)(Ee.from(n));return Be[s]&&(i=Be[s]),t[i]?t[i]:{data:[],createAt:0,checked:!1}}),[e,t])};const Me=s.p+"static/media/redeem.7e0fa96ccc80d536f7730bb34ab5753b.svg";const Ze=s.p+"static/media/redeem_success.8bde41be38896c8e01a5d6ec87a1e40e.svg";const ze=s.p+"static/media/not_member.27313d62e5aba95e40f44df8f5f39d28.svg";var Le=s(97429).Buffer;const{sol:{utility:We,taxman:Ue,fee:Fe}}=w,He=()=>{const[e,t]=(0,n.useState)(!1),[s,m]=(0,n.useState)(!1),[j,y]=(0,n.useState)(),[g,f]=(0,n.useState)(0),[C,b]=(0,n.useState)(),[w,v]=(0,n.useState)(!0),[T,S]=(0,n.useState)(!0),[k,R]=(0,n.useState)(""),N=(0,i.useSelector)((e=>e.receipts)),B=(0,r.useGetMintDecimals)(),E=(0,r.useWalletAddress)(),{pushHistory:D}=A(),{onPushAndClear:M}=ve(),Z=De(),z=(0,a.useParams)().distributorAddress,L={fee:new c.BN(Fe),feeCollectorAddress:Ue},W=(0,n.useCallback)((async()=>{if(z){m(!0);try{const e=await We.program.account.distributor.fetch(z);b(e);const{data:t}=Z(z),s=o.MerkleDistributor.fromBuffer(Le.from(t));return y(s)}catch(e){x(e)}finally{m(!1)}}}),[z,Z]),U=(0,n.useMemo)((()=>{if(!j)return;const e=j.receipients;for(const t of e)if(E===t.authority.toBase58())return t;return S(!1),v(!1)}),[j,E]),H=(0,n.useCallback)((async()=>{if(C&&U&&j)try{const{salt:e}=U,t=await We.deriveReceiptAddress(e,z),s=N[t];if(!s)return;const{amount:n}=s;return R(d.utilsBN.undecimalize(n,g)),v(!1)}catch(e){}}),[g,C,z,j,N,U]),I=(0,n.useCallback)((async()=>{if(!C)return;const e=C.mint.toBase58();try{const t=await B({mintAddress:e})||0;return f(t)}catch(t){return f(0)}}),[C,B]);(0,n.useEffect)((()=>{I()}),[I]),(0,n.useEffect)((()=>{W()}),[W]),(0,n.useEffect)((()=>{H()}),[H]);const P=(0,n.useMemo)((()=>T?k?Ze:Me:ze),[k,T]);return(0,F.jsx)(l.Row,{gutter:[24,24],justify:"center",className:"lightning-container",children:(0,F.jsx)(l.Col,{xs:24,md:16,lg:14,children:(0,F.jsx)(l.Card,{style:{minHeight:430},loading:s,className:"card-lightning",bordered:!1,children:(0,F.jsxs)(l.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,F.jsx)(l.Col,{span:24,style:{textAlign:"left"},children:(0,F.jsx)(l.Button,{type:"text",icon:(0,F.jsx)(u.Z,{name:"arrow-back-outline"}),onClick:()=>D(""),style:{margin:-12},children:"Back"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Image,{src:P,preview:!1})}),(0,F.jsx)(l.Col,{span:24,children:T?(0,F.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,F.jsxs)(l.Typography.Title,{level:3,children:["Redemption ",k&&"successfully","!"]}),(0,F.jsxs)(l.Space,{size:4,children:[(0,F.jsx)(l.Typography.Text,{type:"secondary",children:k?"You took":"Let's take"}),(0,F.jsxs)(l.Typography.Title,{level:5,style:{color:"#42E6EB"},children:[d.utilsBN.undecimalize((null===U||void 0===U?void 0:U.amount)||new c.BN(0),g),(0,F.jsx)(p.Z,{mintAddress:(null===C||void 0===C?void 0:C.mint.toBase58())||""})]})]})]}):(0,F.jsx)(l.Typography.Title,{level:3,children:"You are not in the list!"})}),(0,F.jsx)(l.Col,{span:24,children:w?(0,F.jsx)(l.Button,{type:"primary",onClick:async()=>{if(!U||!j)return;const e=j.deriveProof(U);if(j.verifyProof(e,U))try{t(!0);const{txId:s}=await We.claim({distributorAddress:z,proof:e,data:U,feeOptions:L});return h("Redeem",s),v(!1)}catch(s){x(s)}finally{t(!1)}},loading:e,children:"Redeem"}):(0,F.jsx)(l.Button,{size:"large",type:"primary",block:!0,onClick:()=>M(""),children:"Home"})})]})})})})},Ie=[{label:"Dashboard",key:B.Dashboard,icon:(0,F.jsx)(u.Z,{name:"grid-outline",style:{fontSize:24}})},{label:"Airdrop",key:B.Airdrop,icon:(0,F.jsx)(u.Z,{name:"cloud-download-outline",style:{fontSize:24}})},{label:"Vesting",key:B.Vesting,icon:(0,F.jsx)(u.Z,{name:"receipt-outline",style:{fontSize:24}})}],Pe=()=>{const[e,t]=(0,n.useState)(B.Dashboard),{pathname:s}=(0,a.useLocation)(),{appRoute:o}=A(),{onPushAndClear:c}=ve(),d=(0,i.useDispatch)(),p=(0,r.useWidth)(),h=(0,n.useCallback)((()=>{const e=s.replace(`${o}/`,""),n=e.indexOf("/");return t(-1===n?e:e.slice(0,n))}),[o,s]),x=(0,n.useCallback)((()=>{if(e!==B.Dashboard)return d(fe(e))}),[d,e]);return(0,n.useEffect)((()=>{h()}),[h]),(0,n.useEffect)((()=>{x()}),[x]),(0,F.jsxs)(l.Row,{className:"header",align:"middle",children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsx)(l.Menu,{selectedKeys:[e],onClick:async e=>c(`/${e.key}`),items:Ie,mode:"horizontal"})}),(0,F.jsx)(l.Col,{children:(0,F.jsxs)(l.Space,{size:12,style:{cursor:"pointer"},onClick:()=>window.open("https://academy.sentre.io/lightning-tunnel-version-2/","_blank"),children:[(0,F.jsx)(u.Z,{style:{fontSize:24},name:"information-circle-outline"}),p>=632&&(0,F.jsx)(l.Typography.Title,{level:5,children:"Guidelines"})]})})]})},Ge=e=>{let{label:t,icon:s,value:n,unit:i="$",loading:a=!1,cardStyles:o={}}=e;return(0,F.jsx)(l.Card,{bordered:!1,className:"card-lightning",bodyStyle:o,loading:a,style:{height:"100%"},children:(0,F.jsxs)(l.Row,{align:"middle",children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{direction:"vertical",children:[(0,F.jsx)(l.Typography.Text,{type:"secondary",children:t}),(0,F.jsxs)(l.Typography.Title,{level:4,children:[i,r.util.numeric(n).format("0,0.[000]")]})]})}),(0,F.jsx)(l.Col,{children:s})]})})};var Ye=s(36645);const Ke=()=>{const e=(0,r.useGetMintDecimals)();return{getTotalBalance:(0,n.useCallback)((async t=>{const s=[],n=[];for(const{mint:e,amount:o}of t){var i;const t=new c.BN(o.toString()),a=await r.tokenProvider.findByAddress(e),l=null===a||void 0===a||null===(i=a.extensions)||void 0===i?void 0:i.coingeckoId;l&&!t.isZero()&&(n.push(l),s.push({mint:e,amount:t,ticket:l}))}const a=await j(n);let l=0;for(const{mint:r,amount:o,ticket:c}of s){const t=await e({mintAddress:r})||0;l+=Number(d.utilsBN.undecimalize(o,t))*(a[c]||0)}return l}),[e])}},Ve=()=>{const[e,t]=(0,n.useState)(0),[s,i]=(0,n.useState)(!0),a=(0,r.useAccounts)(),{getTotalBalance:l}=Ke(),o=(0,n.useCallback)((async()=>{try{i(!0);const e=await l(Object.values(a));return t(e)}catch(e){}finally{i(!1)}}),[a,l]);return(0,n.useEffect)((()=>{o()}),[o]),{loading:s,totalUSD:e}};var Oe,Je,qe,Xe,Qe;function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},_e.apply(this,arguments)}function $e(e,t){let{title:s,titleId:i,...r}=e;return n.createElement("svg",_e({width:32,height:32,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),s?n.createElement("title",{id:i},s):null,Oe||(Oe=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.8469 13.0356C14.5183 13.0356 14.1639 13.3376 14.1639 13.8073C14.1639 14.1846 14.2447 14.303 14.27 14.3352C14.3041 14.3785 14.3845 14.4501 14.6444 14.5429L17.9811 15.7069C18.3785 15.8483 18.8437 16.074 19.1925 16.5207C19.5495 16.9779 19.6913 17.5441 19.6913 18.1827C19.6913 19.5891 18.6018 20.8005 17.162 20.8005H15.0796C13.5125 20.8005 12.3066 19.4842 12.3066 17.939C12.3066 17.4292 12.7199 17.0159 13.2297 17.0159C13.7395 17.0159 14.1528 17.4292 14.1528 17.939C14.1528 18.5427 14.6085 18.9544 15.0796 18.9544H17.162C17.4945 18.9544 17.8451 18.6594 17.8451 18.1827C17.8451 17.8132 17.7653 17.6927 17.7374 17.657C17.7014 17.6109 17.6187 17.5378 17.3646 17.4471L14.0279 16.2831C13.6363 16.1437 13.1688 15.9221 12.8181 15.4754C12.4584 15.0175 12.3177 14.4491 12.3177 13.8073C12.3177 12.4161 13.4033 11.1895 14.8469 11.1895H16.9294C18.4965 11.1895 19.7023 12.5058 19.7023 14.051C19.7023 14.5608 19.2891 14.9741 18.7793 14.9741C18.2695 14.9741 17.8562 14.5608 17.8562 14.051C17.8562 13.4472 17.4005 13.0356 16.9294 13.0356H14.8469Z",fill:"currentColor"})),Je||(Je=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9992 10.0923C16.5091 10.0923 16.9223 10.5056 16.9223 11.0154V20.9846C16.9223 21.4944 16.5091 21.9077 15.9992 21.9077C15.4894 21.9077 15.0762 21.4944 15.0762 20.9846V11.0154C15.0762 10.5056 15.4894 10.0923 15.9992 10.0923Z",fill:"currentColor"})),qe||(qe=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 5.84615C10.3953 5.84615 5.84615 10.3953 5.84615 16C5.84615 21.6047 10.3953 26.1538 16 26.1538C21.6047 26.1538 26.1538 21.6047 26.1538 16C26.1538 15.4902 26.5671 15.0769 27.0769 15.0769C27.5867 15.0769 28 15.4902 28 16C28 22.6243 22.6243 28 16 28C9.37574 28 4 22.6243 4 16C4 9.37574 9.37574 4 16 4C16.5098 4 16.9231 4.41328 16.9231 4.92308C16.9231 5.43288 16.5098 5.84615 16 5.84615Z",fill:"currentColor"})),Xe||(Xe=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5383 5.10791C22.0481 5.10791 22.4614 5.52119 22.4614 6.03099V9.53868H25.9691C26.4789 9.53868 26.8922 9.95196 26.8922 10.4618C26.8922 10.9716 26.4789 11.3848 25.9691 11.3848H21.5383C21.0285 11.3848 20.6152 10.9716 20.6152 10.4618V6.03099C20.6152 5.52119 21.0285 5.10791 21.5383 5.10791Z",fill:"currentColor"})),Qe||(Qe=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.7295 4.27036C28.09 4.63085 28.09 5.21531 27.7295 5.57579L22.191 11.1143C21.8305 11.4747 21.2461 11.4747 20.8856 11.1143C20.5251 10.7538 20.5251 10.1693 20.8856 9.80882L26.4241 4.27036C26.7845 3.90988 27.369 3.90988 27.7295 4.27036Z",fill:"currentColor"})))}const et=n.forwardRef($e);s.p;var tt,st,nt,it,rt;function at(){return at=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},at.apply(this,arguments)}function lt(e,t){let{title:s,titleId:i,...r}=e;return n.createElement("svg",at({width:32,height:32,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),s?n.createElement("title",{id:i},s):null,tt||(tt=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.8469 13.0356C14.5183 13.0356 14.1639 13.3376 14.1639 13.8073C14.1639 14.1846 14.2447 14.303 14.27 14.3352C14.3041 14.3785 14.3845 14.4501 14.6444 14.5429L17.9811 15.7069C18.3785 15.8483 18.8437 16.074 19.1925 16.5207C19.5495 16.9779 19.6913 17.5441 19.6913 18.1827C19.6913 19.5891 18.6018 20.8005 17.162 20.8005H15.0796C13.5125 20.8005 12.3066 19.4842 12.3066 17.939C12.3066 17.4292 12.7199 17.0159 13.2297 17.0159C13.7395 17.0159 14.1528 17.4292 14.1528 17.939C14.1528 18.5427 14.6085 18.9544 15.0796 18.9544H17.162C17.4945 18.9544 17.8451 18.6594 17.8451 18.1827C17.8451 17.8132 17.7653 17.6927 17.7374 17.657C17.7014 17.6109 17.6187 17.5378 17.3646 17.4471L14.0279 16.2831C13.6363 16.1437 13.1688 15.9221 12.8181 15.4754C12.4584 15.0175 12.3177 14.4491 12.3177 13.8073C12.3177 12.4161 13.4033 11.1895 14.8469 11.1895H16.9294C18.4965 11.1895 19.7023 12.5058 19.7023 14.051C19.7023 14.5608 19.2891 14.9741 18.7793 14.9741C18.2695 14.9741 17.8562 14.5608 17.8562 14.051C17.8562 13.4472 17.4005 13.0356 16.9294 13.0356H14.8469Z",fill:"currentColor"})),st||(st=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9992 10.0923C16.5091 10.0923 16.9223 10.5056 16.9223 11.0154V20.9846C16.9223 21.4944 16.5091 21.9077 15.9992 21.9077C15.4894 21.9077 15.0762 21.4944 15.0762 20.9846V11.0154C15.0762 10.5056 15.4894 10.0923 15.9992 10.0923Z",fill:"currentColor"})),nt||(nt=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 5.84615C10.3953 5.84615 5.84615 10.3953 5.84615 16C5.84615 21.6047 10.3953 26.1538 16 26.1538C21.6047 26.1538 26.1538 21.6047 26.1538 16C26.1538 15.4902 26.5671 15.0769 27.0769 15.0769C27.5867 15.0769 28 15.4902 28 16C28 22.6243 22.6243 28 16 28C9.37574 28 4 22.6243 4 16C4 9.37574 9.37574 4 16 4C16.5098 4 16.9231 4.41328 16.9231 4.92308C16.9231 5.43288 16.5098 5.84615 16 5.84615Z",fill:"currentColor"})),it||(it=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7227 4.92308C21.7227 4.41328 22.1359 4 22.6457 4H27.0765C27.5863 4 27.9996 4.41328 27.9996 4.92308V9.35385C27.9996 9.86365 27.5863 10.2769 27.0765 10.2769C26.5667 10.2769 26.1534 9.86365 26.1534 9.35385V5.84615H22.6457C22.1359 5.84615 21.7227 5.43288 21.7227 4.92308Z",fill:"currentColor"})),rt||(rt=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.7295 4.27036C28.09 4.63085 28.09 5.21531 27.7295 5.57579L22.191 11.1143C21.8305 11.4747 21.2461 11.4747 20.8856 11.1143C20.5251 10.7538 20.5251 10.1693 20.8856 9.80882L26.4241 4.27036C26.7845 3.90988 27.369 3.90988 27.7295 4.27036Z",fill:"currentColor"})))}const ot=n.forwardRef(lt),ct=(s.p,()=>{const[e,t]=(0,n.useState)(0),[s,a]=(0,n.useState)(0),{totalUSD:o}=Ve(),c=(0,i.useSelector)((e=>e.receipts)),d=(0,i.useSelector)((e=>e.distributors)),{getTotalBalance:p}=Ke(),h=(0,r.useWalletAddress)(),x=(0,n.useCallback)((async()=>{const e=Object.values(c),s=[];if(!e.length)return t(0);for(const{amount:t,distributor:i}of e){const e=i.toBase58();if(!d[e])continue;const{mint:n}=d[e],r={mint:n.toBase58(),amount:t};s.push(r)}const n=await p(s);return t(n)}),[d,p,c]),m=(0,n.useCallback)((async()=>{const e=Object.values(d),t=[];if(!e.length)return a(0);for(const{total:n,mint:i,authority:r}of e){if(h!==r.toBase58())continue;const e={mint:i.toBase58(),amount:n};t.push(e)}const s=await p(t);return a(s)}),[d,p,h]);return(0,n.useEffect)((()=>{x()}),[x]),(0,n.useEffect)((()=>{m()}),[m]),(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{lg:8,md:12,xs:24,children:(0,F.jsx)(Ge,{label:"Total balance",icon:(0,F.jsx)(u.Z,{className:"card-hero-icon",name:"wallet-outline"}),value:o,cardStyles:{padding:"16px 24px"}})}),(0,F.jsx)(l.Col,{lg:8,md:12,xs:24,children:(0,F.jsx)(Ge,{label:"Total distribution",icon:(0,F.jsx)(Ye.Z,{className:"card-hero-icon",style:{fontSize:32},component:ot}),value:s,cardStyles:{padding:"16px 24px"}})}),(0,F.jsx)(l.Col,{lg:8,md:12,xs:24,children:(0,F.jsx)(Ge,{label:"Total received",icon:(0,F.jsx)(Ye.Z,{className:"card-hero-icon",style:{fontSize:32},component:et}),value:e,cardStyles:{padding:"16px 24px"}})})]})});var dt=s(87408);const ut=()=>{const e=(0,i.useSelector)((e=>e.main.metadataLoading));return(0,F.jsx)(l.Spin,{indicator:(0,F.jsx)(dt.Z,{}),spinning:e})},pt=e=>{let{option:t}=e;return r.util.isAddress(t)?(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(le.Z,{mintAddress:t}),(0,F.jsx)(p.Z,{mintAddress:t})]}):t},ht=e=>{let{onConfirm:t,options:s,label:i="Filter by",values:r}=e;const[a,o]=(0,n.useState)({});return(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:i})}),Object.keys(s).map(((e,t)=>{const n=s[e];return(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(xt,{defaultValue:`All ${e}`,options:n,onChange:t=>((e,t)=>{const s={...r};s[e]=t,o(s)})(e,t),style:{width:"100%"}})},t)})),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Button,{type:"primary",onClick:()=>t(a),block:!0,children:"Confirm"})})]})},xt=e=>{let{onChange:t,style:s,defaultValue:n="All token",options:i,value:r}=e;return(0,F.jsxs)(l.Select,{className:"select-existed-token",style:{minWidth:150,width:"100%",...s},defaultValue:M,onChange:t,size:"large",value:r,children:[(0,F.jsx)(l.Select.Option,{value:M,children:n}),i.map(((e,t)=>(0,F.jsx)(l.Select.Option,{value:e,children:(0,F.jsx)(pt,{option:e.toString()})},t)))]})},mt=e=>{let{onChange:t,style:s,options:i,values:a={}}=e;const[o,c]=(0,n.useState)(!1),d=(0,r.useWidth)();return d<875?(0,F.jsxs)(n.Fragment,{children:[(0,F.jsx)(l.Button,{type:"text",icon:(0,F.jsx)(u.Z,{name:"funnel-outline"}),onClick:()=>c(!0)}),(0,F.jsx)(l.Modal,{visible:o,onCancel:()=>c(!1),closable:!1,footer:!1,className:"card-lightning",children:(0,F.jsx)(ht,{onConfirm:e=>{t(e),c(!1)},options:i,values:a})})]}):(0,F.jsx)(l.Space,{children:Object.keys(i).map((e=>{const n=i[e];return(0,F.jsx)(xt,{style:s,defaultValue:`All ${e}`,options:n,onChange:s=>((e,s)=>{const n={...a};n[e]=s,t(n)})(e,s)},e)}))})},jt=e=>{const t=(0,i.useSelector)((e=>e.distributors)),[s,r]=(0,n.useState)(),a=(0,i.useSelector)((e=>e.receipts)),l=(0,n.useCallback)((e=>{const s=Date.now(),{receipt:n,startedAt:i,distributor:r}=e,l=a[n],o=t[r].endedAt;return l?N.claimed:1e3*o.toNumber()<s&&o.toNumber()?N.expired:1e3*i>s&&i?N.waiting:N.ready}),[t,a]),o=(0,n.useCallback)((async e=>{const t=await l(e);return r(t)}),[l]);return(0,n.useEffect)((()=>{e&&o(e)}),[o,e]),{status:s,fetchAirdropStatus:l}},yt=[N.ready,N.waiting,N.claimed,N.expired],gt={token:M,status:M},ft=e=>{let{onFilter:t,receivedList:s}=e;const[i,a]=(0,n.useState)(gt),{filterReceiveList:l,getReceiveMints:o}=(e=>{const[t,s]=(0,n.useState)(!1),{fetchAirdropStatus:i}=jt(),a=(0,n.useCallback)((()=>{if(!e)return[];let t=[];for(const s of e){const{mintAddress:e}=s;t.includes(e)||t.push(e)}return t}),[e]),l=(0,n.useCallback)((async(e,t)=>{const{recipientData:{startedAt:s},receiptAddress:n,distributorAddress:a,mintAddress:l}=e,{mintAddress:o,status:c}=t,d=!r.util.isAddress(l)||o===M||o===l,u=await i({distributor:a,receipt:n,startedAt:s.toNumber()});return d&&(!u||c===M||c===u)}),[i]);return{filterReceiveList:(0,n.useCallback)((async t=>{let{mintAddress:n="",status:i=""}=t;try{s(!0);let t=[];for(const s of e)await l(s,{mintAddress:n,status:i})&&t.push(s);return t}catch(r){return[]}finally{s(!1)}}),[e,l]),loading:t,getReceiveMints:a}})(s),c=o(),d=(0,n.useCallback)((async()=>{const e=await l({mintAddress:i.token,status:i.status});t(e)}),[i,l,t]);return(0,n.useEffect)((()=>{d()}),[d]),(0,F.jsx)(mt,{options:{token:c,status:yt},onChange:e=>a(e),values:i})};var Ct=s(4550),bt=s.n(Ct);const wt=e=>{let{cardId:t,children:s,cardHeader:i}=e;const[r,a]=(0,n.useState)(t),o=r?"chevron-up-outline":"chevron-down-outline";return(0,F.jsxs)(l.Row,{gutter:[16,16],className:"expand-card",children:[(0,F.jsx)(l.Col,{span:24,children:i}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{justify:"center",children:[(0,F.jsx)(l.Col,{span:24,className:"expand-card-collapse",children:(0,F.jsx)(l.Collapse,{activeKey:r,bordered:!1,children:(0,F.jsx)(l.Collapse.Panel,{header:!1,showArrow:!1,children:s},t)})}),s&&(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Button,{type:"text",size:"small",icon:(0,F.jsx)(u.Z,{name:o}),onClick:()=>a(r?void 0:t)})})]})})]})},vt=e=>{let{label:t="",value:s=""}=e;return(0,F.jsxs)(l.Row,{align:"middle",gutter:[24,24],children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:t})}),(0,F.jsx)(l.Col,{children:s})]})};var At=s(97429).Buffer;const{sol:{utility:Tt,taxman:St,fee:kt}}=w,Rt=e=>{let{distributorAddress:t,recipientData:s,receiptAddress:i}=e;const[r,a]=(0,n.useState)(),[d,u]=(0,n.useState)(!1),p=s.startedAt.toNumber(),{status:m}=jt({receipt:i,startedAt:p,distributor:t}),j=De(),y=(0,n.useCallback)((async()=>{if(t)try{const{data:e}=j(t),s=o.MerkleDistributor.fromBuffer(At.from(e));return a(s)}catch(e){x(e)}}),[t,j]);return(0,n.useEffect)((()=>{y()}),[y]),m&&m===N.ready?(0,F.jsx)(l.Button,{onClick:async()=>{if(!r)return;const e=r.deriveProof(s);if(r.verifyProof(e,s))try{u(!0);const n={fee:new c.BN(kt),feeCollectorAddress:St},{txId:i}=await Tt.claim({distributorAddress:t,proof:e,data:s,feeOptions:n});h("Claimed token",i)}catch(n){x(n)}finally{u(!1)}},loading:d,type:"text",className:"btn-claim",style:{color:"#42E6EB"},children:"claim"}):(0,F.jsx)(n.Fragment,{})},Nt=e=>{let{distributorAddress:t}=e;const s=(0,i.useSelector)((e=>e.distributors[t].endedAt));return(0,F.jsx)(l.Typography.Text,{children:s.toNumber()?bt()(1e3*s.toNumber()).format("MMM DD, YYYY HH:mm"):"Unlimited"})};var Bt=s(60914);const Et=e=>{let{amount:t,mintAddress:s}=e;return(0,F.jsx)(Bt.Z,{mintAddress:s,amount:t})},Dt={Waiting:"#D4B106",Ready:"#03A326",Claimed:"#40A9FF",Expired:"#F9575E",Loading:"#F4F5F5"},Mt=e=>{let{state:t}=e;const s=(0,n.useMemo)((()=>t?Dt[t]:Dt[N.loading]),[t]);return(0,F.jsx)(l.Tag,{style:{margin:0,borderRadius:4,border:`solid 1px ${s}`,textTransform:"capitalize",background:"transparent",color:s},children:t||N.loading})},Zt=e=>{let{receiptAddress:t,startedAt:s,distributorAddress:n}=e;const{status:i}=jt({receipt:t,startedAt:s,distributor:n});return(0,F.jsx)(Mt,{state:i})},zt=e=>{let{receiveItem:t}=e;const{mintAddress:s,receiptAddress:n,distributorAddress:i,recipientData:a,sender:o}=t,c=1e4*a.startedAt.toNumber();return(0,F.jsx)(wt,{cardId:n,cardHeader:(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{align:"middle",gutter:[24,24],children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(le.Z,{mintAddress:s}),(0,F.jsxs)(l.Space,{size:6,children:[(0,F.jsx)(Et,{amount:a.amount,mintAddress:s}),(0,F.jsx)(p.Z,{mintAddress:s})]})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(Zt,{receiptAddress:n,startedAt:a.startedAt.toNumber(),distributorAddress:i})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(vt,{label:`Sender: ${r.util.shortenAddress(o,4)}`,value:(0,F.jsx)(Rt,{distributorAddress:i,receiptAddress:n,recipientData:a})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(vt,{label:"Expiration time",value:(0,F.jsx)(Nt,{distributorAddress:i})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(vt,{label:"Unlock time",value:(0,F.jsx)(l.Typography.Text,{children:c?bt()(c).format(D):"Immediately"})})})]})},n)},Lt=e=>{let{receiveItem:t}=e;const{mintAddress:s,receiptAddress:n,distributorAddress:i,recipientData:r}=t,a=r.startedAt.toNumber();return(0,F.jsxs)(l.Row,{align:"middle",justify:"center",children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{direction:"vertical",children:[(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(Bt.Z,{mintAddress:s,amount:r.amount}),(0,F.jsx)(p.Z,{mintAddress:s})]}),(0,F.jsx)(l.Typography.Text,{children:bt()(1e3*a).format(D)})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(Zt,{startedAt:a,receiptAddress:n,distributorAddress:i}),(0,F.jsx)(Rt,{distributorAddress:i,recipientData:r,receiptAddress:n})]})})]})},Wt=e=>{let{receiveItem:t}=e;const{mintAddress:s,receiptAddress:n,distributorAddress:i,recipientData:a,sender:o,children:c}=t,d=a.startedAt.toNumber();return(0,F.jsx)(wt,{cardId:n,cardHeader:(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{align:"middle",gutter:[24,24],children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(le.Z,{mintAddress:s}),(0,F.jsxs)(l.Space,{size:6,children:[(0,F.jsx)(Et,{amount:a.amount,mintAddress:s}),(0,F.jsx)(p.Z,{mintAddress:s})]})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(Zt,{receiptAddress:n,startedAt:d,distributorAddress:i})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(vt,{label:`Sender: ${r.util.shortenAddress(o,4)}`,value:(0,F.jsx)(Rt,{distributorAddress:i,receiptAddress:n,recipientData:a})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(vt,{label:"Expiration time",value:(0,F.jsx)(Nt,{distributorAddress:i})})})]}),children:(0,F.jsx)(l.Row,{gutter:[8,8],children:null===c||void 0===c?void 0:c.map((e=>(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Lt,{receiveItem:e})},e.receiptAddress)))})},n)},Ut=[{title:"UNLOCK DATE",dataIndex:"recipientData",render:e=>{let{startedAt:t}=e;return(0,F.jsx)(l.Typography.Text,{children:t.toNumber()?bt()(1e3*t.toNumber()).format(D):"Immediately"})}},{title:"EXPIRATION TIME",dataIndex:"distributorAddress",render:e=>(0,F.jsx)(Nt,{distributorAddress:e})},{title:"SENDER",dataIndex:"sender",render:e=>(0,F.jsx)(l.Typography.Text,{style:{cursor:"pointer"},underline:!0,onClick:()=>window.open(r.util.explorer(e),"_blank"),children:r.util.shortenAddress(e)})},{title:"TOKEN",dataIndex:"mintAddress",render:e=>(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(le.Z,{mintAddress:e}),(0,F.jsx)(p.Z,{mintAddress:e})]})},{title:"AMOUNT",dataIndex:"recipientData",render:(e,t)=>{let{amount:s}=e,{mintAddress:n}=t;return(0,F.jsx)(Et,{amount:s,mintAddress:n})}},{title:"STATUS",dataIndex:"recipientData",render:(e,t)=>{let{startedAt:s}=e,{receiptAddress:n,distributorAddress:i}=t;return(0,F.jsx)(Zt,{startedAt:s.toNumber(),receiptAddress:n,distributorAddress:i})}},{title:"ACTION",dataIndex:"distributorAddress",render:(e,t)=>{let{receiptAddress:s,recipientData:n}=t;return(0,F.jsx)(Rt,{distributorAddress:e,recipientData:n,receiptAddress:s})}}],Ft=e=>{let{receivedList:t,type:s}=e;return!((0,r.useWidth)()<1050)&&t.length?(0,F.jsx)(l.Table,{dataSource:t,pagination:!1,columns:Ut,rowKey:e=>e.distributorAddress+e.index,defaultExpandAllRows:!0},`lightning-tunnel-${s}`):t.length?(0,F.jsx)(l.Row,{gutter:[16,16],children:t.map((e=>(0,F.jsx)(l.Col,{span:24,children:s===ue.Airdrop?(0,F.jsx)(zt,{receiveItem:e}):(0,F.jsx)(Wt,{receiveItem:e})},e.distributorAddress+e.index)))}):(0,F.jsx)(l.Empty,{})};var Ht=s(97429).Buffer;const{manifest:{appId:It}}=w;function Pt(e){try{const t=[ue.Airdrop,ue.Vesting];for(const s of t){const t=o.MerkleDistributor.salt("0"),n=o.MerkleDistributor.salt(`${It}/${s}/0`),i=e.receipients[0].salt,r=Ht.compare(t,i),a=Ht.compare(n,i);if(0===r||0===a)return s}return ue.Airdrop}catch(t){return ue.Airdrop}}const Gt=()=>{const e=De();return(0,n.useCallback)((async t=>{const s=e(t),n=o.MerkleDistributor.fromBuffer(Ht.from(s.data||[]));return{root:n,type:Pt(n),metadata:s}}),[e])},{sol:{utility:Yt}}=w,Kt=e=>{let{type:t}=e;const[s,a]=(0,n.useState)(),l=(0,i.useSelector)((e=>e.distributors)),o=(0,i.useSelector)((e=>e.metadatas)),c=(0,r.useWalletAddress)(),d=De(),u=Gt(),p=(0,n.useCallback)((async()=>{if(!Object.keys(l).length||!Object.keys(o).length)return;const e=[],s=Object.keys(l).map((e=>({address:e,...l[e]})));return await Promise.all(s.map((async s=>{let{metadata:n,mint:i,authority:r,address:a}=s;try{if(!d(a))return;const s=await u(a);if(s.type!==t)return;const n=s.root.receipients,l=i.toBase58(),o=r.toBase58();for(let t=0;t<n.length;t++){const{authority:s,salt:i}=n[t];if(c===s.toBase58()){const s={mintAddress:l,sender:o,distributorAddress:a,receiptAddress:await Yt.deriveReceiptAddress(i,a),recipientData:n[t],index:t};e.push(s)}}}catch(l){}}))),a(e)}),[l,u,d,o,t,c]);return(0,n.useEffect)((()=>{p()}),[p]),s},Vt=()=>{const[e,t]=(0,n.useState)(4),s=Kt({type:ue.Airdrop}),[i,r]=(0,n.useState)([]),{fetchAirdropStatus:a}=jt(),o=(0,n.useMemo)((()=>void 0===s),[s]),c=i.sort(((e,t)=>{const{distributorAddress:s,receiptAddress:n,recipientData:i}=e;return a({distributor:s,receipt:n,startedAt:i.startedAt.toNumber()})===N.ready?-1:0}));return(0,F.jsx)(l.Card,{loading:o,className:"card-lightning",children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Typography.Title,{level:5,children:"Airdrop receive"}),(0,F.jsx)(l.Typography.Text,{className:"amount-airdrop",children:i.length})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(ut,{}),(0,F.jsx)(ft,{receivedList:s||[],onFilter:r})]})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ft,{type:ue.Airdrop,receivedList:c.slice(0,e)})}),(0,F.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,F.jsx)(l.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,F.jsx)(u.Z,{name:"arrow-down-outline"}),disabled:e>=c.length,children:"VIEW MORE"})})]})})},Ot=()=>{const[e,t]=(0,n.useState)(4),[s,i]=(0,n.useState)([]),r=Kt({type:ue.Vesting}),[a,o]=(0,n.useState)([]),{fetchAirdropStatus:c}=jt(),d=(0,n.useMemo)((()=>void 0===r),[r]),p=(0,n.useCallback)((async e=>{const t=[];for(const s of e){const{receiptAddress:e,distributorAddress:n,recipientData:i}=s,{startedAt:r}=i,a=c({receipt:e,startedAt:r.toNumber(),distributor:n});t.push(a)}return-1!==t.indexOf(N.ready)?t.indexOf(N.ready):-1!==t.indexOf(N.waiting)?t.indexOf(N.waiting):-1!==t.indexOf(N.claimed)?t.indexOf(N.claimed):-1!==t.indexOf(N.expired)?t.indexOf(N.expired):0}),[c]),h=(0,n.useCallback)((e=>r?r.filter((t=>{let{distributorAddress:s}=t;return s===e})):[]),[r]),x=(0,n.useCallback)((async()=>{if(!r)return i([]);const e=[],t=new Map;for(const{distributorAddress:s}of r){const e=h(s);t.set(s,e)}return t.forEach((async t=>{const s=t[await p(t)],n=t.filter((e=>{let{index:t}=e;return t!==s.index})),i={...s,children:n};e.push(i)})),await Promise.all(e),i(e)}),[h,p,r]),m=a.sort(((e,t)=>{const{distributorAddress:s,receiptAddress:n,recipientData:i}=e;return c({distributor:s,receipt:n,startedAt:i.startedAt.toNumber()})===N.ready?-1:0}));return(0,n.useEffect)((()=>{x()}),[x]),(0,F.jsx)(l.Card,{loading:d,className:"card-lightning",children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Typography.Title,{level:5,children:"Vesting receive"}),(0,F.jsx)(l.Typography.Text,{className:"amount-airdrop",children:a.length})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(ut,{}),(0,F.jsx)(ft,{receivedList:s,onFilter:o})]})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ft,{type:ue.Vesting,receivedList:m.slice(0,e)})}),(0,F.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,F.jsx)(l.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,F.jsx)(u.Z,{name:"arrow-down-outline"}),disabled:e>=m.length,children:"VIEW MORE"})})]})})},Jt=()=>(0,F.jsxs)(l.Row,{gutter:[0,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Title,{level:2,children:"Dashboard"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(ct,{})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Vt,{})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ot,{})})]});var qt=s(44994),Xt=s(93253);const{sol:{utility:Qt}}=w;var _t=s(97429).Buffer;const $t=e=>{let{type:t}=e;const[s]=es();return(0,n.useMemo)((()=>{const e=s.listHistory.filter((e=>e.type===t));return{...s,listHistory:e}}),[s,t])},es=(0,qt.r)({loading:!0,listHistory:[],numberOfRecipient:0}),ts=()=>{const e=(0,i.useSelector)((e=>e.distributors)),[t,s]=(0,n.useState)({}),[,a]=es(),l=(()=>{const e=(0,n.useCallback)((async e=>Promise.all(Object.keys(e).map((async t=>{const{mint:s}=e[t],n=await Qt.deriveTreasurerAddress(t),i=await r.splt.deriveAssociatedAddress(n,s.toBase58());return new c.web3.PublicKey(i)})))),[]),t=(0,n.useCallback)((async t=>{const s=await e(t);if(!Object.values(s).length)return[];const n={},i=await(0,d.getMultipleAccounts)(r.splt.connection,s);for(const e of i){if(!e)continue;const{amount:t,owner:s}=await r.splt.parseAccountData(e.account.data);n[s]=Number(t)}return Promise.all(i.map((async e=>{if(!e)return{amount:0};const{amount:t}=await r.splt.parseAccountData(e.account.data);return{amount:Number(t.toString())}})))}),[e]);return t})(),o=Gt(),u=(0,r.useWalletAddress)(),p=(0,n.useCallback)((()=>{const t={};for(const s in e){const n=e[s];n.authority.toBase58()===u&&(t[s]=n)}if(Object.keys(t).length)return s(t)}),[e,u]);(0,Xt.Z)(p,1e3,[p]);const h=(0,n.useCallback)((async()=>{if(!Object.keys(t).length)return a({listHistory:[],loading:!1,numberOfRecipient:0});let e=[];const s=new Map,n=await l(t);return await Promise.all(Object.keys(t).map((async(i,r)=>{try{const l=t[i];var a=await o(i);for(const{authority:e}of a.root.receipients)s.has(e.toBase58())||s.set(e.toBase58(),!0);const c=n[r].amount,d={distributorAddress:i,mint:l.mint.toBase58(),total:l.total.toString(),time:1e3*a.metadata.createAt,treeData:_t.from(a.metadata.data),remaining:c,type:a.type};e.push(d)}catch(l){console.error("error history",l)}}))),e=e.sort(((e,t)=>e.time>t.time?-1:0)),a({listHistory:e,loading:!1,numberOfRecipient:s.size})}),[t,l,o,a]);return(0,Xt.Z)(h,1e3,[h]),(0,F.jsx)(n.Fragment,{})},ss=["7","30","90"],ns={token:M,time:M},is=e=>{let{onFilter:t,type:s}=e;const[i,a]=(0,n.useState)(ns),{filterSentList:l,sentMints:o}=(e=>{const{listHistory:t}=$t({type:e}),[s,i]=(0,n.useState)(!1),a=(0,n.useMemo)((()=>{if(!t.length)return[];let e=[];for(const s of t){const{mint:t}=s;e.includes(t)||e.push(t)}return e}),[t]),l=(0,n.useCallback)(((e,t)=>{const{time:s,mint:n}=e,i=Number(new Date(s)),{mintAddress:a,time:l}=t,o=!r.util.isAddress(n)||a===M||[a].includes(n),c=!i||l===M||Date.now()-i<864e5*Number(l);return o&&c}),[]);return{filterSentList:(0,n.useCallback)((e=>{let{mintAddress:s="",time:n=""}=e;try{return i(!0),t.filter((e=>l(e,{mintAddress:s,time:n})))}catch(r){return[]}finally{i(!1)}}),[t,l]),loading:s,sentMints:a}})(s),c=(0,n.useCallback)((()=>{const e=l({mintAddress:i.token,time:i.time});t(e)}),[i,l,t]);return(0,n.useEffect)((()=>{c()}),[c]),(0,F.jsx)(mt,{options:{token:o,time:ss},onChange:e=>a(e),values:i})},rs=e=>{let{total:t,mintAddress:s}=e;return(0,F.jsx)(Bt.Z,{amount:new c.BN(t),mintAddress:s})};var as=s(51518),ls=s.n(as);const os=s.p+"static/media/twitter.9cbdafef0605b5c84ec56b271a60a6e8.svg",cs=e=>{let{visible:t,redeemLink:s,onClose:i=(()=>{})}=e;const[a,o]=(0,n.useState)(!1);return(0,F.jsx)(l.Modal,{visible:t,closeIcon:(0,F.jsx)(u.Z,{name:"close-outline"}),onCancel:i,footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,F.jsxs)(l.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Image,{src:os,preview:!1})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,F.jsx)(l.Typography.Title,{level:3,children:"Share on Twitter!"}),(0,F.jsx)(l.Space,{size:4,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Share this link so your recipients can get their tokens"})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:8,justify:"space-between",children:[(0,F.jsx)(l.Col,{className:"share-link",span:20,children:(0,F.jsx)(l.Typography.Text,{children:(e=>e.substring(0,40)+"...")(s)})}),(0,F.jsx)(l.Col,{span:4,children:(0,F.jsx)(l.Tooltip,{title:"Copied",visible:a,children:(0,F.jsx)(ls(),{text:s,children:(0,F.jsx)(l.Button,{size:"large",type:"ghost",onClick:async()=>{o(!0),await r.util.asyncWait(1500),o(!1)},children:"copy"})})})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Button,{size:"large",type:"primary",block:!0,onClick:()=>{let e="http://twitter.com/intent/tweet?";const t={url:s,text:"Your prize has arrived! Redeem now at Sen Hub: "};for(const s in t)e+="&"+s+"="+encodeURIComponent(t[s]||"");window.open(e,"_blank")},children:"Share now"})})]})})};var ds=s(55080);const{sol:{utility:us}}=w,ps=e=>{let{distributorAddress:t}=e;const[s,i]=(0,n.useState)({}),r=(0,n.useCallback)((async()=>{const e=await us.program.account.receipt.all([{memcmp:{offset:40,bytes:t}}]);let s={};for(const t of e)s[t.publicKey.toBase58()]=t.account;return i(s)}),[t]);return(0,Xt.Z)(r,1e3,[r]),s};var hs=s(97429).Buffer;const{sol:{utility:xs,fee:ms,taxman:js}}=w,ys=[{label:"Wallet address",key:"authority"},{label:"Amount",key:"amount"}],gs=e=>{let{amount:t,mintAddress:s}=e;const n=(0,r.useMintDecimals)({mintAddress:s})||0;return(0,F.jsx)(l.Typography.Text,{children:r.util.numeric(d.utilsBN.undecimalize(t,n)).format("0,0.[0000]")})},fs=[{title:"WALLET ADDRESS",dataIndex:"authority",render:e=>(0,F.jsx)(l.Typography.Text,{children:r.util.shortenAddress(e)})},{title:"AMOUNT",dataIndex:"amount",render:(e,t)=>{let{mintAddress:s}=t;return(0,F.jsx)(gs,{amount:e,mintAddress:s})}}],Cs=e=>{let{distributorAddress:t,disabled:s,setDisabled:a}=e;const[p,m]=(0,n.useState)(!1),[j,y]=(0,n.useState)(!1),g=(0,i.useSelector)((e=>e.distributors[t].mint)),f=(0,r.useMintDecimals)({mintAddress:g.toBase58()})||0,{unclaimed:C}=(e=>{const[t,s]=(0,n.useState)([]),r=(0,i.useSelector)((t=>t.distributors[e].mint)),a=ps({distributorAddress:e}),l=De(),c=(0,n.useCallback)((e=>{for(const t in a){const{salt:s}=a[t];if(!hs.compare(hs.from(s),e))return!0}return!1}),[a]),d=(0,n.useCallback)((async()=>{try{const{data:t}=l(e),n=o.MerkleDistributor.fromBuffer(hs.from(t)),i=[],a=n.receipients;for(const{authority:e,amount:s,salt:l}of a)c(l)||i.push({amount:s,authority:e.toBase58(),mintAddress:r.toBase58()});return s(i)}catch(t){}}),[c,e,l,r]);return(0,n.useEffect)((()=>{d()}),[d]),{unclaimed:t}})(t),b=(0,n.useMemo)((()=>{const e={};for(const t of C){const{authority:s,amount:n}=t;if(e[s]){const s=e[t.authority];e[t.authority]={...s,amount:s.amount.add(n)}}else e[s]=t}return e}),[C]),w=(0,n.useMemo)((()=>{const e=Object.values(b).map((e=>{const{amount:t,authority:s}=e;return{authority:s,amount:d.utilsBN.undecimalize(t,f)}}),[]);return e}),[f,b]);return(0,F.jsxs)(n.Fragment,{children:[(0,F.jsx)(l.Button,{onClick:()=>m(!0),type:"text",disabled:s,style:{color:"#42E6EB"},children:s?"revoked":"revoke"}),(0,F.jsx)(l.Modal,{visible:p,onCancel:()=>m(!1),footer:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Button,{type:"ghost",onClick:()=>m(!1),children:"Cancel"}),(0,F.jsx)(l.Button,{onClick:async()=>{const e={fee:new c.BN(ms),feeCollectorAddress:js};y(!0);try{const{txId:s}=await xs.revoke({distributorAddress:t,feeOptions:e});return h("Revoked token",s),a(!0)}catch(s){x(s)}finally{y(!1),m(!1)}},loading:j,type:"primary",children:"confirm"})]}),closeIcon:(0,F.jsx)(u.Z,{name:"close-outline"}),className:"card-lightning",style:{paddingBottom:0},children:(0,F.jsxs)(l.Row,{gutter:[32,32],style:{maxHeight:400},className:"scrollbar",children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Typography.Title,{level:5,children:"Revoke"}),(0,F.jsx)(ds.CSVLink,{filename:"unclaimed_list",headers:ys,data:w,children:(0,F.jsx)(l.Tooltip,{title:"Download unclaimed list",children:(0,F.jsx)(u.Z,{style:{fontSize:20},name:"download-outline"})})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Table,{dataSource:Object.values(b),pagination:!1,columns:fs,rowKey:e=>e.authority})})]})})]})},bs=(e,t)=>{const[s,r]=(0,n.useState)(!1),[a,l]=(0,n.useState)(!1),o=(0,i.useSelector)((t=>t.distributors[e].endedAt)),c=(0,n.useCallback)((async()=>{const e=Date.now(),s=1e3*o.toNumber();return s?(0===t&&l(!0),r(s<e)):r(!1)}),[o,t]);return(0,n.useEffect)((()=>{c()}),[c]),{isRevoke:s,disabled:a,setDisabled:l}},{manifest:{appId:ws}}=w,vs=e=>{let{distributorAddress:t,remaining:s}=e;const[i,r]=(0,n.useState)(!1),{isRevoke:a,disabled:o,setDisabled:c}=bs(t,s),d=`${window.location.origin}/app/${ws}/redeem/${t}?autoInstall=true`;return(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Button,{onClick:()=>r(!0),type:"text",style:{color:"#42E6EB",padding:0},children:"share"}),a&&(0,F.jsx)(Cs,{disabled:o,setDisabled:c,distributorAddress:t}),(0,F.jsx)(cs,{visible:i,onClose:()=>r(!1),redeemLink:d})]})};var As=s(97429).Buffer;const Ts=e=>{let{treeData:t}=e;const s=(0,n.useMemo)((()=>{if(!t||!t.length)return 0;const e=JSON.parse(JSON.stringify(t)).data;return o.MerkleDistributor.fromBuffer(As.from(e||t)).receipients[0].startedAt.toNumber()}),[t]);return(0,F.jsx)(l.Typography.Text,{children:s?bt()(1e3*s).format("MMM DD, YYYY HH:mm"):"Immediately"})},Ss=e=>{let{distributorAddress:t}=e;const{mint:s,claimed:n,total:r}=(0,i.useSelector)((e=>e.distributors[t]));return(0,F.jsx)(Bt.Z,{mintAddress:s.toBase58(),amount:r.sub(n)})};var ks=s(97429).Buffer;const Rs="metadatas",Ns=(0,T.createAsyncThunk)("metadatas/getMetaData",(async e=>{let{cid:t}=e;try{const e="https://sen-storage.s3.us-west-2.amazonaws.com/"+Ne(t),{data:s}=await Se().get(e);return{[t]:{...s,data:ks.from(s.data)}}}catch(s){return{[t]:{checked:!1,createAt:0,data:ks.from([])}}}})),Bs=(0,T.createAsyncThunk)("metadatas/initMetadatas",(async e=>{const t={};for(const n in e)try{const s=ks.from(e[n].data);t[n]={...e[n],data:s}}catch(s){}return t})),Es=((0,T.createAsyncThunk)("metadatas/getMetadatas",(async(e,t)=>{let{getState:s}=t;const{metadatas:n}=s();return n})),(0,T.createAsyncThunk)("metadatas/setMetadata",(async(e,t)=>{let{cid:s,createAt:n}=e,{getState:i}=t;const{metadatas:r}=i(),a={...r};return a[s]={...a[s],checked:!0,createAt:n},a}))),Ds=(0,T.createSlice)({name:Rs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ns.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Bs.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Es.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Ms=e=>{let{distributorAddress:t}=e;const[s,a]=(0,n.useState)(0),{mint:o,metadata:d}=(0,i.useSelector)((e=>e.distributors[t])),u=(0,i.useDispatch)(),p=(0,n.useCallback)((async()=>{if("mainnet"!==r.net)return[];const e=await w.sol.utility.deriveTreasurerAddress(t),s=`https://public-api.solscan.io/account/transactions?account=${(await c.utils.token.associatedAddress({owner:new c.web3.PublicKey(e),mint:o})).toBase58()}&limit=100`,n=(await fetch(s)).json();return await n}),[t,o]),h=(0,n.useCallback)((async()=>{var e;const s=await r.splt.connection.getSignaturesForAddress(new c.web3.PublicKey(t),{limit:1e3});if(s.length)return a((null===(e=s.pop())||void 0===e?void 0:e.blockTime)||0);const n=await p();return n.length?a(n.pop().blockTime||0):a(0)}),[t,p]),x=(0,n.useCallback)((()=>{if(!s)return;const e=(0,Ae.encode)(d);return u(Es({createAt:s,cid:e}))}),[s,d,u]);return(0,n.useEffect)((()=>{h()}),[h]),(0,n.useEffect)((()=>{x()}),[x]),(0,F.jsx)(l.Typography.Text,{children:s?bt()(1e3*s).format("MMM DD, YYYY HH:mm"):"--"})},Zs=[{title:"CREATED DATE",dataIndex:"time",render:(e,t)=>{let{distributorAddress:s}=t;return e?(0,F.jsx)(l.Typography.Text,{children:bt()(e).format("MMM DD, YYYY HH:mm")}):(0,F.jsx)(Ms,{distributorAddress:s})}},{title:"UNLOCK DATE",dataIndex:"treeData",render:e=>(0,F.jsx)(Ts,{treeData:e})},{title:"TOKEN",dataIndex:"mint",render:e=>(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(le.Z,{mintAddress:e}),(0,F.jsx)(p.Z,{mintAddress:e})]})},{title:"TOTAL",dataIndex:"total",render:(e,t)=>{let{mint:s}=t;return(0,F.jsx)(rs,{total:e,mintAddress:s})}},{title:"REMAINING",dataIndex:"distributorAddress",render:e=>(0,F.jsx)(Ss,{distributorAddress:e})},{title:"ACTION",dataIndex:"distributorAddress",render:(e,t)=>{let{remaining:s,treeData:n}=t;return(0,F.jsx)(vs,{remaining:s,distributorAddress:e})}}],zs=e=>{let{sentList:t}=e;return t.length?(0,F.jsx)(n.Fragment,{children:t.map(((e,t)=>{const{distributorAddress:s,mint:n,time:i,total:r,treeData:a,remaining:o}=e;return(0,F.jsx)(wt,{cardId:`card_airdrop_${s}`,cardHeader:(0,F.jsx)(l.Row,{gutter:[12,12],children:(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{align:"middle",gutter:[24,24],children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(le.Z,{mintAddress:n}),(0,F.jsxs)(l.Space,{size:6,children:[(0,F.jsx)(rs,{total:r.toString(),mintAddress:n}),(0,F.jsx)(p.Z,{mintAddress:n})]})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(vs,{remaining:o,distributorAddress:s})})]})})}),children:(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(vt,{label:"Created time",value:(0,F.jsx)(l.Typography.Text,{children:bt()(i).format("MMM DD, YYYY HH:mm")})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(vt,{label:"Unlock time",value:(0,F.jsx)(Ts,{treeData:a})})})]})},s)}))}):(0,F.jsx)(l.Empty,{})},Ls=e=>{let{sentList:t}=e;return(0,r.useWidth)()<1050?(0,F.jsx)(zs,{sentList:t}):(0,F.jsx)(l.Table,{dataSource:t,pagination:!1,columns:Zs,rowKey:e=>e.distributorAddress})},Ws=()=>{const[e,t]=(0,n.useState)(4),{loading:s}=$t({type:ue.Vesting}),[i,r]=(0,n.useState)([]);return(0,F.jsx)(l.Card,{loading:s,className:"card-lightning",children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Typography.Title,{level:5,children:"History"}),(0,F.jsx)(l.Typography.Text,{className:"amount-airdrop",children:i.length})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(is,{onFilter:r,type:ue.Vesting})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ls,{sentList:i.slice(0,e)})}),(0,F.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,F.jsx)(l.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,F.jsx)(u.Z,{name:"arrow-down-outline"}),disabled:e>=i.length,children:"VIEW MORE"})})]})})},Us=e=>{let{valueInUSD:t,numberOfCampaign:s,recipientList:n,loading:i}=e;return(0,F.jsxs)(l.Row,{gutter:[24,24],style:{height:"100%"},children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ge,{loading:!t&&i,label:"Total vesting",icon:(0,F.jsx)(u.Z,{className:"card-hero-icon",name:"receipt-outline"}),value:t})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ge,{loading:!s&&i,label:"Total campaigns",icon:(0,F.jsx)(u.Z,{className:"card-hero-icon",name:"paper-plane-outline"}),value:s,unit:""})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ge,{loading:!n&&i,label:"Total recipients",icon:(0,F.jsx)(u.Z,{className:"card-hero-icon",name:"people-outline"}),value:n,unit:""})})]})};var Fs=s(44521),Hs=s(37014),Is=s(40426),Ps=s(54179),Gs=s(45198),Ys=s(90404),Ks=s(54132),Vs=s(72870),Os=s(8399);Fs.D([Gs.N,Ys.N,Ps.N,Os.N,Ks.N,Vs.N]);const Js=e=>{let{data:t,bgTooltip:s="#233333"}=e;return{tooltip:{trigger:"item",backgroundColor:s,extraCssText:"border-radius: 0px",formatter:function(e){return`<div style="width: 200px; font-weight: 400"><span style="display: flex; justify-content: space-between"><span style="font-size: 14px, font-weight: 400">Value</span> <span style="font-size: 16px; font-weight: 700">${r.util.numeric(e.data.value).format("0,0.[0000]")}$</span></span> <span style="display: flex; justify-content: space-between;"><span style="font-size: 14px; font-weight: 400">Token amount</span> <span style="font-size: 16px; font-weight: 700">${r.util.numeric(e.data.tokenAmount).format("0,0.[0000]")}</span></span></div>`},textStyle:{color:"#F4F5F5"}},legend:{show:!1,height:"100%",width:"100%"},series:[{width:"300",center:[110,"50%"],name:"Sentre chart",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold",color:"#F4F5F5",overflow:"hidden"}},itemStyle:{color:e=>r.util.randomColor(e.name)},labelLine:{show:!1},data:Object.values(t).map((e=>({value:e.usdValue,name:`${e.symbol}`,tokenAmount:e.amountToken,percentRatio:e.ratio})))}],media:[{query:{maxWidth:300},option:{series:[{center:[100,"50%"],radius:["35%","60%"]}]}},{query:{maxWidth:200},option:{series:[{center:[70,"50%"],radius:["25%","45%"]}]}}]}},qs=e=>{let{data:t}=e;return(0,F.jsx)(Is.Z,{echarts:Hs,option:Js({data:t,bgTooltip:"#123432"}),notMerge:!0,lazyUpdate:!0})},Xs=e=>{let{data:t}=e;const s=(0,n.useMemo)((()=>Object.values(t).sort(((e,t)=>t.ratio-e.ratio))),[t]);return(0,F.jsx)(l.Row,{gutter:[12,12],children:s.map(((e,t)=>(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{align:"middle",wrap:!1,gutter:[16,16],children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Avatar,{style:{background:r.util.randomColor(e.symbol)},shape:"square",size:16}),(0,F.jsxs)(l.Typography.Text,{ellipsis:!0,type:"secondary",children:[e.symbol," (",e.name,")"]})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsxs)(l.Typography.Text,{children:[r.util.numeric(e.ratio).format("0,0.[00]"),"%"]})})]})},t)))})},Qs=e=>{let{vestingAllocation:t,loading:s}=e;return(0,F.jsx)(l.Card,{className:"card-lightning",bodyStyle:{paddingBottom:0},style:{height:"100%"},loading:s,children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Title,{level:5,children:"Vesting allocation"})}),(0,F.jsx)(l.Col,{span:24,children:Object.keys(t).length?(0,F.jsxs)(l.Row,{gutter:[8,8],align:"middle",children:[(0,F.jsx)(l.Col,{xs:14,sm:10,children:(0,F.jsx)(qs,{data:t})}),(0,F.jsx)(l.Col,{xs:10,sm:14,children:(0,F.jsx)(Xs,{data:t})})]}):(0,F.jsx)(l.Empty,{})})]})})},_s=e=>{const[t,s]=(0,n.useState)({}),[i,a]=(0,n.useState)(0),l=(0,r.useGetMintDecimals)(),{listHistory:o,numberOfRecipient:u,loading:p}=$t({type:e}),{getTotalBalance:h}=Ke(),m=(0,n.useMemo)((()=>{const e={};for(const{mint:t,total:s}of o)if(e[t]){const n=e[t];e[t]=n.add(new c.BN(s))}else e[t]=new c.BN(s);return e}),[o]),y=(0,n.useCallback)((async()=>{const e=[];for(const s in m)e.push({mint:s,amount:m[s]});const t=await h(e);return a(t)}),[h,m]),g=(0,n.useCallback)((async()=>{const e=[];for(const s in m){var t;const n=await r.tokenProvider.findByAddress(s),i=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId;i&&e.push(i)}return await j(e)}),[m]),f=(0,n.useCallback)((async()=>{try{const t={};if(!i)return s(t);const n=await g();for(const s in m){var e;const a=await r.tokenProvider.findByAddress(s),o=null===a||void 0===a||null===(e=a.extensions)||void 0===e?void 0:e.coingeckoId;if(!o)continue;const c=await l({mintAddress:s})||0,u=d.utilsBN.undecimalize(m[s],c),p=n[o]*Number(u),h=p/i*100;if(h<2){let e=u,s=p,n=h;if(t.other){const{amountToken:i,usdValue:r,ratio:a}=t.other;e+=i,s+=r,n+=a}t.other={name:"Other",symbol:"",amountToken:e,usdValue:s,ratio:n}}else t[s]={name:`${null===a||void 0===a?void 0:a.name}`,symbol:`${null===a||void 0===a?void 0:a.symbol}`,amountToken:u,usdValue:p,ratio:h}}return s(t)}catch(t){x(t)}}),[g,l,m,i]);return(0,n.useEffect)((()=>{y()}),[y]),(0,n.useEffect)((()=>{f()}),[f]),{allocation:t,totalUSD:i,numberOfRecipient:u,numberOfCampaigns:o.length,loading:p}},$s=()=>{const{pushHistory:e}=A(),t=(0,i.useDispatch)(),{allocation:s,totalUSD:n,numberOfRecipient:r,numberOfCampaigns:a,loading:o}=_s(ue.Vesting);return(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsx)(l.Typography.Title,{level:2,children:"Vesting"})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Button,{icon:(0,F.jsx)(u.Z,{name:"add-outline"}),type:"primary",size:"large",onClick:()=>(e("/vesting/add-new"),t(fe(ue.Vesting))),children:"ADD NEW"})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,lg:8,children:(0,F.jsx)(Us,{loading:o,valueInUSD:n,numberOfCampaign:a,recipientList:r})}),(0,F.jsx)(l.Col,{span:24,lg:16,children:(0,F.jsx)(Qs,{vestingAllocation:s,loading:o})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ws,{})})]})},en=e=>{let{airdropAllocation:t,loading:s}=e;return(0,F.jsx)(l.Card,{loading:s,className:"card-lightning",style:{height:"100%"},bodyStyle:{paddingBottom:0},children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Title,{level:5,children:"Airdrop allocation"})}),(0,F.jsx)(l.Col,{span:24,children:Object.keys(t).length?(0,F.jsxs)(l.Row,{gutter:[8,8],align:"middle",children:[(0,F.jsx)(l.Col,{xs:14,sm:10,children:(0,F.jsx)(qs,{data:t})}),(0,F.jsx)(l.Col,{xs:10,sm:14,children:(0,F.jsx)(Xs,{data:t})})]}):(0,F.jsx)(l.Empty,{})})]})})},tn=()=>{const[e,t]=(0,n.useState)(4),{loading:s}=$t({type:ue.Airdrop}),[i,r]=(0,n.useState)([]);return(0,F.jsx)(l.Card,{loading:s,className:"card-lightning",children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Typography.Title,{level:5,children:"History"}),(0,F.jsx)(l.Typography.Text,{className:"amount-airdrop",children:i.length})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(is,{onFilter:r,type:ue.Airdrop})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ls,{sentList:i.slice(0,e)})}),(0,F.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,F.jsx)(l.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,F.jsx)(u.Z,{name:"arrow-down-outline"}),disabled:e>=i.length,children:"VIEW MORE"})})]})})},sn=e=>{let{valueInUSD:t,numberOfCampaign:s,recipientList:n,loading:i}=e;return(0,F.jsxs)(l.Row,{gutter:[24,24],style:{height:"100%"},children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ge,{label:"Total airdrop",icon:(0,F.jsx)(u.Z,{className:"card-hero-icon",name:"cloud-download-outline"}),value:t,loading:!t&&i})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ge,{label:"Total campaigns",icon:(0,F.jsx)(u.Z,{className:"card-hero-icon",name:"paper-plane-outline"}),value:s,unit:"",loading:!s&&i})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ge,{loading:!n&&i,label:"Total recipients",icon:(0,F.jsx)(u.Z,{className:"card-hero-icon",name:"people-outline"}),value:n,unit:""})})]})},nn=()=>{const{pushHistory:e}=A(),t=(0,i.useDispatch)(),{allocation:s,totalUSD:n,numberOfRecipient:r,numberOfCampaigns:a,loading:o}=_s(ue.Airdrop);return(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsx)(l.Typography.Title,{level:2,children:"Airdrop"})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Button,{icon:(0,F.jsx)(u.Z,{name:"add-outline"}),type:"primary",size:"large",onClick:()=>(e("/airdrop/add-new"),t(fe(ue.Airdrop))),children:"ADD NEW"})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,lg:8,children:(0,F.jsx)(sn,{valueInUSD:n,numberOfCampaign:a,recipientList:r,loading:o})}),(0,F.jsx)(l.Col,{span:24,lg:16,children:(0,F.jsx)(en,{airdropAllocation:s,loading:o})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(tn,{})})]})},rn=e=>{let{visible:t,setVisible:s,title:n,description:i,onConfirm:r,onCancel:a,btnText:o}=e;return(0,F.jsx)(l.Modal,{visible:t,closeIcon:(0,F.jsx)(u.Z,{name:"close-outline"}),onCancel:()=>s(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:15,align:"baseline",children:[(0,F.jsx)(u.Z,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,F.jsxs)(l.Space,{size:4,direction:"vertical",children:[(0,F.jsx)(l.Typography.Text,{children:n}),(0,F.jsx)(l.Typography.Text,{type:"secondary",children:i})]})]})}),(0,F.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Button,{onClick:a,type:"ghost",children:"cancel"}),(0,F.jsx)(l.Button,{onClick:r,type:"primary",children:o})]})})]})})},an=()=>{const e=(0,i.useSelector)((e=>e.setting.decimal)),t=(0,i.useSelector)((e=>e.recipients.recipientInfos));return{amountError:(0,n.useMemo)((()=>{let s=[];for(const e in t)s=s.concat(t[e]);for(const{amount:t}of s){if(!Number(t)||Number(t)<0)return!0;if(!e&&Number(t)%1!==0)return!0}return!1}),[e,t])}};var ln=s(95418);const on=()=>{const{main:{mintSelected:e},recipients:{recipientInfos:t,expirationTime:s},setting:{decimal:a}}=(0,i.useSelector)((e=>e)),l=(0,r.useMintDecimals)({mintAddress:e})||0,o=(0,n.useCallback)((e=>{if(!s)return!0;for(const{unlockTime:t}of e)if(t>s)return!1;return!0}),[s]),u=(0,n.useMemo)((()=>{if(!t||void 0===l)return new c.BN(0);let e=new c.BN(0),s=[];for(const n in t){const e=o(t[n]);ln.account.isAddress(n)&&e&&(s=s.concat(t[n]))}for(const{amount:t}of s)a&&Number(t)?e=e.add(d.utilsBN.decimalize(t,l)):Number(t)%1===0&&(e=e.add(new c.BN(t)));return e}),[o,a,l,t]),p=(0,n.useMemo)((()=>Object.keys(t).length),[t]);return{total:d.utilsBN.undecimalize(u,l).toString(),quantity:p}},cn=(e,t,s)=>ln.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(ln.utils.undecimalize(BigInt(t),s))}:{amount:BigInt(0),decimals:0,balance:0},dn=e=>{const t=(0,r.useAccounts)(),s=(0,r.useWalletAddress)(),n=(0,r.useWalletBalance)(),{amount:i,mint:a}=t[e]||{},l=(0,r.useMintDecimals)({mintAddress:a})||0;return ln.account.isAddress(s)&&ln.account.isAddress(e)?e===s?cn(ln.DEFAULT_EMPTY_ADDRESS,n.toString(),9):cn(a,i.toString(),l):cn()},un=e=>{const[t,s]=(0,n.useState)(""),i=(0,r.useWalletAddress)(),a=dn(t);return(0,n.useEffect)((()=>{(async()=>{if(!ln.account.isAddress(i)||!ln.account.isAddress(e))return s("");try{const t=await r.splt.deriveAssociatedAddress(i,e);s(t)}catch(t){return s("")}})()})),a},pn=e=>{const{balance:t}=un(e),{total:s}=on();return(0,n.useMemo)((()=>t?t-Number(s):0),[t,s])},hn=e=>{let{type:t}=e;const s=(0,i.useSelector)((e=>e.recipients.recipientInfos));return(0,n.useMemo)((()=>{let e=[];for(const n in s)(ln.account.isAddress(n)||t!==E.valid)&&(ln.account.isAddress(n)&&t===E.invalid||(e=e.concat(s[n])));return e}),[s,t])},xn=()=>{const[e,t]=(0,n.useState)(!1),s=(0,i.useDispatch)(),{main:{isTyping:r,mintSelected:a}}=(0,i.useSelector)((e=>e)),{amountError:o}=an(),c=pn(a),d=hn({type:E.invalid}),u=!hn({type:E.valid}).length||!!d.length||r||c<0||o,p=(0,n.useCallback)((async()=>(await s(_(0)),await s(Q(0)),await s(L(k.SelectMethod)),await s(xe(S.manual)),await s(ie()),t(!1))),[s]);return(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{type:"ghost",size:"large",onClick:()=>t(!0),block:!0,children:"Back"})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:()=>s(L(k.ConfirmTransfer)),type:"primary",disabled:u,block:!0,children:"Continue"})}),(0,F.jsx)(rn,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:p})]})};var mn=s(24656),jn=s.n(mn),yn=s(18268),gn=s.n(yn);const fn=e=>{let{label:t,value:s}=e;const n=(0,r.useInfix)()<r.Infix.xl;return(0,F.jsxs)(l.Row,{gutter:[4,4],children:[(0,F.jsx)(l.Col,{flex:n?"auto":void 0,span:n?void 0:24,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:t})}),(0,F.jsx)(l.Col,{span:n?void 0:24,children:s})]})},Cn=e=>{let{isConfirm:t=!1}=e;const{main:{mintSelected:s,typeDistribute:n},recipients:{expirationTime:a,globalUnlockTime:o}}=(0,i.useSelector)((e=>e)),{total:c,quantity:d}=on(),{balance:u}=un(s),h=pn(s);return(0,F.jsxs)(l.Row,{justify:t?"space-between":void 0,gutter:[8,8],children:[(0,F.jsx)(l.Col,{xs:24,xl:12,children:(0,F.jsxs)(l.Row,{gutter:[{xs:16,sm:16,md:16,xl:48},{xs:16,sm:16,md:16,xl:48}],children:[(0,F.jsx)(l.Col,{xs:24,xl:8,children:(0,F.jsx)(fn,{label:"Recipients",value:(0,F.jsx)(l.Typography.Text,{children:d})})}),n===ue.Airdrop&&(0,F.jsx)(l.Col,{xs:24,xl:8,children:(0,F.jsx)(fn,{label:"Unlock time",value:(0,F.jsx)(l.Typography.Text,{children:o?bt()(o).format(D):"Immediately"})})}),(0,F.jsx)(l.Col,{xs:24,xl:8,children:(0,F.jsx)(fn,{label:"Expiration time",value:(0,F.jsx)(l.Typography.Text,{children:a?bt()(a).format(D):"Unlimited"})})})]})}),(0,F.jsx)(l.Col,{xs:24,xl:12,className:"overview-data",children:(0,F.jsxs)(l.Row,{gutter:[{xs:16,sm:16,md:16,xl:48},{xs:16,sm:16,md:16,xl:48}],children:[(0,F.jsx)(l.Col,{xs:24,xl:8,children:(0,F.jsx)(fn,{label:"Your balance",value:(0,F.jsxs)(l.Space,{size:4,children:[(0,F.jsx)(l.Typography.Text,{children:r.util.numeric(u).format("0,0.00[0000]")}),(0,F.jsx)(l.Typography.Text,{children:(0,F.jsx)(p.Z,{mintAddress:s})})]})})}),!t&&(0,F.jsx)(l.Col,{xs:24,xl:8,children:(0,F.jsx)(fn,{label:"Total",value:(0,F.jsxs)(l.Space,{size:4,children:[(0,F.jsx)(l.Typography.Title,{level:5,children:c}),(0,F.jsx)(l.Typography.Title,{level:5,children:(0,F.jsx)(p.Z,{mintAddress:s})})]})})}),(0,F.jsx)(l.Col,{xs:24,xl:8,children:(0,F.jsx)(fn,{label:"Remaining",value:(0,F.jsxs)(l.Space,{size:4,children:[(0,F.jsx)(l.Typography.Text,{children:r.util.numeric(h).format("0,0.00[0000]")}),(0,F.jsx)(l.Typography.Text,{children:(0,F.jsx)(p.Z,{mintAddress:s})})]})})})]})})]})},bn=()=>(0,F.jsx)(l.Card,{bordered:!1,style:{borderRadius:8,boxShadow:"unset"},bodyStyle:{padding:"12px 16px"},className:"card-total",children:(0,F.jsx)(Cn,{})});var wn=s(84354);const vn=e=>{let{accountAddress:t="",amount:s=0,selected:a=!1,onChecked:o=(()=>{}),index:c}=e;const[d,p]=(0,n.useState)(!1),[h,x]=(0,n.useState)(s),m=(0,i.useSelector)((e=>e.file.selectedFile)),j=(0,i.useSelector)((e=>e.setting.decimal)),y=(0,i.useSelector)((e=>e.recipients.globalUnlockTime)),g=(0,i.useDispatch)(),f=ln.account.isAddress(t),C=(0,n.useMemo)((()=>!!s&&(!j&&Number(s)%1!==0)),[s,j]),b=(0,n.useCallback)((()=>g(ye(!!d))),[g,d]);return(0,n.useEffect)((()=>{x(s)}),[s]),(0,n.useEffect)((()=>{b()}),[b]),(0,F.jsxs)(l.Row,{gutter:[16,8],align:"middle",className:"vesting-item",children:[(0,F.jsx)(l.Col,{span:2,children:(0,F.jsxs)(l.Space,{children:[a&&(0,F.jsx)(l.Checkbox,{checked:null===m||void 0===m?void 0:m.includes(t),onChange:e=>o(e.target.checked,t),className:"lightning-checkbox"}),(0,F.jsxs)(l.Typography.Text,{type:"secondary",children:["#",c+1]})]})}),(0,F.jsx)(l.Col,{span:14,children:d?(0,F.jsx)(l.Input,{value:t,name:"accountAddress",className:"recipient-input",autoComplete:"off",disabled:!0}):(0,F.jsx)(l.Tooltip,{title:t,children:(0,F.jsx)(l.Typography.Text,{style:{color:f?"":"#F9575E"},children:r.util.shortenAddress(t)})})}),(0,F.jsx)(l.Col,{span:4,children:d?(0,F.jsx)(wn.Z,{value:h,bordered:!1,style:{padding:0},onChange:e=>{x(e)},className:C?"recipient-input-error":"recipient-input"}):(0,F.jsx)(l.Typography.Text,{style:{color:C?"#F9575E":""},children:h})}),(0,F.jsx)(l.Col,{span:4,className:d?"":"vesting-action",children:d?(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Button,{onClick:()=>p(!1),type:"text",children:"cancel"}),(0,F.jsx)(l.Button,{style:{padding:0,color:"#42E6EB"},onClick:()=>{if(!f)return;const e=[{address:t,amount:h.toString(),unlockTime:y}];return g(re({walletAddress:t,nextRecipientInfos:e})),p(!1)},type:"text",children:"save"})]}):(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Button,{onClick:()=>g(se(t)),icon:(0,F.jsx)(u.Z,{name:"trash-outline"}),type:"text"}),f&&(0,F.jsx)(l.Button,{onClick:()=>p(!0),icon:(0,F.jsx)(u.Z,{name:"create-outline"}),type:"text"})]})})]})},An=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;return(0,F.jsxs)(l.Row,{gutter:[16,8],align:"middle",children:[(0,F.jsx)(l.Col,{span:2,children:(0,F.jsxs)(l.Space,{children:[t&&(0,F.jsx)(l.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"No."})]})}),(0,F.jsx)(l.Col,{span:14,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,F.jsx)(l.Col,{span:4,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})})]})},Tn=e=>{let{walletAddress:t,addNewRecipient:s,remove:i,isEdit:r=!1,setIsEdit:a=(()=>{}),disabled:o}=e;return(0,F.jsx)(n.Fragment,{children:t?(0,F.jsx)(n.Fragment,{children:r?(0,F.jsx)(l.Button,{style:{padding:0,color:"#42E6EB"},type:"text",onClick:s,size:"small",disabled:o,children:"Save"}):(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Button,{type:"text",size:"small",style:{padding:0},onClick:i,icon:(0,F.jsx)(u.Z,{style:{fonSize:20},name:"trash-outline"})}),(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>a(!0),style:{padding:0},icon:(0,F.jsx)(u.Z,{style:{fonSize:20},name:"create-outline"})})]})}):(0,F.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:s,children:"OK"})})},Sn=()=>({calcListAmount:(0,n.useCallback)(((e,t)=>{const s=[],n=t-1,i=e.div(new c.BN(t));let r=new c.BN(0);for(let a=0;a<t;a++)if(a!==n)r=r.add(i),s.push(i);else{const t=e.sub(r);s.push(t)}return s}),[])}),kn={walletAddress:"",amount:""},Rn=e=>{let{walletAddress:t,amount:s,index:a}=e;const[o,p]=(0,n.useState)(kn),[h,x]=(0,n.useState)(""),[m,j]=(0,n.useState)(""),[y,g]=(0,n.useState)(!1),[f,C]=(0,n.useState)(!1),{main:{mintSelected:b,typeDistribute:w},recipients:{recipientInfos:v,configs:A,globalUnlockTime:T,expirationTime:S},setting:{decimal:k}}=(0,i.useSelector)((e=>e)),R=(0,i.useDispatch)(),N=(0,r.useMintDecimals)({mintAddress:b})||0,{calcListAmount:B}=Sn(),E=(0,n.useCallback)((async()=>ln.account.isAddress(t)&&s?p({walletAddress:t,amount:s}):p(kn)),[t,s]),D=(0,n.useCallback)((()=>(!s&&!t||f)&&(o.walletAddress||o.amount||f)?R(ye(!0)):R(ye(!1))),[s,R,o.amount,o.walletAddress,f,t]),M=(0,n.useCallback)((()=>{if(s)return k?x(""):Number(s)%1!==0?x("Should be natural numbers"):void 0}),[s,k]),Z=(0,n.useMemo)((()=>t&&void 0!==a?a+1:Object.keys(v).length+1),[a,v,t]),z=!(!t||f),L=(0,n.useMemo)((()=>{const{distributeIn:e}=A,t=T+(0,U.Z)(e);return!!S&&((T>S||t>S)&&w===ue.Vesting)}),[S,A,T,w]);return(0,n.useEffect)((()=>{E()}),[E]),(0,n.useEffect)((()=>{M()}),[M]),(0,n.useEffect)((()=>{D()}),[D]),(0,F.jsxs)(l.Row,{gutter:[8,8],align:"middle",justify:"space-between",children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{children:[(0,F.jsxs)(l.Col,{flex:"auto",children:["Wallet address #",Z]}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(Tn,{addNewRecipient:async()=>{const{walletAddress:e,amount:t}=o;if(!ln.account.isAddress(e))return j("Wrong wallet address");if(!t)return x("Amount cannot be empty");if(!k&&Number(t)%1!==0)return x("Should be natural numbers");const s=[];if(v[e]&&!f)return g(!0);const n={address:e,amount:t,unlockTime:T};return s.push(n),j(""),x(""),C(!1),f||p(kn),R(te({walletAddress:e,nextRecipients:s}))},walletAddress:t,remove:()=>{if(ln.account.isAddress(t))return R(se(t))},isEdit:f,setIsEdit:C,disabled:L})})]})}),(0,F.jsx)(l.Col,{span:19,children:(0,F.jsx)(l.Input,{disabled:!!t,value:o.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:e=>{p({...o,[e.target.name]:e.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,F.jsx)(l.Col,{span:5,children:(0,F.jsx)(wn.Z,{disabled:z,value:s||o.amount,name:"amount",placeholder:"Amount",onChange:e=>p({...o,amount:e}),className:h?"recipient-input-error":"recipient-input",autoComplete:"off"})}),(m||h)&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(u.Z,{style:{color:"#f2323f"},name:"warning-outline"}),(0,F.jsx)(l.Typography.Text,{type:"danger",children:m||h})]})}),(0,F.jsx)(rn,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",btnText:"merge",onConfirm:async()=>{const{walletAddress:e,amount:t}=o,s=v[e],n=s.length;let i=new c.BN(0);for(const{amount:o}of s)i=i.add(d.utilsBN.decimalize(o,N));const r=i.add(d.utilsBN.decimalize(t,N)),a=B(r,n),l=v[e].map(((e,t)=>({...e,amount:d.utilsBN.undecimalize(a[t],N)})));return await R(te({walletAddress:e,nextRecipients:l})),await g(!1),(h||m)&&(x(""),j("")),p(kn)},visible:y,setVisible:g,onCancel:()=>g(!1)})]})},Nn="file",Bn=(0,T.createAsyncThunk)("file/setFileName",(async e=>({fileName:e}))),En=(0,T.createAsyncThunk)("file/selectRecipient",(async(e,t)=>{let{checked:s,walletAddress:n}=e,{getState:i}=t;const r=[...i().file.selectedFile];if(!s){const e=r.indexOf(n);r.splice(e,1)}return s&&r.push(n),{selectedFile:r}})),Dn=(0,T.createAsyncThunk)("file/removeSelectedFile",(async()=>({selectedFile:[]}))),Mn=(0,T.createAsyncThunk)("file/selectAll",(async e=>({selectedFile:e}))),Zn=(0,T.createSlice)({name:Nn,initialState:{fileName:"",selectedFile:[]},reducers:{},extraReducers:e=>{e.addCase(Bn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(En.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Dn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Mn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,zn=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,F.jsxs)(l.Space,{size:24,children:[(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(R.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},Ln=e=>{let{remove:t=(()=>{})}=e;const[s,r]=(0,n.useState)(!1),[a,o]=(0,n.useState)(),[c,d]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),x=(0,i.useDispatch)(),{file:{fileName:m,selectedFile:j},recipients:{recipientInfos:y}}=(0,i.useSelector)((e=>e)),g=hn({type:E.invalid}),f=hn({type:E.valid}),C=(e,t)=>x(En({checked:e,walletAddress:t})),b=(0,n.useCallback)((()=>{if(null===j||void 0===j||!j.length)return;d(!0);const e={...y};for(const t of j)delete e[t];x($({recipientInfos:e})),x(Dn()),d(!1),r(!1)}),[x,y,j]),{amountError:w}=an();return(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,F.jsxs)(l.Row,{gutter:8,children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(u.Z,{name:"document-attach-outline"}),(0,F.jsx)(l.Typography.Text,{style:{color:"inherit"},children:m})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,F.jsx)(u.Z,{name:"close-outline"}),onClick:()=>h(!0)})})]})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[12,12],children:[(0,F.jsx)(l.Col,{flex:"auto",children:s&&(0,F.jsx)(l.Space,{children:(0,F.jsx)(l.Button,{type:"text",size:"small",icon:(0,F.jsx)(u.Z,{name:"trash-outline"}),onClick:b,disabled:!(null!==j&&void 0!==j&&j.length),children:"Delete"})})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(zn,{activeKey:a,selected:s,onSelect:r,onCollapsed:o})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Collapse,{activeKey:a,bordered:!1,className:"auto-add-new",children:(0,F.jsx)(l.Collapse.Panel,{header:void 0,children:(0,F.jsx)(Rn,{})},R.activeKey)})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Spin,{spinning:c,children:(0,F.jsx)(l.Card,{bordered:!1,className:"card-content",children:(0,F.jsxs)(l.Row,{gutter:[8,13],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(An,{selected:s,onChecked:e=>{if(e){const e=g.concat(f).map((e=>{let{address:t}=e;return t}));x(Mn(e))}else x(Dn())}})}),g.map(((e,t)=>{let{address:n,amount:i}=e;return(0,F.jsx)(l.Col,{span:24,className:t+1===g.length?"last-item-error-data":"",children:(0,F.jsx)(vn,{accountAddress:n,amount:i,selected:s,onChecked:C,index:f.length+t})},n+t)})),f.map(((e,t)=>{let{address:n,amount:i}=e;return(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(vn,{accountAddress:n,amount:i,selected:s,onChecked:C,index:t})},n+t)}))]})})})}),w&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:12,children:[(0,F.jsx)(u.Z,{style:{color:"#F9575E"},name:"warning-outline"}),(0,F.jsx)(l.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Cn,{})})]})}),(0,F.jsx)(rn,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:p,setVisible:h,onConfirm:t,onCancel:()=>h(!1),btnText:"delete"})]})};const Wn=s.p+"static/media/icon-upload.a3c69638b092ea112d393cdc3d63d2c4.svg",Un=s.p+"static/media/example.5ac7e1383bf101857b35.csv",Fn=()=>{const e=(0,i.useDispatch)(),[t,s]=(0,n.useState)(!1),[a,o]=(0,n.useState)(!1),[c,p]=(0,n.useState)({}),{recipients:{recipientInfos:h,globalUnlockTime:x},main:{mintSelected:j}}=(0,i.useSelector)((e=>e)),y=(0,r.useMintDecimals)({mintAddress:j})||0,g=(0,n.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>jn().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;t(s)}}))))(t);if(void 0===y)return;const i={};let r=!1;for(const[e,s]of n)if(i[e]){r=!0;const t=[...i[e]],n=d.utilsBN.decimalize(t[0].amount,y).add(d.utilsBN.decimalize(s,y));i[e]=[{address:e,amount:d.utilsBN.undecimalize(n,y),unlockTime:x}]}else i[e]=[{address:e,amount:s,unlockTime:x}];return r?(p(i),s(!1),o(!0),e(Bn(t.name)),!0):(e(Bn(t.name)),e($({recipientInfos:i})),s(!1),o(!1),!1)}),[e,x,y]),f=async()=>(e(ie()),p({}),!0);return Object.values(h).length?(0,F.jsx)(Ln,{remove:f}):(0,F.jsxs)(l.Row,{gutter:[8,8],justify:"end",children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Spin,{spinning:t,children:(0,F.jsx)(l.Upload.Dragger,{accept:".csv,.txt",beforeUpload:g,onRemove:f,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,F.jsxs)(l.Space,{direction:"vertical",size:24,align:"center",children:[(0,F.jsx)(l.Image,{src:Wn,preview:!1}),(0,F.jsxs)(l.Space,{direction:"vertical",size:4,align:"center",children:[(0,F.jsx)(l.Typography.Text,{children:"Click or Drop file to upload"}),(0,F.jsxs)(l.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,F.jsx)("code",{children:".csv"}),","," ",(0,F.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,F.jsx)(u.Z,{name:"download-outline"}),onClick:async()=>{if(!Un)return;const e=await m(Un)||"";gn()(e,"example.csv")},children:"Download sample"})}),(0,F.jsx)(rn,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",visible:a,setVisible:o,onConfirm:()=>(e($({recipientInfos:c})),o(!1)),onCancel:()=>{o(!1),e(Bn("")),p({})},btnText:"merge"})]})},Hn="setting",In=(0,T.createAsyncThunk)("setting/setDecimal",(async e=>({decimal:e}))),Pn=(0,T.createAsyncThunk)("setting/setEncryption",(async e=>({encryption:e}))),Gn=(0,T.createAsyncThunk)("setting/setDisabled",(async e=>({disabled:e}))),Yn=(0,T.createSlice)({name:Hn,initialState:{decimal:!0,encryption:!1,disabled:!1},reducers:{},extraReducers:e=>{e.addCase(In.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Pn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Gn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Kn=()=>{const e=(0,i.useDispatch)(),{main:{mintSelected:t},setting:{decimal:s,disabled:n}}=(0,i.useSelector)((e=>e)),a=(0,r.useMintDecimals)({mintAddress:t})||0;return(0,F.jsx)(l.Switch,{className:"decimal-switch",onChange:t=>{e(In(t))},checkedChildren:a,unCheckedChildren:a,disabled:n,checked:s,size:"small"})},Vn=()=>{const e=(0,i.useDispatch)();return(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:24,children:[(0,F.jsx)(Kn,{}),(0,F.jsx)(l.Typography.Text,{children:"Decimals"})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:24,children:[(0,F.jsx)(l.Switch,{disabled:!0,onChange:t=>e(Pn(t)),size:"small"}),(0,F.jsx)(l.Typography.Text,{children:"Encrypt confidential information"})]})})]})},On=()=>(0,F.jsx)(l.Popover,{trigger:"click",placement:"bottom",title:null,content:(0,F.jsx)(Vn,{}),children:(0,F.jsx)(l.Button,{type:"text",icon:(0,F.jsx)(u.Z,{name:"cog-outline"})})}),Jn={1:25,2:50,3:100},qn=e=>{let{label:t=""}=e;const{step:s}=(0,i.useSelector)((e=>e.steps));return(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{direction:"vertical",size:12,children:[(0,F.jsx)(l.Progress,{className:"progress",percent:Jn[s],steps:3,showInfo:!1}),(0,F.jsx)(l.Typography.Title,{level:5,children:t})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(On,{})})]})},Xn=()=>(0,F.jsx)(l.Card,{bordered:!1,className:"card-lightning",children:(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(qn,{label:"Fill in recipient information"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Fn,{})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(xn,{})})]})}),Qn=()=>{const[e,t]=(0,n.useState)(!1),s=(0,i.useDispatch)(),{recipients:{recipientInfos:r},main:{mintSelected:a,isTyping:o}}=(0,i.useSelector)((e=>e)),{quantity:c}=on(),d=pn(a),u=(0,n.useMemo)((()=>{const e=[];for(const t in r)e.push(r[t][0]);return e}),[r]),{amountError:p}=an(),h=(0,n.useCallback)((async()=>{await s(_(0)),await s(Q(0)),await s(L(k.SelectMethod)),await s(xe(S.manual)),await s(ie())}),[s]),x=c<=0||p||d<0||o;return(0,F.jsxs)(l.Card,{className:"card-lightning",bordered:!1,children:[(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(qn,{label:"Fill in recipient information"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[u&&u.map(((e,t)=>{let{address:s,amount:n}=e;return(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Rn,{amount:n,walletAddress:s,index:t})},s+t)})),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Rn,{})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(bn,{})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{onClick:()=>t(!0),size:"large",type:"ghost",block:!0,children:"Back"})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",type:"primary",onClick:()=>s(L(k.ConfirmTransfer)),block:!0,disabled:x,children:"Continue"})})]})})]}),(0,F.jsx)(rn,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:h})]})},_n=e=>{let{placeholder:t,switchText:s,onChange:n,onSwitch:i,label:r,value:a,error:o,checked:c,explain:d}=e;return(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{align:"baseline",children:[(0,F.jsx)(l.Typography.Text,{className:"caption",children:r}),d]})}),d&&(0,F.jsx)(l.Col,{children:(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{xs:{order:2},lg:{order:1},children:(0,F.jsx)(l.Typography.Text,{children:s})}),(0,F.jsx)(l.Col,{xs:{order:1},lg:{order:2},children:(0,F.jsx)(l.Switch,{size:"small",checked:c,onChange:e=>{i&&(n(0),i(e))}})})]})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.DatePicker,{placeholder:t,suffixIcon:(0,F.jsx)(u.Z,{name:"time-outline"}),className:"date-option",onChange:e=>n((null===e||void 0===e?void 0:e.valueOf())||0),disabled:c,clearIcon:null,value:a?bt()(a):null,showTime:{showSecond:!1},placement:"bottomRight",format:D})}),o&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{className:"caption",style:{color:"#F9575E"},children:o})})]})},$n=e=>{let{mintAddress:t}=e;const[s,i]=(0,n.useState)(!1),{balance:a}=un(t);return(0,F.jsxs)(l.Row,{gutter:[8,8],style:{background:"#233333",height:70,padding:"12px 16px"},children:[(0,F.jsx)(l.Col,{span:12,children:(0,F.jsxs)(l.Space,{size:4,direction:"vertical",children:[(0,F.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:"Balance"}),a?(0,F.jsxs)(l.Typography.Text,{children:[r.util.numeric(a).format("0.0,[0000]")," ",(0,F.jsx)(p.Z,{mintAddress:t})]}):0]})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsxs)(l.Space,{size:0,direction:"vertical",children:[(0,F.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:"Mint address"}),t!==ce?(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Typography.Text,{children:r.util.shortenAddress(t)}),(0,F.jsx)(l.Tooltip,{title:"Copied",visible:s,children:(0,F.jsx)(ls(),{text:t,children:(0,F.jsx)(l.Button,{type:"text",onClick:async()=>{i(!0),await r.util.asyncWait(1500),i(!1)},icon:(0,F.jsx)(u.Z,{name:"copy-outline"})})})})]}):"--"]})})]})},ei=e=>{let{label:t,description:s,active:i}=e;return(0,F.jsxs)(n.Fragment,{children:[i?(0,F.jsx)(u.Z,{name:"checkbox-sharp",style:{position:"absolute",top:0,right:0,color:"#42E6EB",fontSize:20}}):null,(0,F.jsxs)(l.Row,{gutter:[12,12],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Title,{level:5,children:t})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:s})})]})]})},ti=e=>{let{method:t,onChange:s}=e;return(0,F.jsxs)(l.Space,{size:12,direction:"vertical",style:{width:"100%"},children:[(0,F.jsx)(l.Typography.Text,{children:"Choose transfer info input method"}),(0,F.jsx)(l.Radio.Group,{onChange:e=>s(e.target.value),style:{width:"100%"},className:"select-card",children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{xs:24,sm:12,md:12,lg:12,children:(0,F.jsx)(l.Radio.Button,{value:S.manual,children:(0,F.jsx)(ei,{label:"Manual",description:"Input each wallet address and airdrop amount by hand.",active:t===S.manual})})}),(0,F.jsx)(l.Col,{xs:24,sm:12,md:12,lg:12,children:(0,F.jsx)(l.Radio.Button,{value:S.auto,children:(0,F.jsx)(ei,{label:"Automatic",description:"Upload a CSV or TXT file containing wallet addresses and airdrop amount.",active:t===S.auto})})})]})})]})},si=()=>{const e=(0,i.useDispatch)(),{expirationTime:t,globalUnlockTime:s}=(0,i.useSelector)((e=>e.recipients)),r=(0,i.useSelector)((e=>e.main.mintSelected)),[a,o]=(0,n.useState)(S.manual),[c,d]=(0,n.useState)(Date.now()),[p,h]=(0,n.useState)(t),[x,m]=(0,n.useState)(!0),{pushHistory:j}=A(),y=(0,n.useMemo)((()=>x?0:p),[p,x]),g=(0,n.useMemo)((()=>p<s&&p?"Must be less than the expiration time.":""),[p,s]),f=(0,n.useMemo)((()=>p<Date.now()&&!x&&p?"Must be greater than current time.":""),[p,x]),C=r===ce||!a||!c||!p&&!x||p<s&&!x||p<Date.now()&&!x;return(0,n.useEffect)((()=>{e(_(c)),e(Q(y))}),[e,y,c]),(0,F.jsx)(l.Card,{className:"card-lightning",bordered:!1,children:(0,F.jsxs)(l.Row,{gutter:[32,32],align:"middle",children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(qn,{label:"Select token type and input method"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{xs:24,md:24,xl:12,children:(0,F.jsx)(de,{activeMintAddress:r,onSelect:t=>{e(me(t))}})}),(0,F.jsx)(l.Col,{xs:24,md:24,xl:12,children:(0,F.jsx)($n,{mintAddress:r})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(ti,{method:a,onChange:e=>o(e)})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{xs:24,lg:12,children:(0,F.jsx)(_n,{label:"Unlock time",switchText:"Send immediately",onChange:d,placeholder:"Select unlock time",value:c,error:g})}),(0,F.jsx)(l.Col,{xs:24,lg:12,children:(0,F.jsx)(_n,{label:"Expiration time",onSwitch:m,switchText:"Unlimited",onChange:h,placeholder:"Select time",value:p,error:f,checked:x,explain:(0,F.jsx)(l.Tooltip,{title:"Vesting expiration time, after this time users will not be able to claim the token and you can get it back.",children:(0,F.jsx)(u.Z,{name:"information-circle-outline"})})})})]})})]})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:()=>j("/airdrop"),block:!0,type:"ghost",children:"Cancel"})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:()=>{e(xe(a)),e(L(k.AddRecipient))},block:!0,type:"primary",disabled:C,children:"Continue"})})]})})},{sol:{utility:ni,fee:ii,taxman:ri},manifest:{appId:ai}}=w,li=()=>{const[e,t]=(0,n.useState)(!1),[s,a]=(0,n.useState)(""),[u,x]=(0,n.useState)(!1),{main:{mintSelected:m,typeDistribute:j},setting:{decimal:y},recipients:{recipientInfos:g,expirationTime:f}}=(0,i.useSelector)((e=>e)),C=(0,i.useDispatch)(),b=(0,r.useMintDecimals)({mintAddress:m})||0,{total:w}=on(),v=pn(m),{onPushAndClear:A}=ve(),T=(0,n.useMemo)((()=>{if(!g||void 0===b)return;let e=[];for(const s in g)e=e.concat(g[s]);const t=e.map(((e,t)=>{let{amount:s,address:n,unlockTime:i}=e;const r=(e=>{const t=new Date(e).toUTCString();return new Date(t).getTime()})(i),a=y?d.utilsBN.decimalize(s,b):new c.BN(s);return{authority:ln.account.fromAddress(n),amount:a,startedAt:new c.BN(r/1e3),salt:o.MerkleDistributor.salt(`${ai}/${j}/${t.toString()}`)}}));return new o.MerkleDistributor(t).toBuffer()}),[g,b,y,j]),S={fee:new c.BN(ii),feeCollectorAddress:ri};return(0,F.jsxs)(l.Card,{bordered:!1,className:"card-lightning",children:[(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(qn,{label:"Confirm transfer"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[24,24],justify:"center",children:[(0,F.jsx)(l.Col,{children:(0,F.jsxs)(l.Space,{direction:"vertical",size:12,align:"center",children:[(0,F.jsx)(l.Typography.Text,{children:"Total transfer"}),(0,F.jsx)(l.Typography.Title,{level:1,children:w}),(0,F.jsx)(l.Tag,{style:{margin:0,borderRadius:4,color:"rgb(66, 230, 235)",background:"rgba(66, 230, 235, 0.1)",border:"unset",fontSize:16,padding:"4px 12px"},children:(0,F.jsx)(p.Z,{mintAddress:m})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Card,{bordered:!1,className:"card-total",children:(0,F.jsx)(Cn,{isConfirm:!0})})})]})}),(0,F.jsx)(l.Col,{span:24,children:u?(0,F.jsx)(l.Button,{size:"large",type:"primary",block:!0,onClick:()=>A(`/${j}`),children:"Home"}):(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:()=>C(L(k.AddRecipient)),block:!0,type:"ghost",children:"BACK"})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:async()=>{try{if(!T)throw new Error("Invalid Merkle Data");t(!0);const e=o.MerkleDistributor.fromBuffer(T),s={createAt:Math.floor(Date.now()/1e3),data:T},n=[new Blob([JSON.stringify({...s},null,2)],{type:"application/json"})],i=new File(n,"metadata.txt"),r=await(async e=>{const t=new FormData;t.append("file",e);const{data:s}=await Se().post("https://api.sentre.io/storage/upload",t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});return s.cid})(i),{txId:l,distributorAddress:c}=await ni.initializeDistributor({tokenAddress:m,total:e.getTotal(),merkleRoot:e.deriveMerkleRoot(),metadata:(0,Ae.decode)(r),endedAt:f/1e3,feeOptions:S});return x(!0),h("Airdrop",l),a(`${window.location.origin}/app/${ai}/redeem/${c}?autoInstall=true`)}catch(e){window.notify({type:"error",description:e.message})}finally{t(!1)}},type:"primary",loading:e,disabled:v<0,block:!0,children:"TRANSFER"})})]})})]}),(0,F.jsx)(cs,{visible:Boolean(s),onClose:()=>a(""),redeemLink:s})]})},oi=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,i.useSelector)((e=>e));return t===k.SelectMethod?(0,F.jsx)(si,{}):t===k.AddRecipient?e===S.auto?(0,F.jsx)(Xn,{}):(0,F.jsx)(Qn,{}):(0,F.jsx)(li,{})},ci=()=>(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Title,{level:2,children:"Add new Airdrop"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(oi,{})})]}),di=e=>{let{type:t}=e;const s=(0,i.useSelector)((e=>e.recipients.recipientInfos)),r=(0,i.useSelector)((e=>e.recipients.expirationTime)),a=(0,n.useCallback)((e=>{if(!r)return!0;for(const{unlockTime:t}of e){if(!new Date(t).getTime())return!1;if(t>r)return!1}return!0}),[r]),l=(0,n.useCallback)((e=>{for(const{amount:t}of e)if(!Number(t)||Number(t)<0)return!1;return!0}),[]);return(0,n.useMemo)((()=>{let e=[];const n=[];for(const i in s){const n=a(s[i]),r=l(s[i]);ln.account.isAddress(i)&&n&&r&&t===E.invalid||(ln.account.isAddress(i)&&n&&r||t!==E.valid)&&(e=e.concat(s[i]))}for(const{address:t,amount:s,unlockTime:i}of e){const e=n.findIndex((e=>{let{address:s}=e;return s===t}));if(-1===e)n.push({address:t,config:[{unlockTime:i,amount:s}]});else{const t={...n[e]};t.config.push({unlockTime:i,amount:s}),n[e]=t}}return n}),[l,a,s,t])},ui=()=>{const[e,t]=(0,n.useState)(!1),s=(0,i.useDispatch)(),{main:{isTyping:r,mintSelected:a}}=(0,i.useSelector)((e=>e)),{amountError:o}=an(),c=pn(a),d=!!di({type:E.invalid}).length||r||c<0||o,u=(0,n.useCallback)((async()=>{s(L(k.SelectMethod)),s(Ce("")),s(Q(0)),s(ie())}),[s]);return(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{type:"ghost",size:"large",onClick:()=>t(!0),block:!0,children:"Back"})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:()=>s(L(k.ConfirmTransfer)),type:"primary",disabled:d,block:!0,children:"Continue"})}),(0,F.jsx)(rn,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:u})]})},pi=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;return(0,F.jsxs)(l.Row,{gutter:[16,8],align:"middle",wrap:!1,style:{padding:8},children:[(0,F.jsx)(l.Col,{span:2,children:(0,F.jsxs)(l.Space,{children:[t&&(0,F.jsx)(l.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"No."})]})}),(0,F.jsx)(l.Col,{span:4,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,F.jsx)(l.Col,{span:16,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Amount & Unlock time"})}),(0,F.jsx)(l.Col,{span:2})]})},hi=e=>{let{walletAddress:t}=e;const s=(0,i.useSelector)((e=>e.recipients.expirationTime));return(0,F.jsx)(l.Card,{className:"card-overview",bodyStyle:{padding:"13px 16px"},children:(0,F.jsxs)(l.Row,{gutter:[10,10],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(vt,{label:"Wallet Address",value:r.util.shortenAddress(t)})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(vt,{label:"Expiration Time",value:s?bt()(s).format("DD/MM/YYYY HH:mm"):"Unlimited"})})]})})},xi=e=>{let{walletAddress:t,setVisible:s,visible:r}=e;const[a,o]=(0,n.useState)([]),c=(0,i.useSelector)((e=>e.recipients.recipientInfos[t])),d=(0,i.useSelector)((e=>e.recipients.expirationTime)),p=(0,i.useSelector)((e=>e.setting.decimal)),h=(0,i.useDispatch)(),x={unlockTime:0,amount:"",address:t},m=(0,n.useMemo)((()=>{for(const{amount:e,unlockTime:t}of a){if(!t||!e)return!0;if(t>d&&d)return!0;if(!p&&Number(e)%1!==0)return!0}return!1}),[p,d,a]);return(0,n.useEffect)((()=>{o(c)}),[c]),(0,F.jsx)(l.Modal,{footer:null,className:"card-lightning",style:{paddingBottom:0},closeIcon:(0,F.jsx)(u.Z,{name:"close-outline"}),visible:r,onCancel:e=>(e.stopPropagation(),s(!1)),children:(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Title,{level:4,children:"Edit amount & unlock time"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[a.map(((e,t)=>{let{amount:s,unlockTime:n}=e;return(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:11,children:(0,F.jsx)(l.Input,{name:"amount",className:"recipient-input",placeholder:"Input amount",value:s,onChange:e=>((e,t)=>{const s=[...a];return s[t]={...s[t],amount:e.target.value},o(s)})(e,t)})}),(0,F.jsx)(l.Col,{span:11,children:(0,F.jsx)(l.DatePicker,{placeholder:"Select unlock time",suffixIcon:(0,F.jsx)(u.Z,{name:"time-outline"}),className:n>d&&d?"date-option error":"date-option",onChange:e=>((e,t)=>{const s=[...a];return s[t]={...s[t],unlockTime:e},o(s)})((null===e||void 0===e?void 0:e.valueOf())||0,t),clearIcon:null,showTime:{showSecond:!1},placement:"bottomRight",value:n?bt()(n):null,format:D})}),(0,F.jsx)(l.Col,{span:2,children:(0,F.jsx)(l.Button,{onClick:()=>(e=>{const t=[...a];return t.splice(e,1),o(t)})(t),type:"text",icon:(0,F.jsx)(u.Z,{name:"remove-circle-outline"})})}),!p&&Number(s)%1!==0&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:12,children:[(0,F.jsx)(u.Z,{style:{color:"#F9575E"},name:"warning-outline"}),(0,F.jsx)(l.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})})]})},t)})),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Button,{icon:(0,F.jsx)(u.Z,{name:"add-outline"}),size:"large",type:"dashed",block:!0,style:{background:"transparent"},onClick:()=>{const e=[...a];return e.push(x),o(e)},children:"Add more"})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(hi,{walletAddress:t})}),(0,F.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Button,{onClick:e=>(e.stopPropagation(),s(!1)),type:"ghost",children:"Cancel"}),(0,F.jsx)(l.Button,{disabled:m,onClick:e=>(e.stopPropagation(),h(re({walletAddress:t,nextRecipientInfos:a})),s(!1)),type:"primary",children:"update"})]})})]})})},mi=e=>{let{vestingItem:t,selected:s=!1,onChecked:a=(()=>{}),index:o}=e;const[c,d]=(0,n.useState)(!1),p=(0,i.useSelector)((e=>e.file.selectedFile)),h=(0,i.useSelector)((e=>e.setting.decimal)),x=(0,i.useSelector)((e=>e.recipients.expirationTime)),m=(0,i.useDispatch)(),j=!ln.account.isAddress(t.address),y=(0,n.useMemo)((()=>{for(const{amount:e}of t.config)if(!h&&Number(e)%1!==0)return!0;return!1}),[h,t.config]);return(0,F.jsxs)(l.Row,{onClick:()=>d(!0),gutter:[16,8],align:"middle",wrap:!1,className:"vesting-item",children:[(0,F.jsx)(l.Col,{span:2,children:(0,F.jsxs)(l.Space,{children:[s&&(0,F.jsx)(l.Checkbox,{checked:null===p||void 0===p?void 0:p.includes(t.address),onChange:e=>a(e.target.checked,t.address),className:"lightning-checkbox",onClick:e=>e.stopPropagation()}),(0,F.jsxs)(l.Typography.Text,{type:"secondary",children:["#",o+1]})]})}),(0,F.jsx)(l.Col,{span:4,children:(0,F.jsx)(l.Tooltip,{title:t.address,children:(0,F.jsx)(l.Typography.Text,{style:{color:j?"#F9575E":""},children:r.util.shortenAddress(t.address)})})}),(0,F.jsx)(l.Col,{span:16,className:y?"recipient-input-error":"",children:(0,F.jsx)(l.Row,{gutter:[16,8],children:t.config.map(((e,t)=>{let{amount:s,unlockTime:n}=e;const i=n>x&&x;return(0,F.jsx)(l.Col,{className:i?"vesting-config-error":"vesting-config",children:(0,F.jsxs)(l.Typography.Text,{className:"caption",children:[s," / ",bt()(n).format(D)]})},t)}))})}),(0,F.jsx)(l.Col,{span:2,className:"vesting-action",children:(0,F.jsx)(l.Button,{onClick:()=>m(se(t.address)),icon:(0,F.jsx)(u.Z,{name:"trash-outline"}),type:"text"})}),(0,F.jsx)(xi,{setVisible:d,visible:c,walletAddress:t.address})]})},ji={walletAddress:"",amount:""},yi=()=>{const[e,t]=(0,n.useState)(ji),[s,r]=(0,n.useState)(0),[a,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),p=(0,i.useSelector)((e=>e.setting.decimal)),h=(0,i.useSelector)((e=>e.recipients.recipientInfos)),x=(0,i.useSelector)((e=>e.recipients.expirationTime)),m=(0,i.useDispatch)(),j=(0,n.useCallback)((()=>e.walletAddress||e.amount?m(ye(!0)):m(ye(!1))),[m,e.amount,e.walletAddress]),y=(0,n.useMemo)((()=>s>x&&x?"Unlock time must be less than the expiration time.":""),[x,s]);return(0,n.useEffect)((()=>{j()}),[j]),(0,F.jsxs)(l.Row,{gutter:[16,16],align:"middle",style:{padding:"12px 16px",background:"#394747"},children:[(0,F.jsx)(l.Col,{xs:24,md:12,xl:15,children:(0,F.jsx)(l.Input,{value:e.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:s=>{t({...e,[s.target.name]:s.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,F.jsx)(l.Col,{xs:24,md:5,xl:4,children:(0,F.jsx)(l.DatePicker,{placeholder:"Select time",suffixIcon:(0,F.jsx)(u.Z,{name:"time-outline"}),className:"date-option",onChange:e=>r((null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,showTime:{showSecond:!1},value:s?bt()(s):null,placement:"bottomRight",format:D})}),(0,F.jsx)(l.Col,{xs:24,md:5,xl:4,children:(0,F.jsx)(wn.Z,{value:e.amount,name:"amount",placeholder:"Amount",onChange:s=>t({...e,amount:s}),autoComplete:"off",className:"recipient-input"})}),(0,F.jsx)(l.Col,{xs:24,md:2,xl:1,children:(0,F.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:()=>{const{walletAddress:n,amount:i}=e;if(!ln.account.isAddress(n))return d("Wrong wallet address");if(!i)return o("Amount cannot be empty");if(!p&&Number(i)%1!==0)return o("Should be natural numbers");let a=[];const l={address:n,amount:i,unlockTime:s};if(a.push(l),h[n]){a=[...h[n]].concat(a)}return t(ji),d(""),o(""),r(0),m(te({walletAddress:n,nextRecipients:a}))},disabled:!!y||!s,children:"ok"})}),(c||a||y)&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(u.Z,{style:{color:"#f2323f"},name:"warning-outline"}),(0,F.jsx)(l.Typography.Text,{type:"danger",children:c||a||y})]})})]})},gi=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,F.jsxs)(l.Space,{size:24,children:[(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(R.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},fi=e=>{let{remove:t=(()=>{})}=e;const[s,r]=(0,n.useState)(!1),[a,o]=(0,n.useState)(),[c,d]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),x=(0,i.useDispatch)(),{file:{fileName:m,selectedFile:j},recipients:{recipientInfos:y}}=(0,i.useSelector)((e=>e)),g=di({type:E.valid}),f=di({type:E.invalid}),C=(e,t)=>x(En({checked:e,walletAddress:t})),b=(0,n.useCallback)((()=>{if(null===j||void 0===j||!j.length)return;d(!0);const e={...y};for(const t of j)delete e[t];x($({recipientInfos:e})),x(Dn()),d(!1),r(!1)}),[x,y,j]),{amountError:w}=an();return(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,F.jsxs)(l.Row,{gutter:8,children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(u.Z,{name:"document-attach-outline"}),(0,F.jsx)(l.Typography.Text,{style:{color:"inherit"},children:m})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,F.jsx)(u.Z,{name:"close-outline"}),onClick:()=>h(!0)})})]})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[12,12],children:[(0,F.jsx)(l.Col,{flex:"auto",children:s&&(0,F.jsx)(l.Space,{children:(0,F.jsx)(l.Button,{type:"text",size:"small",icon:(0,F.jsx)(u.Z,{name:"trash-outline"}),onClick:b,disabled:!(null!==j&&void 0!==j&&j.length),children:"Delete"})})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(gi,{activeKey:a,selected:s,onSelect:r,onCollapsed:o})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Collapse,{activeKey:a,bordered:!1,className:"auto-add-new",children:(0,F.jsx)(l.Collapse.Panel,{header:void 0,children:(0,F.jsx)(yi,{})},R.activeKey)})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Spin,{spinning:c,children:(0,F.jsx)(l.Card,{bordered:!1,className:"card-content",children:(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(pi,{selected:s,onChecked:e=>{if(e){const e=f.concat(g).map((e=>{let{address:t}=e;return t}));x(Mn(e))}else x(Dn())}})}),f.map(((e,t)=>(0,F.jsx)(l.Col,{span:24,className:t+1===f.length?"last-item-error-data":"",children:(0,F.jsx)(mi,{vestingItem:e,selected:s,onChecked:C,index:g.length+t})},e.address+t))),g.map(((e,t)=>(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(mi,{vestingItem:e,selected:s,onChecked:C,index:t})},e.address+t)))]})})})}),w&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:12,children:[(0,F.jsx)(u.Z,{style:{color:"#F9575E"},name:"warning-outline"}),(0,F.jsx)(l.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Cn,{})})]})}),(0,F.jsx)(rn,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:p,setVisible:h,onConfirm:t,onCancel:()=>h(!1),btnText:"delete"})]})},Ci=s.p+"static/media/example-vesting.8d5ef68a6964745a19b8.csv",bi=e=>{let{visible:t,description:s,onClose:n}=e;return(0,F.jsx)(l.Modal,{visible:t,closeIcon:(0,F.jsx)(u.Z,{name:"close-outline"}),onCancel:n,footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:15,align:"baseline",children:[(0,F.jsx)(u.Z,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,F.jsxs)(l.Space,{size:4,direction:"vertical",children:[(0,F.jsx)(l.Typography.Title,{level:4,children:"Can't import file!"}),s]})]})}),(0,F.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,F.jsx)(l.Button,{onClick:n,type:"primary",children:"try again"})})]})})},wi=()=>{const e=(0,i.useDispatch)(),[t,s]=(0,n.useState)(!1),[r,a]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!1),{recipients:{recipientInfos:d}}=(0,i.useSelector)((e=>e)),p=(0,n.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>jn().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;t(s)}}))))(t),i={};for(const e of n){if(e.length<=2)return s(!1),c(!0);const[t,n,r]=e,a={address:t,amount:n,unlockTime:new Date(r).getTime()};if(i[t]){let e=[...i[t]];e.push(a),i[t]=e}else i[t]=[a]}return e(Bn(t.name)),e($({recipientInfos:i})),s(!1),!1}),[e]),h=async()=>(e(ie()),!0),x=(0,n.useMemo)((()=>r?(0,F.jsxs)(l.Typography.Text,{children:["Wrong date format. It\u2019s should be"," ",(0,F.jsx)("span",{style:{color:"#42E6EB"},children:"MM-DD-YYYY HH:mm."})]}):(0,F.jsx)(l.Typography.Text,{children:"Wrong format file"})),[r]);return Object.values(d).length?(0,F.jsx)(fi,{remove:h}):(0,F.jsxs)(l.Row,{gutter:[8,8],justify:"end",children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Spin,{spinning:t,children:(0,F.jsx)(l.Upload.Dragger,{accept:".csv,.txt",beforeUpload:p,onRemove:h,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,F.jsxs)(l.Space,{direction:"vertical",size:24,align:"center",children:[(0,F.jsx)(l.Image,{src:Wn,preview:!1}),(0,F.jsxs)(l.Space,{direction:"vertical",size:4,align:"center",children:[(0,F.jsx)(l.Typography.Text,{children:"Click or Drop file to upload"}),(0,F.jsxs)(l.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,F.jsx)("code",{children:".csv"}),","," ",(0,F.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,F.jsx)(u.Z,{name:"download-outline"}),onClick:async()=>{if(!Ci)return;const e=await m(Ci)||"";gn()(e,"example.csv")},children:"Download sample"})}),(0,F.jsx)(bi,{visible:o,onClose:()=>(a(!1),c(!1)),description:x})]})},vi=()=>(0,F.jsx)(l.Card,{bordered:!1,className:"card-lightning",children:(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(qn,{label:"Fill in recipient information"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(wi,{})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(ui,{})})]})}),Ai={walletAddress:"",amount:""},Ti=()=>{const[e,t]=(0,n.useState)(Ai),[s,a]=(0,n.useState)(!1),[o,p]=(0,n.useState)(""),[h,x]=(0,n.useState)(""),[m,j]=(0,n.useState)([]),y=(0,i.useSelector)((e=>e.recipients.configs)),g=(0,i.useSelector)((e=>e.main.TGE)),f=(0,i.useSelector)((e=>e.main.TGETime)),C=(0,i.useSelector)((e=>e.main.mintSelected)),b=(0,i.useSelector)((e=>e.recipients.recipientInfos)),w=(0,i.useSelector)((e=>e.recipients.configs.cliff)),v=(0,i.useSelector)((e=>e.setting.decimal)),A=(0,r.useMintDecimals)({mintAddress:C})||0,T=(0,i.useDispatch)(),{calcListAmount:S}=Sn(),k=(0,n.useCallback)((()=>e.walletAddress||e.amount?T(ye(!0)):T(ye(!1))),[T,e.amount,e.walletAddress]);return(0,n.useEffect)((()=>{k()}),[k]),(0,F.jsxs)(l.Row,{gutter:[16,16],align:"middle",style:{padding:"12px 16px",background:"#394747"},children:[(0,F.jsx)(l.Col,{xs:10,md:14,xl:19,children:(0,F.jsx)(l.Input,{value:e.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:s=>{t({...e,[s.target.name]:s.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,F.jsx)(l.Col,{xs:10,md:8,xl:4,children:(0,F.jsx)(wn.Z,{value:e.amount,name:"amount",placeholder:"Amount",onChange:s=>t({...e,amount:s}),autoComplete:"off",className:"recipient-input"})}),(0,F.jsx)(l.Col,{xs:4,md:2,xl:1,children:(0,F.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:()=>{const{walletAddress:s,amount:n}=e;if(!ln.account.isAddress(s))return x("Wrong wallet address");if(!n)return p("Amount cannot be empty");if(!v&&Number(n)%1!==0)return p("Should be natural numbers");const{distributeIn:i,frequency:r}=y;let l=d.utilsBN.decimalize(n,A);const o=Math.floor((0,U.Z)(i)/(0,U.Z)(r)),u=[],h=g?l.mul(new c.BN(g)).div(new c.BN(100)):new c.BN(0);l=l.sub(h);const m={address:s,amount:d.utilsBN.undecimalize(h,A),unlockTime:f};u.push(m);const C=S(l,o);for(let e=1;e<=o;e++){let t=0;1===e&&(t=f+(0,U.Z)(w)),e>1&&(t=(0,U.Z)(r)+u[e-1].unlockTime);const n={address:s,amount:d.utilsBN.undecimalize(C[e-1],A),unlockTime:t};u.push(n)}return b[s]?(j(u),a(!0)):(x(""),p(""),t(Ai),T(te({walletAddress:s,nextRecipients:u})))},children:"ok"})}),(h||o)&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(u.Z,{style:{color:"#f2323f"},name:"warning-outline"}),(0,F.jsx)(l.Typography.Text,{type:"danger",children:h||o})]})}),(0,F.jsx)(rn,{btnText:"Replace",description:"Do you want replace this recipient",title:"Recipient existed",onCancel:()=>a(!1),onConfirm:()=>{a(!1);const{walletAddress:s}=e;return t(Ai),x(""),p(""),T(te({walletAddress:s,nextRecipients:m}))},setVisible:a,visible:s})]})},Si=e=>{let{vestingItem:t,index:s}=e;const[a,o]=(0,n.useState)(!1),c=(0,i.useSelector)((e=>e.setting.decimal)),d=(0,i.useSelector)((e=>e.recipients.expirationTime)),p=(0,i.useDispatch)(),h=!ln.account.isAddress(t.address),x=(0,n.useMemo)((()=>{for(const{amount:e}of t.config)if(!c&&Number(e)%1!==0)return!0;return!1}),[c,t.config]);return(0,F.jsxs)(l.Row,{onClick:()=>o(!0),gutter:[16,8],align:"middle",wrap:!1,className:"vesting-item",children:[(0,F.jsx)(l.Col,{span:2,children:(0,F.jsxs)(l.Typography.Text,{type:"secondary",children:["#",s+1]})}),(0,F.jsx)(l.Col,{span:4,children:(0,F.jsx)(l.Tooltip,{title:t.address,children:(0,F.jsx)(l.Typography.Text,{style:{color:h?"#F9575E":""},children:r.util.shortenAddress(t.address)})})}),(0,F.jsx)(l.Col,{span:16,className:x?"recipient-input-error":"",children:(0,F.jsx)(l.Row,{gutter:[16,8],children:t.config.map(((e,t)=>{let{amount:s,unlockTime:n}=e;const i=n>d&&d;return(0,F.jsx)(l.Col,{className:i?"vesting-config-error":"vesting-config",children:(0,F.jsxs)(l.Typography.Text,{className:"caption",children:[s," / ",bt()(n).format(D)]})},t)}))})}),(0,F.jsx)(l.Col,{span:2,className:"vesting-action",children:(0,F.jsx)(l.Button,{onClick:()=>p(se(t.address)),icon:(0,F.jsx)(u.Z,{name:"trash-outline"}),type:"text"})}),(0,F.jsx)(xi,{setVisible:o,visible:a,walletAddress:t.address})]})},ki=()=>(0,F.jsxs)(l.Row,{gutter:[16,8],align:"middle",wrap:!1,style:{padding:8},children:[(0,F.jsx)(l.Col,{span:2,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"No."})}),(0,F.jsx)(l.Col,{span:4,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,F.jsx)(l.Col,{span:16,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Amount & Unlock time"})}),(0,F.jsx)(l.Col,{span:2})]}),Ri=()=>{const e=di({type:E.valid});return(0,F.jsx)(l.Row,{className:"display-recipient",justify:"center",children:e.length?(0,F.jsxs)(n.Fragment,{children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(ki,{})}),e.map(((e,t)=>(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Si,{vestingItem:e,index:t})},e.address)))]}):(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Typography.Text,{children:"Please input recipient information"})})})},Ni=()=>{const[e,t]=(0,n.useState)(!1),{main:{mintSelected:s,isTyping:r}}=(0,i.useSelector)((e=>e)),{quantity:a}=on(),o=pn(s),{amountError:c}=an(),d=(0,i.useDispatch)(),u=(0,n.useCallback)((async()=>{await d(ie()),await d(_(0)),await d(Q(0)),await d(L(k.SelectMethod)),await d(xe(S.manual))}),[d]),p=a<=0||c||o<0||r;return(0,F.jsxs)(l.Card,{className:"card-lightning",bordered:!1,children:[(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(qn,{label:"Fill in recipient information"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ti,{})}),(0,F.jsx)(Ri,{}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(bn,{})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{onClick:()=>t(!0),size:"large",type:"ghost",block:!0,children:"Back"})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",type:"primary",onClick:()=>d(L(k.ConfirmTransfer)),block:!0,disabled:p,children:"Continue"})})]})})]}),(0,F.jsx)(rn,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:u})]})},Bi=()=>{const e=(0,i.useSelector)((e=>e.main.TGETime)),t=(0,i.useSelector)((e=>e.recipients.expirationTime)),s=(0,i.useDispatch)(),r=(0,n.useMemo)((()=>t&&e>t?"Must be less than the expiration time.":""),[e,t]);return(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{className:"caption",children:"TGE Time"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.DatePicker,{placeholder:"Select time",suffixIcon:(0,F.jsx)(u.Z,{name:"time-outline"}),className:"date-option",onChange:e=>{return t=(null===e||void 0===e?void 0:e.valueOf())||0,s(be(t));var t},clearIcon:null,value:e?bt()(e):null,showTime:{showSecond:!1},placement:"bottomRight",format:D})}),r&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{className:"caption",style:{color:"#F9575E"},children:r})})]})},Ei=()=>{const e=(0,i.useSelector)((e=>e.main.TGE)),t=(0,i.useDispatch)();return(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{align:"baseline",style:{display:"inline-flex"},children:[(0,F.jsx)(l.Typography.Text,{className:"caption",children:"TGE Percentage (Optional)"}),(0,F.jsx)(l.Tooltip,{title:"Percent of token allocation for the first time. You can leave it blank and the value will be automatically calculated as 0%.",children:(0,F.jsx)(u.Z,{name:"information-circle-outline"})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.InputNumber,{onChange:e=>t(Ce(e||"")),value:e,className:"TGE-input",placeholder:"Input %",type:"number",max:"100",min:"0"})})]})},Di=()=>{const[e,t]=(0,n.useState)(!0),s=(0,i.useSelector)((e=>e.main.methodSelected)),r=(0,i.useSelector)((e=>e.main.TGETime)),a=(0,i.useSelector)((e=>e.recipients.configs.cliff)),o=(0,i.useSelector)((e=>e.recipients.expirationTime)),c=(0,i.useSelector)((e=>e.main.mintSelected)),d=(0,i.useSelector)((e=>e.recipients.configs.distributeIn)),p=(0,i.useSelector)((e=>e.recipients.configs.frequency)),h=(0,i.useDispatch)(),{pushHistory:x}=A(),m=(0,n.useMemo)((()=>{if(e||!o)return"";if(o<Date.now())return"Must be greater than current time.";const t=r+(0,U.Z)(a)+(0,U.Z)(d);return o<t&&s===S.manual?"Must be greater than the total vesting time.":""}),[r,a,d,o,e,s]),j=(0,n.useMemo)((()=>{if(c===ce||!s)return!0;const t=r+(0,U.Z)(a);return s===S.manual?!r||o<t&&!e||o-t<(0,U.Z)(d)&&!e||(0,U.Z)(d)<(0,U.Z)(p):!o&&!e}),[r,a,d,o,p,e,s,c]);return(0,F.jsx)(l.Card,{className:"card-lightning",bordered:!1,children:(0,F.jsxs)(l.Row,{gutter:[32,32],align:"middle",children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(qn,{label:"Select token type and input method"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{xs:24,md:24,xl:12,children:(0,F.jsx)(de,{activeMintAddress:c,onSelect:e=>h(me(e))})}),(0,F.jsx)(l.Col,{xs:24,md:24,xl:12,children:(0,F.jsx)($n,{mintAddress:c})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{children:"Choose vesting schedule calculation mode"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Radio.Group,{onChange:e=>h(xe(e.target.value)),style:{width:"100%"},className:"select-card",value:s,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{xs:24,sm:12,md:12,lg:12,children:(0,F.jsx)(l.Radio.Button,{value:S.manual,children:(0,F.jsx)(ei,{label:"Automatic",description:"Input your vesting campaign details. Lightning Tunnel will do the calculation!",active:s===S.manual})})}),(0,F.jsx)(l.Col,{xs:24,sm:12,md:12,lg:12,children:(0,F.jsx)(l.Radio.Button,{value:S.auto,children:(0,F.jsx)(ei,{label:"Manual",description:"Upload a CSV or TXT file containing wallet addresses and self-calculated vesting schedule.",active:s===S.auto})})})]})})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[s===S.manual&&(0,F.jsxs)(n.Fragment,{children:[(0,F.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,F.jsx)(Ei,{})}),(0,F.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,F.jsx)(Bi,{})}),(0,F.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,F.jsx)(J,{})}),(0,F.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,F.jsx)(K,{})}),(0,F.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,F.jsx)(P,{})})]}),(0,F.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,F.jsx)(_n,{label:"Expiration time",onSwitch:t,switchText:"Unlimited",onChange:t=>h(Q(e?0:t)),placeholder:"Select time",value:o,error:m,checked:e,explain:(0,F.jsx)(l.Tooltip,{title:"Vesting expiration time, after this time users will not be able to claim the token and you can get it back.",children:(0,F.jsx)(u.Z,{name:"information-circle-outline"})})})})]})})]})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:()=>x("/vesting"),block:!0,type:"ghost",children:"Cancel"})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:()=>{h(xe(s)),h(L(k.AddRecipient))},block:!0,type:"primary",disabled:j,children:"Continue"})})]})})},Mi=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,i.useSelector)((e=>e));return t===k.SelectMethod?(0,F.jsx)(Di,{}):t===k.AddRecipient?e===S.auto?(0,F.jsx)(vi,{}):(0,F.jsx)(Ni,{}):(0,F.jsx)(li,{})},Zi=()=>(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Title,{level:2,children:"Add new Vesting"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Mi,{})})]}),zi=()=>{const{root:e,extend:t}=(0,r.useAppRoute)();return(0,F.jsx)(l.Layout,{className:"main-layout",children:(0,F.jsxs)(l.Row,{justify:"center",children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Pe,{})}),(0,F.jsx)(l.Col,{xs:24,xxl:16,className:"main-layout_content",children:(0,F.jsxs)(a.Switch,{children:[(0,F.jsx)(a.Route,{exact:!0,path:t("/dashboard"),component:Jt}),(0,F.jsx)(a.Route,{exact:!0,path:t("/vesting"),component:$s}),(0,F.jsx)(a.Route,{exact:!0,path:t("/vesting/add-new"),component:Zi}),(0,F.jsx)(a.Route,{exact:!0,path:t("/airdrop/add-new"),component:ci}),(0,F.jsx)(a.Route,{exact:!0,path:t("/airdrop"),component:nn}),(0,F.jsx)(a.Route,{exact:!0,path:t("/redeem/:distributorAddress"),component:He}),(0,F.jsx)(a.Redirect,{from:"*",to:`${e}/dashboard`})]})})]})})},Li=e=>{let{children:t}=e;return(0,F.jsxs)("div",{className:"background-container",children:[t,Array.apply(null,Array(20)).map(((e,t)=>(0,F.jsx)("div",{className:"circle-container",children:(0,F.jsx)("div",{className:"circle"})},t)))]})},Wi=()=>(0,F.jsx)("div",{className:"loading-screen",style:{display:"block"},children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,style:{height:256}}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Row,{gutter:[24,24],justify:"center",children:(0,F.jsx)(l.Col,{children:(0,F.jsxs)(l.Space,{direction:"vertical",align:"center",size:32,children:[(0,F.jsx)(l.Spin,{size:"large"}),(0,F.jsx)(l.Typography.Title,{level:5,children:"Welcome to Lightning Tunnel. The application is loading..."})]})})})})]})}),{sol:{utility:Ui}}=w,Fi="distributor",Hi=(0,T.createAsyncThunk)("distributor/getDistributor",(async(e,t)=>{let{address:s}=e,{getState:n}=t;const{distributors:i}=n();if(i[s])return{[s]:i[s]};const{account:r}=Ui.program;return{[s]:await r.distributor.fetch(s)}})),Ii=(0,T.createAsyncThunk)("distributor/getDistributors",(async()=>{const{account:e}=Ui.program;let t={};const s=await e.distributor.all();for(const{publicKey:n,account:i}of s){t[n.toBase58()]=i}return t})),Pi=(0,T.createAsyncThunk)("distributor/upsetDistributor",(e=>{let{address:t,distributorData:s}=e;return{[t]:s}})),Gi=(0,T.createSlice)({name:Fi,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ii.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Hi.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Pi.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{utility:Yi}}=w;let Ki=0;const Vi=()=>{const e=(0,i.useDispatch)(),t=(0,n.useCallback)((async()=>{Ki=Yi.program.provider.connection.onProgramAccountChange(Yi.program.programId,(t=>{const s=Yi.parseDistributorData(t.accountInfo.data);e(Pi({address:t.accountId.toBase58(),distributorData:s}))}),"confirmed",[{dataSize:160}])}),[e]),s=(0,n.useCallback)((async()=>{await e(Ii())}),[e]);return(0,n.useEffect)((()=>{s()}),[s]),(0,n.useEffect)((()=>(t(),()=>{(async()=>{Ki&&(await Yi.program.provider.connection.removeProgramAccountChangeListener(Ki),Ki=0)})()})),[e,t]),(0,F.jsx)(n.Fragment,{})},{sol:{utility:Oi}}=w,Ji="Receipts",qi=(0,T.createAsyncThunk)("Receipts/getReceipts",(async e=>{let{authorityAddress:t}=e;if(!ln.account.isAddress(t))throw new Error("Invalid address");const s=await Oi.program.account.receipt.all([{memcmp:{offset:8,bytes:t}}]);let n={};for(const i of s)n[i.publicKey.toBase58()]=i.account;return n})),Xi=(0,T.createAsyncThunk)("Receipts/upsetReceipt",(e=>{let{address:t,receipt:s}=e;return{[t]:s}})),Qi=(0,T.createSlice)({name:Ji,initialState:{},reducers:{},extraReducers:e=>{e.addCase(qi.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Xi.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{utility:_i}}=w;let $i=0;const er=()=>{const e=(0,i.useDispatch)(),t=(0,r.useWalletAddress)(),s=(0,n.useCallback)((async()=>{try{if(!ln.account.isAddress(t))return;await e(qi({authorityAddress:t})).unwrap()}catch(s){return window.notify({type:"error",description:"Cannot fetch data of receipts"})}}),[e,t]);(0,n.useEffect)((()=>{s()}),[s]);const a=(0,n.useCallback)((async()=>{$i=_i.program.provider.connection.onProgramAccountChange(_i.program.programId,(t=>{const s=_i.parseReceiptData(t.accountInfo.data);e(Xi({address:t.accountId.toBase58(),receipt:s}))}),"confirmed",[{dataSize:128},{memcmp:{offset:8,bytes:t}}])}),[e,t]);return(0,n.useEffect)((()=>(a(),()=>{(async()=>{$i&&(await _i.program.provider.connection.removeProgramAccountChangeListener($i),$i=0)})()})),[a]),(0,F.jsx)(n.Fragment,{})};var tr=s(97429).Buffer;const sr=()=>{const e=(0,i.useDispatch)(),t=(0,i.useSelector)((e=>e.distributors)),s=(0,n.useCallback)((async()=>{for(const s in t){const{metadata:n}=t[s];let i=(0,Ae.encode)(tr.from(n));Be[s]&&(i=Be[s]),e(Ns({cid:i}))}return e(ge(!1))}),[e,t]);return(0,n.useEffect)((()=>{const e=setTimeout((()=>s()),1e3);return()=>clearTimeout(e)}),[e,s]),(0,F.jsx)(n.Fragment,{})},nr=e=>{let{children:t}=e;const{distributors:s,metadatas:r}=(0,i.useSelector)((e=>e)),a=!Object.keys(s).length||!Object.keys(r).length;return(0,F.jsxs)(n.Fragment,{children:[(0,F.jsx)(Vi,{}),(0,F.jsx)(er,{}),(0,F.jsx)(sr,{}),a?(0,F.jsx)(Wi,{}):t]})},{sol:{utilityProgram:ir}}=w,rr=e=>{let{children:t}=e;const s=(0,r.useWalletAddress)(),[i,a]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(i)return;const e=(0,d.getAnchorProvider)(r.rpc,s,window.sentre.solana),t=new o.Utility(e.wallet,r.rpc,ir);window.senUtility=t,a(!0)}),[s,i]),i?(0,F.jsxs)(nr,{children:[(0,F.jsx)(ts,{}),t]}):null};var ar=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const lr={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof c.web3.PublicKey||e instanceof Uint8Array||e instanceof c.BN||ar.isBuffer(e)}},or=(0,T.configureStore)({middleware:e=>e({...lr,serializableCheck:!1}),devTools:!1,reducer:{main:we,steps:W,setting:Yn,file:Zn,distributors:Gi,recipients:ae,receipts:Qi,metadatas:Ds}}),cr=s.p+"static/media/background-LT.4c9e016f719ffe61dc63.png";var dr=s(45597);const{manifest:{appId:ur}}=w,pr=()=>{const e=(0,r.useSetBackground)();return(0,n.useEffect)((()=>{e({light:cr,dark:cr})}),[e]),(0,F.jsx)(r.AntdProvider,{appId:ur,prefixCls:ur,children:(0,F.jsx)(i.Provider,{store:or,children:(0,F.jsx)(rr,{children:(0,F.jsx)(Li,{children:(0,F.jsx)(zi,{})})})})})}},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.9c9c3fa1792c813f11b8.md"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.fea1f5708dfa87c097e9.png"},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.0a7aebcb98e7fae58a57.png"},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx-src_static_base_example-vesting_csv-src_static_base_example_csv-src_sta-765723.97e5ce52.chunk.js.map