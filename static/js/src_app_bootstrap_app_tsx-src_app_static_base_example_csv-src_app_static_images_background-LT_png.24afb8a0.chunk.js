(globalThis.webpackChunklightning_tunnel=globalThis.webpackChunklightning_tunnel||[]).push([["src_app_bootstrap_app_tsx-src_app_static_base_example_csv-src_app_static_images_background-LT_png"],{60781:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>_t});var n=s(55754),i=s(15780),r=s(92950),a=s(45055),l=s(32659),c=s(41630),o=s(95418),d=s(19289);let u,h,p;!function(e){e[e.auto=1]="auto",e[e.manual=2]="manual"}(u||(u={})),function(e){e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three"}(h||(h={})),function(e){e.activeKey="collapse-upload-csv"}(p||(p={}));const x="steps",m={step:h.one},y=(0,d.createAsyncThunk)("steps/onSelectStep",(async e=>({step:e}))),j=(0,d.createSlice)({name:x,initialState:m,reducers:{},extraReducers:e=>{e.addCase(y.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,g="main",f={methodSelected:void 0,mintSelected:"",visible:!1,isTyping:!1},w=(0,d.createAsyncThunk)("main/onSelectMethod",(async e=>({methodSelected:e}))),b=(0,d.createAsyncThunk)("main/onSelectedMint",(async e=>({mintSelected:e}))),C=(0,d.createAsyncThunk)("main/setVisible",(async e=>({visible:e}))),v=(0,d.createAsyncThunk)("main/setIsTyping",(async e=>({isTyping:e}))),S=(0,d.createSlice)({name:g,initialState:f,reducers:{},extraReducers:e=>{e.addCase(w.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(b.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(C.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(v.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,k="recipients",T=(0,d.createAsyncThunk)("recipients/addRecipients",(async e=>{let{recipients:t}=e;return{recipients:t}})),A=(0,d.createAsyncThunk)("recipients/addRecipient",(async(e,t)=>{let{recipient:s}=e,{getState:n}=t;const{recipients:{recipients:i}}=n(),r=[...i];return r.push(s),{recipients:r}})),R=(0,d.createAsyncThunk)("recipients/removeRecipients",(async()=>({recipients:[]}))),N=(0,d.createAsyncThunk)("recipients/removeRecipient",(async(e,t)=>{let{recipient:s}=e,{getState:n}=t;const{recipients:{recipients:i}}=n(),r=[...i],a=r.indexOf(s);return a>-1&&r.splice(a,1),{recipients:r}})),B=(0,d.createAsyncThunk)("recipients/setErrorDatas",(async e=>{let{errorData:t}=e;return{errorData:t}})),D=(0,d.createSlice)({name:k,initialState:{recipients:[],errorData:[]},reducers:{},extraReducers:e=>{e.addCase(T.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(A.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(R.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(B.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(N.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,I=()=>{const{recipients:{recipients:e},setting:{decimal:t}}=(0,n.useSelector)((e=>e));return{amountError:(0,r.useMemo)((()=>{for(const[s,n]of e){if(!o.account.isAddress(s))return!0;if(!t&&Number(n)%1!==0)return!0}return!1}),[t,e])}},z=e=>{const[t,s]=(0,r.useState)(void 0),{getDecimals:n}=(0,i.useMint)(),a=(0,r.useCallback)((async()=>{try{const t=await n(e);return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,r.useEffect)((()=>{a()}),[a]),t},E=(e,t,s)=>o.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(o.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},M=e=>{const{wallet:{address:t,lamports:s}}=(0,i.useWallet)(),{accounts:n}=(0,i.useAccount)(),{amount:r,mint:a}=n[e]||{},l=z(a)||0;return o.account.isAddress(t)&&o.account.isAddress(e)?e===t?E(o.DEFAULT_EMPTY_ADDRESS,s,9):E(a,r,l):E()},O=e=>{const[t,s]=(0,r.useState)(""),{wallet:{address:n}}=(0,i.useWallet)(),a=M(t);return(0,r.useEffect)((()=>{(async()=>{if(!o.account.isAddress(n)||!o.account.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const i=await t.deriveAssociatedAddress(n,e);s(i)}catch(i){return s("")}})()})),a},_=()=>{const{main:{mintSelected:e},recipients:{recipients:t,errorData:s},setting:{decimal:i}}=(0,n.useSelector)((e=>e)),a=z(e)||0,l=(0,r.useCallback)((e=>{if(!e.length||!a)return BigInt(0);let t=BigInt(0);for(const s of e){const e=s[1];i?t+=o.utils.decimalize(e,a):Number(e)%1===0&&(t+=BigInt(e))}return t}),[i,a]),c=s.filter((e=>!e.includes("")&&o.account.isAddress(e[0]))),d=l(t)+l(c),u=c.length,h=(0,r.useMemo)((()=>t.length),[t]);return{total:o.utils.undecimalize(d,a).toString(),quantity:h+u}},P=e=>{const{balance:t}=O(e),{total:s}=_();return(0,r.useMemo)((()=>t?t-Number(s):0),[t,s])};var Z=s(45263);const F=()=>{const e=(0,n.useDispatch)(),{recipients:{recipients:t,errorData:s},main:{isTyping:i,mintSelected:a}}=(0,n.useSelector)((e=>e)),{amountError:c}=I(),d=P(a),u=(0,r.useMemo)((()=>{if(!s)return!1;for(const[e,t]of s)if(!o.account.isAddress(e)||!t)return!0;return!1}),[s]),p=!t.length||c||u||i||d<0,x=(0,r.useCallback)((async()=>{await e(w()),e(R()),e(y(h.one))}),[e]);return(0,Z.jsxs)(l.Row,{gutter:[16,16],children:[(0,Z.jsx)(l.Col,{span:12,children:(0,Z.jsx)(l.Button,{type:"ghost",size:"large",onClick:x,block:!0,children:"Back"})}),(0,Z.jsx)(l.Col,{span:12,children:(0,Z.jsx)(l.Button,{size:"large",onClick:()=>e(y(h.three)),type:"primary",disabled:p,block:!0,children:"Continue"})})]})};var L=s(24656),Q=s.n(L),q=s(18268),Y=s.n(q);const U=e=>{let{visible:t,setVisible:s,title:n,description:i,onConfirm:r,onCancel:a,btnText:o}=e;return(0,Z.jsx)(l.Modal,{visible:t,closeIcon:(0,Z.jsx)(c.Z,{name:"close-outline"}),onCancel:()=>s(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,Z.jsxs)(l.Row,{gutter:[32,32],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Space,{size:15,align:"baseline",children:[(0,Z.jsx)(c.Z,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,Z.jsxs)(l.Space,{size:4,direction:"vertical",children:[(0,Z.jsx)(l.Typography.Text,{children:n}),(0,Z.jsx)(l.Typography.Text,{type:"secondary",children:i})]})]})}),(0,Z.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,Z.jsxs)(l.Space,{children:[(0,Z.jsx)(l.Button,{onClick:a,type:"ghost",children:"cancel"}),(0,Z.jsx)(l.Button,{onClick:r,type:"primary",children:o})]})})]})})};let K;const H=(0,r.forwardRef)(((e,t)=>{var s;let{max:n,onValue:i=(()=>{}),onChange:a=(()=>{}),...o}=e;const[d,u]=(0,r.useState)(""),[h,p]=(0,r.useState)(null),x=(0,r.useRef)(t),m=(0,r.useCallback)((e=>{const t=e=>{K&&(clearTimeout(K),K=void 0),u(e),K=setTimeout((()=>u("")),500)};return/^\d*(\.\d*)?$/.test(e)?n&&parseFloat(e)>parseFloat(n.toString())?t("Not enough balance"):i(e):t("Invalid character")}),[n,i]);return null!==h&&(null===x||void 0===x||null===(s=x.current)||void 0===s||s.setSelectionRange(h,h)),(0,Z.jsx)(l.Tooltip,{title:(0,Z.jsxs)(l.Space,{children:[(0,Z.jsx)(c.Z,{name:"warning"}),d]}),visible:!!d,children:(0,Z.jsx)(l.Input,{...o,onChange:e=>{a(e),p(e.target.selectionStart),m(e.target.value||"")},ref:x})})})),W="file",$=(0,d.createAsyncThunk)("file/setFileName",(async e=>({fileName:e}))),V=(0,d.createAsyncThunk)("file/onSelectedFile",(async(e,t)=>{let{checked:s,index:n}=e,{getState:i}=t;const{file:{selectedFile:r},recipients:{recipients:a,errorData:l}}=i();if(void 0===n){const e=[...a],t=[...l||[]];if(!s)return{selectedFile:[]};const n=[];for(const s in e)n.push(Number(s));for(const s in t)n.push(e.length+Number(s));return{selectedFile:n}}const c=[...r];if(s)c.push(n);else{const e=c.indexOf(n);c.splice(e,1)}return{selectedFile:c}})),J=(0,d.createAsyncThunk)("file/removeSelectedFile",(async()=>({selectedFile:[]}))),G=(0,d.createSlice)({name:W,initialState:{fileName:"",selectedFile:[]},reducers:{},extraReducers:e=>{e.addCase($.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(V.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(J.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,X={walletAddress:"",amount:""},ee=e=>{let{walletAddress:t,addNewRecipient:s,remove:n}=e;return(0,Z.jsx)(r.Fragment,{children:t?(0,Z.jsx)(l.Button,{type:"text",size:"small",style:{padding:0},onClick:n,icon:(0,Z.jsx)(c.Z,{style:{fonSize:20},name:"trash-outline"})}):(0,Z.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:s,children:"OK"})})},te=e=>{let{walletAddress:t,amount:s,index:i,isSelect:a=!1}=e;const[d,u]=(0,r.useState)(X),[h,p]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),[y,j]=(0,r.useState)(!1),{main:{mintSelected:g},recipients:{recipients:f},setting:{decimal:w},file:{selectedFile:b}}=(0,n.useSelector)((e=>e)),C=(0,n.useDispatch)(),S=z(g)||0,k=(0,r.useCallback)((async()=>o.account.isAddress(t)&&s?u({walletAddress:t,amount:s}):u(X)),[t,s]),R=(0,r.useCallback)((()=>{if(!s&&!t)return d.walletAddress||d.amount?C(v(!0)):C(v(!1))}),[s,C,d.amount,d.walletAddress,t]),B=(0,r.useCallback)((()=>{if(s)return w?p(""):Number(s)%1!==0?p("Should be natural numbers"):void 0}),[s,w]),D=!!t;return(0,r.useEffect)((()=>{k()}),[k]),(0,r.useEffect)((()=>{B()}),[B]),(0,r.useEffect)((()=>{R()}),[R]),(0,Z.jsxs)(l.Row,{gutter:[8,8],align:"middle",justify:"space-between",children:[a&&(0,Z.jsx)(l.Col,{children:(0,Z.jsx)(l.Checkbox,{checked:null===b||void 0===b?void 0:b.includes(i),onChange:e=>((e,t)=>C(V({checked:e,index:t})))(e.target.checked,i)})}),(0,Z.jsx)(l.Col,{span:16,children:(0,Z.jsx)(l.Input,{disabled:D,value:d.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:e=>{u({...d,[e.target.name]:e.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,Z.jsx)(l.Col,{span:6,children:(0,Z.jsx)(H,{disabled:D,value:s||d.amount,name:"amount",placeholder:"Amount",onValue:e=>u({...d,amount:e}),className:h?"recipient-input-error":"recipient-input",autoComplete:"off"})}),!a&&(0,Z.jsx)(l.Col,{children:(0,Z.jsx)(ee,{addNewRecipient:async()=>{const{walletAddress:e,amount:t}=d;if(!o.account.isAddress(e))return m("Wrong wallet address");if(!t)return p("Amount cannot be empty");for(const[n]of f)if(e===n)return j(!0);const s=[e,t];return m(""),p(""),await C(A({recipient:s})),u(X)},walletAddress:t,remove:()=>{if(void 0===i)return;const e=[...f];return e.splice(i,1),C(T({recipients:e}))}})}),(x||h)&&(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Space,{children:[(0,Z.jsx)(c.Z,{style:{color:"#f2323f"},name:"warning-outline"}),(0,Z.jsx)(l.Typography.Text,{type:"danger",children:x||h})]})}),(0,Z.jsx)(U,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",btnText:"merge",onConfirm:async()=>{const{walletAddress:e,amount:t}=d,s=f.find((t=>{let[s]=t;return s===e}));if(!s||!S)return;const n=o.utils.decimalize(s[1],S)+o.utils.decimalize(t,S),i=[e,o.utils.undecimalize(n,S)];return await C(N({recipient:s})),await C(A({recipient:i})),await j(!1),(h||x)&&(p(""),m("")),u(X)},visible:y,setVisible:j,onCancel:()=>j(!1)})]})},se=[void 0],ne=e=>{let{mintAddress:t,size:s=24,icon:n=(0,Z.jsx)(c.Z,{name:"diamond-outline"}),reversed:a=!1,...d}=e;const[u,h]=(0,r.useState)(se),{tokenProvider:p}=(0,i.useMint)(),{pools:x}=(0,i.usePool)(),m=(0,r.useCallback)((async e=>{const t=await p.findByAddress(e);if(null!==t&&void 0!==t&&t.logoURI)return t.logoURI}),[p]),y=(0,r.useCallback)((async()=>{if(!o.account.isAddress(t))return h(se);const e=Object.values(x||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:s}=e,n=await Promise.all([t,s].map(m));return a&&n.reverse(),h(n)}const s=await m(t);return h([s])}),[t,a,m,x]);return(0,r.useEffect)((()=>{y()}),[y]),1===u.length?(0,Z.jsx)(l.Avatar,{src:u[0],size:s,style:{backgroundColor:"#2D3355",border:"none"},...d,children:n}):(0,Z.jsx)(l.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...d,children:u.map(((e,t)=>(0,Z.jsx)(l.Avatar,{src:e,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:n},t)))})},ie="TOKN",re=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[a,l]=(0,r.useState)(ie),{tokenProvider:c}=(0,i.useMint)(),{pools:d}=(0,i.usePool)(),u=(0,r.useCallback)((async e=>{const t=await c.findByAddress(e);return null!==t&&void 0!==t&&t.symbol?t.symbol:e.substring(0,4)}),[c]),h=(0,r.useCallback)((async()=>{if(!o.account.isAddress(t))return l(ie);const e=Object.values(d||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:i}=e,r=await Promise.all([t,i].map(u));return n&&r.reverse(),l(r.join(s))}const i=await u(t);return l(i)}),[t,n,u,d,s]);return(0,r.useEffect)((()=>{h()}),[h]),(0,Z.jsx)("span",{children:a})};s(58421);var ae=s(34559);var le=s(63805);s(53933);le.ef;const ce=e=>{let{label:t,value:s}=e;return(0,Z.jsxs)(l.Row,{children:[(0,Z.jsx)(l.Col,{flex:"auto",children:(0,Z.jsx)(l.Typography.Text,{type:"secondary",children:t})}),(0,Z.jsx)(l.Col,{children:s})]})},oe=()=>{const{main:{mintSelected:e}}=(0,n.useSelector)((e=>e)),{total:t,quantity:s}=_(),{balance:i}=O(e),r=P(e);return(0,Z.jsxs)(l.Row,{gutter:[8,8],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(ce,{label:"Quantity",value:(0,Z.jsx)(l.Typography.Text,{children:s})})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(ce,{label:"Total",value:(0,Z.jsxs)(l.Space,{size:4,children:[(0,Z.jsx)(l.Typography.Title,{level:5,children:t}),(0,Z.jsx)(l.Typography.Title,{level:5,children:(0,Z.jsx)(re,{mintAddress:e})})]})})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(ce,{label:"Your balance",value:(0,Z.jsxs)(l.Space,{size:4,children:[(0,Z.jsx)(l.Typography.Text,{children:(0,ae.uR)(i).format("0,0.00[0000]")}),(0,Z.jsx)(l.Typography.Text,{children:(0,Z.jsx)(re,{mintAddress:e})})]})})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(ce,{label:"Remaining",value:(0,Z.jsxs)(l.Space,{size:4,children:[(0,Z.jsx)(l.Typography.Text,{children:(0,ae.uR)(r).format("0,0.00[0000]")}),(0,Z.jsx)(l.Typography.Text,{children:(0,Z.jsx)(re,{mintAddress:e})})]})})})]})},de=()=>(0,Z.jsx)(l.Card,{bordered:!1,style:{borderRadius:8,boxShadow:"unset"},bodyStyle:{padding:"12px 16px"},className:"card-total",children:(0,Z.jsx)(oe,{})}),ue=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;const{recipients:{errorData:i}}=(0,n.useSelector)((e=>e));return(0,Z.jsxs)(l.Row,{gutter:[16,8],align:"middle",wrap:!1,justify:"space-between",children:[(0,Z.jsx)(l.Col,{span:3,children:(0,Z.jsxs)(l.Space,{children:[t&&(0,Z.jsx)(l.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,Z.jsx)(l.Typography.Text,{type:"secondary",children:"No."})]})}),(0,Z.jsx)(l.Col,{span:12,children:(0,Z.jsx)(l.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,Z.jsx)(l.Col,{span:6,children:(0,Z.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})}),!!i.length&&(0,Z.jsx)(l.Col,{span:3})]})},he=e=>{let{editable:t=!1,wrongAddress:s=!1}=e;return s?(0,Z.jsx)(l.Tooltip,{title:"Wrong wallet address!",placement:"topLeft",arrowPointAtCenter:!0,children:(0,Z.jsx)(c.Z,{name:"close-circle-outline",style:{color:"#d72311"}})}):t?(0,Z.jsx)(l.Tooltip,{title:"Invalid  amount!",placement:"topLeft",arrowPointAtCenter:!0,children:(0,Z.jsx)(c.Z,{name:"warning-outline",style:{color:"#d72311"}})}):(0,Z.jsx)(c.Z,{name:"checkmark-outline",style:{color:"#03A326"}})},pe=e=>{let{wrongAddress:t=!1,isEdited:s=!1,onEdited:n=(()=>{}),onUpdate:i=(()=>{}),onDelete:r=(()=>{})}=e;return t?(0,Z.jsx)(l.Button,{type:"text",icon:(0,Z.jsx)(c.Z,{name:"trash-outline"}),onClick:r}):s?(0,Z.jsx)(l.Button,{type:"text",icon:(0,Z.jsx)(c.Z,{name:"cloud-upload-outline"}),onClick:i}):(0,Z.jsx)(l.Button,{type:"text",icon:(0,Z.jsx)(c.Z,{name:"create-outline"}),onClick:()=>n(!0)})},xe=(0,r.forwardRef)(((e,t)=>{let{accountAddress:s="",amount:i=0,selected:a=!1,onChecked:c=(()=>{}),index:d}=e;const u=(0,n.useDispatch)(),[h,p]=(0,r.useState)(!1),[x,m]=(0,r.useState)(""),{recipients:{errorData:y,recipients:j},file:{selectedFile:g},setting:{decimal:f}}=(0,n.useSelector)((e=>e)),w=(0,r.useRef)(t),b=!i,C=!o.account.isAddress(s),v=h?x:i,S=d-j.length,k=(0,r.useCallback)((()=>{if(!y.length||d-y.length<0)return;const e=[...y],[[t]]=e.splice(S,1);e.unshift([t,x]),u(B({errorData:e}))}),[u,y,S,d,x]),T=(0,r.useCallback)((async()=>{if(!y.length)return;const e=[...y];e.splice(S,1),u(B({errorData:e}))}),[u,y,S]),A=(0,r.useMemo)((()=>!!v&&(!f&&Number(i)%1!==0)),[i,v,f]);return(0,Z.jsxs)(l.Row,{gutter:[16,8],align:"middle",justify:"space-between",wrap:!1,children:[(0,Z.jsx)(l.Col,{span:3,children:(0,Z.jsxs)(l.Space,{children:[a&&(0,Z.jsx)(l.Checkbox,{checked:null===g||void 0===g?void 0:g.includes(d),onChange:e=>c(e.target.checked,d),className:"lightning-checkbox"}),(0,Z.jsxs)(l.Typography.Text,{type:"secondary",children:["#",d+1]})]})}),(0,Z.jsx)(l.Col,{span:12,children:(0,Z.jsx)(l.Tooltip,{title:s,children:(0,Z.jsx)(l.Typography.Text,{style:{color:C?"#F9575E":""},children:(0,ae.Xn)(s)})})}),(0,Z.jsx)(l.Col,{span:6,children:(0,Z.jsx)(H,{value:v,bordered:h,onValue:m,disabled:!h,style:{padding:0},className:A?"recipient-input-error":"recipient-input-auto",ref:w})}),!!y.length&&(0,Z.jsx)(l.Col,{span:3,children:b&&(0,Z.jsxs)(l.Space,{align:"center",children:[(0,Z.jsx)(he,{editable:b,wrongAddress:C}),(0,Z.jsx)(pe,{isEdited:h,wrongAddress:C,onEdited:e=>{p(e),w.current&&w.current.focus()},onUpdate:k,onDelete:T})]})})]})})),me=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,Z.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,Z.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,Z.jsxs)(l.Space,{size:24,children:[(0,Z.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,Z.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(p.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},ye=e=>{let{remove:t=(()=>{})}=e;const[s,i]=(0,r.useState)(!1),[a,o]=(0,r.useState)(),[d,u]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),m=(0,n.useDispatch)(),{file:{fileName:y,selectedFile:j},recipients:{recipients:g,errorData:f}}=(0,n.useSelector)((e=>e)),{amountError:w}=I(),b=(e,t)=>m(V({checked:e,index:t}));return(0,Z.jsxs)(l.Row,{gutter:[16,16],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,Z.jsxs)(l.Row,{gutter:8,children:[(0,Z.jsx)(l.Col,{flex:"auto",children:(0,Z.jsxs)(l.Space,{children:[(0,Z.jsx)(c.Z,{name:"document-attach-outline"}),(0,Z.jsx)(l.Typography.Text,{style:{color:"inherit"},children:y})]})}),(0,Z.jsx)(l.Col,{children:(0,Z.jsx)(l.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,Z.jsx)(c.Z,{name:"close-outline"}),onClick:()=>x(!0)})})]})})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Row,{gutter:[12,12],children:[(0,Z.jsx)(l.Col,{flex:"auto",children:s&&(0,Z.jsx)(l.Space,{children:(0,Z.jsx)(l.Button,{type:"text",size:"small",icon:(0,Z.jsx)(c.Z,{name:"trash-outline"}),onClick:()=>{if(null===j||void 0===j||!j.length)return;u(!0);const e=[...g],t=[...f||[]],s=e.filter(((e,t)=>!j.includes(t))),n=t.filter(((e,t)=>!j.includes(g.length+t)));m(B({errorData:n})),m(T({recipients:s})),m(J()),u(!1)},disabled:!(null!==j&&void 0!==j&&j.length),children:"Delete"})})}),(0,Z.jsx)(l.Col,{children:(0,Z.jsx)(me,{activeKey:a,selected:s,onSelect:i,onCollapsed:o})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Collapse,{activeKey:a,bordered:!1,className:"auto-add-new",children:(0,Z.jsx)(l.Collapse.Panel,{header:void 0,children:(0,Z.jsx)(te,{})},p.activeKey)})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Spin,{spinning:d,children:(0,Z.jsx)(l.Card,{bordered:!1,className:"card-content",children:(0,Z.jsxs)(l.Row,{gutter:[8,13],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(ue,{selected:s,onChecked:e=>m(V({checked:e}))})}),f.map(((e,t)=>{let[n,i]=e;return(0,Z.jsx)(l.Col,{span:24,className:t+1===f.length?"last-item-error-data":"",children:(0,Z.jsx)(xe,{accountAddress:n,amount:i,selected:s,onChecked:b,index:g.length+t})},n+t)})),g.map(((e,t)=>{let[n,i]=e;return(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(xe,{accountAddress:n,amount:i,selected:s,onChecked:b,index:t})},n+t)}))]})})})}),w&&(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Space,{size:12,children:[(0,Z.jsx)(c.Z,{style:{color:"#F9575E"},name:"warning-outline"}),(0,Z.jsx)(l.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(oe,{})})]})}),(0,Z.jsx)(U,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:h,setVisible:x,onConfirm:t,onCancel:()=>x(!1),btnText:"delete"})]})};const je=s.p+"static/media/icon-upload.a3c69638b092ea112d393cdc3d63d2c4.svg",ge=s.p+"static/media/example.5ac7e1383bf101857b35.csv",fe=()=>{const e=(0,n.useDispatch)(),[t,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[d,u]=(0,r.useState)({}),{recipients:{recipients:h},main:{mintSelected:p}}=(0,n.useSelector)((e=>e)),x=z(p)||0,m=(0,r.useCallback)((e=>({errorData:e.filter((e=>e.includes("")||!o.account.isAddress(e[0]))),successData:e.filter((e=>!e.includes("")&&o.account.isAddress(e[0])))})),[]),y=(0,r.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>Q().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;return t(s)}}))))(t),{errorData:i,successData:r}=await m(n);if(i&&e(B({errorData:i})),!x)return;const l={};let c=!1;for(const[e,s]of r)if(l[e]){c=!0;const[t,n]=l[e],i=o.utils.decimalize(n,x)+o.utils.decimalize(s,x);l[e]=[t,o.utils.undecimalize(i,x)]}else l[e]=[e,s];return c?(u(l),s(!1),a(!0),e($(t.name)),!0):(e($(t.name)),e(T({recipients:r})),s(!1),a(!1),!1)}),[m,e,x]),j=async()=>(e(R()),u({}),!0);return h.length?(0,Z.jsx)(ye,{remove:j}):(0,Z.jsxs)(l.Row,{gutter:[8,8],justify:"end",children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Spin,{spinning:t,children:(0,Z.jsx)(l.Upload.Dragger,{accept:".csv,.txt",beforeUpload:y,onRemove:j,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,Z.jsxs)(l.Space,{direction:"vertical",size:24,align:"center",children:[(0,Z.jsx)(l.Image,{src:je,preview:!1}),(0,Z.jsxs)(l.Space,{direction:"vertical",size:4,align:"center",children:[(0,Z.jsx)(l.Typography.Text,{children:"Click or Drop file to upload"}),(0,Z.jsxs)(l.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,Z.jsx)("code",{children:".csv"}),","," ",(0,Z.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,Z.jsx)(l.Col,{children:(0,Z.jsx)(l.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,Z.jsx)(c.Z,{name:"download-outline"}),onClick:async()=>{if(!ge)return;const e=await(async e=>fetch(e).then((function(e){var t;let s=null===(t=e.body)||void 0===t?void 0:t.getReader(),n=new TextDecoder("utf-8");return null===s||void 0===s?void 0:s.read().then((function(e){return n.decode(e.value)}))})))(ge)||"";Y()(e,"example.csv")},children:"Download sample"})}),(0,Z.jsx)(U,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",visible:i,setVisible:a,onConfirm:()=>{const t=Object.values(d);return e(T({recipients:t})),a(!1)},onCancel:()=>{a(!1),e($("")),u({})},btnText:"merge"})]})},we="setting",be=(0,d.createAsyncThunk)("setting/setDecimal",(async e=>({decimal:e}))),Ce=(0,d.createAsyncThunk)("setting/setEncryption",(async e=>({encryption:e}))),ve=(0,d.createAsyncThunk)("setting/setDisabled",(async e=>({disabled:e}))),Se=(0,d.createSlice)({name:we,initialState:{decimal:!0,encryption:!1,disabled:!1},reducers:{},extraReducers:e=>{e.addCase(be.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ce.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ve.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ke=()=>{const e=(0,n.useDispatch)(),{main:{mintSelected:t},setting:{decimal:s,disabled:i}}=(0,n.useSelector)((e=>e)),r=z(t)||0;return(0,Z.jsx)(l.Switch,{className:"decimal-switch",onChange:t=>{e(be(t))},checkedChildren:r,unCheckedChildren:r,disabled:i,checked:s})},Te=()=>{const e=(0,n.useDispatch)();return(0,Z.jsxs)(l.Row,{gutter:[8,8],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Space,{size:24,children:[(0,Z.jsx)(ke,{}),(0,Z.jsx)(l.Typography.Text,{children:"Decimals"})]})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Space,{size:24,children:[(0,Z.jsx)(l.Switch,{disabled:!0,onChange:t=>e(Ce(t))}),(0,Z.jsx)(l.Typography.Text,{children:"Encrypt confidential information"})]})})]})},Ae=()=>(0,Z.jsx)(l.Popover,{trigger:"click",placement:"bottom",title:null,content:(0,Z.jsx)(Te,{}),children:(0,Z.jsx)(l.Button,{type:"text",icon:(0,Z.jsx)(c.Z,{name:"cog-outline"})})});var Re=s(4550),Ne=s.n(Re),Be=s(51518),De=s.n(Be);const Ie=s.p+"static/media/twitter.9cbdafef0605b5c84ec56b271a60a6e8.svg",ze=e=>{let{visible:t,redeemLink:s,onClose:n=(()=>{})}=e;const[i,a]=(0,r.useState)(!1);return(0,Z.jsx)(l.Modal,{visible:t,closeIcon:(0,Z.jsx)(c.Z,{name:"close-outline"}),onCancel:n,footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,Z.jsxs)(l.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Image,{src:Ie,preview:!1})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,Z.jsx)(l.Typography.Title,{level:3,children:"Share on Twitter!"}),(0,Z.jsx)(l.Space,{size:4,children:(0,Z.jsx)(l.Typography.Text,{type:"secondary",children:"Share this link so your recipients can get their tokens"})})]})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Row,{gutter:8,justify:"space-between",children:[(0,Z.jsx)(l.Col,{className:"share-link",span:20,children:(0,Z.jsx)(l.Typography.Text,{children:(e=>e.substring(0,40)+"...")(s)})}),(0,Z.jsx)(l.Col,{span:4,children:(0,Z.jsx)(l.Tooltip,{title:"Copied",visible:i,children:(0,Z.jsx)(De(),{text:s,children:(0,Z.jsx)(l.Button,{size:"large",type:"ghost",onClick:async()=>{a(!0),await(0,ae.sA)(1500),a(!1)},children:"copy"})})})})]})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Button,{size:"large",type:"primary",block:!0,onClick:()=>{let e="http://twitter.com/intent/tweet?";const t={url:s,text:"Your prize has arrived! Redeem now at Sen Hub: "};for(const s in t)e+="&"+s+"="+encodeURIComponent(t[s]||"");window.open(e,"_blank")},children:"Share now"})})]})})};const Ee={appId:"lightning_tunnel",url:"https://github.com/DescartesNetwork/sen-lightning-tunnel/index.js"},Me={development:{...Ee},staging:{...Ee},production:{...Ee}};var Oe=s(97425),_e=s(71256);const Pe=class{constructor(){this._wallet=window.sentre.wallet,this._publicKey=new _e.PublicKey("GuestAccount11111111111111111111111111111111"),this._init=async()=>{const e=await this._wallet.getAddress();this._publicKey=new _e.PublicKey(e)},this.signTransaction=async e=>this._wallet.signTransaction(e),this.signAllTransactions=async e=>{let t=[];for(const s of e){const e=await this.signTransaction(s);t.push(e)}return t},this._init()}get publicKey(){return console.warn("This is an async getter for interface consistency. Please do not fully rely on this function."),this._publicKey}},Ze={devnet:{node:"https://api.devnet.solana.com",utility:new Oe.Utility(new Pe,"https://api.devnet.solana.com"),fee:1e6,taxman:"8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"},testnet:{node:"https://api.testnet.solana.com",utility:new Oe.Utility(new Pe,"https://api.devnet.solana.com"),fee:1e6,taxman:"8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"},mainnet:{node:"https://sentre.genesysgo.net",utility:new Oe.Utility(new Pe,"https://sentre.genesysgo.net"),fee:1e6,taxman:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}},Fe={manifest:Me[le.OB],sol:Ze[le.ef]},{manifest:{appId:Le}}=Fe,Qe=e=>{let{distributorAddress:t}=e;const[s,n]=(0,r.useState)(!1),i=`${window.location.origin}/app/${Le}/redeem/${t}?autoInstall=true`;return(0,Z.jsxs)(r.Fragment,{children:[(0,Z.jsx)(l.Button,{onClick:()=>n(!0),type:"text",style:{color:"#42E6EB"},children:"share"}),(0,Z.jsx)(ze,{visible:s,onClose:()=>n(!1),redeemLink:i})]})},qe=e=>{let{total:t,mint:s}=e;const n=z(s)||0;return(0,Z.jsx)(l.Typography.Text,{children:(0,ae.uR)(o.utils.undecimalize(BigInt(t),n)).format("0,0.[0000]")})},Ye=[{title:"TIME",dataIndex:"time",render:e=>(0,Z.jsx)(l.Typography.Text,{children:Ne()(e).format("MMM DD, YYYY HH:mm")})},{title:"TOKEN",dataIndex:"mint",render:e=>(0,Z.jsxs)(l.Space,{children:[(0,Z.jsx)(ne,{mintAddress:e}),(0,Z.jsx)(re,{mintAddress:e})]})},{title:"AMOUNT",dataIndex:"total",render:(e,t)=>{let{mint:s}=t;return(0,Z.jsx)(qe,{total:e,mint:s})}},{title:"ACTION",dataIndex:"distributorAddress",render:e=>(0,Z.jsx)(Qe,{distributorAddress:e})}],Ue=()=>{const[e,t]=(0,r.useState)(!1),{history:s}=(0,n.useSelector)((e=>e));return(0,Z.jsxs)(r.Fragment,{children:[(0,Z.jsx)(l.Button,{type:"text",icon:(0,Z.jsx)(c.Z,{name:"document-text-outline"}),onClick:()=>t(!0)}),(0,Z.jsx)(l.Modal,{visible:e,onCancel:()=>t(!1),closeIcon:(0,Z.jsx)(c.Z,{name:"close-outline"}),footer:!1,className:"card-lightning",style:{paddingBottom:0},children:(0,Z.jsxs)(l.Row,{gutter:[32,32],style:{maxHeight:500},className:"scrollbar",children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Typography.Title,{level:5,children:"Transfer history"})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Space,{align:"baseline",children:[(0,Z.jsx)(c.Z,{name:"information-circle-outline"}),(0,Z.jsx)(l.Typography.Text,{children:"The history of each transaction is saved only on the device where the transaction was made."})]})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Table,{columns:Ye,dataSource:s,pagination:!1,rowKey:e=>e.distributorAddress})})]})})]})};var Ke=s(3007);const{manifest:{appId:He}}=Fe;const We=class{constructor(e,t){if(this.db=void 0,this.key=void 0,this.set=async e=>await this.db.setItem(this.key,e),this.get=async()=>await this.db.getItem(this.key)||[],this.update=async e=>{const t=await this.get(),s=t.findIndex((t=>t.distributorAddress===e.distributorAddress));return t[s]=e,this.set(t)},this.append=async e=>{const t=[e,...await this.get()];return this.set(t)},!e)throw new Error("Invalid key");if(this.key=e,!o.account.isAddress(t))throw new Error("Invalid wallet address");const s=(0,Ke.f)(t,He);if(!s)throw new Error("Invalid storage");this.db=s}},$e="history",Ve=(0,d.createAsyncThunk)("history/getHistory",(async e=>{if(!o.account.isAddress(e))throw new Error("Wallet is not connected");const t=new We("history",e);return await t.get()})),Je=(0,d.createAsyncThunk)("history/setStateHistory",(async(e,t)=>{let{cid:s,state:n,walletAddress:i}=e,{getState:r}=t;const{history:a}=r(),l=[...a],c=l.find((e=>e.cid===s)),o=l.findIndex((e=>e.cid===s));l[o]={...c,state:n};return new We("history",i).update({...c,state:n}),l})),Ge=(0,d.createSlice)({name:$e,initialState:[],reducers:{},extraReducers:e=>{e.addCase(Ve.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Je.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Xe=e=>{let{label:t=""}=e;const{step:s}=(0,n.useSelector)((e=>e.steps)),a=(0,n.useDispatch)(),{wallet:{address:c}}=(0,i.useWallet)(),o=(0,r.useMemo)((()=>s===h.two?h.two:s===h.three?h.three:h.one),[s]),d=(0,r.useMemo)((()=>s===h.three?h.three:h.two),[s]);return(0,r.useEffect)((()=>{a(Ve(c))}),[a,c]),(0,Z.jsxs)(l.Row,{children:[(0,Z.jsx)(l.Col,{flex:"auto",children:(0,Z.jsxs)(l.Space,{direction:"vertical",size:12,children:[(0,Z.jsx)(l.Radio.Group,{value:s,className:"steps",buttonStyle:"solid",children:(0,Z.jsxs)(l.Space,{children:[(0,Z.jsx)(l.Radio.Button,{className:"rate-btn",value:o}),(0,Z.jsx)(l.Radio.Button,{className:"rate-btn",value:d}),(0,Z.jsx)(l.Radio.Button,{className:"rate-btn",value:h.three})]})}),(0,Z.jsx)(l.Typography.Title,{level:5,children:t})]})}),(0,Z.jsx)(l.Col,{children:(0,Z.jsxs)(l.Space,{children:[(0,Z.jsx)(Ue,{}),(0,Z.jsx)(Ae,{})]})})]})},et=()=>(0,Z.jsx)(l.Card,{bordered:!1,className:"card-lightning",children:(0,Z.jsxs)(l.Row,{gutter:[32,32],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(Xe,{label:"Fill in recipient information"})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(fe,{})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(F,{})})]})}),tt=()=>{const e=(0,n.useDispatch)(),{recipients:{recipients:t},main:{mintSelected:s,isTyping:i}}=(0,n.useSelector)((e=>e)),{quantity:a}=_(),{amountError:c}=I(),o=P(s),d=(0,r.useCallback)((async()=>{await e(w()),await e(R()),e(y(h.one))}),[e]),u=a<=0||c||o<0||i;return(0,Z.jsx)(l.Card,{className:"card-lightning",bordered:!1,children:(0,Z.jsxs)(l.Row,{gutter:[32,32],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(Xe,{label:"Fill in recipient information"})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Row,{gutter:[24,24],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Row,{gutter:[8,8],children:[t&&t.map(((e,t)=>{let[s,n]=e;return(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(te,{amount:n,walletAddress:s,index:t})},s+t)})),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(te,{})})]})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(de,{})})]})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Row,{gutter:[16,16],children:[(0,Z.jsx)(l.Col,{span:12,children:(0,Z.jsx)(l.Button,{onClick:d,size:"large",type:"ghost",block:!0,children:"Back"})}),(0,Z.jsx)(l.Col,{span:12,children:(0,Z.jsx)(l.Button,{size:"large",type:"primary",onClick:()=>e(y(h.three)),block:!0,disabled:u,children:"Continue"})})]})})]})})},st="Select",nt=e=>{let{tokens:t,activeMintAddress:s,onSelect:n}=e;return(0,Z.jsxs)(l.Select,{onChange:n,value:s||st,className:"select-token",children:[(0,Z.jsx)(l.Select.Option,{value:st,children:(0,Z.jsxs)(l.Space,{children:[(0,Z.jsx)(c.Z,{style:{fontSize:25},name:"help-outline"}),(0,Z.jsx)(l.Typography.Text,{style:{fontSize:16},children:"Select a token"})]})}),t.map((e=>(0,Z.jsx)(l.Select.Option,{children:(0,Z.jsxs)(l.Space,{children:[(0,Z.jsx)(ne,{mintAddress:e}),(0,Z.jsx)(re,{mintAddress:e})]})},e)))]})};var it=s(48744),rt=s.n(it),at=s(87288);const lt=e=>{let{label:t="",value:s=""}=e;return(0,Z.jsxs)(l.Row,{gutter:[8,8],children:[(0,Z.jsx)(l.Col,{flex:"auto",children:(0,Z.jsxs)(l.Typography.Text,{type:"secondary",children:[t," "]})}),(0,Z.jsx)(l.Col,{children:s})]})};var ct=s(83868);const ot=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open((0,ae.kU)(t),"_blank")}),dt=e=>window.notify({type:"error",description:e.message}),ut=e=>{let{onBack:t}=e;return(0,Z.jsx)(l.Button,{size:"large",type:"primary",block:!0,onClick:t,children:"Home"})};var ht=s(97429).Buffer;const{sol:{utility:pt,fee:xt,taxman:mt},manifest:{appId:yt}}=Fe,jt=()=>{const[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),{main:{mintSelected:u},setting:{decimal:p},recipients:{recipients:x}}=(0,n.useSelector)((e=>e)),{wallet:{address:m}}=(0,i.useWallet)(),j=(0,n.useDispatch)(),g=z(u)||0,{total:f,quantity:b}=_(),{balance:C}=O(u),v=P(u),S=(0,r.useMemo)((()=>{if(!x.length||!g)return;const e=x.map(((e,t)=>{let[s,n]=e;const i=p?o.utils.decimalize(n,g).toString():n;return{authority:o.account.fromAddress(s),amount:new it.BN(i),startedAt:new it.BN(0),salt:Oe.MerkleDistributor.salt(t.toString())}}));return new Oe.MerkleDistributor(e).toBuffer()}),[x,g,p]),k={fee:new it.BN(xt),feeCollectorAddress:mt},T=(0,r.useCallback)((async()=>{await j(w()),await j(R()),j(y(h.one))}),[j]);return(0,Z.jsxs)(l.Card,{bordered:!1,className:"card-lightning",children:[(0,Z.jsxs)(l.Row,{gutter:[32,32],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(Xe,{label:"Confirm transfer"})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Row,{gutter:[24,24],justify:"center",children:[(0,Z.jsx)(l.Col,{children:(0,Z.jsxs)(l.Space,{direction:"vertical",size:12,align:"center",children:[(0,Z.jsx)(l.Typography.Text,{children:"Total transfer"}),(0,Z.jsx)(l.Typography.Title,{level:1,children:f}),(0,Z.jsx)(l.Tag,{style:{margin:0,borderRadius:4,color:"rgb(66, 230, 235)",background:"rgba(66, 230, 235, 0.1)",border:"unset"},children:(0,Z.jsx)(re,{mintAddress:u})})]})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Card,{bordered:!1,className:"card-total",children:(0,Z.jsxs)(l.Row,{gutter:[8,8],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(lt,{label:"Time",value:Ne()(new Date).format("DD MMM, YYYY HH:MM")})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(lt,{label:"Quantity",value:b})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(lt,{label:"Your balance",value:(0,Z.jsxs)(l.Typography.Text,{children:[(0,ae.uR)(C).format("0,0.00[0000]")," ",(0,Z.jsx)(re,{mintAddress:u})]})})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(lt,{label:"Remaining",value:(0,Z.jsxs)(l.Typography.Text,{children:[(0,ae.uR)(v).format("0,0.00[00]")," ",(0,Z.jsx)(re,{mintAddress:u})]})})})]})})})]})}),(0,Z.jsx)(l.Col,{span:24,children:c?(0,Z.jsx)(ut,{onBack:T}):(0,Z.jsxs)(l.Row,{gutter:[8,8],children:[(0,Z.jsx)(l.Col,{span:12,children:(0,Z.jsx)(l.Button,{size:"large",onClick:()=>j(y(h.two)),block:!0,type:"ghost",children:"BACK"})}),(0,Z.jsx)(l.Col,{span:12,children:(0,Z.jsx)(l.Button,{size:"large",onClick:async()=>{if(S){t(!0);try{const e=Oe.MerkleDistributor.fromBuffer(S),s=new ct.Z,n=await s.set(S.toJSON().data),{multihash:{digest:i}}=at.k0.parse(n),r=ht.from(i),{txId:l,distributorAddress:c}=await pt.initializeDistributor({tokenAddress:u,total:e.getTotal(),merkleRoot:e.deriveMerkleRoot(),metadata:r,endedAt:0,feeOptions:k}),o={total:e.getTotal().toNumber(),time:(new Date).toString(),mint:u,distributorAddress:c},h=new We("history",m);return await h.append(o),await j(Ve(m)),d(!0),ot("Airdrop",l),a(`${window.location.origin}/app/${yt}/redeem/${c}?autoInstall=true`)}catch(e){window.notify({type:"error",description:e.message})}finally{t(!1)}}},type:"primary",loading:e,disabled:v<0,block:!0,children:"TRANSFER"})})]})})]}),(0,Z.jsx)(ze,{visible:Boolean(s),onClose:()=>a(""),redeemLink:s})]})},gt=e=>{let{label:t,description:s,active:n}=e;return(0,Z.jsxs)(r.Fragment,{children:[n?(0,Z.jsx)(c.Z,{name:"checkbox-sharp",style:{position:"absolute",top:0,right:0,color:"#42E6EB",fontSize:20}}):null,(0,Z.jsxs)(l.Row,{gutter:[12,12],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Typography.Title,{level:5,children:t})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Typography.Text,{type:"secondary",children:s})})]})]})},ft=()=>{const[e,t]=(0,r.useState)(u.manual),[s,a]=(0,r.useState)("Select"),c=(0,n.useDispatch)(),{accounts:o}=(0,i.useAccount)(),d=(e=>{const{tokenProvider:t}=(0,i.useMint)(),[s,n]=(0,r.useState)([]),a=(0,r.useCallback)((async()=>{const s=[];for(const n of e)await t.findByAddress(n)&&s.push(n);return n(s)}),[t,e]);return(0,r.useEffect)((()=>{a()}),[a]),s})((0,r.useMemo)((()=>Object.values(o).map((e=>e.mint))),[o])),p=(0,r.useMemo)((()=>"Select"===s||!e),[s,e]);return(0,Z.jsx)(l.Card,{className:"card-lightning",bordered:!1,children:(0,Z.jsxs)(l.Row,{gutter:[32,32],align:"middle",children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(Xe,{label:"Select token type and input method"})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Row,{gutter:[24,24],children:[(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(nt,{activeMintAddress:s,tokens:d,onSelect:e=>{a(e),c(b(e))}})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Space,{size:12,direction:"vertical",style:{width:"100%"},children:[(0,Z.jsx)(l.Typography.Text,{children:"Choose transfer info input method"}),(0,Z.jsx)(l.Radio.Group,{onChange:e=>t(e.target.value),style:{width:"100%"},className:"select-card",children:(0,Z.jsxs)(l.Row,{gutter:[12,12],children:[(0,Z.jsx)(l.Col,{xs:24,sm:12,md:12,lg:12,children:(0,Z.jsx)(l.Radio.Button,{value:u.manual,children:(0,Z.jsx)(gt,{label:"Manual",description:"With a small number of recipients.",active:e===u.manual})})}),(0,Z.jsx)(l.Col,{xs:24,sm:12,md:12,lg:12,children:(0,Z.jsx)(l.Radio.Button,{value:u.auto,children:(0,Z.jsx)(gt,{label:"Automatic",description:"Support bulk import with a CSV file.",active:e===u.auto})})})]})})]})})]})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Button,{size:"large",onClick:()=>{c(w(e)),c(y(h.two))},block:!0,type:"primary",disabled:p,children:"Continue"})})]})})},wt=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,n.useSelector)((e=>e));return e?t===h.two?e===u.auto?(0,Z.jsx)(et,{}):(0,Z.jsx)(tt,{}):(0,Z.jsx)(jt,{}):(0,Z.jsx)(ft,{})},{manifest:{appId:bt}}=Fe,Ct=()=>{const e=(0,a.useLocation)(),t=(0,a.useHistory)(),s=(0,r.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),n=(0,r.useCallback)((e=>s.get(e)),[s]),i=(0,r.useCallback)((e=>{const t=new URLSearchParams;for(const s in e)t.set(s,e[s]);return t.toString()}),[]),l=(0,r.useMemo)((()=>`/app/${bt}`),[]);return{getQuery:n,generateQuery:i,pushHistory:(0,r.useCallback)((e=>t.push(`${l}${e}`)),[l,t]),appRoute:l}};const vt=s.p+"static/media/redeem.7e0fa96ccc80d536f7730bb34ab5753b.svg";var St=s(97429).Buffer;const{sol:{utility:kt,taxman:Tt,fee:At}}=Fe,Rt=()=>{const[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1),[d,u]=(0,r.useState)(),[h,p]=(0,r.useState)(0),[x,m]=(0,r.useState)(),[y,j]=(0,r.useState)(!0),{getDecimals:g}=(0,i.useMint)(),{wallet:{address:f}}=(0,i.useWallet)(),{pushHistory:w}=Ct(),b=(0,a.useParams)().distributorAddress,C={fee:new it.BN(At),feeCollectorAddress:Tt},v=(0,r.useCallback)((async()=>{if(!b)return;const e=new ct.Z;n(!0);try{const t=await kt.program.account.distributor.fetch(b);m(t);const s=await(e=>{const t=new Uint8Array([18,32]),s=new Uint8Array(t.length+(null===e||void 0===e?void 0:e.length));return s.set(t),s.set(e,t.length),at.k0.decode(s).toString()})(t.metadata),i=await e.get(s),r=Oe.MerkleDistributor.fromBuffer(St.from(i));return u(r)}catch(t){dt(t)}finally{n(!1)}}),[b]),S=(0,r.useMemo)((()=>{if(!d)return;const e=d.receipients;for(const t of e)if(f===t.authority.toBase58())return t;return window.notify({type:"warning",description:"You are not in the list."}),j(!1)}),[d,f]),k=(0,r.useCallback)((async()=>{if(x&&S&&d)try{const{salt:e}=S,t=await kt.deriveReceiptAddress(e,b),s=await kt.getReceiptData(t);if(!s)return;const n=s.claimedAt.toNumber();return window.notify({type:"error",description:`You have claimed at ${Ne()(1e3*n).format("DD/MM/YYYY HH:mm")}`}),j(!1)}catch(e){}}),[x,d,b,S]),T=(0,r.useCallback)((async()=>{if(!x)return;const e=x.mint.toBase58();try{const t=await g(e);return p(t)}catch(t){return p(0)}}),[x,g]);return(0,r.useEffect)((()=>{T()}),[T]),(0,r.useEffect)((()=>{v()}),[v]),(0,r.useEffect)((()=>{k()}),[k]),(0,Z.jsx)(l.Row,{gutter:[24,24],justify:"center",className:"lightning-container",children:(0,Z.jsx)(l.Col,{xs:24,md:16,lg:12,xl:10,children:(0,Z.jsx)(l.Card,{style:{minHeight:430},loading:s,className:"card-lightning",bordered:!1,children:(0,Z.jsxs)(l.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,Z.jsx)(l.Col,{span:24,style:{textAlign:"left"},children:(0,Z.jsx)(l.Button,{type:"text",icon:(0,Z.jsx)(c.Z,{name:"arrow-back-outline"}),onClick:()=>w(""),style:{margin:-12},children:"Back"})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsx)(l.Image,{src:vt,preview:!1})}),(0,Z.jsx)(l.Col,{span:24,children:(0,Z.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,Z.jsx)(l.Typography.Title,{level:3,children:"Redemption!"}),(0,Z.jsxs)(l.Space,{size:4,children:[(0,Z.jsx)(l.Typography.Text,{type:"secondary",children:"Let's take"})," ",(0,Z.jsxs)(l.Typography.Title,{level:5,style:{color:"#42E6EB"},children:[o.utils.undecimalize(BigInt((null===S||void 0===S?void 0:S.amount.toNumber())||0),h)," ",(0,Z.jsx)(re,{mintAddress:(null===x||void 0===x?void 0:x.mint.toBase58())||""})]})]})]})}),(0,Z.jsx)(l.Col,{span:24,children:y?(0,Z.jsx)(l.Button,{type:"primary",onClick:async()=>{if(!S||!d)return;const e=d.deriveProof(S);if(d.verifyProof(e,S))try{t(!0);const{txId:s}=await kt.claim({distributorAddress:b,proof:e,data:S,feeOptions:C});return ot("Redeem",s),j(!1)}catch(s){dt(s)}finally{t(!1)}},loading:e,children:"Redeem"}):(0,Z.jsx)(ut,{onBack:()=>w("")})})]})})})})},Nt=s.p+"static/media/background-LT.4c9e016f719ffe61dc63.png",Bt=()=>(0,Z.jsx)(l.Row,{gutter:[24,24],justify:"center",className:"lightning-container",children:(0,Z.jsx)(l.Col,{xs:24,md:16,lg:12,xl:10,children:(0,Z.jsx)(wt,{})})}),Dt=()=>{const{appRoute:e}=Ct(),{setBackground:t}=(0,i.useUI)();return(0,r.useEffect)((()=>{t({light:Nt,dark:Nt})}),[t]),(0,Z.jsxs)(a.Switch,{children:[(0,Z.jsx)(a.Route,{exact:!0,path:e,component:Bt}),(0,Z.jsx)(a.Route,{path:`${e}/redeem/:distributorAddress`,component:Rt})]})},It=e=>{let{children:t}=e;return(0,Z.jsxs)("div",{className:"background-container",children:[t,Array.apply(null,Array(20)).map(((e,t)=>(0,Z.jsx)("div",{className:"circle-container",children:(0,Z.jsx)("div",{className:"circle"})},t)))]})};var zt=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const Et={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof _e.PublicKey||e instanceof rt()||e instanceof zt}},Mt=(0,d.configureStore)({middleware:e=>e(Et),devTools:!1,reducer:{main:S,steps:j,setting:Se,recipients:D,file:G,history:Ge}}),{manifest:{appId:Ot}}=Fe,_t=()=>(0,Z.jsx)(i.UIProvider,{appId:Ot,antd:{prefixCls:Ot},children:(0,Z.jsx)(i.MintProvider,{children:(0,Z.jsx)(i.PoolProvider,{children:(0,Z.jsx)(i.AccountProvider,{children:(0,Z.jsx)(i.WalletProvider,{children:(0,Z.jsx)(n.Provider,{store:Mt,children:(0,Z.jsx)(It,{children:(0,Z.jsx)(Dt,{})})})})})})})})},57452:()=>{"use strict";const e={ttl:3e4},t={limit:{calls:10,time:1e3},cache:e};class s{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class n{static set(t,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;this.mapCache.set(t,s),setTimeout((()=>{this.mapCache.delete(t)}),n.ttl)}static get(e){return this.mapCache.get(e)}}n.mapCache=new Map;class i{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new r(e);return this.mapInstance.set(t,s),s}static async load(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof e&&(e=JSON.stringify(e));let r=i.getSingleFlight(n);i.mapInstance.set(e,r);const a=new s(e);return r.load(a,t)}}i.mapInstance=new Map;class r{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(t,e)}async load(e,t){const s=n.get(e.key);if(s)return Promise.resolve(s);let i=!1,r=this.mapRequestCalling.get(e.key);return r||(r=e,i=!0,this.mapRequestCalling.set(r.key,r)),new Promise(((e,s)=>{if(!r)return s("Not found request!");r.add(e,s),i&&this.fetch(r,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{n.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}},3007:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c,f:()=>o});var n=s(15454),i=s.n(n),r=s(95418),a=s(83868);class l{constructor(e){if(this.dbName=void 0,this.driver=void 0,this.ipfs=void 0,this.createInstance=e=>i().createInstance({driver:this.driver,name:this.dbName,storeName:e}),this.dropInstance=async e=>{const t=this.createInstance(e);return await t.clear(),await i().dropInstance({name:this.dbName,storeName:e})},this.all=async()=>{let e={};const t=(await this.createInstance("sentre").getItem("appIds")||[]).flat().concat(["sentre"]);for(const s of t){e[s]={};const t=this.createInstance(s);await t.iterate(((t,n)=>{e[s][n]=t}))}return e},this.fetch=async e=>await this.ipfs.get(e),this.backup=async()=>{const e=await this.all();return await this.ipfs.set(e)},this.restore=async e=>{const t=await this.fetch(e);for(const s in t){const e=await this.createInstance(s);for(const n in t[s]){const i=t[s][n];await e.setItem(n,i)}}return t},!r.account.isAddress(e))throw new Error("Invalid address");this.dbName=e,this.driver=[i().WEBSQL,i().LOCALSTORAGE],this.ipfs=new a.Z}}const c=l,o=(e,t)=>r.account.isAddress(e)?new l(e).createInstance(t):void 0},83868:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(87288),i=s(34559),r=s(97429).Buffer;class a{constructor(){this._ipfs=async()=>{try{return window.ipfs||(window.ipfs=await(0,n.Ue)()),window.ipfs}catch(e){return await(0,i.sA)(500),await this._ipfs()}},this.get=async e=>{if(!a.isCID(e))throw new Error("Invalid CID");const t=await this._ipfs(),s=await t.cat(e);let n="";for await(const i of s)n+=r.from(i).toString();return JSON.parse(n)},this.set=async e=>{if(!e)throw new Error("Empty data");const t=JSON.stringify(e),s=await this._ipfs(),{cid:n}=await s.add(t);return n.toString()}}}a.isCID=e=>{try{return!!e&&n.bf.multihash(e)}catch(t){return!1}};const l=a},63805:(e,t,s)=>{"use strict";s.d(t,{Bv:()=>a,OB:()=>i,ef:()=>r,f4:()=>l});var n=s(53933);const i="production",r=(()=>{switch(n.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})(),a=(()=>{switch(r){case"devnet":return 103;case"testnet":return 102;default:return 101}})(),l={devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com",mainnet:"development"===i?"https://api.mainnet-beta.solana.com":"https://solitary-autumn-water.solana-mainnet.quiknode.pro/dcbac9d444818a20ac583541dec35b44c6840888/"}[r]},53933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});const n="sentre",i=window.localStorage,r=e=>{try{return e?JSON.parse(e):null}catch(t){return null}},a={set:(e,t)=>{let s=r(i.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,i.setItem(n,JSON.stringify(s))},get:e=>{let t=r(i.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{a.set(e,null)}},l=a},34559:(e,t,s)=>{"use strict";s.d(t,{Xn:()=>c,kU:()=>o,sA:()=>l,uR:()=>d});var n=s(95418),i=s(16200),r=s.n(i),a=s(63805);s(57452);const l=e=>new Promise((t=>setTimeout(t,e))),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.substring(0,t)+s+e.substring(e.length-t,e.length)},o=e=>n.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${a.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${a.ef}`,d=e=>e?r()(e):r()("0")},43094:()=>{},69159:()=>{},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},88795:()=>{},89408:()=>{},47956:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_app_bootstrap_app_tsx-src_app_static_base_example_csv-src_app_static_images_background-LT_png.24afb8a0.chunk.js.map