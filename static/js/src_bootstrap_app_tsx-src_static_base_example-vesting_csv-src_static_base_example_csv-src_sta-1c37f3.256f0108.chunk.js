(globalThis.webpackChunklightning_tunnel=globalThis.webpackChunklightning_tunnel||[]).push([["src_bootstrap_app_tsx-src_static_base_example-vesting_csv-src_static_base_example_csv-src_sta-1c37f3"],{98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>c,default:()=>d});var n,i,r,a=s(92950);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},l.apply(this,arguments)}function o(e,t){let{title:s,titleId:o,...c}=e;return a.createElement("svg",l({width:96,height:96,viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},c),s?a.createElement("title",{id:o},s):null,n||(n=a.createElement("rect",{width:96,height:96,rx:24,fill:"#42E6EB"})),i||(i=a.createElement("path",{d:"M35.528 47.6849L67.0423 15.9004L67.9877 15L52.1855 40.4816L61.1896 39.0409L48.809 54.2128L57.4079 53.9427L29 81L41.3356 61.4161L33.9523 61.7763L44.1719 46.9195L35.528 47.6849Z",fill:"#233333"})),r||(r=a.createElement("path",{opacity:.5,fillRule:"evenodd",clipRule:"evenodd",d:"M48 74C62.3594 74 74 62.3594 74 48C74 40.004 70.3905 32.851 64.7119 28.0816L66.8996 24.7006C73.6723 30.2011 78 38.5951 78 48C78 64.5685 64.5685 78 48 78C44.7357 78 41.5931 77.4786 38.6511 76.5146L42.0603 73.3184C43.968 73.7642 45.9565 74 48 74ZM32.8095 69.1033C26.262 64.382 22 56.6887 22 48C22 33.6406 33.6406 22 48 22C50.4385 22 52.7986 22.3357 55.0366 22.9634L58.2158 19.7842C55.0272 18.6296 51.5871 18 48 18C31.4315 18 18 31.4315 18 48C18 58.0387 22.9307 66.9258 30.5025 72.3715L32.8095 69.1033Z",fill:"#233333"})))}const c=a.forwardRef(o),d=s.p+"static/media/logo.edd6e68b96629106774ae0fdbf3926d7.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return r.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return a.default}});var n=l(s(70854)),i=l(s(27803)),r=l(s(98463)),a=l(s(83272));function l(e){return e&&e.__esModule?e:{default:e}}const o=[n.default,i.default];t.h0=o},75309:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Background:()=>fr,Layout:()=>gr,Page:()=>Cr,__esModule:()=>jr.X$,logo:()=>jr.jY,panels:()=>jr.h0,readme:()=>jr.ng});var n=s(92950),i=s(55754),r=s(2328),a=s(45055),l=s(32659),o=s(69716),c=s(95418),d=s(97425),u=s(27906),p=s(4065),h=s(99370);const x=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(r.util.explorer(t),"_blank")}),m=e=>(console.log("er",e),window.notify({type:"error",description:e.message})),j=async e=>fetch(e).then((function(e){var t;let s=null===(t=e.body)||void 0===t?void 0:t.getReader(),n=new TextDecoder("utf-8");return null===s||void 0===s?void 0:s.read().then((function(e){return n.decode(e.value)}))})),y=async e=>{const t=e.join(",");let s=`https://api.coingecko.com/api/v3/simple/price?ids=${t}&vs_currencies=usd`;const n=await r.DataLoader.load("fetchMulCGK"+t,(()=>fetch(s).then((e=>e.json())))),i={};for(const r in n)i[r]=n[r].usd;return i};const g={appId:"lightning_tunnel",url:"https://descartesnetwork.github.io/lightning-tunnel/index.js"},f={development:{...g},production:{...g}};var C=s(97042);const b=class{constructor(){this._wallet=window.sentre.wallet,this._publicKey=new C.PublicKey("GuestAccount11111111111111111111111111111111"),this._init=async()=>{const e=await this._wallet.getAddress();this._publicKey=new C.PublicKey(e)},this.signTransaction=async e=>this._wallet.signTransaction(e),this.signAllTransactions=async e=>{let t=[];for(const s of e){const e=await this.signTransaction(s);t.push(e)}return t},this._init()}get publicKey(){return this._publicKey}},w={devnet:{node:r.rpc,utility:new d.Utility(new b,r.rpc,"AKTU61s8NJ8zJATQiceREdhXbedRnKrd1BVgnCuxmD2F"),fee:1e6,utilityProgram:"AKTU61s8NJ8zJATQiceREdhXbedRnKrd1BVgnCuxmD2F",taxman:"8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"},testnet:{node:r.rpc,utility:new d.Utility(new b,r.rpc),fee:1e6,utilityProgram:d.DEFAULT_SEN_UTILITY_PROGRAM_ID,taxman:"8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"},mainnet:{node:r.rpc,utility:new d.Utility(new b,r.rpc),fee:1e6,utilityProgram:d.DEFAULT_SEN_UTILITY_PROGRAM_ID,taxman:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}},v={manifest:f[r.env],sol:w[r.net]},{manifest:{appId:T}}=v,A=()=>{const e=(0,a.useLocation)(),t=(0,a.useHistory)(),s=(0,n.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),i=(0,n.useCallback)((e=>s.get(e)),[s]),r=(0,n.useCallback)((e=>{const t=new URLSearchParams;for(const s in e)t.set(s,e[s]);return t.toString()}),[]),l=(0,n.useMemo)((()=>`/app/${T}`),[]);return{getQuery:i,generateQuery:r,pushHistory:(0,n.useCallback)((e=>t.push(`${l}${e}`)),[l,t]),appRoute:l}};var S=s(19289);let k,R,N,D,I,B;!function(e){e[e.auto=1]="auto",e[e.manual=2]="manual"}(k||(k={})),function(e){e[e.SelectMethod=1]="SelectMethod",e[e.AddRecipient=2]="AddRecipient",e[e.ConfirmTransfer=3]="ConfirmTransfer"}(R||(R={})),function(e){e.activeKey="collapse-upload-csv"}(N||(N={})),function(e){e.waiting="Waiting",e.ready="Ready",e.claimed="Claimed",e.expired="Expired",e.loading="Loading"}(D||(D={})),function(e){e.Vesting="vesting",e.Dashboard="dashboard",e.Airdrop="airdrop"}(I||(I={})),function(e){e.valid="valid",e.invalid="invalid"}(B||(B={}));const E="MMM DD, YYYY HH:mm",M="all",O="steps",Z={step:R.SelectMethod},z=(0,S.createAsyncThunk)("steps/onSelectStep",(async e=>({step:e}))),L=(0,S.createSlice)({name:O,initialState:Z,reducers:{},extraReducers:e=>{e.addCase(z.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var F=s(73620),P=s(45263);let _;!function(e){e.six_months="6months",e.one_year="1y",e.tow_years="2y",e.four_years="4y"}(_||(_={}));const U=[{label:"6 months",value:_.six_months},{label:"1 year",value:_.one_year},{label:"2 years",value:_.tow_years},{label:"4 years",value:_.four_years}],V=()=>{const[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(U),a=(0,i.useSelector)((e=>e.recipients.expirationTime)),o=(0,i.useSelector)((e=>e.recipients.globalUnlockTime)),c=(0,i.useSelector)((e=>e.recipients.configs.distributeIn)),d=(0,i.useSelector)((e=>e.recipients.configs.frequency)),u=(0,i.useDispatch)(),p=e=>{t(e.target.value)},h=n=>{if(n)return u(te({configs:{distributeIn:n}}));if(!(0,F.Z)(e))return;const i=[...s];return-1===i.findIndex((t=>t.value===e))&&i.push({label:e,value:e}),r(i),t(""),u(te({configs:{distributeIn:e}}))},x=(0,n.useMemo)((()=>{const e=o+(0,F.Z)(c);return a<e&&a?"Must be less than the expiration time.":(0,F.Z)(c)<(0,F.Z)(d)?"Must be greater than the distribution frequency.":""}),[c,a,d,o]);return(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Text,{className:"caption",children:"Distribute in"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Select,{className:"select-vesting-data",value:c,onChange:h,placement:"bottomRight",dropdownRender:t=>(0,P.jsxs)(P.Fragment,{children:[t,!(0,F.Z)(e)&&e&&(0,P.jsx)(l.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:"Wrong format"}),(0,P.jsx)(l.Input,{onChange:p,placeholder:"E.g: 1d, 1months, 1y,...",value:e,suffix:(0,P.jsx)(l.Button,{style:{color:"#42E6EB"},onClick:()=>h(),type:"text",children:"Add"})})]}),children:s.map(((e,t)=>{let{label:s,value:n}=e;return(0,P.jsx)(l.Select.Option,{value:n,children:s},t)}))})}),x&&(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:x})})]})};let W;!function(e){e.one="1months",e.three="3months",e.six="6months",e.twelve="12months"}(W||(W={}));const H=[{label:"1 months",value:W.one},{label:"3 months",value:W.three},{label:"6 months",value:W.six},{label:"12 months",value:W.twelve}],Y=()=>{const[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(H),a=(0,i.useSelector)((e=>e.recipients.configs.frequency)),o=(0,i.useDispatch)(),c=e=>{t(e.target.value)};return(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Text,{className:"caption",children:"Distribution frequency"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Select,{value:a,className:"select-vesting-data",placement:"bottomRight",onChange:e=>o(te({configs:{frequency:e}})),dropdownRender:n=>(0,P.jsxs)(P.Fragment,{children:[n,!(0,F.Z)(e)&&e&&(0,P.jsx)(l.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:"Wrong format"}),(0,P.jsx)(l.Input,{onChange:c,placeholder:"E.g: 1d, 1months, 1y,...",value:e,suffix:(0,P.jsx)(l.Button,{style:{color:"#42E6EB"},onClick:()=>(n=>{if(n)return o(te({configs:{frequency:n}}));if(!(0,F.Z)(e))return;const i=[...s];return-1===i.findIndex((t=>t.value===e))&&i.push({label:e,value:e}),r(i),t(""),o(te({configs:{frequency:e}}))})(),type:"text",children:"Add"})})]}),children:s.map((e=>{let{label:t,value:s}=e;return(0,P.jsx)(l.Select.Option,{value:s,children:t},s)}))})})]})};let K;!function(e){e.one_months="1months",e.three_months="3months",e.six_months="6months",e.twelve="12months"}(K||(K={}));const $=[{label:"1 month",value:K.one_months},{label:"3 months",value:K.three_months},{label:"6 months",value:K.six_months},{label:"12 months",value:K.twelve}],G=()=>{const[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)($),a=(0,i.useSelector)((e=>e.recipients.configs.cliff)),o=(0,i.useDispatch)(),c=e=>{t(e.target.value)},d=n=>{if(n)return o(te({configs:{cliff:n}}));if(!(0,F.Z)(e))return"Wrong format!";const i=[...s];return-1===i.findIndex((t=>t.value===e))&&i.push({label:e,value:e}),r(i),t(""),o(te({configs:{cliff:e}}))};return(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Text,{className:"caption",children:"Cliff"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Select,{className:"select-vesting-data",placement:"bottomRight",value:a,onChange:d,dropdownRender:t=>(0,P.jsxs)(P.Fragment,{children:[t,!(0,F.Z)(e)&&e&&(0,P.jsx)(l.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:"Wrong format"}),(0,P.jsx)(l.Input,{onChange:c,placeholder:"E.g: 1d, 1months, 1y,...",value:e,suffix:(0,P.jsx)(l.Button,{style:{color:"#42E6EB"},onClick:()=>d(),type:"text",children:"Add"})})]}),children:s.map((e=>{let{label:t,value:s}=e;return(0,P.jsx)(l.Select.Option,{value:s,children:t},s)}))})})]})},J="recipients",q={recipientInfos:{},expirationTime:0,globalUnlockTime:0,configs:{frequency:W.one,distributeIn:_.six_months,cliff:K.one_months}},Q=(0,S.createAsyncThunk)("recipients/setExpiration",(async e=>({expirationTime:e}))),X=(0,S.createAsyncThunk)("recipients/setGlobalUnlockTime",(async e=>({globalUnlockTime:e}))),ee=(0,S.createAsyncThunk)("recipients/addRecipients",(async e=>{let{recipientInfos:t}=e;return{recipientInfos:t}})),te=(0,S.createAsyncThunk)("recipients/setGlobalConfigs",(async(e,t)=>{let{configs:s}=e,{getState:n}=t;const{recipients:{configs:i}}=n();return{configs:{...i,...s}}})),se=(0,S.createAsyncThunk)("recipients/setRecipient",(async(e,t)=>{let{walletAddress:s,nextRecipients:n}=e,{getState:i}=t;const{recipients:{recipientInfos:r}}=i(),a={...r};return a[s]=n,{recipientInfos:a}})),ne=(0,S.createAsyncThunk)("recipients/removeRecipient",(async e=>e)),ie=(0,S.createAsyncThunk)("recipients/editRecipient",(async(e,t)=>{let{walletAddress:s,configs:n,unlockTime:i}=e,{getState:r}=t;const{recipients:a}=r(),{distributeIn:l,frequency:o}=n;let c={...a.recipientInfos};const d=c[s],u=[];let p=0;for(const{amount:m}of d)p+=Number(m);const h=Math.floor((0,F.Z)(l)/(0,F.Z)(o)),x=Number(p)/h;for(let m=0;m<h;m++){let e=0,t=x;if(0===m&&(e=i),0!==m&&(e=(0,F.Z)(o)+u[m-1].unlockTime),m===h-1){let e=0;for(const{amount:t}of u)e+=Number(t);t=Number(p)-e}const n={address:s,amount:t.toString(),unlockTime:e};u[m]=n}return c[s]=u,{recipientInfos:c}})),re=(0,S.createAsyncThunk)("recipients/removeRecipients",(async()=>({recipientInfos:{}}))),ae=(0,S.createAsyncThunk)("recipients/addAmountAndTime",(async(e,t)=>{let{walletAddress:s,nextRecipientInfos:n}=e,{getState:i}=t;const{recipients:{recipientInfos:r}}=i(),a={...r};return a[s]=n,{recipientInfos:a}})),le=(0,S.createSlice)({name:J,initialState:q,reducers:{},extraReducers:e=>{e.addCase(se.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(re.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Q.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(X.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(te.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ne.fulfilled,((e,t)=>{let{payload:s}=t;delete e.recipientInfos[s]})).addCase(ie.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ee.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ae.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var oe=s(74939),ce=s(76347);const de="empty",ue=e=>{let{activeMintAddress:t,onSelect:s}=e;const[i,r]=(0,n.useState)(!1),a=(0,n.useCallback)((e=>{s(e),r(!1)}),[s]);return(0,P.jsxs)(n.Fragment,{children:[(0,P.jsx)(l.Button,{className:"select-token",type:"text",onClick:()=>r(!0),children:t!==de?(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(oe.Z,{mintAddress:t}),(0,P.jsx)(h.Z,{mintAddress:t}),(0,P.jsx)(o.Z,{name:"chevron-down-outline"})]}):(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(oe.Z,{mintAddress:t}),(0,P.jsx)(l.Typography.Text,{children:"Select a token"})]})}),(0,P.jsx)(l.Modal,{visible:i,onCancel:()=>r(!1),footer:null,closable:!1,centered:!0,className:"card-lightning mint-select-modal",destroyOnClose:!0,children:(0,P.jsx)(ce.Z,{onChange:a})})]})};let pe;!function(e){e.Vesting="vesting",e.Airdrop="airdrop"}(pe||(pe={}));const he="main",xe={methodSelected:k.manual,mintSelected:de,visible:!1,isTyping:!1,typeDistribute:pe.Airdrop,TGE:"",TGETime:0,metadataLoading:!0},me=(0,S.createAsyncThunk)("main/onSelectMethod",(async e=>({methodSelected:e}))),je=(0,S.createAsyncThunk)("main/onSelectedMint",(async e=>({mintSelected:e}))),ye=(0,S.createAsyncThunk)("main/setVisible",(async e=>({visible:e}))),ge=(0,S.createAsyncThunk)("main/setIsTyping",(async e=>({isTyping:e}))),fe=(0,S.createAsyncThunk)("main/setMetadataLoading",(async e=>({metadataLoading:e}))),Ce=(0,S.createAsyncThunk)("main/setTypeDistribute",(async e=>({typeDistribute:e}))),be=(0,S.createAsyncThunk)("main/setTGE",(async e=>({TGE:e}))),we=(0,S.createAsyncThunk)("main/setTGETime",(async e=>({TGETime:e}))),ve=(0,S.createSlice)({name:he,initialState:xe,reducers:{},extraReducers:e=>{e.addCase(me.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(je.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ye.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ge.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(fe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ce.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(be.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(we.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Te=()=>{const e=(0,i.useDispatch)(),{pushHistory:t}=A();return{onPushAndClear:async s=>(await e(z(R.SelectMethod)),await e(me(k.manual)),await e(re()),await e(X(0)),await e(Q(0)),await e(be("")),await e(we(0)),await e(je(de)),t(s))}};var Ae=s(76026),Se=s(15454),ke=s.n(Se),Re=s(21995),Ne=s.n(Re),De=s(32743),Ie=ke().createInstance({name:"cache-ipfs",storeName:"cache-ipfs"});const Be=["https://cloudflare-ipfs.com/ipfs/{CID_STRING}/file","https://ipfs.rove.to/ipfs/{CID_STRING}/file","https://{CID_STRING}.ipfs.nftstorage.link/file","https://{CID_STRING}.ipfs.4everland.io/file","https://gateway.ipfs.io/ipfs/{CID_STRING}/file","https://{CID_STRING}.ipfs.cf-ipfs.com/file"];var Ee=s(97429).Buffer;const Me=new class{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://api.web3.storage";this.key=e,this.IDL=t,this.endpoint=s,this.provider=void 0,this.decodeCID=e=>{if("string"===typeof e)return e;const t=new Uint8Array([18,32]),s=new Uint8Array(t.length+(null===e||void 0===e?void 0:e.length));s.set(t),s.set(e,t.length);return De.CID.decode(s).toString()},this.provider=new Ae.xk({endpoint:new URL(this.endpoint),token:this.key})}get methods(){const e={};for(const t of this.IDL)e[t]={set:e=>this.set(e),get:e=>this.get(e)};return e}async set(e){const t=new Ae.$B([JSON.stringify(e)],"file",{type:"application/json"}),s=await this.provider.put([t]),{multihash:{digest:n}}=De.CID.parse(s);return new Promise((t=>{let i=setTimeout((()=>this.set(e)),5e3);this.get(s).then((async e=>{e&&(clearTimeout(i),await Ie.setItem(this.decodeCID(n),{data:e,checked:!0}),t({cid:s,digest:n}))}))}))}async get(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=this.decodeCID(e);return p.DataLoader.load(`ipfs:${s}`,(async()=>new Promise(((e,n)=>{let i=setTimeout((async()=>{async function r(t){try{await Ie.setItem(s,{data:t,checked:!0})}catch(n){console.log("ipfs set cache error:",n)}e(t),clearTimeout(i)}if(t){const e=await Ie.getItem(s);if(e)return r(e.data)}for(const e of Be)if(s.startsWith("baf"))try{Ne().get(e.replace("{CID_STRING}",s),{headers:{"Content-Type":"application/json",accept:"application/json"}}).then((e=>{e.data&&r(e.data)}))}catch(a){}try{const e=await this.provider.get(s),t=(await(null===e||void 0===e?void 0:e.files())||[])[0],n=new FileReader;if(!t)throw new Error("Cannot read empty file");n.onload=async()=>{var e;const t=null===(e=n.result)||void 0===e?void 0:e.toString();if(!t)throw new Error("Cannot read empty file");return r(JSON.parse(t))},n.readAsText(t)}catch(l){return n(l.message)}}))}))))}}("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDU4M0Q5MmIwMGJlNjZDNjg2NDUyY0JkNTZEMTlmOWZlMTRhNjhCYTQiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTg4MDM1NjE3MTcsIm5hbWUiOiJCb29zdGVyRGV2In0.kaP_EXFB2q7Zo8_CWZfGI1n5R-AoZzfVTWpDdZ_REcM",["metadata","backupMetadata"]),Oe="metadatas",Ze=(0,S.createAsyncThunk)("metadatas/getMetaData",(async(e,t)=>{let{cid:s}=e,{getState:n}=t;const{metadatas:i}=n(),r=i[s];if(r)return{[s]:r};let a=Ee.from([]);try{a=await Me.methods.metadata.get(s)}catch(l){a=Ee.from([])}return void 0===a.checked||void 0===a.createAt?{[s]:{checked:!1,createAt:0,data:Ee.from(a)}}:{[s]:{...a,data:Ee.from(a.data)}}})),ze=(0,S.createAsyncThunk)("metadatas/initMetadatas",(async e=>{const t={};for(const n in e)try{const s=Ee.from(e[n].data);t[n]={...e[n],data:s}}catch(s){}return t})),Le=(0,S.createAsyncThunk)("metadatas/getMetadatas",(async(e,t)=>{let{getState:s}=t;const{metadatas:n}=s();return n})),Fe=(0,S.createAsyncThunk)("metadatas/setMetadata",(async(e,t)=>{let{cid:s,createAt:n}=e,{getState:i}=t;const{metadatas:r}=i(),a={...r};return a[s]={...a[s],checked:!0,createAt:n},a})),Pe=(0,S.createSlice)({name:Oe,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ze.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ze.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Fe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,_e=()=>{const e=(0,i.useSelector)((e=>e.distributors)),t=(0,i.useSelector)((e=>e.metadatas));return(0,n.useCallback)((s=>{const{metadata:n}=e[s],i=Me.decodeCID(n);return t[i]}),[e,t])};const Ue=s.p+"static/media/redeem.7e0fa96ccc80d536f7730bb34ab5753b.svg";const Ve=s.p+"static/media/redeem_success.8bde41be38896c8e01a5d6ec87a1e40e.svg";const We=s.p+"static/media/not_member.27313d62e5aba95e40f44df8f5f39d28.svg";var He=s(97429).Buffer;const{sol:{utility:Ye,taxman:Ke,fee:$e}}=v,Ge=()=>{const[e,t]=(0,n.useState)(!1),[s,j]=(0,n.useState)(!1),[y,g]=(0,n.useState)(),[f,C]=(0,n.useState)(0),[b,w]=(0,n.useState)(),[v,T]=(0,n.useState)(!0),[S,k]=(0,n.useState)(!0),[R,N]=(0,n.useState)(""),D=(0,i.useSelector)((e=>e.receipts)),I=(0,r.useGetMintDecimals)(),B=(0,r.useWalletAddress)(),{pushHistory:E}=A(),{onPushAndClear:M}=Te(),O=_e(),Z=(0,a.useParams)().distributorAddress,z={fee:new u.BN($e),feeCollectorAddress:Ke},L=(0,n.useCallback)((async()=>{if(Z){j(!0);try{const e=await Ye.program.account.distributor.fetch(Z);w(e);const{data:t}=O(Z),s=d.MerkleDistributor.fromBuffer(He.from(t));return g(s)}catch(e){m(e)}finally{j(!1)}}}),[Z,O]),F=(0,n.useMemo)((()=>{if(!y)return;const e=y.receipients;for(const t of e)if(B===t.authority.toBase58())return t;return k(!1),T(!1)}),[y,B]),_=(0,n.useCallback)((async()=>{if(b&&F&&y)try{const{salt:e}=F,t=await Ye.deriveReceiptAddress(e,Z),s=D[t];if(!s)return;const{amount:n}=s;return N(p.utilsBN.undecimalize(n,f)),T(!1)}catch(e){}}),[f,b,Z,y,D,F]),U=(0,n.useCallback)((async()=>{if(!b)return;const e=b.mint.toBase58();try{const t=await I({mintAddress:e})||0;return C(t)}catch(t){return C(0)}}),[b,I]);(0,n.useEffect)((()=>{U()}),[U]),(0,n.useEffect)((()=>{L()}),[L]),(0,n.useEffect)((()=>{_()}),[_]);const V=(0,n.useMemo)((()=>S?R?Ve:Ue:We),[R,S]);return(0,P.jsx)(l.Row,{gutter:[24,24],justify:"center",className:"lightning-container",children:(0,P.jsx)(l.Col,{xs:24,md:16,lg:14,children:(0,P.jsx)(l.Card,{style:{minHeight:430},loading:s,className:"card-lightning",bordered:!1,children:(0,P.jsxs)(l.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,P.jsx)(l.Col,{span:24,style:{textAlign:"left"},children:(0,P.jsx)(l.Button,{type:"text",icon:(0,P.jsx)(o.Z,{name:"arrow-back-outline"}),onClick:()=>E(""),style:{margin:-12},children:"Back"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Image,{src:V,preview:!1})}),(0,P.jsx)(l.Col,{span:24,children:S?(0,P.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,P.jsxs)(l.Typography.Title,{level:3,children:["Redemption ",R&&"successfully","!"]}),(0,P.jsxs)(l.Space,{size:4,children:[(0,P.jsx)(l.Typography.Text,{type:"secondary",children:R?"You took":"Let's take"}),(0,P.jsxs)(l.Typography.Title,{level:5,style:{color:"#42E6EB"},children:[c.utils.undecimalize(BigInt((null===F||void 0===F?void 0:F.amount.toString())||0),f)," ",(0,P.jsx)(h.Z,{mintAddress:(null===b||void 0===b?void 0:b.mint.toBase58())||""})]})]})]}):(0,P.jsx)(l.Typography.Title,{level:3,children:"You are not in the list!"})}),(0,P.jsx)(l.Col,{span:24,children:v?(0,P.jsx)(l.Button,{type:"primary",onClick:async()=>{if(!F||!y)return;const e=y.deriveProof(F);if(y.verifyProof(e,F))try{t(!0);const{txId:s}=await Ye.claim({distributorAddress:Z,proof:e,data:F,feeOptions:z});return x("Redeem",s),T(!1)}catch(s){m(s)}finally{t(!1)}},loading:e,children:"Redeem"}):(0,P.jsx)(l.Button,{size:"large",type:"primary",block:!0,onClick:()=>M(""),children:"Home"})})]})})})})};var Je=s(98463);const qe=[{label:"Dashboard",key:I.Dashboard,icon:(0,P.jsx)(o.Z,{name:"grid-outline",style:{fontSize:24}})},{label:"Airdrop",key:I.Airdrop,icon:(0,P.jsx)(o.Z,{name:"cloud-download-outline",style:{fontSize:24}})},{label:"Vesting",key:I.Vesting,icon:(0,P.jsx)(o.Z,{name:"receipt-outline",style:{fontSize:24}})}],Qe=()=>{const[e,t]=(0,n.useState)(I.Dashboard),{pathname:s}=(0,a.useLocation)(),{appRoute:r}=A(),{onPushAndClear:c}=Te(),d=(0,i.useDispatch)(),{Content:u,Footer:p}=l.Layout,h=(0,n.useCallback)((()=>{const e=s.replace(`${r}/`,""),n=e.indexOf("/");return t(-1===n?e:e.slice(0,n))}),[r,s]),x=(0,n.useCallback)((()=>{if(e!==I.Dashboard)return d(Ce(e))}),[d,e]);return(0,n.useEffect)((()=>{h()}),[h]),(0,n.useEffect)((()=>{x()}),[x]),(0,P.jsxs)(l.Layout,{className:"sidebar-layout",children:[(0,P.jsx)(u,{children:(0,P.jsxs)(l.Row,{children:[(0,P.jsx)(l.Col,{span:24,style:{padding:"24px 16px"},children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Avatar,{size:24,src:Je.default,shape:"square"}),(0,P.jsx)(l.Typography.Title,{level:5,children:"Lightning tunnel"})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Menu,{selectedKeys:[e],onClick:async e=>c(`/${e.key}`),className:"sidebar-content",items:qe})})]})}),(0,P.jsx)(p,{className:"sidebar_footer",children:(0,P.jsxs)(l.Space,{size:12,style:{cursor:"pointer"},onClick:()=>window.open("https://academy.sentre.io/lightning-tunnel-version-2/","_blank"),children:[(0,P.jsx)(o.Z,{style:{fontSize:24},name:"information-circle-outline"}),(0,P.jsx)(l.Typography.Title,{level:5,children:"Guidelines"})]})})]})},Xe=e=>{let{label:t,icon:s,value:n,unit:i="$",loading:a=!1,cardStyles:o={}}=e;return(0,P.jsx)(l.Card,{bordered:!1,className:"card-lightning",bodyStyle:o,loading:a,style:{height:"100%"},children:(0,P.jsxs)(l.Row,{align:"middle",children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{direction:"vertical",children:[(0,P.jsx)(l.Typography.Text,{type:"secondary",children:t}),(0,P.jsxs)(l.Typography.Title,{level:4,children:[i,r.util.numeric(n).format("0,0.[000]")]})]})}),(0,P.jsx)(l.Col,{children:s})]})})};var et=s(36645);const tt=()=>{const e=(0,r.useGetMintDecimals)();return{getTotalBalance:(0,n.useCallback)((async t=>{const s=[],n=[];for(const{mint:e,amount:o}of t){var i;const t=new u.BN(o.toString()),a=await r.tokenProvider.findByAddress(e),l=null===a||void 0===a||null===(i=a.extensions)||void 0===i?void 0:i.coingeckoId;l&&!t.isZero()&&(n.push(l),s.push({mint:e,amount:t,ticket:l}))}const a=await y(n);let l=0;for(const{mint:r,amount:o,ticket:c}of s){const t=await e({mintAddress:r})||0;l+=Number(p.utilsBN.undecimalize(o,t))*(a[c]||0)}return l}),[e])}},st=()=>{const[e,t]=(0,n.useState)(0),[s,i]=(0,n.useState)(!0),a=(0,r.useAccounts)(),{getTotalBalance:l}=tt(),o=(0,n.useCallback)((async()=>{try{i(!0);const e=await l(Object.values(a));return t(e)}catch(e){}finally{i(!1)}}),[a,l]);return(0,n.useEffect)((()=>{o()}),[o]),{loading:s,totalUSD:e}};var nt,it,rt,at,lt;function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ot.apply(this,arguments)}function ct(e,t){let{title:s,titleId:i,...r}=e;return n.createElement("svg",ot({width:32,height:32,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),s?n.createElement("title",{id:i},s):null,nt||(nt=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.8469 13.0356C14.5183 13.0356 14.1639 13.3376 14.1639 13.8073C14.1639 14.1846 14.2447 14.303 14.27 14.3352C14.3041 14.3785 14.3845 14.4501 14.6444 14.5429L17.9811 15.7069C18.3785 15.8483 18.8437 16.074 19.1925 16.5207C19.5495 16.9779 19.6913 17.5441 19.6913 18.1827C19.6913 19.5891 18.6018 20.8005 17.162 20.8005H15.0796C13.5125 20.8005 12.3066 19.4842 12.3066 17.939C12.3066 17.4292 12.7199 17.0159 13.2297 17.0159C13.7395 17.0159 14.1528 17.4292 14.1528 17.939C14.1528 18.5427 14.6085 18.9544 15.0796 18.9544H17.162C17.4945 18.9544 17.8451 18.6594 17.8451 18.1827C17.8451 17.8132 17.7653 17.6927 17.7374 17.657C17.7014 17.6109 17.6187 17.5378 17.3646 17.4471L14.0279 16.2831C13.6363 16.1437 13.1688 15.9221 12.8181 15.4754C12.4584 15.0175 12.3177 14.4491 12.3177 13.8073C12.3177 12.4161 13.4033 11.1895 14.8469 11.1895H16.9294C18.4965 11.1895 19.7023 12.5058 19.7023 14.051C19.7023 14.5608 19.2891 14.9741 18.7793 14.9741C18.2695 14.9741 17.8562 14.5608 17.8562 14.051C17.8562 13.4472 17.4005 13.0356 16.9294 13.0356H14.8469Z",fill:"currentColor"})),it||(it=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9992 10.0923C16.5091 10.0923 16.9223 10.5056 16.9223 11.0154V20.9846C16.9223 21.4944 16.5091 21.9077 15.9992 21.9077C15.4894 21.9077 15.0762 21.4944 15.0762 20.9846V11.0154C15.0762 10.5056 15.4894 10.0923 15.9992 10.0923Z",fill:"currentColor"})),rt||(rt=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 5.84615C10.3953 5.84615 5.84615 10.3953 5.84615 16C5.84615 21.6047 10.3953 26.1538 16 26.1538C21.6047 26.1538 26.1538 21.6047 26.1538 16C26.1538 15.4902 26.5671 15.0769 27.0769 15.0769C27.5867 15.0769 28 15.4902 28 16C28 22.6243 22.6243 28 16 28C9.37574 28 4 22.6243 4 16C4 9.37574 9.37574 4 16 4C16.5098 4 16.9231 4.41328 16.9231 4.92308C16.9231 5.43288 16.5098 5.84615 16 5.84615Z",fill:"currentColor"})),at||(at=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5383 5.10791C22.0481 5.10791 22.4614 5.52119 22.4614 6.03099V9.53868H25.9691C26.4789 9.53868 26.8922 9.95196 26.8922 10.4618C26.8922 10.9716 26.4789 11.3848 25.9691 11.3848H21.5383C21.0285 11.3848 20.6152 10.9716 20.6152 10.4618V6.03099C20.6152 5.52119 21.0285 5.10791 21.5383 5.10791Z",fill:"currentColor"})),lt||(lt=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.7295 4.27036C28.09 4.63085 28.09 5.21531 27.7295 5.57579L22.191 11.1143C21.8305 11.4747 21.2461 11.4747 20.8856 11.1143C20.5251 10.7538 20.5251 10.1693 20.8856 9.80882L26.4241 4.27036C26.7845 3.90988 27.369 3.90988 27.7295 4.27036Z",fill:"currentColor"})))}const dt=n.forwardRef(ct);s.p;var ut,pt,ht,xt,mt;function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},jt.apply(this,arguments)}function yt(e,t){let{title:s,titleId:i,...r}=e;return n.createElement("svg",jt({width:32,height:32,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},r),s?n.createElement("title",{id:i},s):null,ut||(ut=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.8469 13.0356C14.5183 13.0356 14.1639 13.3376 14.1639 13.8073C14.1639 14.1846 14.2447 14.303 14.27 14.3352C14.3041 14.3785 14.3845 14.4501 14.6444 14.5429L17.9811 15.7069C18.3785 15.8483 18.8437 16.074 19.1925 16.5207C19.5495 16.9779 19.6913 17.5441 19.6913 18.1827C19.6913 19.5891 18.6018 20.8005 17.162 20.8005H15.0796C13.5125 20.8005 12.3066 19.4842 12.3066 17.939C12.3066 17.4292 12.7199 17.0159 13.2297 17.0159C13.7395 17.0159 14.1528 17.4292 14.1528 17.939C14.1528 18.5427 14.6085 18.9544 15.0796 18.9544H17.162C17.4945 18.9544 17.8451 18.6594 17.8451 18.1827C17.8451 17.8132 17.7653 17.6927 17.7374 17.657C17.7014 17.6109 17.6187 17.5378 17.3646 17.4471L14.0279 16.2831C13.6363 16.1437 13.1688 15.9221 12.8181 15.4754C12.4584 15.0175 12.3177 14.4491 12.3177 13.8073C12.3177 12.4161 13.4033 11.1895 14.8469 11.1895H16.9294C18.4965 11.1895 19.7023 12.5058 19.7023 14.051C19.7023 14.5608 19.2891 14.9741 18.7793 14.9741C18.2695 14.9741 17.8562 14.5608 17.8562 14.051C17.8562 13.4472 17.4005 13.0356 16.9294 13.0356H14.8469Z",fill:"currentColor"})),pt||(pt=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9992 10.0923C16.5091 10.0923 16.9223 10.5056 16.9223 11.0154V20.9846C16.9223 21.4944 16.5091 21.9077 15.9992 21.9077C15.4894 21.9077 15.0762 21.4944 15.0762 20.9846V11.0154C15.0762 10.5056 15.4894 10.0923 15.9992 10.0923Z",fill:"currentColor"})),ht||(ht=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 5.84615C10.3953 5.84615 5.84615 10.3953 5.84615 16C5.84615 21.6047 10.3953 26.1538 16 26.1538C21.6047 26.1538 26.1538 21.6047 26.1538 16C26.1538 15.4902 26.5671 15.0769 27.0769 15.0769C27.5867 15.0769 28 15.4902 28 16C28 22.6243 22.6243 28 16 28C9.37574 28 4 22.6243 4 16C4 9.37574 9.37574 4 16 4C16.5098 4 16.9231 4.41328 16.9231 4.92308C16.9231 5.43288 16.5098 5.84615 16 5.84615Z",fill:"currentColor"})),xt||(xt=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7227 4.92308C21.7227 4.41328 22.1359 4 22.6457 4H27.0765C27.5863 4 27.9996 4.41328 27.9996 4.92308V9.35385C27.9996 9.86365 27.5863 10.2769 27.0765 10.2769C26.5667 10.2769 26.1534 9.86365 26.1534 9.35385V5.84615H22.6457C22.1359 5.84615 21.7227 5.43288 21.7227 4.92308Z",fill:"currentColor"})),mt||(mt=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.7295 4.27036C28.09 4.63085 28.09 5.21531 27.7295 5.57579L22.191 11.1143C21.8305 11.4747 21.2461 11.4747 20.8856 11.1143C20.5251 10.7538 20.5251 10.1693 20.8856 9.80882L26.4241 4.27036C26.7845 3.90988 27.369 3.90988 27.7295 4.27036Z",fill:"currentColor"})))}const gt=n.forwardRef(yt),ft=(s.p,()=>{const[e,t]=(0,n.useState)(0),[s,a]=(0,n.useState)(0),{totalUSD:c}=st(),d=(0,i.useSelector)((e=>e.receipts)),u=(0,i.useSelector)((e=>e.distributors)),{getTotalBalance:p}=tt(),h=(0,r.useWalletAddress)(),x=(0,n.useCallback)((async()=>{const e=Object.values(d),s=[];if(!e.length)return t(0);for(const{amount:t,distributor:i}of e){const e=i.toBase58();if(!u[e])continue;const{mint:n}=u[e],r={mint:n.toBase58(),amount:t};s.push(r)}const n=await p(s);return t(n)}),[u,p,d]),m=(0,n.useCallback)((async()=>{const e=Object.values(u),t=[];if(!e.length)return a(0);for(const{total:n,mint:i,authority:r}of e){if(h!==r.toBase58())continue;const e={mint:i.toBase58(),amount:n};t.push(e)}const s=await p(t);return a(s)}),[u,p,h]);return(0,n.useEffect)((()=>{x()}),[x]),(0,n.useEffect)((()=>{m()}),[m]),(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{lg:8,md:12,xs:24,children:(0,P.jsx)(Xe,{label:"Total balance",icon:(0,P.jsx)(o.Z,{className:"card-hero-icon",name:"wallet-outline"}),value:c,cardStyles:{padding:"16px 24px"}})}),(0,P.jsx)(l.Col,{lg:8,md:12,xs:24,children:(0,P.jsx)(Xe,{label:"Total distribution",icon:(0,P.jsx)(et.Z,{className:"card-hero-icon",style:{fontSize:32},component:gt}),value:s,cardStyles:{padding:"16px 24px"}})}),(0,P.jsx)(l.Col,{lg:8,md:12,xs:24,children:(0,P.jsx)(Xe,{label:"Total received",icon:(0,P.jsx)(et.Z,{className:"card-hero-icon",style:{fontSize:32},component:dt}),value:e,cardStyles:{padding:"16px 24px"}})})]})});var Ct=s(87408);const bt=()=>{const e=(0,i.useSelector)((e=>e.main.metadataLoading));return(0,P.jsx)(l.Spin,{indicator:(0,P.jsx)(Ct.Z,{}),spinning:e})},wt=e=>{let{option:t}=e;return r.util.isAddress(t)?(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(oe.Z,{mintAddress:t}),(0,P.jsx)(h.Z,{mintAddress:t})]}):t},vt=e=>{let{onConfirm:t,options:s,label:i="Filter by",values:r}=e;const[a,o]=(0,n.useState)({});return(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:i})}),Object.keys(s).map(((e,t)=>{const n=s[e];return(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Tt,{defaultValue:`All ${e}`,options:n,onChange:t=>((e,t)=>{const s={...r};s[e]=t,o(s)})(e,t),style:{width:"100%"}})},t)})),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Button,{type:"primary",onClick:()=>t(a),block:!0,children:"Confirm"})})]})},Tt=e=>{let{onChange:t,style:s,defaultValue:n="All token",options:i,value:r}=e;return(0,P.jsxs)(l.Select,{className:"select-existed-token",style:{minWidth:150,width:"100%",...s},defaultValue:M,onChange:t,size:"large",value:r,children:[(0,P.jsx)(l.Select.Option,{value:M,children:n}),i.map(((e,t)=>(0,P.jsx)(l.Select.Option,{value:e,children:(0,P.jsx)(wt,{option:e.toString()})},t)))]})},At=e=>{let{onChange:t,style:s,options:i,values:a={}}=e;const[c,d]=(0,n.useState)(!1),u=(0,r.useInfix)()<r.Infix.sm;return u?(0,P.jsxs)(n.Fragment,{children:[(0,P.jsx)(l.Button,{type:"text",icon:(0,P.jsx)(o.Z,{name:"funnel-outline"}),onClick:()=>d(!0)}),(0,P.jsx)(l.Modal,{visible:c,onCancel:()=>d(!1),closable:!1,footer:!1,className:"card-lightning",children:(0,P.jsx)(vt,{onConfirm:e=>{t(e),d(!1)},options:i,values:a})})]}):(0,P.jsx)(l.Space,{children:Object.keys(i).map((e=>{const n=i[e];return(0,P.jsx)(Tt,{style:s,defaultValue:`All ${e}`,options:n,onChange:s=>((e,s)=>{const n={...a};n[e]=s,t(n)})(e,s)},e)}))})},St=e=>{const t=(0,i.useSelector)((e=>e.distributors)),[s,r]=(0,n.useState)(),a=(0,i.useSelector)((e=>e.receipts)),l=(0,n.useCallback)((e=>{const s=Date.now(),{receipt:n,startedAt:i,distributor:r}=e,l=a[n],o=t[r].endedAt;return l?D.claimed:1e3*o.toNumber()<s&&o.toNumber()?D.expired:1e3*i>s&&i?D.waiting:D.ready}),[t,a]),o=(0,n.useCallback)((async e=>{const t=await l(e);return r(t)}),[l]);return(0,n.useEffect)((()=>{e&&o(e)}),[o,e]),{status:s,fetchAirdropStatus:l}},kt=[D.ready,D.waiting,D.claimed,D.expired],Rt={token:M,status:M},Nt=e=>{let{onFilter:t,receivedList:s}=e;const[i,a]=(0,n.useState)(Rt),{filterReceiveList:l,getReceiveMints:o}=(e=>{const[t,s]=(0,n.useState)(!1),{fetchAirdropStatus:i}=St(),a=(0,n.useCallback)((()=>{if(!e)return[];let t=[];for(const s of e){const{mintAddress:e}=s;t.includes(e)||t.push(e)}return t}),[e]),l=(0,n.useCallback)((async(e,t)=>{const{recipientData:{startedAt:s},receiptAddress:n,distributorAddress:a,mintAddress:l}=e,{mintAddress:o,status:c}=t,d=!r.util.isAddress(l)||o===M||o===l,u=await i({distributor:a,receipt:n,startedAt:s.toNumber()});return d&&(!u||c===M||c===u)}),[i]);return{filterReceiveList:(0,n.useCallback)((async t=>{let{mintAddress:n="",status:i=""}=t;try{s(!0);let t=[];for(const s of e)await l(s,{mintAddress:n,status:i})&&t.push(s);return t}catch(r){return[]}finally{s(!1)}}),[e,l]),loading:t,getReceiveMints:a}})(s),c=o(),d=(0,n.useCallback)((async()=>{const e=await l({mintAddress:i.token,status:i.status});t(e)}),[i,l,t]);return(0,n.useEffect)((()=>{d()}),[d]),(0,P.jsx)(At,{options:{token:c,status:kt},onChange:e=>a(e),values:i})};var Dt=s(4550),It=s.n(Dt);const Bt=e=>{let{cardId:t,children:s,cardHeader:i}=e;const[r,a]=(0,n.useState)(),c=r?"chevron-up-outline":"chevron-down-outline";return(0,P.jsxs)(l.Row,{gutter:[16,16],className:"expand-card",children:[(0,P.jsx)(l.Col,{span:24,children:i}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{justify:"center",children:[(0,P.jsx)(l.Col,{span:24,className:"expand-card-collapse",children:(0,P.jsx)(l.Collapse,{activeKey:r,bordered:!1,children:(0,P.jsx)(l.Collapse.Panel,{header:!1,showArrow:!1,children:s},t)})}),s&&(0,P.jsx)(l.Col,{children:(0,P.jsx)(l.Button,{type:"text",size:"small",icon:(0,P.jsx)(o.Z,{name:c}),onClick:()=>a(r?void 0:t)})})]})})]})},Et=e=>{let{label:t="",value:s=""}=e;return(0,P.jsxs)(l.Row,{align:"middle",gutter:[24,24],children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:t})}),(0,P.jsx)(l.Col,{children:s})]})};var Mt=s(97429).Buffer;const Ot=()=>{const e=(0,i.useDispatch)(),t=(0,r.useWalletAddress)();return(0,n.useCallback)((async()=>{const s=await e(Le()).unwrap(),n={};let i=Object.keys(s).sort(((e,t)=>e.localeCompare(t)));for(const e of i)n[e]=s[e];const{cid:r}=await Me.methods.backupMetadata.set(n);return new u.web3.TransactionInstruction({keys:[{pubkey:new u.web3.PublicKey(t),isSigner:!0,isWritable:!0}],programId:new u.web3.PublicKey("Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo"),data:Mt.from(r)})}),[e,t])};var Zt=s(97429).Buffer;const{sol:{utility:zt,taxman:Lt,fee:Ft}}=v,Pt=e=>{let{distributorAddress:t,recipientData:s,receiptAddress:i}=e;const[a,o]=(0,n.useState)(),[c,h]=(0,n.useState)(!1),j=s.startedAt.toNumber(),{status:y}=St({receipt:i,startedAt:j,distributor:t}),g=_e(),f=Ot(),C=(0,r.useWalletAddress)(),b=(0,n.useCallback)((async()=>{if(t)try{const{data:e}=g(t),s=d.MerkleDistributor.fromBuffer(Zt.from(e));return o(s)}catch(e){m(e)}}),[t,g]);return(0,n.useEffect)((()=>{b()}),[b]),y&&y===D.ready?(0,P.jsx)(l.Button,{onClick:async()=>{if(!a)return;const e=a.deriveProof(s);if(a.verifyProof(e,s))try{h(!0);const n=await f(),i={fee:new u.BN(Ft),feeCollectorAddress:Lt},{tx:a}=await zt.claim({distributorAddress:t,proof:e,data:s,feeOptions:i,sendAndConfirm:!1});a.add(n);const l=await(0,p.getAnchorProvider)(r.rpc,C,window.sentre.wallet),o=await l.sendAndConfirm(a,[]);x("Redeem",o)}catch(n){m(n)}finally{h(!1)}},loading:c,type:"text",className:"btn-claim",style:{color:"#42E6EB"},children:"claim"}):(0,P.jsx)(n.Fragment,{})},_t=e=>{let{distributorAddress:t}=e;const s=(0,i.useSelector)((e=>e.distributors[t].endedAt));return(0,P.jsx)(l.Typography.Text,{children:s.toNumber()?It()(1e3*s.toNumber()).format("MMM DD, YYYY HH:mm"):"Unlimited"})};var Ut=s(60914);const Vt=e=>{let{amount:t,mintAddress:s}=e;return(0,P.jsx)(Ut.Z,{mintAddress:s,amount:t})},Wt={Waiting:"#D4B106",Ready:"#03A326",Claimed:"#40A9FF",Expired:"#F9575E",Loading:"#F4F5F5"},Ht=e=>{let{state:t}=e;const s=(0,n.useMemo)((()=>t?Wt[t]:Wt[D.loading]),[t]);return(0,P.jsx)(l.Tag,{style:{margin:0,borderRadius:4,border:`solid 1px ${s}`,textTransform:"capitalize",background:"transparent",color:s},children:t||D.loading})},Yt=e=>{let{receiptAddress:t,startedAt:s,distributorAddress:n}=e;const{status:i}=St({receipt:t,startedAt:s,distributor:n});return(0,P.jsx)(Ht,{state:i})},Kt=e=>{let{receiveItem:t}=e;const{mintAddress:s,receiptAddress:n,distributorAddress:i,recipientData:a,sender:o}=t,c=1e4*a.startedAt.toNumber();return(0,P.jsx)(Bt,{cardId:n,cardHeader:(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{align:"middle",gutter:[24,24],children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(oe.Z,{mintAddress:s}),(0,P.jsxs)(l.Space,{size:6,children:[(0,P.jsx)(Vt,{amount:a.amount,mintAddress:s}),(0,P.jsx)(h.Z,{mintAddress:s})]})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(Yt,{receiptAddress:n,startedAt:a.startedAt.toNumber(),distributorAddress:i})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Et,{label:`Sender: ${r.util.shortenAddress(o,4)}`,value:(0,P.jsx)(Pt,{distributorAddress:i,receiptAddress:n,recipientData:a})})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Et,{label:"Expiration time",value:(0,P.jsx)(_t,{distributorAddress:i})})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Et,{label:"Unlock time",value:(0,P.jsx)(l.Typography.Text,{children:c?It()(c).format(E):"Immediately"})})})]})},n)},$t=e=>{let{receiveItem:t}=e;const{mintAddress:s,receiptAddress:n,distributorAddress:i,recipientData:r}=t,a=r.startedAt.toNumber();return(0,P.jsxs)(l.Row,{align:"middle",justify:"center",children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{direction:"vertical",children:[(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(Ut.Z,{mintAddress:s,amount:r.amount}),(0,P.jsx)(h.Z,{mintAddress:s})]}),(0,P.jsx)(l.Typography.Text,{children:It()(1e3*a).format(E)})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(Yt,{startedAt:a,receiptAddress:n,distributorAddress:i}),(0,P.jsx)(Pt,{distributorAddress:i,recipientData:r,receiptAddress:n})]})})]})},Gt=e=>{let{receiveItem:t}=e;const{mintAddress:s,receiptAddress:n,distributorAddress:i,recipientData:a,sender:o,children:c}=t,d=a.startedAt.toNumber();return(0,P.jsx)(Bt,{cardId:n,cardHeader:(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{align:"middle",gutter:[24,24],children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(oe.Z,{mintAddress:s}),(0,P.jsxs)(l.Space,{size:6,children:[(0,P.jsx)(Vt,{amount:a.amount,mintAddress:s}),(0,P.jsx)(h.Z,{mintAddress:s})]})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(Yt,{receiptAddress:n,startedAt:d,distributorAddress:i})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Et,{label:`Sender: ${r.util.shortenAddress(o,4)}`,value:(0,P.jsx)(Pt,{distributorAddress:i,receiptAddress:n,recipientData:a})})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Et,{label:"Expiration time",value:(0,P.jsx)(_t,{distributorAddress:i})})})]}),children:(0,P.jsx)(l.Row,{gutter:[8,8],children:null===c||void 0===c?void 0:c.map((e=>(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)($t,{receiveItem:e})},e.receiptAddress)))})},n)},Jt=[{title:"UNLOCK DATE",dataIndex:"recipientData",render:e=>{let{startedAt:t}=e;return(0,P.jsx)(l.Typography.Text,{children:t.toNumber()?It()(1e3*t.toNumber()).format(E):"Immediately"})}},{title:"EXPIRATION TIME",dataIndex:"distributorAddress",render:e=>(0,P.jsx)(_t,{distributorAddress:e})},{title:"SENDER",dataIndex:"sender",render:e=>(0,P.jsx)(l.Typography.Text,{style:{cursor:"pointer"},underline:!0,onClick:()=>window.open(r.util.explorer(e),"_blank"),children:r.util.shortenAddress(e)})},{title:"TOKEN",dataIndex:"mintAddress",render:e=>(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(oe.Z,{mintAddress:e}),(0,P.jsx)(h.Z,{mintAddress:e})]})},{title:"AMOUNT",dataIndex:"recipientData",render:(e,t)=>{let{amount:s}=e,{mintAddress:n}=t;return(0,P.jsx)(Vt,{amount:s,mintAddress:n})}},{title:"STATUS",dataIndex:"recipientData",render:(e,t)=>{let{startedAt:s}=e,{receiptAddress:n,distributorAddress:i}=t;return(0,P.jsx)(Yt,{startedAt:s.toNumber(),receiptAddress:n,distributorAddress:i})}},{title:"ACTION",dataIndex:"distributorAddress",render:(e,t)=>{let{receiptAddress:s,recipientData:n}=t;return(0,P.jsx)(Pt,{distributorAddress:e,recipientData:n,receiptAddress:s})}}],qt=e=>{let{receivedList:t,type:s}=e;return(0,r.useInfix)()<r.Infix.md?t.length?(0,P.jsx)(l.Row,{gutter:[16,16],children:t.map((e=>(0,P.jsx)(l.Col,{span:24,children:s===pe.Airdrop?(0,P.jsx)(Kt,{receiveItem:e}):(0,P.jsx)(Gt,{receiveItem:e})},e.distributorAddress+e.index)))}):(0,P.jsx)(l.Empty,{}):(0,P.jsx)(l.Table,{dataSource:t,pagination:!1,columns:Jt,rowKey:e=>e.distributorAddress+e.index})},{sol:{utility:Qt}}=v,Xt="distributor",es=(0,S.createAsyncThunk)("distributor/getDistributor",(async(e,t)=>{let{address:s}=e,{getState:n}=t;const{distributors:i}=n();if(i[s])return{[s]:i[s]};const{account:r}=Qt.program;return{[s]:await r.distributor.fetch(s)}})),ts=(0,S.createAsyncThunk)("distributor/getDistributors",(async()=>{const{account:e}=Qt.program;let t={};const s=await e.distributor.all();for(const{publicKey:n,account:i}of s){t[n.toBase58()]=i}return t})),ss=(0,S.createAsyncThunk)("distributor/upsetDistributor",(e=>{let{address:t,distributorData:s}=e;return{[t]:s}})),ns=(0,S.createSlice)({name:Xt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(ts.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(es.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ss.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var is=s(97429).Buffer;const{manifest:{appId:rs}}=v;function as(e){try{const t=[pe.Airdrop,pe.Vesting];for(const s of t){const t=d.MerkleDistributor.salt("0"),n=d.MerkleDistributor.salt(`${rs}/${s}/0`),i=e.receipients[0].salt,r=is.compare(t,i),a=is.compare(n,i);if(0===r||0===a)return s}return pe.Airdrop}catch(t){return pe.Airdrop}}const ls=()=>{const e=(0,i.useDispatch)();return(0,n.useCallback)((async t=>{const{[t]:s}=await e(es({address:t})).unwrap(),n=Me.decodeCID(s.metadata),{[n]:i}=await e(Ze({cid:n})).unwrap();let r=d.MerkleDistributor.fromBuffer(is.from([]));try{r=d.MerkleDistributor.fromBuffer(is.from(i.data))}catch(a){}return{root:r,type:as(r),metadata:i}}),[e])},{sol:{utility:os}}=v,cs=e=>{let{type:t}=e;const[s,a]=(0,n.useState)(),l=(0,i.useSelector)((e=>e.distributors)),o=(0,i.useSelector)((e=>e.metadatas)),c=(0,r.useWalletAddress)(),d=ls(),u=(0,n.useCallback)((async()=>{if(!Object.keys(l).length||!Object.keys(o).length)return;const e=[],s=Object.keys(l).map((e=>({address:e,...l[e]})));return await Promise.all(s.map((async s=>{let{metadata:n,mint:i,authority:r,address:a}=s;try{const s=Me.decodeCID(n);if(!o[s])return;const l=await d(a);if(l.type!==t)return;const u=l.root.receipients,p=i.toBase58(),h=r.toBase58();for(let t=0;t<u.length;t++){const{authority:s,salt:n}=u[t];if(c===s.toBase58()){const s={mintAddress:p,sender:h,distributorAddress:a,receiptAddress:await os.deriveReceiptAddress(n,a),recipientData:u[t],index:t};e.push(s)}}}catch(l){}}))),a(e)}),[l,d,o,t,c]);return(0,n.useEffect)((()=>{u()}),[u]),s},ds=()=>{const[e,t]=(0,n.useState)(4),s=cs({type:pe.Airdrop}),[i,r]=(0,n.useState)([]),{fetchAirdropStatus:a}=St(),c=(0,n.useMemo)((()=>void 0===s),[s]),d=i.sort(((e,t)=>{const{distributorAddress:s,receiptAddress:n,recipientData:i}=e;return a({distributor:s,receipt:n,startedAt:i.startedAt.toNumber()})===D.ready?-1:0}));return(0,P.jsx)(l.Card,{loading:c,className:"card-lightning",children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Typography.Title,{level:5,children:"Airdrop receive"}),(0,P.jsx)(l.Typography.Text,{className:"amount-airdrop",children:i.length})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(bt,{}),(0,P.jsx)(Nt,{receivedList:s||[],onFilter:r})]})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(qt,{type:pe.Airdrop,receivedList:d.slice(0,e)})}),(0,P.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,P.jsx)(l.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,P.jsx)(o.Z,{name:"arrow-down-outline"}),disabled:e>=d.length,children:"VIEW MORE"})})]})})},us=()=>{const[e,t]=(0,n.useState)(4),[s,i]=(0,n.useState)([]),r=cs({type:pe.Vesting}),[a,c]=(0,n.useState)([]),{fetchAirdropStatus:d}=St(),u=(0,n.useMemo)((()=>void 0===r),[r]),p=(0,n.useCallback)((async e=>{const t=[];for(const s of e){const{receiptAddress:e,distributorAddress:n,recipientData:i}=s,{startedAt:r}=i,a=d({receipt:e,startedAt:r.toNumber(),distributor:n});t.push(a)}return-1!==t.indexOf(D.ready)?t.indexOf(D.ready):-1!==t.indexOf(D.waiting)?t.indexOf(D.waiting):-1!==t.indexOf(D.claimed)?t.indexOf(D.claimed):-1!==t.indexOf(D.expired)?t.indexOf(D.expired):0}),[d]),h=(0,n.useCallback)((e=>r?r.filter((t=>{let{distributorAddress:s}=t;return s===e})):[]),[r]),x=(0,n.useCallback)((async()=>{if(!r)return i([]);const e=[],t=new Map;for(const{distributorAddress:s}of r){const e=h(s);t.set(s,e)}return t.forEach((async t=>{const s=t[await p(t)],n=t.filter((e=>{let{index:t}=e;return t!==s.index})),i={...s,children:n};e.push(i)})),await Promise.all(e),i(e)}),[h,p,r]),m=a.sort(((e,t)=>{const{distributorAddress:s,receiptAddress:n,recipientData:i}=e;return d({distributor:s,receipt:n,startedAt:i.startedAt.toNumber()})===D.ready?-1:0}));return(0,n.useEffect)((()=>{x()}),[x]),(0,P.jsx)(l.Card,{loading:u,className:"card-lightning",children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Typography.Title,{level:5,children:"Vesting receive"}),(0,P.jsx)(l.Typography.Text,{className:"amount-airdrop",children:a.length})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(bt,{}),(0,P.jsx)(Nt,{receivedList:s,onFilter:c})]})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(qt,{type:pe.Vesting,receivedList:m.slice(0,e)})}),(0,P.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,P.jsx)(l.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,P.jsx)(o.Z,{name:"arrow-down-outline"}),disabled:e>=m.length,children:"VIEW MORE"})})]})})},ps=()=>(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Title,{level:2,children:"Dashboard"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(ft,{})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(ds,{})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(us,{})})]});var hs=s(44994),xs=s(93253);const{sol:{utility:ms}}=v;var js=s(97429).Buffer;const ys=e=>{let{type:t}=e;const[s]=gs();return(0,n.useMemo)((()=>{const e=s.listHistory.filter((e=>e.type===t));return{...s,listHistory:e}}),[s,t])},gs=(0,hs.r)({loading:!0,listHistory:[],numberOfRecipient:0}),fs=()=>{const e=(0,i.useSelector)((e=>e.distributors)),[t,s]=(0,n.useState)({}),[,a]=gs(),l=(()=>{const e=(0,n.useCallback)((async e=>{const{splt:t}=window.sentre;return Promise.all(Object.keys(e).map((async s=>{const{mint:n}=e[s],i=await ms.deriveTreasurerAddress(s),r=await t.deriveAssociatedAddress(i,n.toBase58());return new u.web3.PublicKey(r)})))}),[]),t=(0,n.useCallback)((async t=>{const s=await e(t);if(!Object.values(s).length)return[];const{splt:n}=window.sentre,i={},r=await(0,p.getMultipleAccounts)(n.connection,s);for(const e of r){if(!e)continue;const{amount:t,owner:s}=await n.parseAccountData(e.account.data);i[s]=Number(t)}return Promise.all(r.map((async e=>{if(!e)return{amount:0};const{amount:t}=await n.parseAccountData(e.account.data);return{amount:Number(t.toString())}})))}),[e]);return t})(),o=ls(),c=(0,r.useWalletAddress)(),d=(0,n.useCallback)((()=>{const t={};for(const s in e){const n=e[s];n.authority.toBase58()===c&&(t[s]=n)}if(Object.keys(t).length)return s(t)}),[e,c]);(0,xs.Z)(d,1e3,[d]);const h=(0,n.useCallback)((async()=>{if(!Object.keys(t).length)return a({listHistory:[],loading:!1,numberOfRecipient:0});let e=[];const s=new Map,n=await l(t);return await Promise.all(Object.keys(t).map((async(i,r)=>{try{const l=t[i];var a=await o(i);for(const{authority:e}of a.root.receipients)s.has(e.toBase58())||s.set(e.toBase58(),!0);const c=n[r].amount,d={distributorAddress:i,mint:l.mint.toBase58(),total:l.total.toString(),time:1e3*a.metadata.createAt,treeData:js.from(a.metadata.data),remaining:c,type:a.type};e.push(d)}catch(l){console.error("error history",l)}}))),e=e.sort(((e,t)=>e.time>t.time?-1:0)),a({listHistory:e,loading:!1,numberOfRecipient:s.size})}),[t,l,o,a]);return(0,xs.Z)(h,1e3,[h]),(0,P.jsx)(n.Fragment,{})},Cs=["7","30","90"],bs={token:M,time:M},ws=e=>{let{onFilter:t,type:s}=e;const[i,a]=(0,n.useState)(bs),{filterSentList:l,sentMints:o}=(e=>{const{listHistory:t}=ys({type:e}),[s,i]=(0,n.useState)(!1),a=(0,n.useMemo)((()=>{if(!t.length)return[];let e=[];for(const s of t){const{mint:t}=s;e.includes(t)||e.push(t)}return e}),[t]),l=(0,n.useCallback)(((e,t)=>{const{time:s,mint:n}=e,i=Number(new Date(s)),{mintAddress:a,time:l}=t,o=!r.util.isAddress(n)||a===M||[a].includes(n),c=!i||l===M||Date.now()-i<864e5*Number(l);return o&&c}),[]);return{filterSentList:(0,n.useCallback)((e=>{let{mintAddress:s="",time:n=""}=e;try{return i(!0),t.filter((e=>l(e,{mintAddress:s,time:n})))}catch(r){return[]}finally{i(!1)}}),[t,l]),loading:s,sentMints:a}})(s),c=(0,n.useCallback)((()=>{const e=l({mintAddress:i.token,time:i.time});t(e)}),[i,l,t]);return(0,n.useEffect)((()=>{c()}),[c]),(0,P.jsx)(At,{options:{token:o,time:Cs},onChange:e=>a(e),values:i})},vs=e=>{let{total:t,mintAddress:s}=e;return(0,P.jsx)(Ut.Z,{amount:new u.BN(t),mintAddress:s})};var Ts=s(51518),As=s.n(Ts);const Ss=s.p+"static/media/twitter.9cbdafef0605b5c84ec56b271a60a6e8.svg",ks=e=>{let{visible:t,redeemLink:s,onClose:i=(()=>{})}=e;const[a,c]=(0,n.useState)(!1);return(0,P.jsx)(l.Modal,{visible:t,closeIcon:(0,P.jsx)(o.Z,{name:"close-outline"}),onCancel:i,footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,P.jsxs)(l.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Image,{src:Ss,preview:!1})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,P.jsx)(l.Typography.Title,{level:3,children:"Share on Twitter!"}),(0,P.jsx)(l.Space,{size:4,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:"Share this link so your recipients can get their tokens"})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:8,justify:"space-between",children:[(0,P.jsx)(l.Col,{className:"share-link",span:20,children:(0,P.jsx)(l.Typography.Text,{children:(e=>e.substring(0,40)+"...")(s)})}),(0,P.jsx)(l.Col,{span:4,children:(0,P.jsx)(l.Tooltip,{title:"Copied",visible:a,children:(0,P.jsx)(As(),{text:s,children:(0,P.jsx)(l.Button,{size:"large",type:"ghost",onClick:async()=>{c(!0),await r.util.asyncWait(1500),c(!1)},children:"copy"})})})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Button,{size:"large",type:"primary",block:!0,onClick:()=>{let e="http://twitter.com/intent/tweet?";const t={url:s,text:"Your prize has arrived! Redeem now at Sen Hub: "};for(const s in t)e+="&"+s+"="+encodeURIComponent(t[s]||"");window.open(e,"_blank")},children:"Share now"})})]})})};var Rs=s(55080);const{sol:{utility:Ns}}=v,Ds=e=>{let{distributorAddress:t}=e;const[s,i]=(0,n.useState)({}),r=(0,n.useCallback)((async()=>{const e=await Ns.program.account.receipt.all([{memcmp:{offset:40,bytes:t}}]);let s={};for(const t of e)s[t.account.authority.toBase58()]=t.account;return i(s)}),[t]);return(0,xs.Z)(r,1e3,[r]),s};var Is=s(97429).Buffer;const{sol:{utility:Bs,fee:Es,taxman:Ms}}=v,Os=[{label:"Wallet address",key:"authority"},{label:"Amount",key:"amount"}],Zs=e=>{let{amount:t,mintAddress:s}=e;const n=(0,r.useMintDecimals)({mintAddress:s})||0;return(0,P.jsx)(l.Typography.Text,{children:r.util.numeric(p.utilsBN.undecimalize(t,n)).format("0,0.[0000]")})},zs=[{title:"WALLET ADDRESS",dataIndex:"authority",render:e=>(0,P.jsx)(l.Typography.Text,{children:r.util.shortenAddress(e)})},{title:"AMOUNT",dataIndex:"amount",render:(e,t)=>{let{mintAddress:s}=t;return(0,P.jsx)(Zs,{amount:e,mintAddress:s})}}],Ls=e=>{let{distributorAddress:t,disabled:s,setDisabled:a}=e;const[c,h]=(0,n.useState)(!1),[j,y]=(0,n.useState)(!1),g=(0,i.useSelector)((e=>e.distributors[t].mint)),f=(0,r.useMintDecimals)({mintAddress:g.toBase58()})||0,{unclaimed:C}=(e=>{const[t,s]=(0,n.useState)([]),r=(0,i.useSelector)((t=>t.distributors[e].mint)),a=Ds({distributorAddress:e}),l=_e(),o=(0,n.useCallback)((async()=>{try{const{data:t}=l(e),n=d.MerkleDistributor.fromBuffer(Is.from(t)),i=[],o=n.receipients;for(const{authority:e,amount:s,salt:l}of o){if(!a[e.toBase58()]){i.push({authority:e.toBase58(),amount:s,mintAddress:r.toBase58()});continue}const t=Is.from(a[e.toBase58()].salt);0!==Is.compare(t,l)&&i.push({authority:e.toBase58(),amount:s,mintAddress:r.toBase58()})}return s(i)}catch(t){}}),[e,l,r,a]);return(0,n.useEffect)((()=>{o()}),[o]),{unclaimed:t}})(t),b=(0,n.useMemo)((()=>{const e={};for(const t of C){const{authority:s,amount:n}=t;if(e[s]){const s=e[t.authority];e[t.authority]={...s,amount:s.amount.add(n)}}else e[s]=t}return e}),[C]),w=(0,n.useMemo)((()=>{const e=Object.values(b).map((e=>{const{amount:t,authority:s}=e;return{authority:s,amount:p.utilsBN.undecimalize(t,f)}}),[]);return e}),[f,b]);return(0,P.jsxs)(n.Fragment,{children:[(0,P.jsx)(l.Button,{onClick:()=>h(!0),type:"text",disabled:s,style:{color:"#42E6EB"},children:"revoke"}),(0,P.jsx)(l.Modal,{visible:c,onCancel:()=>h(!1),footer:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Button,{type:"ghost",onClick:()=>h(!1),children:"Cancel"}),(0,P.jsx)(l.Button,{onClick:async()=>{const e={fee:new u.BN(Es),feeCollectorAddress:Ms};y(!0);try{const{txId:s}=await Bs.revoke({distributorAddress:t,feeOptions:e});return x("Revoked token",s),a(!0)}catch(s){m(s)}finally{y(!1),h(!1)}},loading:j,type:"primary",children:"confirm"})]}),closeIcon:(0,P.jsx)(o.Z,{name:"close-outline"}),className:"card-lightning",style:{paddingBottom:0},children:(0,P.jsxs)(l.Row,{gutter:[32,32],style:{maxHeight:400},className:"scrollbar",children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Typography.Title,{level:5,children:"Revoke"}),(0,P.jsx)(Rs.CSVLink,{filename:"unclaimed_list",headers:Os,data:w,children:(0,P.jsx)(l.Tooltip,{title:"Download unclaimed list",children:(0,P.jsx)(o.Z,{style:{fontSize:20},name:"download-outline"})})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Table,{dataSource:Object.values(b),pagination:!1,columns:zs,rowKey:e=>e.authority})})]})})]})},Fs=(e,t)=>{const[s,r]=(0,n.useState)(!1),[a,l]=(0,n.useState)(!1),o=(0,i.useSelector)((t=>t.distributors[e].endedAt)),c=(0,n.useCallback)((async()=>{const e=Date.now(),s=1e3*o.toNumber();return s?(0===t&&l(!0),r(s<e)):r(!1)}),[o,t]);return(0,n.useEffect)((()=>{c()}),[c]),{isRevoke:s,disabled:a,setDisabled:l}},{manifest:{appId:Ps}}=v,_s=e=>{let{distributorAddress:t,remaining:s}=e;const[i,r]=(0,n.useState)(!1),{isRevoke:a,disabled:o,setDisabled:c}=Fs(t,s),d=`${window.location.origin}/app/${Ps}/redeem/${t}?autoInstall=true`;return(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Button,{onClick:()=>r(!0),type:"text",style:{color:"#42E6EB",padding:0},children:"share"}),a&&(0,P.jsx)(Ls,{disabled:o,setDisabled:c,distributorAddress:t}),(0,P.jsx)(ks,{visible:i,onClose:()=>r(!1),redeemLink:d})]})};var Us=s(97429).Buffer;const Vs=e=>{let{treeData:t}=e;const s=(0,n.useMemo)((()=>{if(!t||!t.length)return 0;const e=JSON.parse(JSON.stringify(t)).data;return d.MerkleDistributor.fromBuffer(Us.from(e||t)).receipients[0].startedAt.toNumber()}),[t]);return(0,P.jsx)(l.Typography.Text,{children:s?It()(1e3*s).format("MMM DD, YYYY HH:mm"):"Immediately"})},Ws=e=>{let{distributorAddress:t}=e;const{mint:s,claimed:n,total:r}=(0,i.useSelector)((e=>e.distributors[t]));return(0,P.jsx)(Ut.Z,{mintAddress:s.toBase58(),amount:r.sub(n)})},Hs=e=>{let{distributorAddress:t}=e;const[s,a]=(0,n.useState)(0),{mint:o,metadata:c}=(0,i.useSelector)((e=>e.distributors[t])),d=(0,i.useDispatch)(),p=(0,n.useCallback)((async()=>{if("mainnet"!==r.net)return[];const e=await v.sol.utility.deriveTreasurerAddress(t),s=`https://public-api.solscan.io/account/transactions?account=${(await u.utils.token.associatedAddress({owner:new u.web3.PublicKey(e),mint:o})).toBase58()}&limit=100`,n=(await fetch(s)).json();return await n}),[t,o]),h=(0,n.useCallback)((async()=>{var e;const s=await window.sentre.lamports.connection.getSignaturesForAddress(new u.web3.PublicKey(t),{limit:1e3});if(s.length)return a((null===(e=s.pop())||void 0===e?void 0:e.blockTime)||0);const n=await p();return n.length?a(n.pop().blockTime||0):a(0)}),[t,p]),x=(0,n.useCallback)((()=>{if(!s)return;const e=Me.decodeCID(c);return d(Fe({createAt:s,cid:e}))}),[s,c,d]);return(0,n.useEffect)((()=>{h()}),[h]),(0,n.useEffect)((()=>{x()}),[x]),(0,P.jsx)(l.Typography.Text,{children:s?It()(1e3*s).format("MMM DD, YYYY HH:mm"):"--"})},Ys=[{title:"CREATED DATE",dataIndex:"time",render:(e,t)=>{let{distributorAddress:s}=t;return e?(0,P.jsx)(l.Typography.Text,{children:It()(e).format("MMM DD, YYYY HH:mm")}):(0,P.jsx)(Hs,{distributorAddress:s})}},{title:"UNLOCK DATE",dataIndex:"treeData",render:e=>(0,P.jsx)(Vs,{treeData:e})},{title:"TOKEN",dataIndex:"mint",render:e=>(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(oe.Z,{mintAddress:e}),(0,P.jsx)(h.Z,{mintAddress:e})]})},{title:"TOTAL",dataIndex:"total",render:(e,t)=>{let{mint:s}=t;return(0,P.jsx)(vs,{total:e,mintAddress:s})}},{title:"REMAINING",dataIndex:"distributorAddress",render:e=>(0,P.jsx)(Ws,{distributorAddress:e})},{title:"ACTION",dataIndex:"distributorAddress",render:(e,t)=>{let{remaining:s,treeData:n}=t;return(0,P.jsx)(_s,{remaining:s,distributorAddress:e})}}],Ks=e=>{let{sentList:t}=e;return t.length?(0,P.jsx)(n.Fragment,{children:t.map(((e,t)=>{const{distributorAddress:s,mint:n,time:i,total:r,treeData:a,remaining:o}=e;return(0,P.jsx)(Bt,{cardId:`card_airdrop_${s}`,cardHeader:(0,P.jsx)(l.Row,{gutter:[12,12],children:(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{align:"middle",gutter:[24,24],children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(oe.Z,{mintAddress:n}),(0,P.jsxs)(l.Space,{size:6,children:[(0,P.jsx)(vs,{total:r.toString(),mintAddress:n}),(0,P.jsx)(h.Z,{mintAddress:n})]})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(_s,{remaining:o,distributorAddress:s})})]})})}),children:(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Et,{label:"Created time",value:(0,P.jsx)(l.Typography.Text,{children:It()(i).format("MMM DD, YYYY HH:mm")})})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Et,{label:"Unlock time",value:(0,P.jsx)(Vs,{treeData:a})})})]})},s)}))}):(0,P.jsx)(l.Empty,{})},$s=e=>{let{sentList:t}=e;return(0,r.useInfix)()<r.Infix.md?(0,P.jsx)(Ks,{sentList:t}):(0,P.jsx)(l.Table,{dataSource:t,pagination:!1,columns:Ys,rowKey:e=>e.distributorAddress})},Gs=()=>{const[e,t]=(0,n.useState)(4),{loading:s}=ys({type:pe.Vesting}),[i,r]=(0,n.useState)([]);return(0,P.jsx)(l.Card,{loading:s,className:"card-lightning",children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Typography.Title,{level:5,children:"History"}),(0,P.jsx)(l.Typography.Text,{className:"amount-airdrop",children:i.length})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(ws,{onFilter:r,type:pe.Vesting})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)($s,{sentList:i.slice(0,e)})}),(0,P.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,P.jsx)(l.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,P.jsx)(o.Z,{name:"arrow-down-outline"}),disabled:e>=i.length,children:"VIEW MORE"})})]})})},Js=e=>{let{valueInUSD:t,numberOfCampaign:s,recipientList:n,loading:i}=e;return(0,P.jsxs)(l.Row,{gutter:[24,24],style:{height:"100%"},children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Xe,{loading:!t&&i,label:"Total vesting",icon:(0,P.jsx)(o.Z,{className:"card-hero-icon",name:"receipt-outline"}),value:t})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Xe,{loading:!s&&i,label:"Total campaigns",icon:(0,P.jsx)(o.Z,{className:"card-hero-icon",name:"paper-plane-outline"}),value:s,unit:""})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Xe,{loading:!n&&i,label:"Total recipients",icon:(0,P.jsx)(o.Z,{className:"card-hero-icon",name:"people-outline"}),value:n,unit:""})})]})};var qs=s(44521),Qs=s(37014),Xs=s(40426),en=s(54179),tn=s(45198),sn=s(90404),nn=s(54132),rn=s(72870),an=s(8399);qs.D([tn.N,sn.N,en.N,an.N,nn.N,rn.N]);const ln=e=>{let{data:t,bgTooltip:s="#233333"}=e;return{tooltip:{trigger:"item",backgroundColor:s,extraCssText:"border-radius: 0px",formatter:function(e){return`<div style="width: 200px; font-weight: 400"><span style="display: flex; justify-content: space-between"><span style="font-size: 14px, font-weight: 400">Value</span> <span style="font-size: 16px; font-weight: 700">${r.util.numeric(e.data.value).format("0,0.[0000]")}</span></span> <span style="display: flex; justify-content: space-between;"><span style="font-size: 14px; font-weight: 400">Token amount</span> <span style="font-size: 16px; font-weight: 700">${r.util.numeric(e.data.tokenAmount).format("0,0.[0000]")}</span></span></div>`},textStyle:{color:"#F4F5F5"}},legend:{show:!1,height:"100%",width:"100%"},series:[{width:"300",center:[110,"50%"],name:"Sentre chart",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold",color:"#F4F5F5",overflow:"hidden"}},itemStyle:{color:e=>r.util.randomColor(e.name)},labelLine:{show:!1},data:Object.values(t).map((e=>({value:e.usdValue,name:`${e.symbol}`,tokenAmount:e.amountToken,percentRatio:e.ratio})))}],media:[{query:{maxWidth:300},option:{series:[{center:[100,"50%"],radius:["35%","60%"]}]}},{query:{maxWidth:200},option:{series:[{center:[70,"50%"],radius:["25%","45%"]}]}}]}},on=e=>{let{data:t}=e;return(0,P.jsx)(Xs.Z,{echarts:Qs,option:ln({data:t,bgTooltip:"#123432"}),notMerge:!0,lazyUpdate:!0})},cn=e=>{let{data:t}=e;const s=(0,n.useMemo)((()=>Object.values(t).sort(((e,t)=>t.ratio-e.ratio))),[t]);return(0,P.jsx)(l.Row,{gutter:[12,12],children:s.map(((e,t)=>(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{align:"middle",wrap:!1,gutter:[16,16],children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Avatar,{style:{background:r.util.randomColor(e.symbol)},shape:"square",size:16}),(0,P.jsxs)(l.Typography.Text,{ellipsis:!0,type:"secondary",children:[e.symbol," (",e.name,")"]})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsxs)(l.Typography.Text,{children:[r.util.numeric(e.ratio).format("0,0.[00]"),"%"]})})]})},t)))})},dn=e=>{let{vestingAllocation:t,loading:s}=e;return(0,P.jsx)(l.Card,{className:"card-lightning",bodyStyle:{paddingBottom:0},style:{height:"100%"},loading:s,children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Title,{level:5,children:"Vesting allocation"})}),(0,P.jsx)(l.Col,{span:24,children:Object.keys(t).length?(0,P.jsxs)(l.Row,{gutter:[8,8],align:"middle",children:[(0,P.jsx)(l.Col,{xs:14,sm:10,children:(0,P.jsx)(on,{data:t})}),(0,P.jsx)(l.Col,{xs:10,sm:14,children:(0,P.jsx)(cn,{data:t})})]}):(0,P.jsx)(l.Empty,{})})]})})},un=e=>{const[t,s]=(0,n.useState)({}),[i,a]=(0,n.useState)(0),l=(0,r.useGetMintDecimals)(),{listHistory:o,numberOfRecipient:c,loading:d}=ys({type:e}),{getTotalBalance:h}=tt(),x=(0,n.useMemo)((()=>{const e={};for(const{mint:t,total:s}of o)if(e[t]){const n=e[t];e[t]=n.add(new u.BN(s))}else e[t]=new u.BN(s);return e}),[o]),j=(0,n.useCallback)((async()=>{const e=[];for(const s in x)e.push({mint:s,amount:x[s]});const t=await h(e);return a(t)}),[h,x]),g=(0,n.useCallback)((async()=>{const e=[];for(const s in x){var t;const n=await r.tokenProvider.findByAddress(s),i=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId;i&&e.push(i)}return await y(e)}),[x]),f=(0,n.useCallback)((async()=>{try{const t={};if(!i)return s(t);const n=await g();for(const s in x){var e;const a=await r.tokenProvider.findByAddress(s),o=null===a||void 0===a||null===(e=a.extensions)||void 0===e?void 0:e.coingeckoId;if(!o)continue;const c=await l({mintAddress:s})||0,d=p.utilsBN.undecimalize(x[s],c),u=n[o]*Number(d),h=u/i*100;if(h<2){let e=d,s=u,n=h;if(t.other){const{amountToken:i,usdValue:r,ratio:a}=t.other;e+=i,s+=r,n+=a}t.other={name:"Other",symbol:"",amountToken:e,usdValue:s,ratio:n}}else t[s]={name:`${null===a||void 0===a?void 0:a.name}`,symbol:`${null===a||void 0===a?void 0:a.symbol}`,amountToken:d,usdValue:u,ratio:h}}return s(t)}catch(t){m(t)}}),[g,l,x,i]);return(0,n.useEffect)((()=>{j()}),[j]),(0,n.useEffect)((()=>{f()}),[f]),{allocation:t,totalUSD:i,numberOfRecipient:c,numberOfCampaigns:o.length,loading:d}},pn=()=>{const{pushHistory:e}=A(),t=(0,i.useDispatch)(),{allocation:s,totalUSD:n,numberOfRecipient:r,numberOfCampaigns:a,loading:c}=un(pe.Vesting);return(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsx)(l.Typography.Title,{level:2,children:"Vesting"})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(l.Button,{icon:(0,P.jsx)(o.Z,{name:"add-outline"}),type:"primary",size:"large",onClick:()=>(e("/vesting/add-new"),t(Ce(pe.Vesting))),children:"ADD NEW"})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,lg:8,children:(0,P.jsx)(Js,{loading:c,valueInUSD:n,numberOfCampaign:a,recipientList:r})}),(0,P.jsx)(l.Col,{span:24,lg:16,children:(0,P.jsx)(dn,{vestingAllocation:s,loading:c})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Gs,{})})]})},hn=e=>{let{airdropAllocation:t,loading:s}=e;return(0,P.jsx)(l.Card,{loading:s,className:"card-lightning",style:{height:"100%"},bodyStyle:{paddingBottom:0},children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Title,{level:5,children:"Airdrop allocation"})}),(0,P.jsx)(l.Col,{span:24,children:Object.keys(t).length?(0,P.jsxs)(l.Row,{gutter:[8,8],align:"middle",children:[(0,P.jsx)(l.Col,{xs:14,sm:10,children:(0,P.jsx)(on,{data:t})}),(0,P.jsx)(l.Col,{xs:10,sm:14,children:(0,P.jsx)(cn,{data:t})})]}):(0,P.jsx)(l.Empty,{})})]})})},xn=()=>{const[e,t]=(0,n.useState)(4),{loading:s}=ys({type:pe.Airdrop}),[i,r]=(0,n.useState)([]);return(0,P.jsx)(l.Card,{loading:s,className:"card-lightning",children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Typography.Title,{level:5,children:"History"}),(0,P.jsx)(l.Typography.Text,{className:"amount-airdrop",children:i.length})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(ws,{onFilter:r,type:pe.Airdrop})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)($s,{sentList:i.slice(0,e)})}),(0,P.jsx)(l.Col,{span:24,style:{textAlign:"center"},children:(0,P.jsx)(l.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,P.jsx)(o.Z,{name:"arrow-down-outline"}),disabled:e>=i.length,children:"VIEW MORE"})})]})})},mn=e=>{let{valueInUSD:t,numberOfCampaign:s,recipientList:n,loading:i}=e;return(0,P.jsxs)(l.Row,{gutter:[24,24],style:{height:"100%"},children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Xe,{label:"Total airdrop",icon:(0,P.jsx)(o.Z,{className:"card-hero-icon",name:"cloud-download-outline"}),value:t,loading:!t&&i})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Xe,{label:"Total campaigns",icon:(0,P.jsx)(o.Z,{className:"card-hero-icon",name:"paper-plane-outline"}),value:s,unit:"",loading:!s&&i})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Xe,{loading:!n&&i,label:"Total recipients",icon:(0,P.jsx)(o.Z,{className:"card-hero-icon",name:"people-outline"}),value:n,unit:""})})]})},jn=()=>{const{pushHistory:e}=A(),t=(0,i.useDispatch)(),{allocation:s,totalUSD:n,numberOfRecipient:r,numberOfCampaigns:a,loading:c}=un(pe.Airdrop);return(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsx)(l.Typography.Title,{level:2,children:"Airdrop"})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(l.Button,{icon:(0,P.jsx)(o.Z,{name:"add-outline"}),type:"primary",size:"large",onClick:()=>(e("/airdrop/add-new"),t(Ce(pe.Airdrop))),children:"ADD NEW"})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,lg:8,children:(0,P.jsx)(mn,{valueInUSD:n,numberOfCampaign:a,recipientList:r,loading:c})}),(0,P.jsx)(l.Col,{span:24,lg:16,children:(0,P.jsx)(hn,{airdropAllocation:s,loading:c})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(xn,{})})]})},yn=e=>{let{visible:t,setVisible:s,title:n,description:i,onConfirm:r,onCancel:a,btnText:c}=e;return(0,P.jsx)(l.Modal,{visible:t,closeIcon:(0,P.jsx)(o.Z,{name:"close-outline"}),onCancel:()=>s(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,P.jsxs)(l.Row,{gutter:[32,32],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{size:15,align:"baseline",children:[(0,P.jsx)(o.Z,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,P.jsxs)(l.Space,{size:4,direction:"vertical",children:[(0,P.jsx)(l.Typography.Text,{children:n}),(0,P.jsx)(l.Typography.Text,{type:"secondary",children:i})]})]})}),(0,P.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Button,{onClick:a,type:"ghost",children:"cancel"}),(0,P.jsx)(l.Button,{onClick:r,type:"primary",children:c})]})})]})})},gn=()=>{const e=(0,i.useSelector)((e=>e.setting.decimal)),t=(0,i.useSelector)((e=>e.recipients.recipientInfos));return{amountError:(0,n.useMemo)((()=>{let s=[];for(const e in t)s=s.concat(t[e]);for(const{amount:t}of s)if(!e&&Number(t)%1!==0)return!0;return!1}),[e,t])}},fn=()=>{const{main:{mintSelected:e},recipients:{recipientInfos:t,expirationTime:s},setting:{decimal:a}}=(0,i.useSelector)((e=>e)),l=(0,r.useMintDecimals)({mintAddress:e})||0,o=(0,n.useCallback)((e=>{if(!s)return!0;for(const{unlockTime:t}of e)if(t>s)return!1;return!0}),[s]),d=(0,n.useMemo)((()=>{if(!t||void 0===l)return new u.BN(0);let e=new u.BN(0),s=[];for(const n in t){const e=o(t[n]);c.account.isAddress(n)&&e&&(s=s.concat(t[n]))}for(const{amount:t}of s)a?e=e.add(p.utilsBN.decimalize(t,l)):Number(t)%1===0&&(e=e.add(new u.BN(t)));return e}),[o,a,l,t]),h=(0,n.useMemo)((()=>Object.keys(t).length),[t]);return{total:p.utilsBN.undecimalize(d,l).toString(),quantity:h}},Cn=(e,t,s)=>c.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(c.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},bn=e=>{const t=(0,r.useAccounts)(),s=(0,r.useWalletAddress)(),n=(0,r.useWalletBalance)(),{amount:i,mint:a}=t[e]||{},l=(0,r.useMintDecimals)({mintAddress:a})||0;return c.account.isAddress(s)&&c.account.isAddress(e)?e===s?Cn(c.DEFAULT_EMPTY_ADDRESS,n,9):Cn(a,i,l):Cn()},wn=e=>{const[t,s]=(0,n.useState)(""),i=(0,r.useWalletAddress)(),a=bn(t);return(0,n.useEffect)((()=>{(async()=>{if(!c.account.isAddress(i)||!c.account.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const n=await t.deriveAssociatedAddress(i,e);s(n)}catch(n){return s("")}})()})),a},vn=e=>{const{balance:t}=wn(e),{total:s}=fn();return(0,n.useMemo)((()=>t?t-Number(s):0),[t,s])},Tn=e=>{let{type:t}=e;const s=(0,i.useSelector)((e=>e.recipients.recipientInfos));return(0,n.useMemo)((()=>{let e=[];for(const n in s)(c.account.isAddress(n)||t!==B.valid)&&(c.account.isAddress(n)&&t===B.invalid||(e=e.concat(s[n])));return e}),[s,t])},An=()=>{const[e,t]=(0,n.useState)(!1),s=(0,i.useDispatch)(),{main:{isTyping:r,mintSelected:a}}=(0,i.useSelector)((e=>e)),{amountError:o}=gn(),c=vn(a),d=Tn({type:B.invalid}),u=!Tn({type:B.valid}).length||!!d.length||r||c<0||o,p=(0,n.useCallback)((async()=>(await s(z(R.SelectMethod)),await s(me(k.manual)),await s(re()),t(!1))),[s]);return(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{type:"ghost",size:"large",onClick:()=>t(!0),block:!0,children:"Back"})}),(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{size:"large",onClick:()=>s(z(R.ConfirmTransfer)),type:"primary",disabled:u,block:!0,children:"Continue"})}),(0,P.jsx)(yn,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:p})]})};var Sn=s(24656),kn=s.n(Sn),Rn=s(18268),Nn=s.n(Rn);const Dn=e=>{let{label:t,value:s}=e;const n=(0,r.useInfix)()<r.Infix.xl;return(0,P.jsxs)(l.Row,{gutter:[4,4],children:[(0,P.jsx)(l.Col,{flex:n?"auto":void 0,span:n?void 0:24,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:t})}),(0,P.jsx)(l.Col,{span:n?void 0:24,children:s})]})},In=e=>{let{isConfirm:t=!1}=e;const{main:{mintSelected:s,typeDistribute:n},recipients:{expirationTime:a,globalUnlockTime:o}}=(0,i.useSelector)((e=>e)),{total:c,quantity:d}=fn(),{balance:u}=wn(s),p=vn(s);return(0,P.jsxs)(l.Row,{justify:t?"space-between":void 0,gutter:[8,8],children:[(0,P.jsx)(l.Col,{xs:24,xl:12,children:(0,P.jsxs)(l.Row,{gutter:[{xs:16,sm:16,md:16,xl:48},{xs:16,sm:16,md:16,xl:48}],children:[(0,P.jsx)(l.Col,{xs:24,xl:8,children:(0,P.jsx)(Dn,{label:"Recipients",value:(0,P.jsx)(l.Typography.Text,{children:d})})}),n===pe.Airdrop&&(0,P.jsx)(l.Col,{xs:24,xl:8,children:(0,P.jsx)(Dn,{label:"Unlock time",value:(0,P.jsx)(l.Typography.Text,{children:o?It()(o).format(E):"Immediately"})})}),(0,P.jsx)(l.Col,{xs:24,xl:8,children:(0,P.jsx)(Dn,{label:"Expiration time",value:(0,P.jsx)(l.Typography.Text,{children:a?It()(a).format(E):"Unlimited"})})})]})}),(0,P.jsx)(l.Col,{xs:24,xl:12,className:"overview-data",children:(0,P.jsxs)(l.Row,{gutter:[{xs:16,sm:16,md:16,xl:48},{xs:16,sm:16,md:16,xl:48}],children:[(0,P.jsx)(l.Col,{xs:24,xl:8,children:(0,P.jsx)(Dn,{label:"Your balance",value:(0,P.jsxs)(l.Space,{size:4,children:[(0,P.jsx)(l.Typography.Text,{children:r.util.numeric(u).format("0,0.00[0000]")}),(0,P.jsx)(l.Typography.Text,{children:(0,P.jsx)(h.Z,{mintAddress:s})})]})})}),!t&&(0,P.jsx)(l.Col,{xs:24,xl:8,children:(0,P.jsx)(Dn,{label:"Total",value:(0,P.jsxs)(l.Space,{size:4,children:[(0,P.jsx)(l.Typography.Title,{level:5,children:c}),(0,P.jsx)(l.Typography.Title,{level:5,children:(0,P.jsx)(h.Z,{mintAddress:s})})]})})}),(0,P.jsx)(l.Col,{xs:24,xl:8,children:(0,P.jsx)(Dn,{label:"Remaining",value:(0,P.jsxs)(l.Space,{size:4,children:[(0,P.jsx)(l.Typography.Text,{children:r.util.numeric(p).format("0,0.00[0000]")}),(0,P.jsx)(l.Typography.Text,{children:(0,P.jsx)(h.Z,{mintAddress:s})})]})})})]})})]})},Bn=()=>(0,P.jsx)(l.Card,{bordered:!1,style:{borderRadius:8,boxShadow:"unset"},bodyStyle:{padding:"12px 16px"},className:"card-total",children:(0,P.jsx)(In,{})});var En=s(84354);const Mn=e=>{let{accountAddress:t="",amount:s=0,selected:a=!1,onChecked:d=(()=>{}),index:u}=e;const[p,h]=(0,n.useState)(!1),[x,m]=(0,n.useState)(s),j=(0,i.useSelector)((e=>e.file.selectedFile)),y=(0,i.useSelector)((e=>e.setting.decimal)),g=(0,i.useSelector)((e=>e.recipients.globalUnlockTime)),f=(0,i.useDispatch)(),C=c.account.isAddress(t),b=(0,n.useMemo)((()=>!!s&&(!y&&Number(s)%1!==0)),[s,y]),w=(0,n.useCallback)((()=>f(ge(!!p))),[f,p]);return(0,n.useEffect)((()=>{m(s)}),[s]),(0,n.useEffect)((()=>{w()}),[w]),(0,P.jsxs)(l.Row,{gutter:[16,8],align:"middle",className:"vesting-item",children:[(0,P.jsx)(l.Col,{span:2,children:(0,P.jsxs)(l.Space,{children:[a&&(0,P.jsx)(l.Checkbox,{checked:null===j||void 0===j?void 0:j.includes(t),onChange:e=>d(e.target.checked,t),className:"lightning-checkbox"}),(0,P.jsxs)(l.Typography.Text,{type:"secondary",children:["#",u+1]})]})}),(0,P.jsx)(l.Col,{span:14,children:p?(0,P.jsx)(l.Input,{value:t,name:"accountAddress",className:"recipient-input",autoComplete:"off",disabled:!0}):(0,P.jsx)(l.Tooltip,{title:t,children:(0,P.jsx)(l.Typography.Text,{style:{color:C?"":"#F9575E"},children:r.util.shortenAddress(t)})})}),(0,P.jsx)(l.Col,{span:4,children:(0,P.jsx)(En.Z,{value:x,bordered:!1,disabled:!p,style:{padding:0},onChange:e=>{m(e)},className:b?"recipient-input-error":"recipient-input"})}),(0,P.jsx)(l.Col,{span:4,className:p?"":"vesting-action",children:p?(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Button,{onClick:()=>h(!1),type:"text",children:"cancel"}),(0,P.jsx)(l.Button,{style:{padding:0,color:"#42E6EB"},onClick:()=>{if(!C)return;const e=[{address:t,amount:x.toString(),unlockTime:g}];return f(ae({walletAddress:t,nextRecipientInfos:e})),h(!1)},type:"text",children:"save"})]}):(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Button,{onClick:()=>f(ne(t)),icon:(0,P.jsx)(o.Z,{name:"trash-outline"}),type:"text"}),C&&(0,P.jsx)(l.Button,{onClick:()=>h(!0),icon:(0,P.jsx)(o.Z,{name:"create-outline"}),type:"text"})]})})]})},On=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;return(0,P.jsxs)(l.Row,{gutter:[16,8],align:"middle",children:[(0,P.jsx)(l.Col,{span:2,children:(0,P.jsxs)(l.Space,{children:[t&&(0,P.jsx)(l.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,P.jsx)(l.Typography.Text,{type:"secondary",children:"No."})]})}),(0,P.jsx)(l.Col,{span:14,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,P.jsx)(l.Col,{span:4,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})})]})},Zn=e=>{let{walletAddress:t,addNewRecipient:s,remove:i,isEdit:r=!1,setIsEdit:a=(()=>{}),disabled:c}=e;return(0,P.jsx)(n.Fragment,{children:t?(0,P.jsx)(n.Fragment,{children:r?(0,P.jsx)(l.Button,{style:{padding:0,color:"#42E6EB"},type:"text",onClick:s,size:"small",disabled:c,children:"Save"}):(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Button,{type:"text",size:"small",style:{padding:0},onClick:i,icon:(0,P.jsx)(o.Z,{style:{fonSize:20},name:"trash-outline"})}),(0,P.jsx)(l.Button,{type:"text",size:"small",onClick:()=>a(!0),style:{padding:0},icon:(0,P.jsx)(o.Z,{style:{fonSize:20},name:"create-outline"})})]})}):(0,P.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:s,children:"OK"})})},zn=()=>({calcListAmount:(0,n.useCallback)(((e,t)=>{const s=[],n=t-1,i=e.div(new u.BN(t));let r=new u.BN(0);for(let a=0;a<t;a++)if(a!==n)r=r.add(i),s.push(i);else{const t=e.sub(r);s.push(t)}return s}),[])}),Ln={walletAddress:"",amount:""},Fn=e=>{let{walletAddress:t,amount:s,index:a}=e;const[d,h]=(0,n.useState)(Ln),[x,m]=(0,n.useState)(""),[j,y]=(0,n.useState)(""),[g,f]=(0,n.useState)(!1),[C,b]=(0,n.useState)(!1),{main:{mintSelected:w,typeDistribute:v},recipients:{recipientInfos:T,configs:A,globalUnlockTime:S,expirationTime:k},setting:{decimal:R}}=(0,i.useSelector)((e=>e)),N=(0,i.useDispatch)(),D=(0,r.useMintDecimals)({mintAddress:w})||0,{calcListAmount:I}=zn(),B=(0,n.useCallback)((async()=>c.account.isAddress(t)&&s?h({walletAddress:t,amount:s}):h(Ln)),[t,s]),E=(0,n.useCallback)((()=>(!s&&!t||C)&&(d.walletAddress||d.amount||C)?N(ge(!0)):N(ge(!1))),[s,N,d.amount,d.walletAddress,C,t]),M=(0,n.useCallback)((()=>{if(s)return R?m(""):Number(s)%1!==0?m("Should be natural numbers"):void 0}),[s,R]),O=(0,n.useMemo)((()=>t&&void 0!==a?a+1:Object.keys(T).length+1),[a,T,t]),Z=!(!t||C),z=(0,n.useMemo)((()=>{const{distributeIn:e}=A,t=S+(0,F.Z)(e);return!!k&&((S>k||t>k)&&v===pe.Vesting)}),[k,A,S,v]);return(0,n.useEffect)((()=>{B()}),[B]),(0,n.useEffect)((()=>{M()}),[M]),(0,n.useEffect)((()=>{E()}),[E]),(0,P.jsxs)(l.Row,{gutter:[8,8],align:"middle",justify:"space-between",children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{children:[(0,P.jsxs)(l.Col,{flex:"auto",children:["Wallet address #",O]}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(Zn,{addNewRecipient:async()=>{const{walletAddress:e,amount:t}=d;if(!c.account.isAddress(e))return y("Wrong wallet address");if(!t)return m("Amount cannot be empty");if(!R&&Number(t)%1!==0)return m("Should be natural numbers");const s=[];if(T[e]&&!C)return f(!0);const n={address:e,amount:t,unlockTime:S};return s.push(n),y(""),m(""),b(!1),C||h(Ln),N(se({walletAddress:e,nextRecipients:s}))},walletAddress:t,remove:()=>{if(c.account.isAddress(t))return N(ne(t))},isEdit:C,setIsEdit:b,disabled:z})})]})}),(0,P.jsx)(l.Col,{span:19,children:(0,P.jsx)(l.Input,{disabled:!!t,value:d.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:e=>{h({...d,[e.target.name]:e.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,P.jsx)(l.Col,{span:5,children:(0,P.jsx)(En.Z,{disabled:Z,value:s||d.amount,name:"amount",placeholder:"Amount",onChange:e=>h({...d,amount:e}),className:x?"recipient-input-error":"recipient-input",autoComplete:"off"})}),(j||x)&&(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(o.Z,{style:{color:"#f2323f"},name:"warning-outline"}),(0,P.jsx)(l.Typography.Text,{type:"danger",children:j||x})]})}),(0,P.jsx)(yn,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",btnText:"merge",onConfirm:async()=>{const{walletAddress:e,amount:t}=d,s=T[e],n=s.length;let i=new u.BN(0);for(const{amount:o}of s)i=i.add(p.utilsBN.decimalize(o,D));const r=i.add(p.utilsBN.decimalize(t,D)),a=I(r,n),l=T[e].map(((e,t)=>({...e,amount:p.utilsBN.undecimalize(a[t],D)})));return await N(se({walletAddress:e,nextRecipients:l})),await f(!1),(x||j)&&(m(""),y("")),h(Ln)},visible:g,setVisible:f,onCancel:()=>f(!1)})]})},Pn="file",_n=(0,S.createAsyncThunk)("file/setFileName",(async e=>({fileName:e}))),Un=(0,S.createAsyncThunk)("file/selectRecipient",(async(e,t)=>{let{checked:s,walletAddress:n}=e,{getState:i}=t;const r=[...i().file.selectedFile];if(!s){const e=r.indexOf(n);r.splice(e,1)}return s&&r.push(n),{selectedFile:r}})),Vn=(0,S.createAsyncThunk)("file/removeSelectedFile",(async()=>({selectedFile:[]}))),Wn=(0,S.createAsyncThunk)("file/selectAll",(async e=>({selectedFile:e}))),Hn=(0,S.createSlice)({name:Pn,initialState:{fileName:"",selectedFile:[]},reducers:{},extraReducers:e=>{e.addCase(_n.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Un.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Vn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Wn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Yn=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,P.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,P.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,P.jsxs)(l.Space,{size:24,children:[(0,P.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,P.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(N.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},Kn=e=>{let{remove:t=(()=>{})}=e;const[s,r]=(0,n.useState)(!1),[a,c]=(0,n.useState)(),[d,u]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),x=(0,i.useDispatch)(),{file:{fileName:m,selectedFile:j},recipients:{recipientInfos:y}}=(0,i.useSelector)((e=>e)),g=Tn({type:B.invalid}),f=Tn({type:B.valid}),C=(e,t)=>x(Un({checked:e,walletAddress:t})),b=(0,n.useCallback)((()=>{if(null===j||void 0===j||!j.length)return;u(!0);const e={...y};for(const t of j)delete e[t];x(ee({recipientInfos:e})),x(Vn()),u(!1),r(!1)}),[x,y,j]),{amountError:w}=gn();return(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,P.jsxs)(l.Row,{gutter:8,children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(o.Z,{name:"document-attach-outline"}),(0,P.jsx)(l.Typography.Text,{style:{color:"inherit"},children:m})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(l.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,P.jsx)(o.Z,{name:"close-outline"}),onClick:()=>h(!0)})})]})})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[12,12],children:[(0,P.jsx)(l.Col,{flex:"auto",children:s&&(0,P.jsx)(l.Space,{children:(0,P.jsx)(l.Button,{type:"text",size:"small",icon:(0,P.jsx)(o.Z,{name:"trash-outline"}),onClick:b,disabled:!(null!==j&&void 0!==j&&j.length),children:"Delete"})})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(Yn,{activeKey:a,selected:s,onSelect:r,onCollapsed:c})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Collapse,{activeKey:a,bordered:!1,className:"auto-add-new",children:(0,P.jsx)(l.Collapse.Panel,{header:void 0,children:(0,P.jsx)(Fn,{})},N.activeKey)})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Spin,{spinning:d,children:(0,P.jsx)(l.Card,{bordered:!1,className:"card-content",children:(0,P.jsxs)(l.Row,{gutter:[8,13],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(On,{selected:s,onChecked:e=>{if(e){const e=g.concat(f).map((e=>{let{address:t}=e;return t}));x(Wn(e))}else x(Vn())}})}),g.map(((e,t)=>{let{address:n,amount:i}=e;return(0,P.jsx)(l.Col,{span:24,className:t+1===g.length?"last-item-error-data":"",children:(0,P.jsx)(Mn,{accountAddress:n,amount:i,selected:s,onChecked:C,index:f.length+t})},n+t)})),f.map(((e,t)=>{let{address:n,amount:i}=e;return(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Mn,{accountAddress:n,amount:i,selected:s,onChecked:C,index:t})},n+t)}))]})})})}),w&&(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{size:12,children:[(0,P.jsx)(o.Z,{style:{color:"#F9575E"},name:"warning-outline"}),(0,P.jsx)(l.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(In,{})})]})}),(0,P.jsx)(yn,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:p,setVisible:h,onConfirm:t,onCancel:()=>h(!1),btnText:"delete"})]})};const $n=s.p+"static/media/icon-upload.a3c69638b092ea112d393cdc3d63d2c4.svg",Gn=s.p+"static/media/example.5ac7e1383bf101857b35.csv",Jn=()=>{const e=(0,i.useDispatch)(),[t,s]=(0,n.useState)(!1),[a,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)({}),{recipients:{recipientInfos:h,globalUnlockTime:x},main:{mintSelected:m}}=(0,i.useSelector)((e=>e)),y=(0,r.useMintDecimals)({mintAddress:m})||0,g=(0,n.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>kn().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;t(s)}}))))(t);if(void 0===y)return;const i={};let r=!1;for(const[e,s]of n)if(i[e]){r=!0;const t=[...i[e]],n=p.utilsBN.decimalize(t[0].amount,y).add(p.utilsBN.decimalize(s,y));i[e]=[{address:e,amount:p.utilsBN.undecimalize(n,y),unlockTime:x}]}else i[e]=[{address:e,amount:s,unlockTime:x}];return r?(u(i),s(!1),c(!0),e(_n(t.name)),!0):(e(_n(t.name)),e(ee({recipientInfos:i})),s(!1),c(!1),!1)}),[e,x,y]),f=async()=>(e(re()),u({}),!0);return Object.values(h).length?(0,P.jsx)(Kn,{remove:f}):(0,P.jsxs)(l.Row,{gutter:[8,8],justify:"end",children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Spin,{spinning:t,children:(0,P.jsx)(l.Upload.Dragger,{accept:".csv,.txt",beforeUpload:g,onRemove:f,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,P.jsxs)(l.Space,{direction:"vertical",size:24,align:"center",children:[(0,P.jsx)(l.Image,{src:$n,preview:!1}),(0,P.jsxs)(l.Space,{direction:"vertical",size:4,align:"center",children:[(0,P.jsx)(l.Typography.Text,{children:"Click or Drop file to upload"}),(0,P.jsxs)(l.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,P.jsx)("code",{children:".csv"}),","," ",(0,P.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(l.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,P.jsx)(o.Z,{name:"download-outline"}),onClick:async()=>{if(!Gn)return;const e=await j(Gn)||"";Nn()(e,"example.csv")},children:"Download sample"})}),(0,P.jsx)(yn,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",visible:a,setVisible:c,onConfirm:()=>(e(ee({recipientInfos:d})),c(!1)),onCancel:()=>{c(!1),e(_n("")),u({})},btnText:"merge"})]})},qn="setting",Qn=(0,S.createAsyncThunk)("setting/setDecimal",(async e=>({decimal:e}))),Xn=(0,S.createAsyncThunk)("setting/setEncryption",(async e=>({encryption:e}))),ei=(0,S.createAsyncThunk)("setting/setDisabled",(async e=>({disabled:e}))),ti=(0,S.createSlice)({name:qn,initialState:{decimal:!0,encryption:!1,disabled:!1},reducers:{},extraReducers:e=>{e.addCase(Qn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Xn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ei.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,si=()=>{const e=(0,i.useDispatch)(),{main:{mintSelected:t},setting:{decimal:s,disabled:n}}=(0,i.useSelector)((e=>e)),a=(0,r.useMintDecimals)({mintAddress:t})||0;return(0,P.jsx)(l.Switch,{className:"decimal-switch",onChange:t=>{e(Qn(t))},checkedChildren:a,unCheckedChildren:a,disabled:n,checked:s,size:"small"})},ni=()=>{const e=(0,i.useDispatch)();return(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{size:24,children:[(0,P.jsx)(si,{}),(0,P.jsx)(l.Typography.Text,{children:"Decimals"})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{size:24,children:[(0,P.jsx)(l.Switch,{disabled:!0,onChange:t=>e(Xn(t)),size:"small"}),(0,P.jsx)(l.Typography.Text,{children:"Encrypt confidential information"})]})})]})},ii=()=>(0,P.jsx)(l.Popover,{trigger:"click",placement:"bottom",title:null,content:(0,P.jsx)(ni,{}),children:(0,P.jsx)(l.Button,{type:"text",icon:(0,P.jsx)(o.Z,{name:"cog-outline"})})}),ri={1:25,2:50,3:100},ai=e=>{let{label:t=""}=e;const{step:s}=(0,i.useSelector)((e=>e.steps));return(0,P.jsxs)(l.Row,{children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{direction:"vertical",size:12,children:[(0,P.jsx)(l.Progress,{className:"progress",percent:ri[s],steps:3,showInfo:!1}),(0,P.jsx)(l.Typography.Title,{level:5,children:t})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(ii,{})})]})},li=()=>(0,P.jsx)(l.Card,{bordered:!1,className:"card-lightning",children:(0,P.jsxs)(l.Row,{gutter:[32,32],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(ai,{label:"Fill in recipient information"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Jn,{})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(An,{})})]})}),oi=()=>{const[e,t]=(0,n.useState)(!1),s=(0,i.useDispatch)(),{recipients:{recipientInfos:r},main:{mintSelected:a,isTyping:o}}=(0,i.useSelector)((e=>e)),{quantity:c}=fn(),d=vn(a),u=(0,n.useMemo)((()=>{const e=[];for(const t in r)e.push(r[t][0]);return e}),[r]),{amountError:p}=gn(),h=(0,n.useCallback)((async()=>{await s(X(0)),await s(Q(0)),await s(z(R.SelectMethod)),await s(me(k.manual)),await s(re())}),[s]),x=c<=0||p||d<0||o;return(0,P.jsxs)(l.Card,{className:"card-lightning",bordered:!1,children:[(0,P.jsxs)(l.Row,{gutter:[32,32],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(ai,{label:"Fill in recipient information"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[8,8],children:[u&&u.map(((e,t)=>{let{address:s,amount:n}=e;return(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Fn,{amount:n,walletAddress:s,index:t})},s+t)})),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Fn,{})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Bn,{})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{onClick:()=>t(!0),size:"large",type:"ghost",block:!0,children:"Back"})}),(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{size:"large",type:"primary",onClick:()=>s(z(R.ConfirmTransfer)),block:!0,disabled:x,children:"Continue"})})]})})]}),(0,P.jsx)(yn,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:h})]})},ci=e=>{let{placeholder:t,switchText:s,onChange:n,onSwitch:i,label:r,value:a,error:c,checked:d,explain:u}=e;return(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{align:"baseline",children:[(0,P.jsx)(l.Typography.Text,{className:"caption",children:r}),u]})}),(0,P.jsx)(l.Col,{children:(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{xs:{order:2},lg:{order:1},children:(0,P.jsx)(l.Typography.Text,{children:s})}),(0,P.jsx)(l.Col,{xs:{order:1},lg:{order:2},children:(0,P.jsx)(l.Switch,{size:"small",checked:d,onChange:e=>{n(0),i(e)}})})]})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.DatePicker,{placeholder:t,suffixIcon:(0,P.jsx)(o.Z,{name:"time-outline"}),className:"date-option",onChange:e=>n((null===e||void 0===e?void 0:e.valueOf())||0),disabled:d,clearIcon:null,value:a?It()(a):null,showTime:{showSecond:!1},placement:"bottomRight",format:E})}),c&&(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Text,{className:"caption",style:{color:"#F9575E"},children:c})})]})},di=e=>{let{mintAddress:t}=e;const[s,i]=(0,n.useState)(!1),{balance:a}=wn(t);return(0,P.jsxs)(l.Row,{gutter:[8,8],style:{background:"#233333",height:70,padding:"12px 16px"},children:[(0,P.jsx)(l.Col,{span:12,children:(0,P.jsxs)(l.Space,{size:4,direction:"vertical",children:[(0,P.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:"Balance"}),a?(0,P.jsxs)(l.Typography.Text,{children:[r.util.numeric(a).format("0.0,[0000]")," ",(0,P.jsx)(h.Z,{mintAddress:t})]}):0]})}),(0,P.jsx)(l.Col,{span:12,children:(0,P.jsxs)(l.Space,{size:0,direction:"vertical",children:[(0,P.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:"Mint address"}),t!==de?(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Typography.Text,{children:r.util.shortenAddress(t)}),(0,P.jsx)(l.Tooltip,{title:"Copied",visible:s,children:(0,P.jsx)(As(),{text:t,children:(0,P.jsx)(l.Button,{type:"text",onClick:async()=>{i(!0),await r.util.asyncWait(1500),i(!1)},icon:(0,P.jsx)(o.Z,{name:"copy-outline"})})})})]}):"--"]})})]})},ui=e=>{let{label:t,description:s,active:i}=e;return(0,P.jsxs)(n.Fragment,{children:[i?(0,P.jsx)(o.Z,{name:"checkbox-sharp",style:{position:"absolute",top:0,right:0,color:"#42E6EB",fontSize:20}}):null,(0,P.jsxs)(l.Row,{gutter:[12,12],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Title,{level:5,children:t})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:s})})]})]})},pi=e=>{let{method:t,onChange:s}=e;return(0,P.jsxs)(l.Space,{size:12,direction:"vertical",style:{width:"100%"},children:[(0,P.jsx)(l.Typography.Text,{children:"Choose transfer info input method"}),(0,P.jsx)(l.Radio.Group,{onChange:e=>s(e.target.value),style:{width:"100%"},className:"select-card",children:(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{xs:24,sm:12,md:12,lg:12,children:(0,P.jsx)(l.Radio.Button,{value:k.manual,children:(0,P.jsx)(ui,{label:"Manual",description:"Input each wallet address and airdrop amount by hand.",active:t===k.manual})})}),(0,P.jsx)(l.Col,{xs:24,sm:12,md:12,lg:12,children:(0,P.jsx)(l.Radio.Button,{value:k.auto,children:(0,P.jsx)(ui,{label:"Automatic",description:"Upload a CSV or TXT file containing wallet addresses and airdrop amount.",active:t===k.auto})})})]})})]})},hi=()=>{const e=(0,i.useDispatch)(),{expirationTime:t,globalUnlockTime:s}=(0,i.useSelector)((e=>e.recipients)),r=(0,i.useSelector)((e=>e.main.mintSelected)),[a,c]=(0,n.useState)(k.manual),[d,u]=(0,n.useState)(s),[p,h]=(0,n.useState)(t),[x,m]=(0,n.useState)(!0),[j,y]=(0,n.useState)(!0),{pushHistory:g}=A(),f=(0,n.useMemo)((()=>x?0:d),[x,d]),C=(0,n.useMemo)((()=>j?0:p),[p,j]),b=(0,n.useMemo)((()=>p<s&&!x&&p?"Must be less than the expiration time.":""),[p,s,x]),w=(0,n.useMemo)((()=>p<Date.now()&&!j&&p?"Must be greater than current time.":""),[p,j]),v=r===de||!a||!d&&!x||!p&&!j||p<s&&!j||p<Date.now()&&!j;return(0,n.useEffect)((()=>{e(X(f)),e(Q(C))}),[e,C,f]),(0,P.jsx)(l.Card,{className:"card-lightning",bordered:!1,children:(0,P.jsxs)(l.Row,{gutter:[32,32],align:"middle",children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(ai,{label:"Select token type and input method"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{xs:24,md:24,xl:12,children:(0,P.jsx)(ue,{activeMintAddress:r,onSelect:t=>{e(je(t))}})}),(0,P.jsx)(l.Col,{xs:24,md:24,xl:12,children:(0,P.jsx)(di,{mintAddress:r})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(pi,{method:a,onChange:e=>c(e)})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{xs:24,lg:12,children:(0,P.jsx)(ci,{label:"Unlock time",onSwitch:m,switchText:"Send immediately",onChange:u,placeholder:"Select unlock time",value:d,error:b,checked:x})}),(0,P.jsx)(l.Col,{xs:24,lg:12,children:(0,P.jsx)(ci,{label:"Expiration time",onSwitch:y,switchText:"Unlimited",onChange:h,placeholder:"Select time",value:p,error:w,checked:j,explain:(0,P.jsx)(l.Tooltip,{title:"Vesting expiration time, after this time users will not be able to claim the token and you can get it back.",children:(0,P.jsx)(o.Z,{name:"information-circle-outline"})})})})]})})]})}),(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{size:"large",onClick:()=>g("/airdrop"),block:!0,type:"ghost",children:"Cancel"})}),(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{size:"large",onClick:()=>{e(me(a)),e(z(R.AddRecipient))},block:!0,type:"primary",disabled:v,children:"Continue"})})]})})};var xi=s(97429).Buffer;const{sol:{utility:mi,fee:ji,taxman:yi},manifest:{appId:gi}}=v,fi=()=>{const[e,t]=(0,n.useState)(!1),[s,a]=(0,n.useState)(""),[o,p]=(0,n.useState)(!1),{main:{mintSelected:m,typeDistribute:j},setting:{decimal:y},recipients:{recipientInfos:g,expirationTime:f}}=(0,i.useSelector)((e=>e)),C=(0,i.useDispatch)(),b=(0,r.useMintDecimals)({mintAddress:m})||0,{total:w}=fn(),v=vn(m),{onPushAndClear:T}=Te(),A=Ot(),S=(0,n.useMemo)((()=>{if(!g||void 0===b)return;let e=[];for(const s in g)e=e.concat(g[s]);const t=e.map(((e,t)=>{let{amount:s,address:n,unlockTime:i}=e;const r=(e=>{const t=new Date(e).toUTCString();return new Date(t).getTime()})(i),a=y?c.utils.decimalize(s,b).toString():s;return{authority:c.account.fromAddress(n),amount:new u.BN(a),startedAt:new u.BN(r/1e3),salt:d.MerkleDistributor.salt(`${gi}/${j}/${t.toString()}`)}}));return new d.MerkleDistributor(t).toBuffer()}),[g,b,y,j]),k={fee:new u.BN(ji),feeCollectorAddress:yi};return(0,P.jsxs)(l.Card,{bordered:!1,className:"card-lightning",children:[(0,P.jsxs)(l.Row,{gutter:[32,32],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(ai,{label:"Confirm transfer"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[24,24],justify:"center",children:[(0,P.jsx)(l.Col,{children:(0,P.jsxs)(l.Space,{direction:"vertical",size:12,align:"center",children:[(0,P.jsx)(l.Typography.Text,{children:"Total transfer"}),(0,P.jsx)(l.Typography.Title,{level:1,children:w}),(0,P.jsx)(l.Tag,{style:{margin:0,borderRadius:4,color:"rgb(66, 230, 235)",background:"rgba(66, 230, 235, 0.1)",border:"unset"},children:(0,P.jsx)(h.Z,{mintAddress:m})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Card,{bordered:!1,className:"card-total",children:(0,P.jsx)(In,{isConfirm:!0})})})]})}),(0,P.jsx)(l.Col,{span:24,children:o?(0,P.jsx)(l.Button,{size:"large",type:"primary",block:!0,onClick:()=>T(`/${j}`),children:"Home"}):(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{size:"large",onClick:()=>C(z(R.AddRecipient)),block:!0,type:"ghost",children:"BACK"})}),(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{size:"large",onClick:async()=>{try{if(!S)throw new Error("Invalid Merkle Data");t(!0);const s=d.MerkleDistributor.fromBuffer(S),{digest:n}=await Me.methods.metadata.set({checked:!1,createAt:Math.floor(Date.now()/1e3),data:S}),i=xi.from(n);try{await C(Ze({cid:Me.decodeCID(n)})),A()}catch(e){}const{txId:r,distributorAddress:l}=await mi.initializeDistributor({tokenAddress:m,total:s.getTotal(),merkleRoot:s.deriveMerkleRoot(),metadata:i,endedAt:f/1e3,feeOptions:k});return p(!0),x("Airdrop",r),a(`${window.location.origin}/app/${gi}/redeem/${l}?autoInstall=true`)}catch(e){window.notify({type:"error",description:e.message})}finally{t(!1)}},type:"primary",loading:e,disabled:v<0,block:!0,children:"TRANSFER"})})]})})]}),(0,P.jsx)(ks,{visible:Boolean(s),onClose:()=>a(""),redeemLink:s})]})},Ci=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,i.useSelector)((e=>e));return t===R.SelectMethod?(0,P.jsx)(hi,{}):t===R.AddRecipient?e===k.auto?(0,P.jsx)(li,{}):(0,P.jsx)(oi,{}):(0,P.jsx)(fi,{})},bi=()=>(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Title,{level:2,children:"Add new Airdrop"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Ci,{})})]}),wi=e=>{let{type:t}=e;const s=(0,i.useSelector)((e=>e.recipients.recipientInfos)),r=(0,i.useSelector)((e=>e.recipients.expirationTime)),a=(0,n.useCallback)((e=>{if(!r)return!0;for(const{unlockTime:t}of e)if(t>r)return!1;return!0}),[r]);return(0,n.useMemo)((()=>{let e=[];const n=[];for(const i in s){const n=a(s[i]);c.account.isAddress(i)&&n&&t===B.invalid||(c.account.isAddress(i)&&n||t!==B.valid)&&(e=e.concat(s[i]))}for(const{address:t,amount:s,unlockTime:i}of e){const e=n.findIndex((e=>{let{address:s}=e;return s===t}));if(-1===e)n.push({address:t,config:[{unlockTime:i,amount:s}]});else{const t={...n[e]};t.config.push({unlockTime:i,amount:s}),n[e]=t}}return n}),[a,s,t])},vi=()=>{const[e,t]=(0,n.useState)(!1),s=(0,i.useDispatch)(),{main:{isTyping:r,mintSelected:a}}=(0,i.useSelector)((e=>e)),{amountError:o}=gn(),c=vn(a),d=!!wi({type:B.invalid}).length||r||c<0||o,u=(0,n.useCallback)((async()=>{s(z(R.SelectMethod)),s(be("")),s(Q(0)),s(re())}),[s]);return(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{type:"ghost",size:"large",onClick:()=>t(!0),block:!0,children:"Back"})}),(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{size:"large",onClick:()=>s(z(R.ConfirmTransfer)),type:"primary",disabled:d,block:!0,children:"Continue"})}),(0,P.jsx)(yn,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:u})]})},Ti=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;return(0,P.jsxs)(l.Row,{gutter:[16,8],align:"middle",wrap:!1,style:{padding:8},children:[(0,P.jsx)(l.Col,{span:2,children:(0,P.jsxs)(l.Space,{children:[t&&(0,P.jsx)(l.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,P.jsx)(l.Typography.Text,{type:"secondary",children:"No."})]})}),(0,P.jsx)(l.Col,{span:4,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,P.jsx)(l.Col,{span:16,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:"Amount & Unlock time"})}),(0,P.jsx)(l.Col,{span:2})]})},Ai=e=>{let{walletAddress:t}=e;const s=(0,i.useSelector)((e=>e.recipients.expirationTime));return(0,P.jsx)(l.Card,{className:"card-overview",bodyStyle:{padding:"13px 16px"},children:(0,P.jsxs)(l.Row,{gutter:[10,10],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Et,{label:"Wallet Address",value:r.util.shortenAddress(t)})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Et,{label:"Expiration Time",value:s?It()(s).format("DD/MM/YYYY HH:mm"):"Unlimited"})})]})})},Si=e=>{let{walletAddress:t,setVisible:s,visible:r}=e;const[a,c]=(0,n.useState)([]),d=(0,i.useSelector)((e=>e.recipients.recipientInfos[t])),u=(0,i.useSelector)((e=>e.recipients.expirationTime)),p=(0,i.useSelector)((e=>e.setting.decimal)),h=(0,i.useDispatch)(),x={unlockTime:0,amount:"",address:t},m=(0,n.useMemo)((()=>{for(const{amount:e,unlockTime:t}of a){if(!t||!e)return!0;if(t>u&&u)return!0;if(!p&&Number(e)%1!==0)return!0}return!1}),[p,u,a]);return(0,n.useEffect)((()=>{c(d)}),[d]),(0,P.jsx)(l.Modal,{footer:null,className:"card-lightning",style:{paddingBottom:0},closeIcon:(0,P.jsx)(o.Z,{name:"close-outline"}),visible:r,onCancel:e=>(e.stopPropagation(),s(!1)),children:(0,P.jsxs)(l.Row,{gutter:[32,32],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Title,{level:4,children:"Edit amount & unlock time"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[16,16],children:[a.map(((e,t)=>{let{amount:s,unlockTime:n}=e;return(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{span:11,children:(0,P.jsx)(l.Input,{name:"amount",className:"recipient-input",placeholder:"Input amount",value:s,onChange:e=>((e,t)=>{const s=[...a];return s[t]={...s[t],amount:e.target.value},c(s)})(e,t)})}),(0,P.jsx)(l.Col,{span:11,children:(0,P.jsx)(l.DatePicker,{placeholder:"Select unlock time",suffixIcon:(0,P.jsx)(o.Z,{name:"time-outline"}),className:n>u&&u?"date-option error":"date-option",onChange:e=>((e,t)=>{const s=[...a];return s[t]={...s[t],unlockTime:e},c(s)})((null===e||void 0===e?void 0:e.valueOf())||0,t),clearIcon:null,showTime:{showSecond:!1},placement:"bottomRight",value:n?It()(n):null,format:E})}),(0,P.jsx)(l.Col,{span:2,children:(0,P.jsx)(l.Button,{onClick:()=>(e=>{const t=[...a];return t.splice(e,1),c(t)})(t),type:"text",icon:(0,P.jsx)(o.Z,{name:"remove-circle-outline"})})}),!p&&Number(s)%1!==0&&(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{size:12,children:[(0,P.jsx)(o.Z,{style:{color:"#F9575E"},name:"warning-outline"}),(0,P.jsx)(l.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})})]})},t)})),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Button,{icon:(0,P.jsx)(o.Z,{name:"add-outline"}),size:"large",type:"dashed",block:!0,style:{background:"transparent"},onClick:()=>{const e=[...a];return e.push(x),c(e)},children:"Add more"})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Ai,{walletAddress:t})}),(0,P.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(l.Button,{onClick:e=>(e.stopPropagation(),s(!1)),type:"ghost",children:"Cancel"}),(0,P.jsx)(l.Button,{disabled:m,onClick:e=>(e.stopPropagation(),h(ae({walletAddress:t,nextRecipientInfos:a})),s(!1)),type:"primary",children:"update"})]})})]})})},ki=e=>{let{vestingItem:t,selected:s=!1,onChecked:a=(()=>{}),index:d}=e;const[u,p]=(0,n.useState)(!1),h=(0,i.useSelector)((e=>e.file.selectedFile)),x=(0,i.useSelector)((e=>e.setting.decimal)),m=(0,i.useSelector)((e=>e.recipients.expirationTime)),j=(0,i.useDispatch)(),y=!c.account.isAddress(t.address),g=(0,n.useMemo)((()=>{for(const{amount:e}of t.config)if(!x&&Number(e)%1!==0)return!0;return!1}),[x,t.config]);return(0,P.jsxs)(l.Row,{onClick:()=>p(!0),gutter:[16,8],align:"middle",wrap:!1,className:"vesting-item",children:[(0,P.jsx)(l.Col,{span:2,children:(0,P.jsxs)(l.Space,{children:[s&&(0,P.jsx)(l.Checkbox,{checked:null===h||void 0===h?void 0:h.includes(t.address),onChange:e=>a(e.target.checked,t.address),className:"lightning-checkbox",onClick:e=>e.stopPropagation()}),(0,P.jsxs)(l.Typography.Text,{type:"secondary",children:["#",d+1]})]})}),(0,P.jsx)(l.Col,{span:4,children:(0,P.jsx)(l.Tooltip,{title:t.address,children:(0,P.jsx)(l.Typography.Text,{style:{color:y?"#F9575E":""},children:r.util.shortenAddress(t.address)})})}),(0,P.jsx)(l.Col,{span:16,className:g?"recipient-input-error":"",children:(0,P.jsx)(l.Row,{gutter:[16,8],children:t.config.map(((e,t)=>{let{amount:s,unlockTime:n}=e;const i=n>m&&m;return(0,P.jsx)(l.Col,{className:i?"vesting-config-error":"vesting-config",children:(0,P.jsxs)(l.Typography.Text,{className:"caption",children:[s," / ",It()(n).format(E)]})},t)}))})}),(0,P.jsx)(l.Col,{span:2,className:"vesting-action",children:(0,P.jsx)(l.Button,{onClick:()=>j(ne(t.address)),icon:(0,P.jsx)(o.Z,{name:"trash-outline"}),type:"text"})}),(0,P.jsx)(Si,{setVisible:p,visible:u,walletAddress:t.address})]})},Ri={walletAddress:"",amount:""},Ni=()=>{const[e,t]=(0,n.useState)(Ri),[s,r]=(0,n.useState)(0),[a,d]=(0,n.useState)(""),[u,p]=(0,n.useState)(""),h=(0,i.useSelector)((e=>e.setting.decimal)),x=(0,i.useSelector)((e=>e.recipients.recipientInfos)),m=(0,i.useSelector)((e=>e.recipients.expirationTime)),j=(0,i.useDispatch)(),y=(0,n.useCallback)((()=>e.walletAddress||e.amount?j(ge(!0)):j(ge(!1))),[j,e.amount,e.walletAddress]),g=(0,n.useMemo)((()=>s>m&&m?"Unlock time must be less than the expiration time.":""),[m,s]);return(0,n.useEffect)((()=>{y()}),[y]),(0,P.jsxs)(l.Row,{gutter:[16,16],align:"middle",style:{padding:"12px 16px",background:"#394747"},children:[(0,P.jsx)(l.Col,{xs:24,md:12,xl:15,children:(0,P.jsx)(l.Input,{value:e.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:s=>{t({...e,[s.target.name]:s.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,P.jsx)(l.Col,{xs:24,md:5,xl:4,children:(0,P.jsx)(l.DatePicker,{placeholder:"Select time",suffixIcon:(0,P.jsx)(o.Z,{name:"time-outline"}),className:"date-option",onChange:e=>r((null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,showTime:{showSecond:!1},value:s?It()(s):null,placement:"bottomRight",format:E})}),(0,P.jsx)(l.Col,{xs:24,md:5,xl:4,children:(0,P.jsx)(En.Z,{value:e.amount,name:"amount",placeholder:"Amount",onChange:s=>t({...e,amount:s}),autoComplete:"off",className:"recipient-input"})}),(0,P.jsx)(l.Col,{xs:24,md:2,xl:1,children:(0,P.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:()=>{const{walletAddress:n,amount:i}=e;if(!c.account.isAddress(n))return p("Wrong wallet address");if(!i)return d("Amount cannot be empty");if(!h&&Number(i)%1!==0)return d("Should be natural numbers");let a=[];const l={address:n,amount:i,unlockTime:s};if(a.push(l),x[n]){a=[...x[n]].concat(a)}return t(Ri),p(""),d(""),r(0),j(se({walletAddress:n,nextRecipients:a}))},disabled:!!g||!s,children:"ok"})}),(u||a||g)&&(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(o.Z,{style:{color:"#f2323f"},name:"warning-outline"}),(0,P.jsx)(l.Typography.Text,{type:"danger",children:u||a||g})]})})]})},Di=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,P.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,P.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,P.jsxs)(l.Space,{size:24,children:[(0,P.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,P.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(N.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},Ii=e=>{let{remove:t=(()=>{})}=e;const[s,r]=(0,n.useState)(!1),[a,c]=(0,n.useState)(),[d,u]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),x=(0,i.useDispatch)(),{file:{fileName:m,selectedFile:j},recipients:{recipientInfos:y}}=(0,i.useSelector)((e=>e)),g=wi({type:B.valid}),f=wi({type:B.invalid}),C=(e,t)=>x(Un({checked:e,walletAddress:t})),b=(0,n.useCallback)((()=>{if(null===j||void 0===j||!j.length)return;u(!0);const e={...y};for(const t of j)delete e[t];x(ee({recipientInfos:e})),x(Vn()),u(!1),r(!1)}),[x,y,j]),{amountError:w}=gn();return(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,P.jsxs)(l.Row,{gutter:8,children:[(0,P.jsx)(l.Col,{flex:"auto",children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(o.Z,{name:"document-attach-outline"}),(0,P.jsx)(l.Typography.Text,{style:{color:"inherit"},children:m})]})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(l.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,P.jsx)(o.Z,{name:"close-outline"}),onClick:()=>h(!0)})})]})})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[12,12],children:[(0,P.jsx)(l.Col,{flex:"auto",children:s&&(0,P.jsx)(l.Space,{children:(0,P.jsx)(l.Button,{type:"text",size:"small",icon:(0,P.jsx)(o.Z,{name:"trash-outline"}),onClick:b,disabled:!(null!==j&&void 0!==j&&j.length),children:"Delete"})})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(Di,{activeKey:a,selected:s,onSelect:r,onCollapsed:c})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Collapse,{activeKey:a,bordered:!1,className:"auto-add-new",children:(0,P.jsx)(l.Collapse.Panel,{header:void 0,children:(0,P.jsx)(Ni,{})},N.activeKey)})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Spin,{spinning:d,children:(0,P.jsx)(l.Card,{bordered:!1,className:"card-content",children:(0,P.jsxs)(l.Row,{children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Ti,{selected:s,onChecked:e=>{if(e){const e=f.concat(g).map((e=>{let{address:t}=e;return t}));x(Wn(e))}else x(Vn())}})}),f.map(((e,t)=>(0,P.jsx)(l.Col,{span:24,className:t+1===f.length?"last-item-error-data":"",children:(0,P.jsx)(ki,{vestingItem:e,selected:s,onChecked:C,index:g.length+t})},e.address+t))),g.map(((e,t)=>(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(ki,{vestingItem:e,selected:s,onChecked:C,index:t})},e.address+t)))]})})})}),w&&(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{size:12,children:[(0,P.jsx)(o.Z,{style:{color:"#F9575E"},name:"warning-outline"}),(0,P.jsx)(l.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(In,{})})]})}),(0,P.jsx)(yn,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:p,setVisible:h,onConfirm:t,onCancel:()=>h(!1),btnText:"delete"})]})},Bi=s.p+"static/media/example-vesting.8d5ef68a6964745a19b8.csv",Ei=e=>{let{visible:t,description:s,onClose:n}=e;return(0,P.jsx)(l.Modal,{visible:t,closeIcon:(0,P.jsx)(o.Z,{name:"close-outline"}),onCancel:n,footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,P.jsxs)(l.Row,{gutter:[32,32],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{size:15,align:"baseline",children:[(0,P.jsx)(o.Z,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,P.jsxs)(l.Space,{size:4,direction:"vertical",children:[(0,P.jsx)(l.Typography.Title,{level:4,children:"Can't import file!"}),s]})]})}),(0,P.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,P.jsx)(l.Button,{onClick:n,type:"primary",children:"try again"})})]})})},Mi=()=>{const e=(0,i.useDispatch)(),[t,s]=(0,n.useState)(!1),[r,a]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),{recipients:{recipientInfos:u}}=(0,i.useSelector)((e=>e)),p=(0,n.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>kn().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;t(s)}}))))(t),i={};for(const e of n){if(e.length<=2)return s(!1),d(!0);const[t,n,r]=e,a={address:t,amount:n,unlockTime:new Date(r).getTime()};if(i[t]){let e=[...i[t]];e.push(a),i[t]=e}else i[t]=[a]}return e(_n(t.name)),e(ee({recipientInfos:i})),s(!1),!1}),[e]),h=async()=>(e(re()),!0),x=(0,n.useMemo)((()=>r?(0,P.jsxs)(l.Typography.Text,{children:["Wrong date format. It\u2019s should be"," ",(0,P.jsx)("span",{style:{color:"#42E6EB"},children:"MM-DD-YYYY HH:mm."})]}):(0,P.jsx)(l.Typography.Text,{children:"Wrong format file"})),[r]);return Object.values(u).length?(0,P.jsx)(Ii,{remove:h}):(0,P.jsxs)(l.Row,{gutter:[8,8],justify:"end",children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Spin,{spinning:t,children:(0,P.jsx)(l.Upload.Dragger,{accept:".csv,.txt",beforeUpload:p,onRemove:h,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,P.jsxs)(l.Space,{direction:"vertical",size:24,align:"center",children:[(0,P.jsx)(l.Image,{src:$n,preview:!1}),(0,P.jsxs)(l.Space,{direction:"vertical",size:4,align:"center",children:[(0,P.jsx)(l.Typography.Text,{children:"Click or Drop file to upload"}),(0,P.jsxs)(l.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,P.jsx)("code",{children:".csv"}),","," ",(0,P.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,P.jsx)(l.Col,{children:(0,P.jsx)(l.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,P.jsx)(o.Z,{name:"download-outline"}),onClick:async()=>{if(!Bi)return;const e=await j(Bi)||"";Nn()(e,"example.csv")},children:"Download sample"})}),(0,P.jsx)(Ei,{visible:c,onClose:()=>(a(!1),d(!1)),description:x})]})},Oi=()=>(0,P.jsx)(l.Card,{bordered:!1,className:"card-lightning",children:(0,P.jsxs)(l.Row,{gutter:[32,32],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(ai,{label:"Fill in recipient information"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Mi,{})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(vi,{})})]})}),Zi={walletAddress:"",amount:""},zi=()=>{const[e,t]=(0,n.useState)(Zi),[s,a]=(0,n.useState)(!1),[d,h]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[j,y]=(0,n.useState)([]),g=(0,i.useSelector)((e=>e.recipients.configs)),f=(0,i.useSelector)((e=>e.main.TGE)),C=(0,i.useSelector)((e=>e.main.TGETime)),b=(0,i.useSelector)((e=>e.main.mintSelected)),w=(0,i.useSelector)((e=>e.recipients.recipientInfos)),v=(0,i.useSelector)((e=>e.recipients.configs.cliff)),T=(0,i.useSelector)((e=>e.setting.decimal)),A=(0,r.useMintDecimals)({mintAddress:b})||0,S=(0,i.useDispatch)(),{calcListAmount:k}=zn(),R=(0,n.useCallback)((()=>e.walletAddress||e.amount?S(ge(!0)):S(ge(!1))),[S,e.amount,e.walletAddress]);return(0,n.useEffect)((()=>{R()}),[R]),(0,P.jsxs)(l.Row,{gutter:[16,16],align:"middle",style:{padding:"12px 16px",background:"#394747"},children:[(0,P.jsx)(l.Col,{xs:10,md:14,xl:19,children:(0,P.jsx)(l.Input,{value:e.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:s=>{t({...e,[s.target.name]:s.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,P.jsx)(l.Col,{xs:10,md:8,xl:4,children:(0,P.jsx)(En.Z,{value:e.amount,name:"amount",placeholder:"Amount",onChange:s=>t({...e,amount:s}),autoComplete:"off",className:"recipient-input"})}),(0,P.jsx)(l.Col,{xs:4,md:2,xl:1,children:(0,P.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:()=>{const{walletAddress:s,amount:n}=e;if(!c.account.isAddress(s))return m("Wrong wallet address");if(!n)return h("Amount cannot be empty");if(!T&&Number(n)%1!==0)return h("Should be natural numbers");const{distributeIn:i,frequency:r}=g;let l=p.utilsBN.decimalize(n,A);const o=Math.floor((0,F.Z)(i)/(0,F.Z)(r)),d=[],x=f?l.mul(new u.BN(f)).div(new u.BN(100)):new u.BN(0);l=l.sub(x);const j={address:s,amount:p.utilsBN.undecimalize(x,A),unlockTime:C};d.push(j);const b=k(l,o);for(let e=1;e<=o;e++){let t=0;1===e&&(t=C+(0,F.Z)(v)),e>1&&(t=(0,F.Z)(r)+d[e-1].unlockTime);const n={address:s,amount:p.utilsBN.undecimalize(b[e-1],A),unlockTime:t};d.push(n)}return w[s]?(y(d),a(!0)):(m(""),h(""),t(Zi),S(se({walletAddress:s,nextRecipients:d})))},children:"ok"})}),(x||d)&&(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{children:[(0,P.jsx)(o.Z,{style:{color:"#f2323f"},name:"warning-outline"}),(0,P.jsx)(l.Typography.Text,{type:"danger",children:x||d})]})}),(0,P.jsx)(yn,{btnText:"Replace",description:"Do you want replace this recipient",title:"Recipient existed",onCancel:()=>a(!1),onConfirm:()=>{a(!1);const{walletAddress:s}=e;return t(Zi),m(""),h(""),S(se({walletAddress:s,nextRecipients:j}))},setVisible:a,visible:s})]})},Li=e=>{let{vestingItem:t,index:s}=e;const[a,d]=(0,n.useState)(!1),u=(0,i.useSelector)((e=>e.setting.decimal)),p=(0,i.useSelector)((e=>e.recipients.expirationTime)),h=(0,i.useDispatch)(),x=!c.account.isAddress(t.address),m=(0,n.useMemo)((()=>{for(const{amount:e}of t.config)if(!u&&Number(e)%1!==0)return!0;return!1}),[u,t.config]);return(0,P.jsxs)(l.Row,{onClick:()=>d(!0),gutter:[16,8],align:"middle",wrap:!1,className:"vesting-item",children:[(0,P.jsx)(l.Col,{span:2,children:(0,P.jsxs)(l.Typography.Text,{type:"secondary",children:["#",s+1]})}),(0,P.jsx)(l.Col,{span:4,children:(0,P.jsx)(l.Tooltip,{title:t.address,children:(0,P.jsx)(l.Typography.Text,{style:{color:x?"#F9575E":""},children:r.util.shortenAddress(t.address)})})}),(0,P.jsx)(l.Col,{span:16,className:m?"recipient-input-error":"",children:(0,P.jsx)(l.Row,{gutter:[16,8],children:t.config.map(((e,t)=>{let{amount:s,unlockTime:n}=e;const i=n>p&&p;return(0,P.jsx)(l.Col,{className:i?"vesting-config-error":"vesting-config",children:(0,P.jsxs)(l.Typography.Text,{className:"caption",children:[s," / ",It()(n).format(E)]})},t)}))})}),(0,P.jsx)(l.Col,{span:2,className:"vesting-action",children:(0,P.jsx)(l.Button,{onClick:()=>h(ne(t.address)),icon:(0,P.jsx)(o.Z,{name:"trash-outline"}),type:"text"})}),(0,P.jsx)(Si,{setVisible:d,visible:a,walletAddress:t.address})]})},Fi=()=>(0,P.jsxs)(l.Row,{gutter:[16,8],align:"middle",wrap:!1,style:{padding:8},children:[(0,P.jsx)(l.Col,{span:2,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:"No."})}),(0,P.jsx)(l.Col,{span:4,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,P.jsx)(l.Col,{span:16,children:(0,P.jsx)(l.Typography.Text,{type:"secondary",children:"Amount & Unlock time"})}),(0,P.jsx)(l.Col,{span:2})]}),Pi=()=>{const e=wi({type:B.valid});return(0,P.jsx)(l.Row,{className:"display-recipient",justify:"center",children:e.length?(0,P.jsxs)(n.Fragment,{children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Fi,{})}),e.map(((e,t)=>(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Li,{vestingItem:e,index:t})},e.address)))]}):(0,P.jsx)(l.Col,{children:(0,P.jsx)(l.Typography.Text,{children:"Please input recipient information"})})})},_i=()=>{const[e,t]=(0,n.useState)(!1),{main:{mintSelected:s,isTyping:r}}=(0,i.useSelector)((e=>e)),{quantity:a}=fn(),o=vn(s),{amountError:c}=gn(),d=(0,i.useDispatch)(),u=(0,n.useCallback)((async()=>{await d(re()),await d(X(0)),await d(Q(0)),await d(z(R.SelectMethod)),await d(me(k.manual))}),[d]),p=a<=0||c||o<0||r;return(0,P.jsxs)(l.Card,{className:"card-lightning",bordered:!1,children:[(0,P.jsxs)(l.Row,{gutter:[32,32],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(ai,{label:"Fill in recipient information"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(zi,{})}),(0,P.jsx)(Pi,{}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Bn,{})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{onClick:()=>t(!0),size:"large",type:"ghost",block:!0,children:"Back"})}),(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{size:"large",type:"primary",onClick:()=>d(z(R.ConfirmTransfer)),block:!0,disabled:p,children:"Continue"})})]})})]}),(0,P.jsx)(yn,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:u})]})},Ui=()=>{const e=(0,i.useSelector)((e=>e.main.TGETime)),t=(0,i.useSelector)((e=>e.recipients.expirationTime)),s=(0,i.useDispatch)(),r=(0,n.useMemo)((()=>t&&e>t?"Must be less than the expiration time.":""),[e,t]);return(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Text,{className:"caption",children:"TGE Time"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.DatePicker,{placeholder:"Select time",suffixIcon:(0,P.jsx)(o.Z,{name:"time-outline"}),className:"date-option",onChange:e=>{return t=(null===e||void 0===e?void 0:e.valueOf())||0,s(we(t));var t},clearIcon:null,value:e?It()(e):null,showTime:{showSecond:!1},placement:"bottomRight",format:E})}),r&&(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Text,{className:"caption",style:{color:"#F9575E"},children:r})})]})},Vi=()=>{const e=(0,i.useSelector)((e=>e.main.TGE)),t=(0,i.useDispatch)();return(0,P.jsxs)(l.Row,{gutter:[8,8],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Space,{align:"baseline",children:[(0,P.jsx)(l.Typography.Text,{className:"caption",children:"TGE Percentage"}),(0,P.jsx)(l.Tooltip,{title:"Percent of token allocation for the first time",children:(0,P.jsx)(o.Z,{name:"information-circle-outline"})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.InputNumber,{onChange:e=>t(be(e)),value:e,className:"TGE-input",placeholder:"Input %",type:"number",max:"100",min:"0"})})]})},Wi=()=>{const[e,t]=(0,n.useState)(!0),s=(0,i.useSelector)((e=>e.main.methodSelected)),r=(0,i.useSelector)((e=>e.main.TGETime)),a=(0,i.useSelector)((e=>e.recipients.configs.cliff)),c=(0,i.useSelector)((e=>e.recipients.expirationTime)),d=(0,i.useSelector)((e=>e.main.mintSelected)),u=(0,i.useSelector)((e=>e.recipients.configs.distributeIn)),p=(0,i.useSelector)((e=>e.recipients.configs.frequency)),h=(0,i.useDispatch)(),{pushHistory:x}=A(),m=(0,n.useMemo)((()=>{if(e||!c)return"";if(c<Date.now())return"Must be greater than current time.";const t=r+(0,F.Z)(a)+(0,F.Z)(u);return c<t&&s===k.manual?"Must be greater than the total vesting time.":""}),[r,a,u,c,e,s]),j=(0,n.useMemo)((()=>{if(d===de||!s)return!0;const t=r+(0,F.Z)(a);return s===k.manual?!r||c<t&&!e||c-t<(0,F.Z)(u)&&!e||(0,F.Z)(u)<(0,F.Z)(p):!c&&!e}),[r,a,u,c,p,e,s,d]);return(0,P.jsx)(l.Card,{className:"card-lightning",bordered:!1,children:(0,P.jsxs)(l.Row,{gutter:[32,32],align:"middle",children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(ai,{label:"Select token type and input method"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{xs:24,md:24,xl:12,children:(0,P.jsx)(ue,{activeMintAddress:d,onSelect:e=>h(je(e))})}),(0,P.jsx)(l.Col,{xs:24,md:24,xl:12,children:(0,P.jsx)(di,{mintAddress:d})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Text,{children:"Choose vesting schedule calculation mode"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Radio.Group,{onChange:e=>h(me(e.target.value)),style:{width:"100%"},className:"select-card",value:s,children:(0,P.jsxs)(l.Row,{gutter:[16,16],children:[(0,P.jsx)(l.Col,{xs:24,sm:12,md:12,lg:12,children:(0,P.jsx)(l.Radio.Button,{value:k.manual,children:(0,P.jsx)(ui,{label:"Automatic",description:"Input your vesting campaign details. Lightning Tunnel will do the calculation!",active:s===k.manual})})}),(0,P.jsx)(l.Col,{xs:24,sm:12,md:12,lg:12,children:(0,P.jsx)(l.Radio.Button,{value:k.auto,children:(0,P.jsx)(ui,{label:"Manual",description:"Upload a CSV or TXT file containing wallet addresses and self-calculated vesting schedule.",active:s===k.auto})})})]})})})]})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsxs)(l.Row,{gutter:[16,16],children:[s===k.manual&&(0,P.jsxs)(n.Fragment,{children:[(0,P.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,P.jsx)(Vi,{})}),(0,P.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,P.jsx)(Ui,{})}),(0,P.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,P.jsx)(G,{})}),(0,P.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,P.jsx)(Y,{})}),(0,P.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,P.jsx)(V,{})})]}),(0,P.jsx)(l.Col,{xs:24,md:12,xl:8,children:(0,P.jsx)(ci,{label:"Expiration time",onSwitch:t,switchText:"Unlimited",onChange:t=>h(Q(e?0:t)),placeholder:"Select time",value:c,error:m,checked:e,explain:(0,P.jsx)(l.Tooltip,{title:"Vesting expiration time, after this time users will not be able to claim the token and you can get it back.",children:(0,P.jsx)(o.Z,{name:"information-circle-outline"})})})})]})})]})}),(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{size:"large",onClick:()=>x("/vesting"),block:!0,type:"ghost",children:"Cancel"})}),(0,P.jsx)(l.Col,{span:12,children:(0,P.jsx)(l.Button,{size:"large",onClick:()=>{h(me(s)),h(z(R.AddRecipient))},block:!0,type:"primary",disabled:j,children:"Continue"})})]})})},Hi=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,i.useSelector)((e=>e));return t===R.SelectMethod?(0,P.jsx)(Wi,{}):t===R.AddRecipient?e===k.auto?(0,P.jsx)(Oi,{}):(0,P.jsx)(_i,{}):(0,P.jsx)(fi,{})},Yi=()=>(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Typography.Title,{level:2,children:"Add new Vesting"})}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(Hi,{})})]}),{Content:Ki}=l.Layout,$i=()=>{const[e,t]=(0,n.useState)(!1),{appRoute:s}=A(),i=(0,r.useInfix)()<r.Infix.lg,c=!i||e,d=i?"sidebar mobile":"sidebar",u=i?350:231;return(0,P.jsxs)(l.Layout,{className:"main-layout",children:[(0,P.jsx)(l.Drawer,{placement:"left",className:d,width:u,mask:i,visible:c,onClose:()=>t(!1),forceRender:!0,children:(0,P.jsx)(Qe,{})}),(0,P.jsx)(l.Layout,{children:(0,P.jsxs)(Ki,{children:[(0,P.jsx)(l.Row,{justify:"center",children:(0,P.jsx)(l.Col,{xs:24,xxl:16,children:(0,P.jsxs)(a.Switch,{children:[(0,P.jsx)(a.Route,{exact:!0,path:`${s}/dashboard`,component:ps}),(0,P.jsx)(a.Route,{exact:!0,path:`${s}/vesting`,component:pn}),(0,P.jsx)(a.Route,{exact:!0,path:`${s}/vesting/add-new`,component:Yi}),(0,P.jsx)(a.Route,{exact:!0,path:`${s}/airdrop/add-new`,component:bi}),(0,P.jsx)(a.Route,{exact:!0,path:`${s}/airdrop`,component:jn}),(0,P.jsx)(a.Route,{exact:!0,path:`${s}/redeem/:distributorAddress`,component:Ge}),(0,P.jsx)(a.Redirect,{from:s,to:`${s}/dashboard`})]})})}),i&&(0,P.jsx)(l.Button,{shape:"circle",className:"btn-sidebar",icon:(0,P.jsx)(o.Z,{name:e?"close-outline":"menu-outline"}),onClick:()=>t(!e)})]})})]})},Gi=e=>{let{children:t}=e;return(0,P.jsxs)("div",{className:"background-container",children:[t,Array.apply(null,Array(20)).map(((e,t)=>(0,P.jsx)("div",{className:"circle-container",children:(0,P.jsx)("div",{className:"circle"})},t)))]})},Ji=()=>(0,P.jsx)("div",{className:"loading-screen",style:{display:"block"},children:(0,P.jsxs)(l.Row,{gutter:[24,24],children:[(0,P.jsx)(l.Col,{span:24,style:{height:256}}),(0,P.jsx)(l.Col,{span:24,children:(0,P.jsx)(l.Row,{gutter:[24,24],justify:"center",children:(0,P.jsx)(l.Col,{children:(0,P.jsxs)(l.Space,{direction:"vertical",align:"center",size:32,children:[(0,P.jsx)(l.Spin,{size:"large"}),(0,P.jsx)(l.Typography.Title,{level:5,children:"Welcome to Lightning Tunnel. The application is loading..."})]})})})})]})}),{sol:{utility:qi}}=v;let Qi=0;const Xi=()=>{const e=(0,i.useDispatch)(),t=(0,n.useCallback)((async()=>{Qi=qi.program.provider.connection.onProgramAccountChange(qi.program.programId,(t=>{const s=qi.parseDistributorData(t.accountInfo.data);e(ss({address:t.accountId.toBase58(),distributorData:s}))}),"confirmed",[{dataSize:160}])}),[e]),s=(0,n.useCallback)((async()=>{await e(ts())}),[e]);return(0,n.useEffect)((()=>{s()}),[s]),(0,n.useEffect)((()=>(t(),()=>{(async()=>{Qi&&(await qi.program.provider.connection.removeProgramAccountChangeListener(Qi),Qi=0)})()})),[e,t]),(0,P.jsx)(n.Fragment,{})},{sol:{utility:er}}=v,tr="Receipts",sr=(0,S.createAsyncThunk)("Receipts/getReceipts",(async e=>{let{authorityAddress:t}=e;if(!c.account.isAddress(t))throw new Error("Invalid address");const s=await er.program.account.receipt.all([{memcmp:{offset:8,bytes:t}}]);let n={};for(const i of s)n[i.publicKey.toBase58()]=i.account;return n})),nr=(0,S.createAsyncThunk)("Receipts/upsetReceipt",(e=>{let{address:t,receipt:s}=e;return{[t]:s}})),ir=(0,S.createSlice)({name:tr,initialState:{},reducers:{},extraReducers:e=>{e.addCase(sr.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(nr.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{utility:rr}}=v;let ar=0;const lr=()=>{const e=(0,i.useDispatch)(),t=(0,r.useWalletAddress)(),s=(0,n.useCallback)((async()=>{try{if(!c.account.isAddress(t))return;await e(sr({authorityAddress:t})).unwrap()}catch(s){return window.notify({type:"error",description:"Cannot fetch data of receipts"})}}),[e,t]);(0,n.useEffect)((()=>{s()}),[s]);const a=(0,n.useCallback)((async()=>{ar=rr.program.provider.connection.onProgramAccountChange(rr.program.programId,(t=>{const s=rr.parseReceiptData(t.accountInfo.data);e(nr({address:t.accountId.toBase58(),receipt:s}))}),"confirmed",[{dataSize:128},{memcmp:{offset:8,bytes:t}}])}),[e,t]);return(0,n.useEffect)((()=>(a(),()=>{(async()=>{ar&&(await rr.program.provider.connection.removeProgramAccountChangeListener(ar),ar=0)})()})),[a]),(0,P.jsx)(n.Fragment,{})},or=()=>{const e=(0,i.useDispatch)(),[t,s]=(0,n.useState)(!1),a=(0,i.useSelector)((e=>e.distributors)),l=(0,n.useCallback)((async()=>{const e=new p.SolanaExplorer(new u.web3.Connection(r.rpc)),t=await e.fetchTransactions(v.sol.utility.program.programId.toBase58(),{limit:50});let s,n,i=new Map;return new Promise((async e=>{n=setTimeout((()=>e(s||{})),1e4),t.map((async(t,r)=>{try{const a=t.transaction.message.instructions;for(const t of a){const{parsed:a,program:l}=t;if("spl-memo"!==l)continue;const o=a;if(i.has(o)||i.size>2)continue;i.set(o,!0);let c=await Me.methods.backupMetadata.get(o);0===r?(clearTimeout(n),e(c)):(r<50||!s)&&(s=c)}}catch(a){}}))}))}),[]),o=(0,n.useCallback)((async()=>{if(t){for(const{metadata:t}of Object.values(a)){const s=Me.decodeCID(t);e(Ze({cid:s}))}return e(fe(!1))}}),[e,a,t]);(0,n.useEffect)((()=>{const e=setTimeout((()=>o()),1e3);return()=>clearTimeout(e)}),[e,o]);const c=(0,n.useCallback)((async()=>{const t=await l();return e(ze(t)),s(!0)}),[e,l]);return(0,n.useEffect)((()=>{const e=setTimeout((()=>c()),300);return()=>clearTimeout(e)}),[c]),(0,P.jsx)(n.Fragment,{})},cr=e=>{let{children:t}=e;const{distributors:s,metadatas:r}=(0,i.useSelector)((e=>e)),a=!Object.keys(s).length||!Object.keys(r).length;return(0,P.jsxs)(n.Fragment,{children:[(0,P.jsx)(Xi,{}),(0,P.jsx)(lr,{}),(0,P.jsx)(or,{}),a?(0,P.jsx)(Ji,{}):t]})},{sol:{utilityProgram:dr}}=v,ur=e=>{let{children:t}=e;const s=(0,r.useWalletAddress)(),[i,a]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(i)return;const e=(0,p.getAnchorProvider)(r.rpc,s,window.sentre.wallet),t=new d.Utility(e.wallet,r.rpc,dr);window.senUtility=t,a(!0)}),[s,i]),i?(0,P.jsxs)(cr,{children:[(0,P.jsx)(fs,{}),t]}):null};var pr=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const hr={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof u.web3.PublicKey||e instanceof Uint8Array||e instanceof u.BN||pr.isBuffer(e)}},xr=(0,S.configureStore)({middleware:e=>e({...hr,serializableCheck:!1}),devTools:!1,reducer:{main:ve,steps:L,setting:ti,file:Hn,distributors:ns,recipients:le,receipts:ir,metadatas:Pe}}),mr=s.p+"static/media/background-LT.4c9e016f719ffe61dc63.png";var jr=s(45597);const{manifest:{appId:yr}}=v,gr=(0,n.memo)((()=>(0,P.jsx)(i.Provider,{store:xr,children:(0,P.jsx)(ur,{children:(0,P.jsx)($i,{})})}))),fr=()=>{const e=(0,r.useSetBackground)();return(0,n.useEffect)((()=>{e({light:mr,dark:mr})}),[e]),(0,P.jsx)(Gi,{children:(0,P.jsx)(gr,{})})},Cr=()=>(0,P.jsx)(r.AntdProvider,{appId:yr,prefixCls:yr,children:(0,P.jsx)(fr,{})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.9c9c3fa1792c813f11b8.md"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.fea1f5708dfa87c097e9.png"},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.0a7aebcb98e7fae58a57.png"},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx-src_static_base_example-vesting_csv-src_static_base_example_csv-src_sta-1c37f3.256f0108.chunk.js.map