(globalThis.webpackChunklightning_tunnel=globalThis.webpackChunklightning_tunnel||[]).push([[916],{26249:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>pt});var n=s(55754),i=s(15780),r=s(92950),a=s(45055),l=s(99019),c=s(95418),o=s(71256),d=s(6784),u=s(12058);const h={"logo-telegram":s.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"};var p=s(45263);const x=(0,r.forwardRef)(((e,t)=>{let{name:s,className:n,...i}=e;const r=n?"anticon "+n:"anticon";return(0,p.jsx)("span",{className:r,...i,children:h[s]?(0,p.jsx)("ion-icon",{ref:t,src:h[s]}):(0,p.jsx)("ion-icon",{ref:t,name:s})})}));var m=s(34559);const j=e=>window.notify({type:"error",description:e.message});var g=s(19289);const y="main",f={methodSelected:void 0,mintSelected:"",fileName:"",selectedFile:[],visible:!1},b=(0,g.createAsyncThunk)("main/onSelectMethod",(async e=>({methodSelected:e}))),w=(0,g.createAsyncThunk)("main/setFileName",(async e=>({fileName:e}))),C=(0,g.createAsyncThunk)("main/onSelectedMint",(async e=>({mintSelected:e}))),v=(0,g.createAsyncThunk)("main/setVisible",(async e=>({visible:e}))),S=(0,g.createAsyncThunk)("main/onSelectedFile",(async(e,t)=>{let{checked:s,index:n}=e,{getState:i}=t;const{main:{selectedFile:r},recipients:{recipients:a,errorData:l}}=i();if(void 0===n){const e=[...a],t=[...l||[]];if(!s)return{selectedFile:[]};const n=[];for(const s in e)n.push(Number(s));for(const s in t)n.push(e.length+Number(s));return{selectedFile:n}}const c=[...r];if(s)c.push(n);else{const e=c.indexOf(n);c.splice(e,1)}return{selectedFile:c}})),k=(0,g.createAsyncThunk)("main/removeSelectedFile",(async()=>({selectedFile:[]}))),T=(0,g.createSlice)({name:y,initialState:f,reducers:{},extraReducers:e=>{e.addCase(b.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(w.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(C.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(S.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(k.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(v.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var A=s(27906),R=s(19181);let N=null;const I=()=>{const[e,t]=(0,r.useState)(null),s=(0,r.useCallback)(((e,t,s)=>{const n=new A.rV.Connection(e,"confirmed"),i=new A.rV.PublicKey(t);return new A.zt(n,{publicKey:new A.rV.PublicKey(i),signTransaction:s.signTransaction,signAllTransactions:async e=>{const t=[];for(const n of e){const e=await s.signTransaction(n);t.push(e)}return t}},{commitment:"confirmed",skipPreflight:!0})}),[]),n=(0,r.useCallback)((async()=>{const{sentre:{wallet:e,splt:n}}=window;if(!e)return t(N=null);if(!N){const t=await e.getAddress(),i=s(n.nodeUrl,t,e),r=R.Qr.init({connection:i.connection,wallet:i.wallet,opts:i.opts});N=u.qm.load({provider:r})}t(N)}),[s]);return(0,r.useEffect)((()=>{n()}),[n]),e};const D=s.p+"static/media/redeem.7e0fa96ccc80d536f7730bb34ab5753b.svg",B=e=>{const[t,s]=(0,r.useState)(void 0),{getDecimals:n}=(0,i.useMint)(),a=(0,r.useCallback)((async()=>{try{const t=await n(e);return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,r.useEffect)((()=>{a()}),[a]),t},z=[void 0],E=e=>{let{mintAddress:t,size:s=24,icon:n=(0,p.jsx)(x,{name:"diamond-outline"}),reversed:a=!1,...o}=e;const[d,u]=(0,r.useState)(z),{tokenProvider:h}=(0,i.useMint)(),{pools:m}=(0,i.usePool)(),j=(0,r.useCallback)((async e=>{const t=await h.findByAddress(e);if(null!==t&&void 0!==t&&t.logoURI)return t.logoURI}),[h]),g=(0,r.useCallback)((async()=>{if(!c.account.isAddress(t))return u(z);const e=Object.values(m).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:s}=e,n=await Promise.all([t,s].map(j));return a&&n.reverse(),u(n)}const s=await j(t);return u([s])}),[t,a,j,m]);return(0,r.useEffect)((()=>{g()}),[g]),1===d.length?(0,p.jsx)(l.Avatar,{src:d[0],size:s,style:{backgroundColor:"#2D3355",border:"none"},...o,children:n}):(0,p.jsx)(l.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...o,children:d.map(((e,t)=>(0,p.jsx)(l.Avatar,{src:e,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:n},t)))})},O="TOKN",M=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[a,l]=(0,r.useState)(O),{tokenProvider:o}=(0,i.useMint)(),{pools:d}=(0,i.usePool)(),u=(0,r.useCallback)((async e=>{const t=await o.findByAddress(e);return null!==t&&void 0!==t&&t.symbol?t.symbol:e.substring(0,4)}),[o]),h=(0,r.useCallback)((async()=>{if(!c.account.isAddress(t))return l(O);const e=Object.values(d).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:i}=e,r=await Promise.all([t,i].map(u));return n&&r.reverse(),l(r.join(s))}const i=await u(t);return l(i)}),[t,n,u,d,s]);return(0,r.useEffect)((()=>{h()}),[h]),(0,p.jsx)("span",{children:a})};var P=s(15190);const L={appId:"lightning_tunnel",url:"https://github.com/DescartesNetwork/sen-lightning-tunnel/index.js"},Q={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}},F={manifest:{development:{...L},staging:{...L},production:{...L}}[P.OB],sol:Q[P.ef]},{manifest:{appId:W}}=F,q=()=>{const e=(0,a.useLocation)(),t=(0,a.useHistory)(),s=(0,r.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),n=(0,r.useCallback)((e=>s.get(e)),[s]),i=(0,r.useCallback)((e=>{const t=new URLSearchParams;for(const s in e)t.set(s,e[s]);return t.toString()}),[]),l=(0,r.useMemo)((()=>`/app/${W}`),[]);return{getQuery:n,generateQuery:i,pushHistory:(0,r.useCallback)((e=>t.push(`${l}${e}`)),[l,t]),appRoute:l}};var V=s(97429).Buffer;const U=e=>{let{visible:t,claimProof:s}=e;const[a,h]=(0,r.useState)(!1),g=(0,n.useDispatch)(),{wallet:{address:y}}=(0,i.useWallet)(),f=I(),{pushHistory:b}=q(),w=B((null===s||void 0===s?void 0:s.mintAddress)||"")||0,C=(0,r.useCallback)((async e=>{if(!f)return;const t=c.account.fromAddress(e);return await u.yV.load(f,t)}),[f]),S=(0,r.useMemo)((()=>{const e=[];if(null===s||void 0===s||!s.proof)return e;const{proof:t}=s;return t.forEach((t=>{let{data:s}=t;e.push(V.from(s))})),e}),[s]),k=(0,r.useCallback)((async()=>{if(!s||!s.distributorInfo)return;h(!0);const{index:e,amount:t,claimant:n,distributorInfo:{distributor:i}}=s,r=await C(i);if(n!==y||!c.account.isAddress(i)||!r)return window.notify({type:"warning",description:"Invalid proof"});try{const{isClaimed:t}=await r.getClaimStatus(new d.AW(e));if(t)return window.notify({type:"error",description:"Tokens has been redeemed"})}catch(u){}finally{h(!1),b(""),g(v(!1))}try{const s=await r.claim({index:new d.AW(e),amount:new d.AW(t),proof:S,claimant:new o.PublicKey(y)}),{signature:n,response:{meta:i}}=await s.confirm();return null!==i&&void 0!==i&&i.err?j("Something went wrong"):(a="Claim successfully",l=n,window.notify({type:"success",description:`${a} successfully. Click to view details.`,onClick:()=>window.open((0,m.kU)(l),"_blank")}))}catch(u){j(u)}finally{return h(!1),b(""),g(v(!1))}var a,l}),[S,s,g,C,b,y]);return(0,p.jsx)(l.Modal,{visible:t,closeIcon:(0,p.jsx)(x,{name:"close-outline"}),onCancel:()=>g(v(!1)),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,p.jsxs)(l.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Image,{src:D,preview:!1})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,p.jsx)(l.Typography.Title,{level:3,children:"Redemption!"}),(0,p.jsxs)(l.Space,{size:4,children:[(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Let's take"})," ",(0,p.jsxs)(l.Typography.Title,{level:5,style:{color:"#42E6EB"},children:[c.utils.undecimalize(BigInt((null===s||void 0===s?void 0:s.amount)||0),w)," ",(0,p.jsx)(M,{mintAddress:(null===s||void 0===s?void 0:s.mintAddress)||""})]})]})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Button,{type:"primary",onClick:k,loading:a,children:"Redeem"})})]})})};let _,K,$;!function(e){e[e.auto=1]="auto",e[e.manual=2]="manual"}(_||(_={})),function(e){e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three"}(K||(K={})),function(e){e.activeKey="collapse-upload-csv"}($||($={}));const G="steps",J={step:K.one},Z=(0,g.createAsyncThunk)("steps/onSelectStep",(async e=>({step:e}))),Y=(0,g.createSlice)({name:G,initialState:J,reducers:{},extraReducers:e=>{e.addCase(Z.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,H="recipients",X=(0,g.createAsyncThunk)("recipients/addRecipients",(async e=>{let{recipients:t}=e;return{recipients:t}})),ee=(0,g.createAsyncThunk)("recipients/addRecipient",(async(e,t)=>{let{recipient:s}=e,{getState:n}=t;const{recipients:{recipients:i}}=n(),r=[...i];return r.push(s),{recipients:r}})),te=(0,g.createAsyncThunk)("recipients/removeRecipients",(async()=>({recipients:[]}))),se=(0,g.createAsyncThunk)("recipients/removeRecipient",(async(e,t)=>{let{recipient:s}=e,{getState:n}=t;const{recipients:{recipients:i}}=n(),r=[...i],a=r.indexOf(s);return a>-1&&r.splice(a,1),{recipients:r}})),ne=(0,g.createAsyncThunk)("recipients/setErrorDatas",(async e=>{let{errorData:t}=e;return{errorData:t}})),ie=(0,g.createSlice)({name:H,initialState:{recipients:[],errorData:[]},reducers:{},extraReducers:e=>{e.addCase(X.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ee.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(te.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ne.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(se.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,re=()=>{const{recipients:{recipients:e},setting:{decimal:t}}=(0,n.useSelector)((e=>e));return{isError:(0,r.useMemo)((()=>{for(const[s,n]of e){if(!c.account.isAddress(s))return!0;if(!t&&Number(n)%1!==0)return!0}return!1}),[t,e])}},ae=()=>{const e=(0,n.useDispatch)(),{recipients:{recipients:t,errorData:s}}=(0,n.useSelector)((e=>e)),{isError:i}=re(),a=(0,r.useMemo)((()=>{if(!s)return!1;for(const[e,t]of s)if(!c.account.isAddress(e)||!t)return!0;return!1}),[s]),o=(0,r.useMemo)((()=>!(t.length&&!i&&!a)),[a,i,t.length]),d=(0,r.useCallback)((async()=>{await e(b()),e(te()),e(Z(K.one))}),[e]);return(0,p.jsxs)(l.Row,{gutter:[16,16],children:[(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Button,{type:"ghost",size:"large",onClick:d,block:!0,children:"Back"})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Button,{size:"large",onClick:()=>e(Z(K.three)),type:"primary",disabled:o,block:!0,children:"Continue"})})]})};var le=s(24656),ce=s.n(le),oe=s(18268),de=s.n(oe);const ue=e=>{let{visible:t,setVisible:s,title:n,description:i,onConfirm:r,onCancel:a,btnText:c}=e;return(0,p.jsx)(l.Modal,{visible:t,closeIcon:(0,p.jsx)(x,{name:"close-outline"}),onCancel:()=>s(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,p.jsxs)(l.Row,{gutter:[32,32],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{size:15,align:"baseline",children:[(0,p.jsx)(x,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,p.jsxs)(l.Space,{size:4,direction:"vertical",children:[(0,p.jsx)(l.Typography.Text,{children:n}),(0,p.jsx)(l.Typography.Text,{type:"secondary",children:i})]})]})}),(0,p.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Button,{onClick:a,type:"ghost",children:"cancel"}),(0,p.jsx)(l.Button,{onClick:r,type:"primary",children:c})]})})]})})};let he;const pe=(0,r.forwardRef)(((e,t)=>{var s;let{max:n,onValue:i=(()=>{}),onChange:a=(()=>{}),...c}=e;const[o,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(null),m=(0,r.useRef)(t),j=(0,r.useCallback)((e=>{const t=e=>{he&&(clearTimeout(he),he=void 0),d(e),he=setTimeout((()=>d("")),500)};return/^\d*(\.\d*)?$/.test(e)?n&&parseFloat(e)>parseFloat(n.toString())?t("Not enough balance"):i(e):t("Invalid character")}),[n,i]);return null!==u&&(null===m||void 0===m||null===(s=m.current)||void 0===s||s.setSelectionRange(u,u)),(0,p.jsx)(l.Tooltip,{title:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(x,{name:"warning"}),o]}),visible:!!o,children:(0,p.jsx)(l.Input,{...c,onChange:e=>{a(e),h(e.target.selectionStart),j(e.target.value||"")},ref:m})})})),xe={walletAddress:"",amount:""},me=e=>{let{walletAddress:t,addNewRecipient:s,remove:n}=e;return(0,p.jsx)(r.Fragment,{children:t?(0,p.jsx)(l.Button,{type:"text",size:"small",style:{padding:0},onClick:n,icon:(0,p.jsx)(x,{style:{fonSize:20},name:"trash-outline"})}):(0,p.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:s,children:"OK"})})},je=e=>{let{walletAddress:t,amount:s,index:i,isSelect:a=!1}=e;const[o,d]=(0,r.useState)(xe),[u,h]=(0,r.useState)(""),[m,j]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),{main:{selectedFile:f,mintSelected:b},recipients:{recipients:w},setting:{decimal:C}}=(0,n.useSelector)((e=>e)),v=(0,n.useDispatch)(),k=B(b)||0,T=(0,r.useCallback)((async()=>c.account.isAddress(t)&&s?d({walletAddress:t,amount:s}):d(xe)),[t,s]),A=(0,r.useCallback)((()=>{if(s)return C?h(""):Number(s)%1!==0?h("Should be natural numbers"):void 0}),[s,C]),R=!!t;return(0,r.useEffect)((()=>{T()}),[T]),(0,r.useEffect)((()=>{A()}),[A]),(0,p.jsxs)(l.Row,{gutter:[8,8],align:"middle",justify:"space-between",children:[a&&(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Checkbox,{checked:null===f||void 0===f?void 0:f.includes(i),onChange:e=>((e,t)=>v(S({checked:e,index:t})))(e.target.checked,i)})}),(0,p.jsx)(l.Col,{span:16,children:(0,p.jsx)(l.Input,{disabled:R,value:o.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:e=>{d({...o,[e.target.name]:e.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,p.jsx)(l.Col,{span:6,children:(0,p.jsx)(pe,{disabled:R,value:s||o.amount,name:"amount",placeholder:"Amount",onValue:e=>d({...o,amount:e}),className:u?"recipient-input-error":"recipient-input",autoComplete:"off"})}),!a&&(0,p.jsx)(l.Col,{children:(0,p.jsx)(me,{addNewRecipient:async()=>{const{walletAddress:e,amount:t}=o;if(!c.account.isAddress(e))return j("Wrong wallet address");for(const[n]of w)if(e===n)return y(!0);const s=[e,t];return j(""),await v(ee({recipient:s})),d(xe)},walletAddress:t,remove:()=>{if(void 0===i)return;const e=[...w];return e.splice(i,1),v(X({recipients:e}))}})}),(m||u)&&(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(x,{style:{color:"#f2323f"},name:"warning-outline"}),(0,p.jsx)(l.Typography.Text,{type:"danger",children:m||u})]})}),(0,p.jsx)(ue,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",btnText:"merge",onConfirm:async()=>{const{walletAddress:e,amount:t}=o,s=w.find((t=>{let[s]=t;return s===e}));if(!s||!k)return;const n=c.utils.decimalize(s[1],k)+c.utils.decimalize(t,k),i=[e,c.utils.undecimalize(n,k)];return await v(se({recipient:s})),await v(ee({recipient:i})),await y(!1),(u||m)&&(h(""),j("")),d(xe)},visible:g,setVisible:y,onCancel:()=>y(!1)})]})},ge=()=>{const{main:{mintSelected:e},recipients:{recipients:t,errorData:s},setting:{decimal:i}}=(0,n.useSelector)((e=>e)),a=B(e)||0,l=(0,r.useCallback)((e=>{if(!e.length||!a)return BigInt(0);let t=BigInt(0);for(const s of e){const e=s[1];i?t+=c.utils.decimalize(e,a):Number(e)%1===0&&(t+=BigInt(e))}return t}),[i,a]),o=s.filter((e=>!e.includes("")&&c.account.isAddress(e[0]))),d=l(t)+l(o),u=o.length,h=(0,r.useMemo)((()=>t.length),[t]);return{total:c.utils.undecimalize(d,a).toString(),quantity:h+u}},ye=e=>{let{label:t,value:s,mintAddress:n}=e;return(0,p.jsxs)(l.Row,{children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:t})}),(0,p.jsx)(l.Col,{children:n?(0,p.jsxs)(l.Space,{size:4,children:[(0,p.jsx)(l.Typography.Title,{level:5,children:s}),(0,p.jsx)(l.Typography.Title,{level:5,children:(0,p.jsx)(M,{mintAddress:n})})]}):(0,p.jsx)(l.Typography.Text,{children:s})})]})},fe=()=>{const{main:{mintSelected:e}}=(0,n.useSelector)((e=>e)),{total:t,quantity:s}=ge();return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(ye,{label:"Quantity",value:s})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(ye,{label:"Total",value:t,mintAddress:e})})]})},be=()=>(0,p.jsx)(l.Card,{bordered:!1,style:{borderRadius:8,boxShadow:"unset"},bodyStyle:{padding:"12px 16px"},className:"card-total",children:(0,p.jsx)(fe,{})}),we=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;const{recipients:{errorData:i}}=(0,n.useSelector)((e=>e));return(0,p.jsxs)(l.Row,{gutter:[16,8],align:"middle",wrap:!1,justify:"space-between",children:[(0,p.jsx)(l.Col,{span:3,children:(0,p.jsxs)(l.Space,{children:[t&&(0,p.jsx)(l.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"No."})]})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,p.jsx)(l.Col,{span:6,children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})}),!!i.length&&(0,p.jsx)(l.Col,{span:3})]})},Ce=e=>{let{editable:t=!1,wrongAddress:s=!1}=e;return s?(0,p.jsx)(l.Tooltip,{title:"Wrong wallet address!",placement:"topLeft",arrowPointAtCenter:!0,children:(0,p.jsx)(x,{name:"close-circle-outline",style:{color:"#d72311"}})}):t?(0,p.jsx)(l.Tooltip,{title:"Invalid  amount!",placement:"topLeft",arrowPointAtCenter:!0,children:(0,p.jsx)(x,{name:"warning-outline",style:{color:"#d72311"}})}):(0,p.jsx)(x,{name:"checkmark-outline",style:{color:"#03A326"}})},ve=e=>{let{wrongAddress:t=!1,isEdited:s=!1,onEdited:n=(()=>{}),onUpdate:i=(()=>{}),onDelete:r=(()=>{})}=e;return t?(0,p.jsx)(l.Button,{type:"text",icon:(0,p.jsx)(x,{name:"trash-outline"}),onClick:r}):s?(0,p.jsx)(l.Button,{type:"text",icon:(0,p.jsx)(x,{name:"cloud-upload-outline"}),onClick:i}):(0,p.jsx)(l.Button,{type:"text",icon:(0,p.jsx)(x,{name:"create-outline"}),onClick:()=>n(!0)})},Se=(0,r.forwardRef)(((e,t)=>{let{accountAddress:s="",amount:i=0,selected:a=!1,onChecked:o=(()=>{}),index:d}=e;const u=(0,n.useDispatch)(),[h,x]=(0,r.useState)(!1),[j,g]=(0,r.useState)(""),{recipients:{errorData:y,recipients:f},main:{selectedFile:b},setting:{decimal:w}}=(0,n.useSelector)((e=>e)),C=(0,r.useRef)(t),v=!i,S=!c.account.isAddress(s),k=h?j:i,T=d-f.length,A=(0,r.useCallback)((()=>{if(!y.length||d-y.length<0)return;const e=[...y],[[t]]=e.splice(T,1);e.unshift([t,j]),u(ne({errorData:e}))}),[u,y,T,d,j]),R=(0,r.useCallback)((async()=>{if(!y.length)return;const e=[...y];e.splice(T,1),u(ne({errorData:e}))}),[u,y,T]),N=(0,r.useMemo)((()=>!!k&&(!w&&Number(i)%1!==0)),[i,k,w]);return(0,p.jsxs)(l.Row,{gutter:[16,8],align:"middle",justify:"space-between",wrap:!1,children:[(0,p.jsx)(l.Col,{span:3,children:(0,p.jsxs)(l.Space,{children:[a&&(0,p.jsx)(l.Checkbox,{checked:null===b||void 0===b?void 0:b.includes(d),onChange:e=>o(e.target.checked,d),className:"lightning-checkbox"}),(0,p.jsxs)(l.Typography.Text,{type:"secondary",children:["#",d+1]})]})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Tooltip,{title:s,children:(0,p.jsx)(l.Typography.Text,{style:{color:S?"#F9575E":""},children:(0,m.Xn)(s)})})}),(0,p.jsx)(l.Col,{span:6,children:(0,p.jsx)(pe,{value:k,bordered:h,onValue:g,disabled:!h,style:{padding:0},className:N?"recipient-input-error":"recipient-input-auto",ref:C})}),!!y.length&&(0,p.jsx)(l.Col,{span:3,children:v&&(0,p.jsxs)(l.Space,{align:"center",children:[(0,p.jsx)(Ce,{editable:v,wrongAddress:S}),(0,p.jsx)(ve,{isEdited:h,wrongAddress:S,onEdited:e=>{x(e),C.current&&C.current.focus()},onUpdate:A,onDelete:R})]})})]})})),ke=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,p.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,p.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,p.jsxs)(l.Space,{size:24,children:[(0,p.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,p.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i($.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},Te=e=>{let{remove:t=(()=>{})}=e;const[s,i]=(0,r.useState)(!1),[a,c]=(0,r.useState)(),[o,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),m=(0,n.useDispatch)(),{main:{fileName:j,selectedFile:g},recipients:{recipients:y,errorData:f}}=(0,n.useSelector)((e=>e)),{isError:b}=re(),w=(e,t)=>m(S({checked:e,index:t}));return(0,p.jsxs)(l.Row,{gutter:[16,16],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,p.jsxs)(l.Row,{gutter:8,children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(x,{name:"document-attach-outline"}),(0,p.jsx)(l.Typography.Text,{style:{color:"inherit"},children:j})]})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,p.jsx)(x,{name:"close-outline"}),onClick:()=>h(!0)})})]})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[12,12],children:[(0,p.jsx)(l.Col,{flex:"auto",children:s&&(0,p.jsx)(l.Space,{children:(0,p.jsx)(l.Button,{type:"text",size:"small",icon:(0,p.jsx)(x,{name:"trash-outline"}),onClick:()=>{if(null===g||void 0===g||!g.length)return;d(!0);const e=[...y],t=[...f||[]],s=e.filter(((e,t)=>!g.includes(t))),n=t.filter(((e,t)=>!g.includes(y.length+t)));m(ne({errorData:n})),m(X({recipients:s})),m(k()),d(!1)},disabled:!(null!==g&&void 0!==g&&g.length),children:"Delete"})})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(ke,{activeKey:a,selected:s,onSelect:i,onCollapsed:c})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Collapse,{activeKey:a,bordered:!1,className:"auto-add-new",children:(0,p.jsx)(l.Collapse.Panel,{header:void 0,children:(0,p.jsx)(je,{})},$.activeKey)})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Spin,{spinning:o,children:(0,p.jsx)(l.Card,{bordered:!1,className:"card-content",children:(0,p.jsxs)(l.Row,{gutter:[8,13],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(we,{selected:s,onChecked:e=>m(S({checked:e}))})}),f.map(((e,t)=>{let[n,i]=e;return(0,p.jsx)(l.Col,{span:24,className:t+1===f.length?"last-item-error-data":"",children:(0,p.jsx)(Se,{accountAddress:n,amount:i,selected:s,onChecked:w,index:y.length+t})},n+t)})),y.map(((e,t)=>{let[n,i]=e;return(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Se,{accountAddress:n,amount:i,selected:s,onChecked:w,index:t})},n+t)}))]})})})}),b&&(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{size:12,children:[(0,p.jsx)(x,{style:{color:"#F9575E"},name:"warning-outline"}),(0,p.jsx)(l.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(fe,{})})]})}),(0,p.jsx)(ue,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:u,setVisible:h,onConfirm:t,onCancel:()=>h(!1),btnText:"delete"})]})};const Ae=s.p+"static/media/icon-upload.a3c69638b092ea112d393cdc3d63d2c4.svg";var Re=s(46899);const Ne=()=>{const e=(0,n.useDispatch)(),[t,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[o,d]=(0,r.useState)({}),{recipients:{recipients:u},main:{mintSelected:h}}=(0,n.useSelector)((e=>e)),m=B(h)||0,j=(0,r.useCallback)((e=>({errorData:e.filter((e=>e.includes("")||!c.account.isAddress(e[0]))),successData:e.filter((e=>!e.includes("")&&c.account.isAddress(e[0])))})),[]),g=(0,r.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>ce().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;return t(s)}}))))(t),{errorData:i,successData:r}=await j(n);if(i&&e(ne({errorData:i})),!m)return;const l={};let o=!1;for(const[e,s]of r)if(l[e]){o=!0;const[t,n]=l[e],i=c.utils.decimalize(n,m)+c.utils.decimalize(s,m);l[e]=[t,c.utils.undecimalize(i,m)]}else l[e]=[e,s];return o?(d(l),s(!1),a(!0),e(w(t.name)),!0):(e(w(t.name)),e(X({recipients:r})),s(!1),a(!1),!1)}),[j,e,m]),y=async()=>(e(te()),d({}),!0);return u.length?(0,p.jsx)(Te,{remove:y}):(0,p.jsxs)(l.Row,{gutter:[8,8],justify:"end",children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Spin,{spinning:t,children:(0,p.jsx)(l.Upload.Dragger,{accept:".csv,.txt",beforeUpload:g,onRemove:y,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,p.jsxs)(l.Space,{direction:"vertical",size:24,align:"center",children:[(0,p.jsx)(l.Image,{src:Ae,preview:!1}),(0,p.jsxs)(l.Space,{direction:"vertical",size:4,align:"center",children:[(0,p.jsx)(l.Typography.Text,{children:"Click or Drop file to upload"}),(0,p.jsxs)(l.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,p.jsx)("code",{children:".csv"}),","," ",(0,p.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,p.jsx)(x,{name:"download-outline"}),onClick:async()=>{if(!Re)return;const e=await(async e=>fetch(e).then((function(e){var t;let s=null===(t=e.body)||void 0===t?void 0:t.getReader(),n=new TextDecoder("utf-8");return null===s||void 0===s?void 0:s.read().then((function(e){return n.decode(e.value)}))})))(Re)||"";de()(e,"example.csv")},children:"Download sample"})}),(0,p.jsx)(ue,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",visible:i,setVisible:a,onConfirm:()=>{const t=Object.values(o);return e(X({recipients:t})),a(!1)},onCancel:()=>{a(!1),e(w("")),d({})},btnText:"merge"})]})},Ie="setting",De=(0,g.createAsyncThunk)("setting/setDecimal",(async e=>({decimal:e}))),Be=(0,g.createAsyncThunk)("setting/setEncryption",(async e=>({encryption:e}))),ze=(0,g.createAsyncThunk)("setting/setDisabled",(async e=>({disabled:e}))),Ee=(0,g.createSlice)({name:Ie,initialState:{decimal:!0,encryption:!1,disabled:!1},reducers:{},extraReducers:e=>{e.addCase(De.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Be.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ze.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Oe=()=>{const e=(0,n.useDispatch)(),{main:{mintSelected:t},setting:{decimal:s,disabled:i}}=(0,n.useSelector)((e=>e)),r=B(t)||0;return(0,p.jsx)(l.Switch,{onChange:t=>{e(De(t))},checkedChildren:r,unCheckedChildren:r,disabled:i,checked:s})},Me=()=>{const e=(0,n.useDispatch)();return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{size:24,children:[(0,p.jsx)(Oe,{}),"Decimals"]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{size:24,children:[(0,p.jsx)(l.Switch,{disabled:!0,onChange:t=>e(Be(t))}),"Encrypt confidential information"]})})]})},Pe=()=>(0,p.jsx)("div",{className:"setting",children:(0,p.jsx)(l.Popover,{trigger:"click",placement:"bottom",title:null,content:(0,p.jsx)(Me,{}),children:(0,p.jsx)(x,{style:{cursor:"pointer",fontSize:16},name:"cog-outline"})})});var Le=s(3007),Qe=s(4550),Fe=s.n(Qe),We=s(51518),qe=s.n(We);const Ve=s.p+"static/media/twitter.9cbdafef0605b5c84ec56b271a60a6e8.svg",Ue=e=>{let{visible:t,redeemLink:s,setVisible:n}=e;const[i,a]=(0,r.useState)(!1);return(0,p.jsx)(l.Modal,{visible:t,closeIcon:(0,p.jsx)(x,{name:"close-outline"}),onCancel:()=>n(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,p.jsxs)(l.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Image,{src:Ve,preview:!1})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,p.jsx)(l.Typography.Title,{level:3,children:"Share on Twitter!"}),(0,p.jsx)(l.Space,{size:4,children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Share this link so your recipients can get their tokens"})})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:8,justify:"space-between",children:[(0,p.jsx)(l.Col,{className:"share-link",span:20,children:(0,p.jsx)(l.Typography.Text,{children:(e=>e.substring(0,40)+"...")(s)})}),(0,p.jsx)(l.Col,{span:4,children:(0,p.jsx)(l.Tooltip,{title:"Copied",visible:i,children:(0,p.jsx)(qe(),{text:s,children:(0,p.jsx)(l.Button,{size:"large",type:"ghost",onClick:async()=>{a(!0),await(0,m.sA)(1500),a(!1)},children:"copy"})})})})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Button,{size:"large",type:"primary",block:!0,onClick:()=>{let e="http://twitter.com/intent/tweet?";const t={url:s,text:"Your prize has arrived! Redeem now at Sen Hub: "};for(const s in t)e+="&"+s+"="+encodeURIComponent(t[s]||"");window.open(e,"_blank")},children:"Share now"})})]})})},_e=e=>{let{cid:t}=e;const{appRoute:s,generateQuery:n}=q(),[i,a]=(0,r.useState)(!1),c=`${window.location.origin}${s}?${n({redeem:t})}`;return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(l.Button,{onClick:()=>a(!0),type:"text",style:{color:"#42E6EB"},children:"share"}),(0,p.jsx)(Ue,{visible:i,setVisible:a,redeemLink:c})]})},Ke=[{title:"TIME",dataIndex:"time",render:e=>(0,p.jsx)(l.Typography.Text,{children:Fe()(e).format("MMM DD, YYYY HH:mm")})},{title:"TOKEN",dataIndex:"mint",render:e=>(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(E,{mintAddress:e}),(0,p.jsx)(M,{mintAddress:e})]})},{title:"AMOUNT",dataIndex:"total",render:e=>(0,p.jsx)(l.Typography.Text,{children:(0,m.uR)(e).format("0,0.[0000]")})},{title:"ACTION",dataIndex:"cid",render:e=>(0,p.jsx)(_e,{cid:e})}],$e=e=>{let{visible:t,setVisible:s}=e;const{wallet:{address:n}}=(0,i.useWallet)(),[a,c]=(0,r.useState)([]),o=(0,r.useCallback)((async()=>{const e=new Le.Z(n).createInstance("lightning_tunnel"),t=await e.getItem("history")||[];return c(t)}),[n]);return(0,r.useEffect)((()=>{o()}),[o]),(0,p.jsx)(l.Modal,{visible:t,onCancel:()=>s(!1),closeIcon:(0,p.jsx)(x,{name:"close-outline"}),footer:!1,className:"card-lightning",style:{paddingBottom:0},children:(0,p.jsxs)(l.Row,{gutter:[32,32],style:{height:500},className:"scrollbar",children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:5,children:"Transfer history"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{align:"baseline",children:[(0,p.jsx)(x,{name:"information-circle-outline"}),(0,p.jsx)(l.Typography.Text,{children:"The history of each transaction is saved only on the device where the transaction was made."})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Table,{columns:Ke,dataSource:a,pagination:!1,rowKey:e=>e.cid})})]})})},Ge=e=>{let{label:t}=e;const[s,i]=(0,r.useState)(!1),{step:a}=(0,n.useSelector)((e=>e.steps)),c=(0,r.useMemo)((()=>a===K.two?K.two:a===K.three?K.three:K.one),[a]),o=(0,r.useMemo)((()=>a===K.three?K.three:K.two),[a]);return(0,p.jsxs)(l.Row,{children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsxs)(l.Space,{direction:"vertical",size:12,children:[(0,p.jsx)(l.Radio.Group,{value:a,className:"steps",buttonStyle:"solid",children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Radio.Button,{className:"rate-btn",value:c}),(0,p.jsx)(l.Radio.Button,{className:"rate-btn",value:o}),(0,p.jsx)(l.Radio.Button,{className:"rate-btn",value:K.three})]})}),(0,p.jsx)(l.Typography.Title,{level:5,children:t})]})}),(0,p.jsx)(l.Col,{children:(0,p.jsxs)(l.Space,{size:16,children:[(0,p.jsx)(x,{style:{cursor:"pointer",fontSize:16},name:"document-text-outline",onClick:()=>i(!0)}),(0,p.jsx)(Pe,{})]})}),(0,p.jsx)($e,{visible:s,setVisible:i})]})},Je=()=>(0,p.jsx)(l.Card,{bordered:!1,className:"card-lightning",children:(0,p.jsxs)(l.Row,{gutter:[32,32],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Ge,{label:"Fill in recipient information"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Ne,{})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(ae,{})})]})}),Ze=()=>{const e=(0,n.useDispatch)(),{recipients:{recipients:t}}=(0,n.useSelector)((e=>e)),{quantity:s}=ge(),{isError:i}=re(),a=(0,r.useCallback)((async()=>{await e(b()),await e(te()),e(Z(K.one))}),[e]);return(0,p.jsx)(l.Card,{className:"card-lightning",bordered:!1,children:(0,p.jsxs)(l.Row,{gutter:[32,32],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Ge,{label:"Fill in recipient information"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[8,8],children:[t&&t.map(((e,t)=>{let[s,n]=e;return(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(je,{amount:n,walletAddress:s,index:t})},s+t)})),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(je,{})})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(be,{})})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[16,16],children:[(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Button,{onClick:a,size:"large",type:"ghost",block:!0,children:"Back"})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Button,{size:"large",type:"primary",onClick:()=>e(Z(K.three)),block:!0,disabled:s<=0||i,children:"Continue"})})]})})]})})},Ye="Select",He=e=>{let{tokens:t,activeMintAddress:s,onSelect:n}=e;return(0,p.jsxs)(l.Select,{onChange:n,value:s||Ye,className:"select-token",children:[(0,p.jsx)(l.Select.Option,{value:Ye,children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(x,{style:{fontSize:25},name:"help-outline"}),(0,p.jsx)(l.Typography.Text,{style:{fontSize:16},children:"Select a token"})]})}),t.map((e=>(0,p.jsx)(l.Select.Option,{children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(E,{mintAddress:e}),(0,p.jsx)(M,{mintAddress:e})]})},e)))]})};var Xe=s(83868);const et=(e,t,s)=>c.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(c.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},tt=e=>{const{wallet:{address:t,lamports:s}}=(0,i.useWallet)(),{accounts:n}=(0,i.useAccount)(),{amount:r,mint:a}=n[e]||{},l=B(a)||0;return c.account.isAddress(t)&&c.account.isAddress(e)?e===t?et(c.DEFAULT_EMPTY_ADDRESS,s,9):et(a,r,l):et()},st=e=>{let{label:t="",value:s=""}=e;return(0,p.jsxs)(l.Row,{children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsxs)(l.Typography.Text,{type:"secondary",children:[t," "]})}),(0,p.jsx)(l.Col,{children:s})]})},nt=()=>{const[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!1),[o,h]=(0,r.useState)(""),{main:{mintSelected:x},recipients:{recipients:j}}=(0,n.useSelector)((e=>e)),{wallet:{address:g}}=(0,i.useWallet)(),y=(0,n.useDispatch)(),f=B(x)||0,{total:b,quantity:w}=ge(),C=I(),{appRoute:v,generateQuery:S}=q(),{balance:k}=(e=>{const[t,s]=(0,r.useState)(""),{wallet:{address:n}}=(0,i.useWallet)(),a=tt(t);return(0,r.useEffect)((()=>{(async()=>{if(!c.account.isAddress(n)||!c.account.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const i=await t.deriveAssociatedAddress(n,e);s(i)}catch(i){return s("")}})()})),a})(x),T=(0,r.useMemo)((()=>k?k-Number(b):0),[k,b]),A=(0,r.useMemo)((()=>{if(!j.length||!f)return;const e=[];return Object.values(j).forEach((t=>{let[s,n]=t;e.push({address:s,earnings:(Number(n)*10**f).toString()})})),u.P6.parseBalanceMap(e)}),[j,f]);return(0,p.jsxs)(l.Card,{bordered:!1,className:"card-lightning",children:[(0,p.jsxs)(l.Row,{gutter:[32,32],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Ge,{label:"Confirm transfer"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[24,24],justify:"center",children:[(0,p.jsx)(l.Col,{children:(0,p.jsxs)(l.Space,{direction:"vertical",size:12,align:"center",children:[(0,p.jsx)(l.Typography.Text,{children:"Total transfer"}),(0,p.jsx)(l.Typography.Title,{level:1,children:b}),(0,p.jsx)(l.Tag,{style:{margin:0,borderRadius:4,color:"rgb(66, 230, 235)",background:"rgba(66, 230, 235, 0.1)",border:"unset"},children:(0,p.jsx)(M,{mintAddress:x})})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Card,{bordered:!1,className:"card-total",children:(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(st,{label:"Time",value:Fe()(new Date).format("DD MMM, YYYY HH:MM")})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(st,{label:"Quantity",value:w})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(st,{label:"Your balance",value:(0,p.jsxs)(l.Typography.Text,{children:[(0,m.uR)(k).format("0,0.00[0000]")," ",(0,p.jsx)(M,{mintAddress:x})]})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(st,{label:"Remaining",value:(0,p.jsxs)(l.Typography.Text,{children:[(0,m.uR)(T).format("0,0.00[00]")," ",(0,p.jsx)(M,{mintAddress:x})]})})})]})})})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Button,{size:"large",onClick:()=>y(Z(K.two)),block:!0,type:"ghost",children:"BACK"})}),(0,p.jsx)(l.Col,{span:12,children:(0,p.jsx)(l.Button,{size:"large",onClick:async()=>{if(!C||!c.account.isAddress(x)||!A)return;const{merkleRoot:e}=A;t(!0);try{const{splt:s,wallet:n}=window.sentre;if(!n)throw Error("Please connect wallet");const i=c.utils.decimalize(b,f).toString(),r=c.account.fromAddress(x),{tx:l,distributor:o,distributorATA:u}=await C.createDistributor({tokenMint:r,root:e,maxNumNodes:new d.AW(w),maxTotalClaim:new d.AW(i)}),p=await l.send();await p.wait();const j={distributor:o.toBase58(),distributorATA:u.toBase58()},y=await s.deriveAssociatedAddress(g,x),{txId:k}=await s.transfer(BigInt(i),y,j.distributorATA,n);window.notify({type:"success",description:"Transfer successfully. Click to view details.",onClick:()=>window.open((0,m.kU)(k))});const T=new Xe.Z,R=new Le.Z(g).createInstance("lightning_tunnel"),N=[...await R.getItem("history")||[]],I=((e,t,s)=>{if(!e)return{};const{claims:n}=e,i={};return Object.keys(n).forEach((e=>{const{amount:r,index:a,proof:l}=n[e],c={index:a,proof:l,amount:r.toString(),claimant:e,distributorInfo:t,mintAddress:s};i[e]=c})),i})(A,j,x),D=await T.set(I),B={cid:D,total:b,time:(new Date).toString(),mint:x};N.unshift(B),R.setItem("history",N);const z=`${window.location.origin}${v}?${S({redeem:D})}`;return h(z),a(!0)}catch(s){window.notify({type:"error",description:s.message})}finally{t(!1)}},type:"primary",loading:e,disabled:T<0,block:!0,children:"TRANSFER"})})]})})]}),(0,p.jsx)(Ue,{visible:s,setVisible:a,redeemLink:o})]})},it=e=>{let{label:t,description:s,active:n}=e;return(0,p.jsxs)(r.Fragment,{children:[n?(0,p.jsx)(x,{name:"checkbox-sharp",style:{position:"absolute",top:0,right:0,color:"#42E6EB",fontSize:20}}):null,(0,p.jsxs)(l.Row,{gutter:[12,12],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:5,children:t})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:s})})]})]})},rt=()=>{const[e,t]=(0,r.useState)(_.manual),[s,a]=(0,r.useState)("Select"),c=(0,n.useDispatch)(),{accounts:o}=(0,i.useAccount)(),d=(e=>{const{tokenProvider:t}=(0,i.useMint)(),[s,n]=(0,r.useState)([]),a=(0,r.useCallback)((async()=>{const s=[];for(const n of e)await t.findByAddress(n)&&s.push(n);return n(s)}),[t,e]);return(0,r.useEffect)((()=>{a()}),[a]),s})((0,r.useMemo)((()=>Object.values(o).map((e=>e.mint))),[o])),u=(0,r.useMemo)((()=>"Select"===s||!e),[s,e]);return(0,p.jsx)(l.Card,{className:"card-lightning",bordered:!1,children:(0,p.jsxs)(l.Row,{gutter:[32,32],align:"middle",children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Ge,{label:"Select token type and input method"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(He,{activeMintAddress:s,tokens:d,onSelect:e=>{a(e),c(C(e))}})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{size:12,direction:"vertical",style:{width:"100%"},children:[(0,p.jsx)(l.Typography.Text,{children:"Choose transfer info input method"}),(0,p.jsx)(l.Radio.Group,{onChange:e=>t(e.target.value),style:{width:"100%"},className:"select-card",children:(0,p.jsxs)(l.Row,{gutter:[12,12],children:[(0,p.jsx)(l.Col,{xs:24,lg:12,children:(0,p.jsx)(l.Radio.Button,{value:_.manual,children:(0,p.jsx)(it,{label:"Manual",description:"With a small number of recipients.",active:e===_.manual})})}),(0,p.jsx)(l.Col,{xs:24,lg:12,children:(0,p.jsx)(l.Radio.Button,{value:_.auto,children:(0,p.jsx)(it,{label:"Automatic",description:"Support bulk import with a CSV file.",active:e===_.auto})})})]})})]})})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Button,{size:"large",onClick:()=>{c(b(e)),c(Z(K.two))},block:!0,type:"primary",disabled:u,children:"Continue"})})]})})},at=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,n.useSelector)((e=>e));return e?t===K.two?e===_.auto?(0,p.jsx)(Je,{}):(0,p.jsx)(Ze,{}):(0,p.jsx)(nt,{}):(0,p.jsx)(rt,{})};var lt=s(82611);const ct=()=>{const[e,t]=(0,r.useState)(),{main:{visible:s}}=(0,n.useSelector)((e=>e)),{setBackground:c}=(0,i.useUI)(),{wallet:{address:o}}=(0,i.useWallet)(),d=(0,n.useDispatch)(),u=new URLSearchParams((0,a.useLocation)().search).get("redeem"),h=(0,r.useCallback)((async()=>{if(!u)return;const e=new Xe.Z,s=await e.get(u);for(const n of Object.keys(s))if(n===o)return t(s[n]),d(v(!0));return window.notify({type:"warning",description:"You are not on the list."})}),[u,o,d]);return(0,r.useEffect)((()=>{h()}),[h]),(0,r.useEffect)((()=>{c({light:lt,dark:lt})}),[c]),(0,p.jsxs)(l.Row,{gutter:[24,24],justify:"center",className:"lightning-container",children:[(0,p.jsx)(l.Col,{xs:24,md:16,lg:10,children:(0,p.jsx)(at,{})}),(0,p.jsx)(U,{visible:s,claimProof:e})]})};function ot(e){let{children:t}=e;return(0,p.jsxs)("div",{className:"background-container",children:[t,Array.apply(null,Array(20)).map(((e,t)=>(0,p.jsx)("div",{className:"circle-container",children:(0,p.jsx)("div",{className:"circle"})},t)))]})}var dt=s(85912);const ut=(0,g.configureStore)({middleware:e=>e(dt.h),devTools:(0,dt.$)("lightning_tunnel"),reducer:{main:T,steps:Y,setting:Ee,recipients:ie}}),{manifest:{appId:ht}}=F,pt=()=>(0,p.jsx)(i.UIProvider,{appId:ht,antd:{prefixCls:ht},children:(0,p.jsx)(i.MintProvider,{children:(0,p.jsx)(i.PoolProvider,{children:(0,p.jsx)(i.AccountProvider,{children:(0,p.jsx)(i.WalletProvider,{children:(0,p.jsx)(n.Provider,{store:ut,children:(0,p.jsx)(ot,{children:(0,p.jsx)(ct,{})})})})})})})})},67751:(e,t,s)=>{"use strict";s.d(t,{U:()=>i});var n=s(15822);class i{static set(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.qf;this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}i.mapCache=new Map},15822:(e,t,s)=>{"use strict";s.d(t,{qf:()=>n,Dt:()=>i});const n={ttl:3e4},i={limit:{calls:10,time:1e3},cache:n}},21411:(e,t,s)=>{"use strict";var n=s(15822),i=s(85964),r=s(67751);class a{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new l(e);return this.mapInstance.set(t,s),s}static async load(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof e&&(e=JSON.stringify(e));let n=a.getSingleFlight(s);a.mapInstance.set(e,n);const r=new i.g(e);return n.load(r,t)}}a.mapInstance=new Map;class l{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(n.Dt,e)}async load(e,t){const s=r.U.get(e.key);if(s)return Promise.resolve(s);let n=!1,i=this.mapRequestCalling.get(e.key);return i||(i=e,n=!0,this.mapRequestCalling.set(i.key,i)),new Promise(((e,s)=>{if(!i)return s("Not found request!");i.add(e,s),n&&this.fetch(i,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{r.U.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}},85964:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});class n{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}},85912:(e,t,s)=>{"use strict";s.d(t,{$:()=>n,h:()=>i});const n=e=>!1;BigInt.prototype.toJSON=function(){return this.toString()};const i={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e}}},3007:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s(15454),i=s.n(n),r=s(95418),a=s(83868);class l{constructor(e){if(this.dbName=void 0,this.driver=void 0,this.ipfs=void 0,this.createInstance=e=>i().createInstance({driver:this.driver,name:this.dbName,storeName:e}),this.dropInstance=async e=>{const t=this.createInstance(e);return await t.clear(),await i().dropInstance({name:this.dbName,storeName:e})},this.all=async()=>{let e={};const t=(await this.createInstance("sentre").getItem("appIds")||[]).flat().concat(["sentre"]);for(const s of t){e[s]={};const t=this.createInstance(s);await t.iterate(((t,n)=>{e[s][n]=t}))}return e},this.fetch=async e=>await this.ipfs.get(e),this.backup=async()=>{const e=await this.all();return await this.ipfs.set(e)},this.restore=async e=>{const t=await this.fetch(e);for(const s in t){const e=await this.createInstance(s);for(const n in t[s]){const i=t[s][n];await e.setItem(n,i)}}return t},!r.account.isAddress(e))throw new Error("Invalid address");this.dbName=e,this.driver=[i().WEBSQL,i().LOCALSTORAGE],this.ipfs=new a.Z}}const c=l},83868:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(32642),i=s(34559),r=s(97429).Buffer;class a{constructor(){this._ipfs=async()=>{try{return window.ipfs||(window.ipfs=await(0,n.Ue)()),window.ipfs}catch(e){return await(0,i.sA)(500),await this._ipfs()}},this.get=async e=>{if(!a.isCID(e))throw new Error("Invalid CID");const t=await this._ipfs(),s=await t.cat(e);let n="";for await(const i of s)n+=r.from(i).toString();return JSON.parse(n)},this.set=async e=>{if(!e)throw new Error("Empty data");const t=JSON.stringify(e),s=await this._ipfs(),{path:n}=await s.add(t);return n}}}a.isCID=e=>{try{return!!e&&n.bf.multihash(e)}catch(t){return!1}};const l=a},15190:(e,t,s)=>{"use strict";s.d(t,{Bv:()=>d,OB:()=>c,ef:()=>o});const n="sentre",i=window.localStorage,r=e=>{try{return e?JSON.parse(e):null}catch(t){return null}},a={set:(e,t)=>{let s=r(i.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,i.setItem(n,JSON.stringify(s))},get:e=>{let t=r(i.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{a.set(e,null)}},l=a,c="production",o=(()=>{switch(l.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})(),d=(()=>{switch(o){case"devnet":return 103;case"testnet":return 102;default:return 101}})()},34559:(e,t,s)=>{"use strict";s.d(t,{sA:()=>l,Xn:()=>c,kU:()=>o,uR:()=>d});var n=s(95418),i=s(16200),r=s.n(i),a=s(15190);s(21411);const l=e=>new Promise((t=>setTimeout(t,e))),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.substring(0,t)+s+e.substring(e.length-t,e.length)},o=e=>n.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${a.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${a.ef}`,d=e=>e?r()(e):r()("0")},46899:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/example.9c68d33b8aa15a3715b4.csv"},82611:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/background-LT.4c9e016f719ffe61dc63.png"},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},88795:()=>{},89408:()=>{},57600:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=916.c724dfee.chunk.js.map