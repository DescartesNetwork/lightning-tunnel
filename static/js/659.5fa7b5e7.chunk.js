(globalThis.webpackChunklightning_tunnel=globalThis.webpackChunklightning_tunnel||[]).push([[659],{24568:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>ft});var n=s(55754),i=s(15780),r=s(92950),a=s(45055),l=s(99019),c=s(95418),o=s(19289);let d,u,h;!function(e){e[e.auto=1]="auto",e[e.manual=2]="manual"}(d||(d={})),function(e){e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three"}(u||(u={})),function(e){e.activeKey="collapse-upload-csv"}(h||(h={}));const p="steps",x={step:u.one},m=(0,o.createAsyncThunk)("steps/onSelectStep",(async e=>({step:e}))),j=(0,o.createSlice)({name:p,initialState:x,reducers:{},extraReducers:e=>{e.addCase(m.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,g="main",y={methodSelected:void 0,mintSelected:"",visible:!1,currentHistory:void 0,isTyping:!1},f=(0,o.createAsyncThunk)("main/onSelectMethod",(async e=>({methodSelected:e}))),b=(0,o.createAsyncThunk)("main/onSelectedMint",(async e=>({mintSelected:e}))),w=(0,o.createAsyncThunk)("main/setVisible",(async e=>({visible:e}))),C=(0,o.createAsyncThunk)("main/setCurrentHistory",(async e=>({currentHistory:e}))),v=(0,o.createAsyncThunk)("main/setIsTyping",(async e=>({isTyping:e}))),S=(0,o.createSlice)({name:g,initialState:y,reducers:{},extraReducers:e=>{e.addCase(f.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(b.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(w.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(C.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(v.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,k="recipients",T=(0,o.createAsyncThunk)("recipients/addRecipients",(async e=>{let{recipients:t}=e;return{recipients:t}})),A=(0,o.createAsyncThunk)("recipients/addRecipient",(async(e,t)=>{let{recipient:s}=e,{getState:n}=t;const{recipients:{recipients:i}}=n(),r=[...i];return r.push(s),{recipients:r}})),R=(0,o.createAsyncThunk)("recipients/removeRecipients",(async()=>({recipients:[]}))),N=(0,o.createAsyncThunk)("recipients/removeRecipient",(async(e,t)=>{let{recipient:s}=e,{getState:n}=t;const{recipients:{recipients:i}}=n(),r=[...i],a=r.indexOf(s);return a>-1&&r.splice(a,1),{recipients:r}})),I=(0,o.createAsyncThunk)("recipients/setErrorDatas",(async e=>{let{errorData:t}=e;return{errorData:t}})),B=(0,o.createSlice)({name:k,initialState:{recipients:[],errorData:[]},reducers:{},extraReducers:e=>{e.addCase(T.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(A.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(R.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(I.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(N.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,D=()=>{const{recipients:{recipients:e},setting:{decimal:t}}=(0,n.useSelector)((e=>e));return{amountError:(0,r.useMemo)((()=>{for(const[s,n]of e){if(!c.account.isAddress(s))return!0;if(!t&&Number(n)%1!==0)return!0}return!1}),[t,e])}},z=e=>{const[t,s]=(0,r.useState)(void 0),{getDecimals:n}=(0,i.useMint)(),a=(0,r.useCallback)((async()=>{try{const t=await n(e);return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,r.useEffect)((()=>{a()}),[a]),t},E=(e,t,s)=>c.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(c.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},O=e=>{const{wallet:{address:t,lamports:s}}=(0,i.useWallet)(),{accounts:n}=(0,i.useAccount)(),{amount:r,mint:a}=n[e]||{},l=z(a)||0;return c.account.isAddress(t)&&c.account.isAddress(e)?e===t?E(c.DEFAULT_EMPTY_ADDRESS,s,9):E(a,r,l):E()},M=e=>{const[t,s]=(0,r.useState)(""),{wallet:{address:n}}=(0,i.useWallet)(),a=O(t);return(0,r.useEffect)((()=>{(async()=>{if(!c.account.isAddress(n)||!c.account.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const i=await t.deriveAssociatedAddress(n,e);s(i)}catch(i){return s("")}})()})),a},P=()=>{const{main:{mintSelected:e},recipients:{recipients:t,errorData:s},setting:{decimal:i}}=(0,n.useSelector)((e=>e)),a=z(e)||0,l=(0,r.useCallback)((e=>{if(!e.length||!a)return BigInt(0);let t=BigInt(0);for(const s of e){const e=s[1];i?t+=c.utils.decimalize(e,a):Number(e)%1===0&&(t+=BigInt(e))}return t}),[i,a]),o=s.filter((e=>!e.includes("")&&c.account.isAddress(e[0]))),d=l(t)+l(o),u=o.length,h=(0,r.useMemo)((()=>t.length),[t]);return{total:c.utils.undecimalize(d,a).toString(),quantity:h+u}},L=e=>{const{balance:t}=M(e),{total:s}=P();return(0,r.useMemo)((()=>t?t-Number(s):0),[t,s])};var F=s(45263);const Q=()=>{const e=(0,n.useDispatch)(),{recipients:{recipients:t,errorData:s},main:{isTyping:i,mintSelected:a}}=(0,n.useSelector)((e=>e)),{amountError:o}=D(),d=L(a),h=(0,r.useMemo)((()=>{if(!s)return!1;for(const[e,t]of s)if(!c.account.isAddress(e)||!t)return!0;return!1}),[s]),p=!t.length||o||h||i||d<0,x=(0,r.useCallback)((async()=>{await e(f()),e(R()),e(m(u.one))}),[e]);return(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{type:"ghost",size:"large",onClick:x,block:!0,children:"Back"})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:()=>e(m(u.three)),type:"primary",disabled:p,block:!0,children:"Continue"})})]})};var W=s(24656),q=s.n(W),V=s(18268),_=s.n(V);const U={"logo-telegram":s.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"},K=(0,r.forwardRef)(((e,t)=>{let{name:s,className:n,...i}=e;const r=n?"anticon "+n:"anticon";return(0,F.jsx)("span",{className:r,...i,children:U[s]?(0,F.jsx)("ion-icon",{ref:t,src:U[s]}):(0,F.jsx)("ion-icon",{ref:t,name:s})})})),$=e=>{let{visible:t,setVisible:s,title:n,description:i,onConfirm:r,onCancel:a,btnText:c}=e;return(0,F.jsx)(l.Modal,{visible:t,closeIcon:(0,F.jsx)(K,{name:"close-outline"}),onCancel:()=>s(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:15,align:"baseline",children:[(0,F.jsx)(K,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,F.jsxs)(l.Space,{size:4,direction:"vertical",children:[(0,F.jsx)(l.Typography.Text,{children:n}),(0,F.jsx)(l.Typography.Text,{type:"secondary",children:i})]})]})}),(0,F.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Button,{onClick:a,type:"ghost",children:"cancel"}),(0,F.jsx)(l.Button,{onClick:r,type:"primary",children:c})]})})]})})};let H;const G=(0,r.forwardRef)(((e,t)=>{var s;let{max:n,onValue:i=(()=>{}),onChange:a=(()=>{}),...c}=e;const[o,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(null),p=(0,r.useRef)(t),x=(0,r.useCallback)((e=>{const t=e=>{H&&(clearTimeout(H),H=void 0),d(e),H=setTimeout((()=>d("")),500)};return/^\d*(\.\d*)?$/.test(e)?n&&parseFloat(e)>parseFloat(n.toString())?t("Not enough balance"):i(e):t("Invalid character")}),[n,i]);return null!==u&&(null===p||void 0===p||null===(s=p.current)||void 0===s||s.setSelectionRange(u,u)),(0,F.jsx)(l.Tooltip,{title:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(K,{name:"warning"}),o]}),visible:!!o,children:(0,F.jsx)(l.Input,{...c,onChange:e=>{a(e),h(e.target.selectionStart),x(e.target.value||"")},ref:p})})})),J="file",Y=(0,o.createAsyncThunk)("file/setFileName",(async e=>({fileName:e}))),Z=(0,o.createAsyncThunk)("file/onSelectedFile",(async(e,t)=>{let{checked:s,index:n}=e,{getState:i}=t;const{file:{selectedFile:r},recipients:{recipients:a,errorData:l}}=i();if(void 0===n){const e=[...a],t=[...l||[]];if(!s)return{selectedFile:[]};const n=[];for(const s in e)n.push(Number(s));for(const s in t)n.push(e.length+Number(s));return{selectedFile:n}}const c=[...r];if(s)c.push(n);else{const e=c.indexOf(n);c.splice(e,1)}return{selectedFile:c}})),X=(0,o.createAsyncThunk)("file/removeSelectedFile",(async()=>({selectedFile:[]}))),ee=(0,o.createSlice)({name:J,initialState:{fileName:"",selectedFile:[]},reducers:{},extraReducers:e=>{e.addCase(Y.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Z.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(X.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,te={walletAddress:"",amount:""},se=e=>{let{walletAddress:t,addNewRecipient:s,remove:n}=e;return(0,F.jsx)(r.Fragment,{children:t?(0,F.jsx)(l.Button,{type:"text",size:"small",style:{padding:0},onClick:n,icon:(0,F.jsx)(K,{style:{fonSize:20},name:"trash-outline"})}):(0,F.jsx)(l.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:s,children:"OK"})})},ne=e=>{let{walletAddress:t,amount:s,index:i,isSelect:a=!1}=e;const[o,d]=(0,r.useState)(te),[u,h]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),[m,j]=(0,r.useState)(!1),{main:{mintSelected:g},recipients:{recipients:y},setting:{decimal:f},file:{selectedFile:b}}=(0,n.useSelector)((e=>e)),w=(0,n.useDispatch)(),C=z(g)||0,S=(0,r.useCallback)((async()=>c.account.isAddress(t)&&s?d({walletAddress:t,amount:s}):d(te)),[t,s]),k=(0,r.useCallback)((()=>{if(!s&&!t)return o.walletAddress||o.amount?w(v(!0)):w(v(!1))}),[s,w,o.amount,o.walletAddress,t]),R=(0,r.useCallback)((()=>{if(s)return f?h(""):Number(s)%1!==0?h("Should be natural numbers"):void 0}),[s,f]),I=!!t;return(0,r.useEffect)((()=>{S()}),[S]),(0,r.useEffect)((()=>{R()}),[R]),(0,r.useEffect)((()=>{k()}),[k]),(0,F.jsxs)(l.Row,{gutter:[8,8],align:"middle",justify:"space-between",children:[a&&(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Checkbox,{checked:null===b||void 0===b?void 0:b.includes(i),onChange:e=>((e,t)=>w(Z({checked:e,index:t})))(e.target.checked,i)})}),(0,F.jsx)(l.Col,{span:16,children:(0,F.jsx)(l.Input,{disabled:I,value:o.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:e=>{d({...o,[e.target.name]:e.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,F.jsx)(l.Col,{span:6,children:(0,F.jsx)(G,{disabled:I,value:s||o.amount,name:"amount",placeholder:"Amount",onValue:e=>d({...o,amount:e}),className:u?"recipient-input-error":"recipient-input",autoComplete:"off"})}),!a&&(0,F.jsx)(l.Col,{children:(0,F.jsx)(se,{addNewRecipient:async()=>{const{walletAddress:e,amount:t}=o;if(!c.account.isAddress(e))return x("Wrong wallet address");if(!t)return h("Amount cannot be empty");for(const[n]of y)if(e===n)return j(!0);const s=[e,t];return x(""),h(""),await w(A({recipient:s})),d(te)},walletAddress:t,remove:()=>{if(void 0===i)return;const e=[...y];return e.splice(i,1),w(T({recipients:e}))}})}),(p||u)&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(K,{style:{color:"#f2323f"},name:"warning-outline"}),(0,F.jsx)(l.Typography.Text,{type:"danger",children:p||u})]})}),(0,F.jsx)($,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",btnText:"merge",onConfirm:async()=>{const{walletAddress:e,amount:t}=o,s=y.find((t=>{let[s]=t;return s===e}));if(!s||!C)return;const n=c.utils.decimalize(s[1],C)+c.utils.decimalize(t,C),i=[e,c.utils.undecimalize(n,C)];return await w(N({recipient:s})),await w(A({recipient:i})),await j(!1),(u||p)&&(h(""),x("")),d(te)},visible:m,setVisible:j,onCancel:()=>j(!1)})]})},ie=[void 0],re=e=>{let{mintAddress:t,size:s=24,icon:n=(0,F.jsx)(K,{name:"diamond-outline"}),reversed:a=!1,...o}=e;const[d,u]=(0,r.useState)(ie),{tokenProvider:h}=(0,i.useMint)(),{pools:p}=(0,i.usePool)(),x=(0,r.useCallback)((async e=>{const t=await h.findByAddress(e);if(null!==t&&void 0!==t&&t.logoURI)return t.logoURI}),[h]),m=(0,r.useCallback)((async()=>{if(!c.account.isAddress(t))return u(ie);const e=Object.values(p).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:s}=e,n=await Promise.all([t,s].map(x));return a&&n.reverse(),u(n)}const s=await x(t);return u([s])}),[t,a,x,p]);return(0,r.useEffect)((()=>{m()}),[m]),1===d.length?(0,F.jsx)(l.Avatar,{src:d[0],size:s,style:{backgroundColor:"#2D3355",border:"none"},...o,children:n}):(0,F.jsx)(l.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...o,children:d.map(((e,t)=>(0,F.jsx)(l.Avatar,{src:e,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:n},t)))})},ae="TOKN",le=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[a,l]=(0,r.useState)(ae),{tokenProvider:o}=(0,i.useMint)(),{pools:d}=(0,i.usePool)(),u=(0,r.useCallback)((async e=>{const t=await o.findByAddress(e);return null!==t&&void 0!==t&&t.symbol?t.symbol:e.substring(0,4)}),[o]),h=(0,r.useCallback)((async()=>{if(!c.account.isAddress(t))return l(ae);const e=Object.values(d).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:i}=e,r=await Promise.all([t,i].map(u));return n&&r.reverse(),l(r.join(s))}const i=await u(t);return l(i)}),[t,n,u,d,s]);return(0,r.useEffect)((()=>{h()}),[h]),(0,F.jsx)("span",{children:a})};var ce=s(45268);const oe=e=>{let{label:t,value:s}=e;return(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:t})}),(0,F.jsx)(l.Col,{children:s})]})},de=()=>{const{main:{mintSelected:e}}=(0,n.useSelector)((e=>e)),{total:t,quantity:s}=P(),{balance:i}=M(e),r=L(e);return(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(oe,{label:"Quantity",value:(0,F.jsx)(l.Typography.Text,{children:s})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(oe,{label:"Total",value:(0,F.jsxs)(l.Space,{size:4,children:[(0,F.jsx)(l.Typography.Title,{level:5,children:t}),(0,F.jsx)(l.Typography.Title,{level:5,children:(0,F.jsx)(le,{mintAddress:e})})]})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(oe,{label:"Your balance",value:(0,F.jsxs)(l.Space,{size:4,children:[(0,F.jsx)(l.Typography.Text,{children:(0,ce.uR)(i).format("0,0.00[0000]")}),(0,F.jsx)(l.Typography.Text,{children:(0,F.jsx)(le,{mintAddress:e})})]})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(oe,{label:"Remaining",value:(0,F.jsxs)(l.Space,{size:4,children:[(0,F.jsx)(l.Typography.Text,{children:(0,ce.uR)(r).format("0,0.00[0000]")}),(0,F.jsx)(l.Typography.Text,{children:(0,F.jsx)(le,{mintAddress:e})})]})})})]})},ue=()=>(0,F.jsx)(l.Card,{bordered:!1,style:{borderRadius:8,boxShadow:"unset"},bodyStyle:{padding:"12px 16px"},className:"card-total",children:(0,F.jsx)(de,{})}),he=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;const{recipients:{errorData:i}}=(0,n.useSelector)((e=>e));return(0,F.jsxs)(l.Row,{gutter:[16,8],align:"middle",wrap:!1,justify:"space-between",children:[(0,F.jsx)(l.Col,{span:3,children:(0,F.jsxs)(l.Space,{children:[t&&(0,F.jsx)(l.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"No."})]})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,F.jsx)(l.Col,{span:6,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Amount"})}),!!i.length&&(0,F.jsx)(l.Col,{span:3})]})},pe=e=>{let{editable:t=!1,wrongAddress:s=!1}=e;return s?(0,F.jsx)(l.Tooltip,{title:"Wrong wallet address!",placement:"topLeft",arrowPointAtCenter:!0,children:(0,F.jsx)(K,{name:"close-circle-outline",style:{color:"#d72311"}})}):t?(0,F.jsx)(l.Tooltip,{title:"Invalid  amount!",placement:"topLeft",arrowPointAtCenter:!0,children:(0,F.jsx)(K,{name:"warning-outline",style:{color:"#d72311"}})}):(0,F.jsx)(K,{name:"checkmark-outline",style:{color:"#03A326"}})},xe=e=>{let{wrongAddress:t=!1,isEdited:s=!1,onEdited:n=(()=>{}),onUpdate:i=(()=>{}),onDelete:r=(()=>{})}=e;return t?(0,F.jsx)(l.Button,{type:"text",icon:(0,F.jsx)(K,{name:"trash-outline"}),onClick:r}):s?(0,F.jsx)(l.Button,{type:"text",icon:(0,F.jsx)(K,{name:"cloud-upload-outline"}),onClick:i}):(0,F.jsx)(l.Button,{type:"text",icon:(0,F.jsx)(K,{name:"create-outline"}),onClick:()=>n(!0)})},me=(0,r.forwardRef)(((e,t)=>{let{accountAddress:s="",amount:i=0,selected:a=!1,onChecked:o=(()=>{}),index:d}=e;const u=(0,n.useDispatch)(),[h,p]=(0,r.useState)(!1),[x,m]=(0,r.useState)(""),{recipients:{errorData:j,recipients:g},file:{selectedFile:y},setting:{decimal:f}}=(0,n.useSelector)((e=>e)),b=(0,r.useRef)(t),w=!i,C=!c.account.isAddress(s),v=h?x:i,S=d-g.length,k=(0,r.useCallback)((()=>{if(!j.length||d-j.length<0)return;const e=[...j],[[t]]=e.splice(S,1);e.unshift([t,x]),u(I({errorData:e}))}),[u,j,S,d,x]),T=(0,r.useCallback)((async()=>{if(!j.length)return;const e=[...j];e.splice(S,1),u(I({errorData:e}))}),[u,j,S]),A=(0,r.useMemo)((()=>!!v&&(!f&&Number(i)%1!==0)),[i,v,f]);return(0,F.jsxs)(l.Row,{gutter:[16,8],align:"middle",justify:"space-between",wrap:!1,children:[(0,F.jsx)(l.Col,{span:3,children:(0,F.jsxs)(l.Space,{children:[a&&(0,F.jsx)(l.Checkbox,{checked:null===y||void 0===y?void 0:y.includes(d),onChange:e=>o(e.target.checked,d),className:"lightning-checkbox"}),(0,F.jsxs)(l.Typography.Text,{type:"secondary",children:["#",d+1]})]})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Tooltip,{title:s,children:(0,F.jsx)(l.Typography.Text,{style:{color:C?"#F9575E":""},children:(0,ce.Xn)(s)})})}),(0,F.jsx)(l.Col,{span:6,children:(0,F.jsx)(G,{value:v,bordered:h,onValue:m,disabled:!h,style:{padding:0},className:A?"recipient-input-error":"recipient-input-auto",ref:b})}),!!j.length&&(0,F.jsx)(l.Col,{span:3,children:w&&(0,F.jsxs)(l.Space,{align:"center",children:[(0,F.jsx)(pe,{editable:w,wrongAddress:C}),(0,F.jsx)(xe,{isEdited:h,wrongAddress:C,onEdited:e=>{p(e),b.current&&b.current.focus()},onUpdate:k,onDelete:T})]})})]})})),je=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,F.jsxs)(l.Space,{size:24,children:[(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,F.jsx)(l.Button,{type:"text",size:"small",onClick:()=>i(h.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},ge=e=>{let{remove:t=(()=>{})}=e;const[s,i]=(0,r.useState)(!1),[a,c]=(0,r.useState)(),[o,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),x=(0,n.useDispatch)(),{file:{fileName:m,selectedFile:j},recipients:{recipients:g,errorData:y}}=(0,n.useSelector)((e=>e)),{amountError:f}=D(),b=(e,t)=>x(Z({checked:e,index:t}));return(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,F.jsxs)(l.Row,{gutter:8,children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(K,{name:"document-attach-outline"}),(0,F.jsx)(l.Typography.Text,{style:{color:"inherit"},children:m})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,F.jsx)(K,{name:"close-outline"}),onClick:()=>p(!0)})})]})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[12,12],children:[(0,F.jsx)(l.Col,{flex:"auto",children:s&&(0,F.jsx)(l.Space,{children:(0,F.jsx)(l.Button,{type:"text",size:"small",icon:(0,F.jsx)(K,{name:"trash-outline"}),onClick:()=>{if(null===j||void 0===j||!j.length)return;d(!0);const e=[...g],t=[...y||[]],s=e.filter(((e,t)=>!j.includes(t))),n=t.filter(((e,t)=>!j.includes(g.length+t)));x(I({errorData:n})),x(T({recipients:s})),x(X()),d(!1)},disabled:!(null!==j&&void 0!==j&&j.length),children:"Delete"})})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(je,{activeKey:a,selected:s,onSelect:i,onCollapsed:c})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Collapse,{activeKey:a,bordered:!1,className:"auto-add-new",children:(0,F.jsx)(l.Collapse.Panel,{header:void 0,children:(0,F.jsx)(ne,{})},h.activeKey)})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Spin,{spinning:o,children:(0,F.jsx)(l.Card,{bordered:!1,className:"card-content",children:(0,F.jsxs)(l.Row,{gutter:[8,13],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(he,{selected:s,onChecked:e=>x(Z({checked:e}))})}),y.map(((e,t)=>{let[n,i]=e;return(0,F.jsx)(l.Col,{span:24,className:t+1===y.length?"last-item-error-data":"",children:(0,F.jsx)(me,{accountAddress:n,amount:i,selected:s,onChecked:b,index:g.length+t})},n+t)})),g.map(((e,t)=>{let[n,i]=e;return(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(me,{accountAddress:n,amount:i,selected:s,onChecked:b,index:t})},n+t)}))]})})})}),f&&(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:12,children:[(0,F.jsx)(K,{style:{color:"#F9575E"},name:"warning-outline"}),(0,F.jsx)(l.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(de,{})})]})}),(0,F.jsx)($,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:u,setVisible:p,onConfirm:t,onCancel:()=>p(!1),btnText:"delete"})]})};const ye=s.p+"static/media/icon-upload.a3c69638b092ea112d393cdc3d63d2c4.svg";var fe=s(46899);const be=()=>{const e=(0,n.useDispatch)(),[t,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[o,d]=(0,r.useState)({}),{recipients:{recipients:u},main:{mintSelected:h}}=(0,n.useSelector)((e=>e)),p=z(h)||0,x=(0,r.useCallback)((e=>({errorData:e.filter((e=>e.includes("")||!c.account.isAddress(e[0]))),successData:e.filter((e=>!e.includes("")&&c.account.isAddress(e[0])))})),[]),m=(0,r.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>q().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;return t(s)}}))))(t),{errorData:i,successData:r}=await x(n);if(i&&e(I({errorData:i})),!p)return;const l={};let o=!1;for(const[e,s]of r)if(l[e]){o=!0;const[t,n]=l[e],i=c.utils.decimalize(n,p)+c.utils.decimalize(s,p);l[e]=[t,c.utils.undecimalize(i,p)]}else l[e]=[e,s];return o?(d(l),s(!1),a(!0),e(Y(t.name)),!0):(e(Y(t.name)),e(T({recipients:r})),s(!1),a(!1),!1)}),[x,e,p]),j=async()=>(e(R()),d({}),!0);return u.length?(0,F.jsx)(ge,{remove:j}):(0,F.jsxs)(l.Row,{gutter:[8,8],justify:"end",children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Spin,{spinning:t,children:(0,F.jsx)(l.Upload.Dragger,{accept:".csv,.txt",beforeUpload:m,onRemove:j,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,F.jsxs)(l.Space,{direction:"vertical",size:24,align:"center",children:[(0,F.jsx)(l.Image,{src:ye,preview:!1}),(0,F.jsxs)(l.Space,{direction:"vertical",size:4,align:"center",children:[(0,F.jsx)(l.Typography.Text,{children:"Click or Drop file to upload"}),(0,F.jsxs)(l.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,F.jsx)("code",{children:".csv"}),","," ",(0,F.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,F.jsx)(l.Col,{children:(0,F.jsx)(l.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,F.jsx)(K,{name:"download-outline"}),onClick:async()=>{if(!fe)return;const e=await(async e=>fetch(e).then((function(e){var t;let s=null===(t=e.body)||void 0===t?void 0:t.getReader(),n=new TextDecoder("utf-8");return null===s||void 0===s?void 0:s.read().then((function(e){return n.decode(e.value)}))})))(fe)||"";_()(e,"example.csv")},children:"Download sample"})}),(0,F.jsx)($,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",visible:i,setVisible:a,onConfirm:()=>{const t=Object.values(o);return e(T({recipients:t})),a(!1)},onCancel:()=>{a(!1),e(Y("")),d({})},btnText:"merge"})]})},we="setting",Ce=(0,o.createAsyncThunk)("setting/setDecimal",(async e=>({decimal:e}))),ve=(0,o.createAsyncThunk)("setting/setEncryption",(async e=>({encryption:e}))),Se=(0,o.createAsyncThunk)("setting/setDisabled",(async e=>({disabled:e}))),ke=(0,o.createSlice)({name:we,initialState:{decimal:!0,encryption:!1,disabled:!1},reducers:{},extraReducers:e=>{e.addCase(Ce.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ve.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Se.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Te=()=>{const e=(0,n.useDispatch)(),{main:{mintSelected:t},setting:{decimal:s,disabled:i}}=(0,n.useSelector)((e=>e)),r=z(t)||0;return(0,F.jsx)(l.Switch,{onChange:t=>{e(Ce(t))},checkedChildren:r,unCheckedChildren:r,disabled:i,checked:s})},Ae=()=>{const e=(0,n.useDispatch)();return(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:24,children:[(0,F.jsx)(Te,{}),"Decimals"]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:24,children:[(0,F.jsx)(l.Switch,{disabled:!0,onChange:t=>e(ve(t))}),"Encrypt confidential information"]})})]})},Re=()=>(0,F.jsx)("div",{className:"setting",children:(0,F.jsx)(l.Popover,{trigger:"click",placement:"bottom",title:null,content:(0,F.jsx)(Ae,{}),children:(0,F.jsx)(K,{style:{cursor:"pointer",fontSize:16},name:"cog-outline"})})});var Ne=s(3007),Ie=s(4550),Be=s.n(Ie),De=s(51518),ze=s.n(De);const Ee=s.p+"static/media/twitter.9cbdafef0605b5c84ec56b271a60a6e8.svg",Oe=e=>{let{visible:t,redeemLink:s,setVisible:n}=e;const[i,a]=(0,r.useState)(!1);return(0,F.jsx)(l.Modal,{visible:t,closeIcon:(0,F.jsx)(K,{name:"close-outline"}),onCancel:()=>n(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,F.jsxs)(l.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Image,{src:Ee,preview:!1})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,F.jsx)(l.Typography.Title,{level:3,children:"Share on Twitter!"}),(0,F.jsx)(l.Space,{size:4,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Share this link so your recipients can get their tokens"})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:8,justify:"space-between",children:[(0,F.jsx)(l.Col,{className:"share-link",span:20,children:(0,F.jsx)(l.Typography.Text,{children:(e=>e.substring(0,40)+"...")(s)})}),(0,F.jsx)(l.Col,{span:4,children:(0,F.jsx)(l.Tooltip,{title:"Copied",visible:i,children:(0,F.jsx)(ze(),{text:s,children:(0,F.jsx)(l.Button,{size:"large",type:"ghost",onClick:async()=>{a(!0),await(0,ce.sA)(1500),a(!1)},children:"copy"})})})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Button,{size:"large",type:"primary",block:!0,onClick:()=>{let e="http://twitter.com/intent/tweet?";const t={url:s,text:"Your prize has arrived! Redeem now at Sen Hub: "};for(const s in t)e+="&"+s+"="+encodeURIComponent(t[s]||"");window.open(e,"_blank")},children:"Share now"})})]})})};var Me=s(15190);const Pe={appId:"lightning_tunnel",url:"https://github.com/DescartesNetwork/sen-lightning-tunnel/index.js"},Le={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}},Fe={manifest:{development:{...Pe},staging:{...Pe},production:{...Pe}}[Me.OB],sol:Le[Me.ef]},{manifest:{appId:Qe}}=Fe,We=()=>{const e=(0,a.useLocation)(),t=(0,a.useHistory)(),s=(0,r.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),n=(0,r.useCallback)((e=>s.get(e)),[s]),i=(0,r.useCallback)((e=>{const t=new URLSearchParams;for(const s in e)t.set(s,e[s]);return t.toString()}),[]),l=(0,r.useMemo)((()=>`/app/${Qe}`),[]);return{getQuery:n,generateQuery:i,pushHistory:(0,r.useCallback)((e=>t.push(`${l}${e}`)),[l,t]),appRoute:l}},qe=e=>{let{cid:t}=e;const{appRoute:s}=We(),[n,i]=(0,r.useState)(!1),a=`${window.location.origin}${s}/redeem/${t}`;return(0,F.jsxs)(r.Fragment,{children:[(0,F.jsx)(l.Button,{onClick:()=>i(!0),type:"text",style:{color:"#42E6EB"},children:"share"}),(0,F.jsx)(Oe,{visible:n,setVisible:i,redeemLink:a})]})},Ve=[{title:"TIME",dataIndex:"time",render:e=>(0,F.jsx)(l.Typography.Text,{children:Be()(e).format("MMM DD, YYYY HH:mm")})},{title:"TOKEN",dataIndex:"mint",render:e=>(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(re,{mintAddress:e}),(0,F.jsx)(le,{mintAddress:e})]})},{title:"AMOUNT",dataIndex:"total",render:e=>(0,F.jsx)(l.Typography.Text,{children:(0,ce.uR)(e).format("0,0.[0000]")})},{title:"ACTION",dataIndex:"cid",render:e=>(0,F.jsx)(qe,{cid:e})}],_e=e=>{let{visible:t,setVisible:s}=e;const[a,c]=(0,r.useState)([]),{main:{currentHistory:o}}=(0,n.useSelector)((e=>e)),{wallet:{address:d}}=(0,i.useWallet)(),u=(0,r.useCallback)((async()=>{const e=new Ne.Z(d).createInstance("lightning_tunnel"),t=await e.getItem("history")||[];return o&&t.push(o),c(t)}),[o,d]);return(0,r.useEffect)((()=>{u()}),[u]),(0,F.jsx)(l.Modal,{visible:t,onCancel:()=>s(!1),closeIcon:(0,F.jsx)(K,{name:"close-outline"}),footer:!1,className:"card-lightning",style:{paddingBottom:0},children:(0,F.jsxs)(l.Row,{gutter:[32,32],style:{maxHeight:500},className:"scrollbar",children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Title,{level:5,children:"Transfer history"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{align:"baseline",children:[(0,F.jsx)(K,{name:"information-circle-outline"}),(0,F.jsx)(l.Typography.Text,{children:"The history of each transaction is saved only on the device where the transaction was made."})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Table,{columns:Ve,dataSource:a,pagination:!1,rowKey:e=>e.cid})})]})})},Ue=e=>{let{label:t}=e;const[s,i]=(0,r.useState)(!1),{step:a}=(0,n.useSelector)((e=>e.steps)),c=(0,r.useMemo)((()=>a===u.two?u.two:a===u.three?u.three:u.one),[a]),o=(0,r.useMemo)((()=>a===u.three?u.three:u.two),[a]);return(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Space,{direction:"vertical",size:12,children:[(0,F.jsx)(l.Radio.Group,{value:a,className:"steps",buttonStyle:"solid",children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(l.Radio.Button,{className:"rate-btn",value:c}),(0,F.jsx)(l.Radio.Button,{className:"rate-btn",value:o}),(0,F.jsx)(l.Radio.Button,{className:"rate-btn",value:u.three})]})}),(0,F.jsx)(l.Typography.Title,{level:5,children:t})]})}),(0,F.jsx)(l.Col,{children:(0,F.jsxs)(l.Space,{size:16,children:[(0,F.jsx)(K,{style:{cursor:"pointer",fontSize:16},name:"document-text-outline",onClick:()=>i(!0)}),(0,F.jsx)(Re,{})]})}),(0,F.jsx)(_e,{visible:s,setVisible:i})]})},Ke=()=>(0,F.jsx)(l.Card,{bordered:!1,className:"card-lightning",children:(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ue,{label:"Fill in recipient information"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(be,{})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Q,{})})]})}),$e=()=>{const e=(0,n.useDispatch)(),{recipients:{recipients:t},main:{mintSelected:s,isTyping:i}}=(0,n.useSelector)((e=>e)),{quantity:a}=P(),{amountError:c}=D(),o=L(s),d=(0,r.useCallback)((async()=>{await e(f()),await e(R()),e(m(u.one))}),[e]),h=a<=0||c||o<0||i;return(0,F.jsx)(l.Card,{className:"card-lightning",bordered:!1,children:(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ue,{label:"Fill in recipient information"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[8,8],children:[t&&t.map(((e,t)=>{let[s,n]=e;return(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(ne,{amount:n,walletAddress:s,index:t})},s+t)})),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(ne,{})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(ue,{})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[16,16],children:[(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{onClick:d,size:"large",type:"ghost",block:!0,children:"Back"})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",type:"primary",onClick:()=>e(m(u.three)),block:!0,disabled:h,children:"Continue"})})]})})]})})},He="Select",Ge=e=>{let{tokens:t,activeMintAddress:s,onSelect:n}=e;return(0,F.jsxs)(l.Select,{onChange:n,value:s||He,className:"select-token",children:[(0,F.jsx)(l.Select.Option,{value:He,children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(K,{style:{fontSize:25},name:"help-outline"}),(0,F.jsx)(l.Typography.Text,{style:{fontSize:16},children:"Select a token"})]})}),t.map((e=>(0,F.jsx)(l.Select.Option,{children:(0,F.jsxs)(l.Space,{children:[(0,F.jsx)(re,{mintAddress:e}),(0,F.jsx)(le,{mintAddress:e})]})},e)))]})};var Je=s(6784),Ye=s(12058),Ze=s(27906),Xe=s(19181);let et=null;const tt=()=>{const[e,t]=(0,r.useState)(null),s=(0,r.useCallback)(((e,t,s)=>{const n=new Ze.rV.Connection(e,"confirmed"),i=new Ze.rV.PublicKey(t);return new Ze.zt(n,{publicKey:new Ze.rV.PublicKey(i),signTransaction:s.signTransaction,signAllTransactions:async e=>{const t=[];for(const n of e){const e=await s.signTransaction(n);t.push(e)}return t}},{commitment:"confirmed",skipPreflight:!0})}),[]),n=(0,r.useCallback)((async()=>{const{sentre:{wallet:e,splt:n}}=window;if(!e)return t(et=null);if(!et){const t=await e.getAddress(),i=s(n.nodeUrl,t,e),r=Xe.Qr.init({connection:i.connection,wallet:i.wallet,opts:i.opts});et=Ye.qm.load({provider:r})}t(et)}),[s]);return(0,r.useEffect)((()=>{n()}),[n]),e};var st=s(83868);const nt=e=>{let{label:t="",value:s=""}=e;return(0,F.jsxs)(l.Row,{children:[(0,F.jsx)(l.Col,{flex:"auto",children:(0,F.jsxs)(l.Typography.Text,{type:"secondary",children:[t," "]})}),(0,F.jsx)(l.Col,{children:s})]})},it=()=>{const[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!1),[o,d]=(0,r.useState)(""),{main:{mintSelected:h},setting:{decimal:p},recipients:{recipients:x}}=(0,n.useSelector)((e=>e)),{wallet:{address:j}}=(0,i.useWallet)(),g=(0,n.useDispatch)(),y=z(h)||0,{total:f,quantity:b}=P(),w=tt(),{appRoute:v}=We(),{balance:S}=M(h),k=L(h),T=(0,r.useMemo)((()=>{if(!x.length||!y)return;const e=[];return Object.values(x).forEach((t=>{let[s,n]=t;e.push({address:s,earnings:p?(Number()*10**y).toString():n})})),Ye.P6.parseBalanceMap(e)}),[x,y,p]);return(0,F.jsxs)(l.Card,{bordered:!1,className:"card-lightning",children:[(0,F.jsxs)(l.Row,{gutter:[32,32],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ue,{label:"Confirm transfer"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[24,24],justify:"center",children:[(0,F.jsx)(l.Col,{children:(0,F.jsxs)(l.Space,{direction:"vertical",size:12,align:"center",children:[(0,F.jsx)(l.Typography.Text,{children:"Total transfer"}),(0,F.jsx)(l.Typography.Title,{level:1,children:f}),(0,F.jsx)(l.Tag,{style:{margin:0,borderRadius:4,color:"rgb(66, 230, 235)",background:"rgba(66, 230, 235, 0.1)",border:"unset"},children:(0,F.jsx)(le,{mintAddress:h})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Card,{bordered:!1,className:"card-total",children:(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(nt,{label:"Time",value:Be()(new Date).format("DD MMM, YYYY HH:MM")})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(nt,{label:"Quantity",value:b})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(nt,{label:"Your balance",value:(0,F.jsxs)(l.Typography.Text,{children:[(0,ce.uR)(S).format("0,0.00[0000]")," ",(0,F.jsx)(le,{mintAddress:h})]})})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(nt,{label:"Remaining",value:(0,F.jsxs)(l.Typography.Text,{children:[(0,ce.uR)(k).format("0,0.00[00]")," ",(0,F.jsx)(le,{mintAddress:h})]})})})]})})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[8,8],children:[(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:()=>g(m(u.two)),block:!0,type:"ghost",children:"BACK"})}),(0,F.jsx)(l.Col,{span:12,children:(0,F.jsx)(l.Button,{size:"large",onClick:async()=>{if(!w||!c.account.isAddress(h)||!T)return;const{merkleRoot:e}=T;t(!0);try{const{splt:s,wallet:n}=window.sentre;if(!n)throw Error("Please connect wallet");const i=c.utils.decimalize(f,y).toString(),r=c.account.fromAddress(h),{tx:l,distributor:o,distributorATA:u}=await w.createDistributor({tokenMint:r,root:e,maxNumNodes:new Je.AW(b),maxTotalClaim:new Je.AW(i)}),p=await l.send();await p.wait();const x={distributor:o.toBase58(),distributorATA:u.toBase58()},m=await s.deriveAssociatedAddress(j,h),{txId:S}=await s.transfer(BigInt(i),m,x.distributorATA,n);window.notify({type:"success",description:"Transfer successfully. Click to view details.",onClick:()=>window.open((0,ce.kU)(S))});const k=new st.Z,A=new Ne.Z(j).createInstance("lightning_tunnel"),R=[...await A.getItem("history")||[]],N=((e,t,s)=>{if(!e)return{};const{claims:n}=e,i={};return Object.keys(n).forEach((e=>{const{amount:r,index:a,proof:l}=n[e],c={index:a,proof:l,amount:r.toString(),claimant:e,distributorInfo:t,mintAddress:s};i[e]=c})),i})(T,x,h),I=await k.set(N),B={cid:I,total:f,time:(new Date).toString(),mint:h};R.unshift(B),g(C(B)),A.setItem("history",R);const D=`${window.location.origin}${v}/redeem/${I}`;return d(D),a(!0)}catch(s){window.notify({type:"error",description:s.message})}finally{t(!1)}},type:"primary",loading:e,disabled:k<0,block:!0,children:"TRANSFER"})})]})})]}),(0,F.jsx)(Oe,{visible:s,setVisible:a,redeemLink:o})]})},rt=e=>{let{label:t,description:s,active:n}=e;return(0,F.jsxs)(r.Fragment,{children:[n?(0,F.jsx)(K,{name:"checkbox-sharp",style:{position:"absolute",top:0,right:0,color:"#42E6EB",fontSize:20}}):null,(0,F.jsxs)(l.Row,{gutter:[12,12],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Title,{level:5,children:t})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Typography.Text,{type:"secondary",children:s})})]})]})},at=()=>{const[e,t]=(0,r.useState)(d.manual),[s,a]=(0,r.useState)("Select"),c=(0,n.useDispatch)(),{accounts:o}=(0,i.useAccount)(),h=(e=>{const{tokenProvider:t}=(0,i.useMint)(),[s,n]=(0,r.useState)([]),a=(0,r.useCallback)((async()=>{const s=[];for(const n of e)await t.findByAddress(n)&&s.push(n);return n(s)}),[t,e]);return(0,r.useEffect)((()=>{a()}),[a]),s})((0,r.useMemo)((()=>Object.values(o).map((e=>e.mint))),[o])),p=(0,r.useMemo)((()=>"Select"===s||!e),[s,e]);return(0,F.jsx)(l.Card,{className:"card-lightning",bordered:!1,children:(0,F.jsxs)(l.Row,{gutter:[32,32],align:"middle",children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ue,{label:"Select token type and input method"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Row,{gutter:[24,24],children:[(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(Ge,{activeMintAddress:s,tokens:h,onSelect:e=>{a(e),c(b(e))}})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{size:12,direction:"vertical",style:{width:"100%"},children:[(0,F.jsx)(l.Typography.Text,{children:"Choose transfer info input method"}),(0,F.jsx)(l.Radio.Group,{onChange:e=>t(e.target.value),style:{width:"100%"},className:"select-card",children:(0,F.jsxs)(l.Row,{gutter:[12,12],children:[(0,F.jsx)(l.Col,{xs:24,lg:12,children:(0,F.jsx)(l.Radio.Button,{value:d.manual,children:(0,F.jsx)(rt,{label:"Manual",description:"With a small number of recipients.",active:e===d.manual})})}),(0,F.jsx)(l.Col,{xs:24,lg:12,children:(0,F.jsx)(l.Radio.Button,{value:d.auto,children:(0,F.jsx)(rt,{label:"Automatic",description:"Support bulk import with a CSV file.",active:e===d.auto})})})]})})]})})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Button,{size:"large",onClick:()=>{c(f(e)),c(m(u.two))},block:!0,type:"primary",disabled:p,children:"Continue"})})]})})},lt=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,n.useSelector)((e=>e));return e?t===u.two?e===d.auto?(0,F.jsx)(Ke,{}):(0,F.jsx)($e,{}):(0,F.jsx)(it,{}):(0,F.jsx)(at,{})};var ct=s(82611),ot=s(71256);const dt=s.p+"static/media/redeem.7e0fa96ccc80d536f7730bb34ab5753b.svg";var ut=s(97429).Buffer;const ht=()=>{const[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1),[o,d]=(0,r.useState)(),{wallet:{address:u}}=(0,i.useWallet)(),h=tt(),{pushHistory:p}=We(),x=z((null===o||void 0===o?void 0:o.mintAddress)||"")||0,m=(0,a.useParams)(),j=(0,r.useCallback)((async()=>{if(!m.cid)return;n(!0);const e=new st.Z,t=await e.get(m.cid);for(const s of Object.keys(t))if(s===u)return d(t[s]),n(!1);return window.notify({type:"warning",description:"You are not on the list."}),n(!1)}),[m.cid,u]),g=(0,r.useCallback)((async e=>{if(!h)return;const t=c.account.fromAddress(e);return await Ye.yV.load(h,t)}),[h]),y=(0,r.useMemo)((()=>{const e=[];if(null===o||void 0===o||!o.proof)return e;const{proof:t}=o;return t.forEach((t=>{let{data:s}=t;e.push(ut.from(s))})),e}),[o]),f=(0,r.useCallback)((async()=>{if(!o||!o.distributorInfo)return;t(!0);const{index:e,amount:s,distributorInfo:{distributor:n}}=o,i=await g(n);if(!c.account.isAddress(n)||!i)return window.notify({type:"error",description:"Distributor does not exist"});try{const{isClaimed:s}=await i.getClaimStatus(new Je.AW(e));if(s)return t(!1),window.notify({type:"error",description:"Tokens has been redeemed"})}catch(d){}try{const n=await i.claim({index:new Je.AW(e),amount:new Je.AW(s),proof:y,claimant:new ot.PublicKey(u)}),{signature:r,response:{meta:c}}=await n.confirm();return null!==c&&void 0!==c&&c.err?window.notify({type:"error",description:"Something went wrong"}):(a="Claim",l=r,window.notify({type:"success",description:`${a} successfully. Click to view details.`,onClick:()=>window.open((0,ce.kU)(l),"_blank")}))}catch(d){r=d,window.notify({type:"error",description:r.message})}finally{t(!1)}var r,a,l}),[y,o,g,u]);return(0,r.useEffect)((()=>{j()}),[j]),console.log(1,o),(0,F.jsx)(l.Row,{gutter:[24,24],justify:"center",className:"lightning-container",children:(0,F.jsx)(l.Col,{xs:24,md:16,lg:12,xl:10,children:(0,F.jsx)(l.Card,{style:{minHeight:430},loading:s,className:"card-lightning",bordered:!1,children:(0,F.jsxs)(l.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,F.jsx)(l.Col,{span:24,style:{textAlign:"left"},children:(0,F.jsx)(l.Button,{type:"text",icon:(0,F.jsx)(K,{name:"arrow-back-outline"}),onClick:()=>p(""),style:{margin:-12},children:"Back"})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Image,{src:dt,preview:!1})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,F.jsx)(l.Typography.Title,{level:3,children:"Redemption!"}),(0,F.jsxs)(l.Space,{size:4,children:[(0,F.jsx)(l.Typography.Text,{type:"secondary",children:"Let's take"})," ",(0,F.jsxs)(l.Typography.Title,{level:5,style:{color:"#42E6EB"},children:[c.utils.undecimalize(BigInt((null===o||void 0===o?void 0:o.amount)||0),x)," ",(0,F.jsx)(le,{mintAddress:(null===o||void 0===o?void 0:o.mintAddress)||""})]})]})]})}),(0,F.jsx)(l.Col,{span:24,children:(0,F.jsx)(l.Button,{type:"primary",onClick:f,loading:e,children:"Redeem"})})]})})})})},pt=()=>(0,F.jsx)(l.Row,{gutter:[24,24],justify:"center",className:"lightning-container",children:(0,F.jsx)(l.Col,{xs:24,md:16,lg:12,xl:10,children:(0,F.jsx)(lt,{})})}),xt=()=>{const{appRoute:e}=We(),{setBackground:t}=(0,i.useUI)();return(0,r.useEffect)((()=>{t({light:ct,dark:ct})}),[t]),(0,F.jsxs)(a.Switch,{children:[(0,F.jsx)(a.Route,{exact:!0,path:e,component:pt}),(0,F.jsx)(a.Route,{path:`${e}/redeem/:cid`,component:ht})]})},mt=e=>{let{children:t}=e;return(0,F.jsxs)("div",{className:"background-container",children:[t,Array.apply(null,Array(20)).map(((e,t)=>(0,F.jsx)("div",{className:"circle-container",children:(0,F.jsx)("div",{className:"circle"})},t)))]})};var jt=s(85912);const gt=(0,o.configureStore)({middleware:e=>e(jt.h),devTools:(0,jt.$)("lightning_tunnel"),reducer:{main:S,steps:j,setting:ke,recipients:B,file:ee}}),{manifest:{appId:yt}}=Fe,ft=()=>(0,F.jsx)(i.UIProvider,{appId:yt,antd:{prefixCls:yt},children:(0,F.jsx)(i.MintProvider,{children:(0,F.jsx)(i.PoolProvider,{children:(0,F.jsx)(i.AccountProvider,{children:(0,F.jsx)(i.WalletProvider,{children:(0,F.jsx)(n.Provider,{store:gt,children:(0,F.jsx)(mt,{children:(0,F.jsx)(xt,{})})})})})})})})},85912:(e,t,s)=>{"use strict";s.d(t,{$:()=>n,h:()=>i});const n=e=>!1;BigInt.prototype.toJSON=function(){return this.toString()};const i={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e}}},3007:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s(15454),i=s.n(n),r=s(95418),a=s(83868);class l{constructor(e){if(this.dbName=void 0,this.driver=void 0,this.ipfs=void 0,this.createInstance=e=>i().createInstance({driver:this.driver,name:this.dbName,storeName:e}),this.dropInstance=async e=>{const t=this.createInstance(e);return await t.clear(),await i().dropInstance({name:this.dbName,storeName:e})},this.all=async()=>{let e={};const t=(await this.createInstance("sentre").getItem("appIds")||[]).flat().concat(["sentre"]);for(const s of t){e[s]={};const t=this.createInstance(s);await t.iterate(((t,n)=>{e[s][n]=t}))}return e},this.fetch=async e=>await this.ipfs.get(e),this.backup=async()=>{const e=await this.all();return await this.ipfs.set(e)},this.restore=async e=>{const t=await this.fetch(e);for(const s in t){const e=await this.createInstance(s);for(const n in t[s]){const i=t[s][n];await e.setItem(n,i)}}return t},!r.account.isAddress(e))throw new Error("Invalid address");this.dbName=e,this.driver=[i().WEBSQL,i().LOCALSTORAGE],this.ipfs=new a.Z}}const c=l},83868:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(32642),i=s(45268),r=s(97429).Buffer;class a{constructor(){this._ipfs=async()=>{try{return window.ipfs||(window.ipfs=await(0,n.Ue)()),window.ipfs}catch(e){return await(0,i.sA)(500),await this._ipfs()}},this.get=async e=>{if(!a.isCID(e))throw new Error("Invalid CID");const t=await this._ipfs(),s=await t.cat(e);let n="";for await(const i of s)n+=r.from(i).toString();return JSON.parse(n)},this.set=async e=>{if(!e)throw new Error("Empty data");const t=JSON.stringify(e),s=await this._ipfs(),{path:n}=await s.add(t);return n}}}a.isCID=e=>{try{return!!e&&n.bf.multihash(e)}catch(t){return!1}};const l=a},15190:(e,t,s)=>{"use strict";s.d(t,{Bv:()=>d,OB:()=>c,ef:()=>o});const n="sentre",i=window.localStorage,r=e=>{try{return e?JSON.parse(e):null}catch(t){return null}},a={set:(e,t)=>{let s=r(i.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,i.setItem(n,JSON.stringify(s))},get:e=>{let t=r(i.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{a.set(e,null)}},l=a,c="production",o=(()=>{switch(l.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})(),d=(()=>{switch(o){case"devnet":return 103;case"testnet":return 102;default:return 101}})()},45268:(e,t,s)=>{"use strict";s.d(t,{sA:()=>p,kU:()=>m,uR:()=>j,Xn:()=>x});var n=s(95418),i=s(16200),r=s.n(i),a=s(15190);const l={ttl:3e4},c={limit:{calls:10,time:1e3},cache:l};class o{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class d{static set(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}d.mapCache=new Map;class u{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new h(e);return this.mapInstance.set(t,s),s}static async load(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof e&&(e=JSON.stringify(e));let n=u.getSingleFlight(s);u.mapInstance.set(e,n);const i=new o(e);return n.load(i,t)}}u.mapInstance=new Map;class h{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(c,e)}async load(e,t){const s=d.get(e.key);if(s)return Promise.resolve(s);let n=!1,i=this.mapRequestCalling.get(e.key);return i||(i=e,n=!0,this.mapRequestCalling.set(i.key,i)),new Promise(((e,s)=>{if(!i)return s("Not found request!");i.add(e,s),n&&this.fetch(i,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{d.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}const p=e=>new Promise((t=>setTimeout(t,e))),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.substring(0,t)+s+e.substring(e.length-t,e.length)},m=e=>n.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${a.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${a.ef}`,j=e=>e?r()(e):r()("0")},46899:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/example.5ac7e1383bf101857b35.csv"},82611:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/background-LT.4c9e016f719ffe61dc63.png"},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},88795:()=>{},89408:()=>{},57600:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=659.5fa7b5e7.chunk.js.map