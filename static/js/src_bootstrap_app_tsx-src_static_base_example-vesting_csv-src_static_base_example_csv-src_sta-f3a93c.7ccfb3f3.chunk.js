(globalThis.webpackChunklightning_tunnel=globalThis.webpackChunklightning_tunnel||[]).push([["src_bootstrap_app_tsx-src_static_base_example-vesting_csv-src_static_base_example_csv-src_sta-f3a93c","_18f2-_0b7d-_25ed-_8131-_3fc0-_e4dd-_7bec-_ec71-_df0e-_887c-_c738-_9820-_7d1a-_b254-_ed1b-_d1-147343"],{98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>c,default:()=>d});var n,i,r,l=s(92950);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a.apply(this,arguments)}function o(e,t){let{title:s,titleId:o,...c}=e;return l.createElement("svg",a({width:96,height:96,viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},c),s?l.createElement("title",{id:o},s):null,n||(n=l.createElement("rect",{width:96,height:96,rx:24,fill:"#42E6EB"})),i||(i=l.createElement("path",{d:"M35.528 47.6849L67.0423 15.9004L67.9877 15L52.1855 40.4816L61.1896 39.0409L48.809 54.2128L57.4079 53.9427L29 81L41.3356 61.4161L33.9523 61.7763L44.1719 46.9195L35.528 47.6849Z",fill:"#233333"})),r||(r=l.createElement("path",{opacity:.5,fillRule:"evenodd",clipRule:"evenodd",d:"M48 74C62.3594 74 74 62.3594 74 48C74 40.004 70.3905 32.851 64.7119 28.0816L66.8996 24.7006C73.6723 30.2011 78 38.5951 78 48C78 64.5685 64.5685 78 48 78C44.7357 78 41.5931 77.4786 38.6511 76.5146L42.0603 73.3184C43.968 73.7642 45.9565 74 48 74ZM32.8095 69.1033C26.262 64.382 22 56.6887 22 48C22 33.6406 33.6406 22 48 22C50.4385 22 52.7986 22.3357 55.0366 22.9634L58.2158 19.7842C55.0272 18.6296 51.5871 18 48 18C31.4315 18 18 31.4315 18 48C18 58.0387 22.9307 66.9258 30.5025 72.3715L32.8095 69.1033Z",fill:"#233333"})))}const c=l.forwardRef(o),d=s.p+"static/media/logo.edd6e68b96629106774ae0fdbf3926d7.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return r.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return l.default}});var n=a(s(70854)),i=a(s(27803)),r=a(s(98463)),l=a(s(83272));function a(e){return e&&e.__esModule?e:{default:e}}const o=[n.default,i.default];t.h0=o},6052:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>Rr,__esModule:()=>Tr.X$,logo:()=>Tr.jY,panels:()=>Tr.h0,readme:()=>Tr.ng});var n=s(55754),i=s(70210),r=s(92950),l=s(45055),a=s(32659),o=s(69716),c=s(95418),d=s(97425),u=s(48744),p=s.n(u),h=s(46029),x=s(45263);const m=e=>{let{onBack:t}=e;return(0,x.jsx)(a.Button,{size:"large",type:"primary",block:!0,onClick:t,children:"Home"})};var j=s(32743);const g=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(i.util.explorer(t),"_blank")}),y=e=>window.notify({type:"error",description:e.message}),f=e=>{const t=new Uint8Array([18,32]),s=new Uint8Array(t.length+(null===e||void 0===e?void 0:e.length));s.set(t),s.set(e,t.length);return j.CID.decode(s).toString()},C=async e=>fetch(e).then((function(e){var t;let s=null===(t=e.body)||void 0===t?void 0:t.getReader(),n=new TextDecoder("utf-8");return null===s||void 0===s?void 0:s.read().then((function(e){return n.decode(e.value)}))})),b=async e=>{const t=e.join(",");let s=`https://api.coingecko.com/api/v3/simple/price?ids=${t}&vs_currencies=usd`;const n=await i.DataLoader.load("fetchMulCGK"+t,(()=>fetch(s).then((e=>e.json())))),r={};for(const i in n)r[i]=n[i].usd;return r},w=[void 0],v=e=>{let{key:t,mintAddress:s,size:n=24,icon:l=(0,x.jsx)(o.Z,{name:"diamond-outline"}),reversed:d=!1,...u}=e;const[p,h]=(0,r.useState)(w),{tokenProvider:m}=(0,i.useMint)(),{pools:j}=(0,i.usePool)(),g=(0,r.useCallback)((async e=>{const t=await m.findByAddress(e);if(null!==t&&void 0!==t&&t.logoURI)return t.logoURI}),[m]),y=(0,r.useCallback)((async()=>{if(!c.account.isAddress(s))return h(w);const e=Object.values(j||{}).find((e=>{let{mint_lpt:t}=e;return t===s}));if(e){const{mint_a:t,mint_b:s}=e,n=await Promise.all([t,s].map(g));return d&&n.reverse(),h(n)}const t=await g(s);return h([t])}),[s,d,g,j]);return(0,r.useEffect)((()=>{y()}),[y]),1===p.length?(0,x.jsx)(a.Avatar,{src:p[0],size:n,style:{backgroundColor:"#2D3355",border:"none"},...u,children:l}):(0,x.jsx)(a.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...u,children:p.map(((e,t)=>(0,x.jsx)(a.Avatar,{src:e,size:n,style:{backgroundColor:"#2D3355",border:"none"},children:l},t)))})},S="Unknown Token",k=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[l,a]=(0,r.useState)(S),{tokenProvider:o}=(0,i.useMint)(),{pools:d}=(0,i.usePool)(),u=(0,r.useCallback)((async e=>{const t=await o.findByAddress(e);return null!==t&&void 0!==t&&t.name?t.name:S}),[o]),p=(0,r.useCallback)((async()=>{if(!c.account.isAddress(t))return a(S);const e=Object.values(d||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:i}=e,r=await Promise.all([t,i].map(u));return n&&r.reverse(),a(`${r.join(s)} LP`)}const i=await u(t);return a(i)}),[t,n,u,d,s]);return(0,r.useEffect)((()=>{p()}),[p]),(0,x.jsx)("span",{children:l})},T="TOKN",A=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[l,a]=(0,r.useState)(T),{tokenProvider:o}=(0,i.useMint)(),{pools:d}=(0,i.usePool)(),u=(0,r.useCallback)((async e=>{const t=await o.findByAddress(e);return null!==t&&void 0!==t&&t.symbol?t.symbol:e.substring(0,4)}),[o]),p=(0,r.useCallback)((async()=>{if(!c.account.isAddress(t))return a(T);const e=Object.values(d||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:i}=e,r=await Promise.all([t,i].map(u));return n&&r.reverse(),a(r.join(s))}const i=await u(t);return a(i)}),[t,n,u,d,s]);return(0,r.useEffect)((()=>{p()}),[p]),(0,x.jsx)("span",{children:l+" "})};var R=s(58421);const N=e=>{let{mintAddress:t,onClick:s=(()=>{}),active:n=!1}=e;return(0,x.jsx)(a.Card,{bodyStyle:{padding:8,cursor:"pointer"},style:{borderRadius:8,backgroundColor:i.util.randomColor(t,.2)},className:"mint-tag",bordered:Boolean(n),onClick:()=>s(t),children:(0,x.jsxs)(a.Space,{size:8,style:{width:"100%",justifyContent:"center"},children:[(0,x.jsx)(v,{mintAddress:t}),(0,x.jsx)(a.Typography.Text,{ellipsis:!0,style:{color:i.util.randomColor(t)},children:(0,x.jsx)(A,{mintAddress:t})}),n&&(0,x.jsx)(o.Z,{name:"checkmark-outline"})]})})};var M=s(7726),D=s(95414);const B="11111111111111111111111111111111",I=e=>{let{onClick:t=(()=>{})}=e;const[s,n]=(0,r.useState)(0),l=z(),{wallet:{lamports:o}}=(0,i.useWallet)(),d=c.utils.undecimalize(o,9),u=e=>(0,D.numeric)(e).format("0,0.[000]");return(0,r.useEffect)((()=>{(async()=>{const{price:e}=await i.util.fetchCGK("solana");n(e)})()}),[]),(0,x.jsx)(a.Card,{bodyStyle:{padding:8},style:{boxShadow:"unset",cursor:"pointer",background:"linear-gradient(269.1deg, rgba(0, 255, 163, 0.1) 0%, rgba(220, 31, 255, 0.1) 100%)",borderRadius:8},bordered:!1,onClick:()=>t(B),children:(0,x.jsxs)(a.Row,{gutter:[16,16],align:"middle",children:[(0,x.jsx)(a.Col,{children:(0,x.jsx)(v,{mintAddress:B,size:36})}),(0,x.jsx)(a.Col,{children:(0,x.jsxs)(a.Space,{direction:"vertical",size:0,children:[(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Typography.Text,{children:(0,x.jsx)(A,{mintAddress:B})}),(null===l||void 0===l?void 0:l.verify(B))&&(0,x.jsx)(U,{})]}),(0,x.jsxs)(a.Typography.Text,{type:"secondary",className:"caption",children:[(0,x.jsx)(k,{mintAddress:B}),"Native"]})]})}),(0,x.jsx)(a.Col,{flex:"auto",style:{textAlign:"right"},children:(0,x.jsxs)(a.Space,{children:[(0,x.jsxs)(a.Space,{direction:"vertical",children:[(0,x.jsxs)(a.Space,{size:4,children:[(0,x.jsx)(a.Typography.Text,{style:{color:" #03e1ff"},children:"\u25ce"}),(0,x.jsx)(a.Typography.Text,{children:u(d)})]}),(0,x.jsxs)(a.Typography.Text,{type:"secondary",className:"caption",children:[u(s*Number(d))," $"]})]}),(0,x.jsx)(Z,{address:B})]})})]})})},E={devnet:"https://api.jup.ag/api/tokens/devnet",testnet:"https://api.jup.ag/api/markets/devnet",mainnet:"https://cache.jup.ag/tokens"},O=async()=>{const e=await fetch(E[i.net]).then((e=>e.json())),t=new Map;t.set(B,!0);for(const s of e)t.set(s.address,!0);return{verify:e=>t.has(e)}},z=()=>{const{data:e}=(0,M.Z)("fetchJptTokens",O);return e},U=()=>(0,x.jsx)(a.Tooltip,{title:"Safe to Go",children:(0,x.jsx)(o.Z,{name:"checkmark-circle",style:{color:"#18A0FB",backgroundColor:"#fafafa",borderRadius:6,fontSize:12}})}),Z=e=>{let{address:t}=e;return(0,x.jsx)(a.Button,{type:"text",icon:(0,x.jsx)(o.Z,{name:"open-outline"}),onClick:()=>window.open(i.util.explorer(t))})},F=e=>{let{mintAddress:t,onClick:s=(()=>{})}=e;const n=z();return(0,x.jsx)(a.Card,{bodyStyle:{padding:8},style:{boxShadow:"unset",cursor:"pointer"},bordered:!1,onClick:()=>s(t),children:(0,x.jsxs)(a.Row,{gutter:[16,16],align:"middle",children:[(0,x.jsx)(a.Col,{children:(0,x.jsx)(v,{mintAddress:t,size:36})}),(0,x.jsx)(a.Col,{children:(0,x.jsxs)(a.Space,{direction:"vertical",size:0,children:[(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Typography.Text,{children:(0,x.jsx)(A,{mintAddress:t})}),(null===n||void 0===n?void 0:n.verify(t))&&(0,x.jsx)(U,{})]}),(0,x.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:(0,x.jsx)(k,{mintAddress:t})})]})}),(0,x.jsx)(a.Col,{flex:"auto",style:{textAlign:"right"},children:(0,x.jsx)(Z,{address:t})})]})})},L=e=>{let{callback:t}=e;return(0,r.useEffect)((()=>{t()}),[t]),(0,x.jsx)(r.Fragment,{})},Y=e=>(0,x.jsx)(R.ZP,{overflow:!0,children:(0,x.jsx)(L,{...e})}),H=e=>{const[t,s]=(0,r.useState)([]),{accounts:n}=(0,i.useAccount)(),l=(0,r.useMemo)((()=>{const e=new Map;for(const t of Object.values(n))e.set(t.mint,Number(t.amount.toString()));return e}),[n]),a=(0,r.useCallback)((async e=>{if(!l.size)return s([]);const t=e.sort(((e,t)=>{let s=l.get(e)||-1;return(l.get(t)||-1)-s}));return s(t)}),[l]);return(0,r.useEffect)((()=>{a(e)}),[e,a]),{sortedMints:t,sortMints:a}},_=()=>{const[e,t]=(0,r.useState)([]),{accounts:s}=(0,i.useAccount)(),n=(0,r.useCallback)((async()=>{const e=Object.values(s).map((e=>e.mint));return t(e)}),[s]);return(0,r.useEffect)((()=>{n()}),[n]),e},P=`${i.net}:selected_mints`;let K;const W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[t,s]=(0,r.useState)(!1),[n,l]=(0,r.useState)([]),{tokenProvider:a}=(0,i.useMint)(),o=z(),c=_(),{sortedMints:d}=H(c),u=(0,r.useCallback)((async()=>{let e=new Set;for(const s of d){await a.findByAddress(s)&&e.add(s)}const t=await a.all();for(const s of t)e.add(s.address);return Array.from(e)}),[d,a]),p=(0,r.useCallback)((async()=>{s(!0),K&&clearTimeout(K);K=setTimeout((async()=>{try{if(!e){const e=await u();return l(e)}const t=await a.find(e,0),n=[],i=[];for(const e of t){(null===o||void 0===o?void 0:o.verify(e.address))?n.push(e.address):i.push(e.address)}let r=n.concat(i);return r.length||(r=c.filter((t=>t===e))),l(r)}catch(t){}finally{s(!1)}}),e?500:0)}),[u,o,e,c,a]);return(0,r.useEffect)((()=>{p()}),[p]),{searchedMints:n,loading:t}};let $;const V=e=>{let{value:t="",onChange:s=(()=>{}),visible:n,nativeSol:l=!1}=e;const[c,d]=(0,r.useState)(""),[u,p]=(0,r.useState)(30),{recommendedMints:h,addRecommendMint:m}=(()=>{const[e,t]=(0,r.useState)([]),s=_(),{sortedMints:n}=H(s),l=(0,r.useCallback)((async()=>{let e=i.storage.get(P)||[];for(const t of n){if(e.length>=8)break;e.includes(t)||e.push(t)}return e=e.filter((e=>e!==B)),t(e.slice(0,8))}),[n]),a=(0,r.useCallback)((async e=>{if(e===B)return;let s=i.storage.get(P)||[];s=s.filter((t=>t!==e));const n=[e,...s].slice(0,8);return i.storage.set(P,n),t(n)}),[]);return(0,r.useEffect)((()=>{l()}),[l]),{recommendedMints:e,addRecommendMint:a}})(),{searchedMints:j,loading:g}=W(c),y=(0,r.useCallback)((e=>{s(e),m(e)}),[s,m]);(0,r.useEffect)((()=>{p(30);const e=document.getElementById("sentre-token-selection-list");e&&(e.scrollTop=0)}),[c,n]);const f=!!c.length;return(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Input,{placeholder:"Search token symbol, name, address, ...",suffix:(0,x.jsx)(a.Button,{type:"text",style:{marginRight:-7},icon:(0,x.jsx)(o.Z,{name:c?"close-outline":"search-outline"}),onClick:c?()=>d(""):()=>{},loading:g}),value:c,onChange:e=>d(e.target.value||"")})}),!f&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Row,{gutter:[8,8],children:h.map((e=>(0,x.jsx)(a.Col,{flex:1,children:(0,x.jsx)(N,{mintAddress:e,onClick:y,active:e===t})},e)))})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Spin,{spinning:g,tip:f?"Searching...":"Loading...",children:(0,x.jsxs)(a.Row,{gutter:[8,8],style:{maxHeight:360,paddingRight:4,minHeight:50},className:"scrollbar",id:"sentre-token-selection-list",justify:"center",children:[l&&!f&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(I,{onClick:y})}),j.length||g?j.slice(0,u).map(((e,t)=>(0,x.jsxs)(a.Col,{span:24,children:[(0,x.jsx)(R.ZP,{height:60,overflow:!0,throttle:300,children:(0,x.jsx)(F,{mintAddress:e,onClick:y})}),t===u-5&&(0,x.jsx)(Y,{callback:()=>{$&&clearTimeout($),$=setTimeout((()=>p(u+30)),250)}})]},e+t))):(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Empty,{style:{padding:40}})})]})})})]})};const J={appId:"lightning_tunnel",url:"https://descartesnetwork.github.io/lightning-tunnel/index.js"},q={development:{...J},staging:{...J},production:{...J}};var G=s(42224);const Q=class{constructor(){this._wallet=window.sentre.wallet,this._publicKey=new G.PublicKey("GuestAccount11111111111111111111111111111111"),this._init=async()=>{const e=await this._wallet.getAddress();this._publicKey=new G.PublicKey(e)},this.signTransaction=async e=>this._wallet.signTransaction(e),this.signAllTransactions=async e=>{let t=[];for(const s of e){const e=await this.signTransaction(s);t.push(e)}return t},this._init()}get publicKey(){return console.warn("This is an async getter for interface consistency. Please do not fully rely on this function."),this._publicKey}},X={devnet:{node:i.rpc,utility:new d.Utility(new Q,i.rpc,"AKTU61s8NJ8zJATQiceREdhXbedRnKrd1BVgnCuxmD2F"),fee:1e6,taxman:"8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"},testnet:{node:i.rpc,utility:new d.Utility(new Q,i.rpc),fee:1e6,taxman:"8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"},mainnet:{node:i.rpc,utility:new d.Utility(new Q,i.rpc),fee:1e6,taxman:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}},ee={manifest:q[i.env],sol:X[i.net]},{manifest:{appId:te}}=ee,se=()=>{const e=(0,l.useLocation)(),t=(0,l.useHistory)(),s=(0,r.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),n=(0,r.useCallback)((e=>s.get(e)),[s]),i=(0,r.useCallback)((e=>{const t=new URLSearchParams;for(const s in e)t.set(s,e[s]);return t.toString()}),[]),a=(0,r.useMemo)((()=>`/app/${te}`),[]);return{getQuery:n,generateQuery:i,pushHistory:(0,r.useCallback)((e=>t.push(`${a}${e}`)),[a,t]),appRoute:a}};var ne=s(76026);const ie=class{constructor(){this.provider=void 0,this.set=async e=>{const t=new File([JSON.stringify(e)],"file",{type:"application/json"});return await this.provider.put([t])},this._wrapGet=async e=>new Promise((async(t,s)=>{setTimeout((()=>{t(null)}),3e4);const n=await this.provider.get(e);t(n)})),this.get=async e=>i.DataLoader.load(`ipfs^${e}`,(async()=>{const t=await this._wrapGet(e),s=(await(null===t||void 0===t?void 0:t.files())||[])[0],n=new FileReader;return new Promise(((e,t)=>{try{if(!s)throw new Error("Cannot read empty file");n.onload=()=>{var t;const s=null===(t=n.result)||void 0===t?void 0:t.toString();if(!s)throw new Error("Cannot read empty file");return e(JSON.parse(s))},n.readAsText(s)}catch(i){return t(i.message)}}))})),this.provider=new ne.xk({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDg4MzdCZUI2ODM5MTcwODZjQUI3OTU0MzI3ZTgwOWU1ZTlCZTc2NTEiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTU0NTU5NzI5MjAsIm5hbWUiOiJTZW50cmUifQ.Jf7oQOKMrBxp5morvs7DR_As4EU9Y5WybyuvY1teFN8",endpoint:new URL("https://api.web3.storage")})}};const re=s.p+"static/media/redeem.7e0fa96ccc80d536f7730bb34ab5753b.svg";const le=s.p+"static/media/redeem_success.8bde41be38896c8e01a5d6ec87a1e40e.svg";const ae=s.p+"static/media/not_member.27313d62e5aba95e40f44df8f5f39d28.svg";var oe=s(97429).Buffer;const{sol:{utility:ce,taxman:de,fee:ue}}=ee,pe=()=>{const[e,t]=(0,r.useState)(!1),[s,p]=(0,r.useState)(!1),[j,C]=(0,r.useState)(),[b,w]=(0,r.useState)(0),[v,S]=(0,r.useState)(),[k,T]=(0,r.useState)(!0),[R,N]=(0,r.useState)(!0),[M,D]=(0,r.useState)(""),B=(0,n.useSelector)((e=>e.receipts)),{getDecimals:I}=(0,i.useMint)(),{wallet:{address:E}}=(0,i.useWallet)(),{pushHistory:O}=se(),z=(0,l.useParams)().distributorAddress,U={fee:new u.BN(ue),feeCollectorAddress:de},Z=(0,r.useCallback)((async()=>{if(!z)return;const e=new ie;p(!0);try{const t=await ce.program.account.distributor.fetch(z);S(t);const s=await f(t.metadata),n=await e.get(s),i=d.MerkleDistributor.fromBuffer(oe.from(n));return C(i)}catch(t){y(t)}finally{p(!1)}}),[z]),F=(0,r.useMemo)((()=>{if(!j)return;const e=j.receipients;for(const t of e)if(E===t.authority.toBase58())return t;return N(!1),T(!1)}),[j,E]),L=(0,r.useCallback)((async()=>{if(v&&F&&j)try{const{salt:e}=F,t=await ce.deriveReceiptAddress(e,z),s=B[t];if(!s)return;const{amount:n}=s;return D(h.utilsBN.undecimalize(n,b)),T(!1)}catch(e){}}),[b,v,z,j,B,F]),Y=(0,r.useCallback)((async()=>{if(!v)return;const e=v.mint.toBase58();try{const t=await I(e);return w(t)}catch(t){return w(0)}}),[v,I]);(0,r.useEffect)((()=>{Y()}),[Y]),(0,r.useEffect)((()=>{Z()}),[Z]),(0,r.useEffect)((()=>{L()}),[L]);const H=(0,r.useMemo)((()=>R?M?le:re:ae),[M,R]);return(0,x.jsx)(a.Row,{gutter:[24,24],justify:"center",className:"lightning-container",children:(0,x.jsx)(a.Col,{xs:24,md:16,lg:14,children:(0,x.jsx)(a.Card,{style:{minHeight:430},loading:s,className:"card-lightning",bordered:!1,children:(0,x.jsxs)(a.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,x.jsx)(a.Col,{span:24,style:{textAlign:"left"},children:(0,x.jsx)(a.Button,{type:"text",icon:(0,x.jsx)(o.Z,{name:"arrow-back-outline"}),onClick:()=>O(""),style:{margin:-12},children:"Back"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Image,{src:H,preview:!1})}),(0,x.jsx)(a.Col,{span:24,children:R?(0,x.jsxs)(a.Space,{direction:"vertical",size:4,children:[(0,x.jsxs)(a.Typography.Title,{level:3,children:["Redemption ",M&&"successfully","!"]}),(0,x.jsxs)(a.Space,{size:4,children:[(0,x.jsx)(a.Typography.Text,{type:"secondary",children:M?"You took":"Let's take"}),(0,x.jsxs)(a.Typography.Title,{level:5,style:{color:"#42E6EB"},children:[c.utils.undecimalize(BigInt((null===F||void 0===F?void 0:F.amount.toString())||0),b)," ",(0,x.jsx)(A,{mintAddress:(null===v||void 0===v?void 0:v.mint.toBase58())||""})]})]})]}):(0,x.jsx)(a.Typography.Title,{level:3,children:"You are not in the list!"})}),(0,x.jsx)(a.Col,{span:24,children:k?(0,x.jsx)(a.Button,{type:"primary",onClick:async()=>{if(!F||!j)return;const e=j.deriveProof(F);if(j.verifyProof(e,F))try{t(!0);const{txId:s}=await ce.claim({distributorAddress:z,proof:e,data:F,feeOptions:U});return g("Redeem",s),T(!1)}catch(s){y(s)}finally{t(!1)}},loading:e,children:"Redeem"}):(0,x.jsx)(m,{onBack:()=>O("")})})]})})})})};var he=s(19289);let xe,me,je,ge,ye,fe;!function(e){e[e.auto=1]="auto",e[e.manual=2]="manual"}(xe||(xe={})),function(e){e[e.SelectMethod=1]="SelectMethod",e[e.AddRecipient=2]="AddRecipient",e[e.ConfirmTransfer=3]="ConfirmTransfer"}(me||(me={})),function(e){e.activeKey="collapse-upload-csv"}(je||(je={})),function(e){e.waiting="Waiting",e.ready="Ready",e.claimed="Claimed",e.expired="Expired",e.loading="Loading"}(ge||(ge={})),function(e){e.Vesting="vesting",e.Dashboard="dashboard",e.Airdrop="airdrop"}(ye||(ye={})),function(e){e.valid="valid",e.invalid="invalid"}(fe||(fe={}));const Ce=864e5,be="MMM DD, YYYY HH:mm",we="all";let ve;!function(e){e.Vesting="vesting",e.Airdrop="airdrop"}(ve||(ve={}));const Se="main",ke={methodSelected:xe.manual,mintSelected:"",visible:!1,isTyping:!1,typeDistribute:ve.Airdrop},Te=(0,he.createAsyncThunk)("main/onSelectMethod",(async e=>({methodSelected:e}))),Ae=(0,he.createAsyncThunk)("main/onSelectedMint",(async e=>({mintSelected:e}))),Re=(0,he.createAsyncThunk)("main/setVisible",(async e=>({visible:e}))),Ne=(0,he.createAsyncThunk)("main/setIsTyping",(async e=>({isTyping:e}))),Me=(0,he.createAsyncThunk)("main/setTypeDistribute",(async e=>({typeDistribute:e}))),De=(0,he.createSlice)({name:Se,initialState:ke,reducers:{},extraReducers:e=>{e.addCase(Te.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ae.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Re.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ne.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Me.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Be="steps",Ie={step:me.SelectMethod},Ee=(0,he.createAsyncThunk)("steps/onSelectStep",(async e=>({step:e}))),Oe=(0,he.createSlice)({name:Be,initialState:Ie,reducers:{},extraReducers:e=>{e.addCase(Ee.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;let ze;!function(e){e[e.three=3]="three",e[e.six=6]="six",e[e.twelve=12]="twelve",e[e.eighteen=18]="eighteen",e[e.twentyFour=24]="twentyFour"}(ze||(ze={}));const Ue=[{label:"3 months",value:ze.three},{label:"6 months",value:ze.six},{label:"12 months",value:ze.twelve},{label:"18 months",value:ze.eighteen},{label:"24 months",value:ze.twentyFour}],Ze=e=>{let{distributeIn:t,onChange:s,walletAddress:i}=e;const l=(0,n.useSelector)((e=>e.recipients.expirationTime)),o=(0,n.useSelector)((e=>e.recipients.globalUnlockTime)),c=(0,n.useSelector)((e=>e.recipients.recipientInfos)),d=(0,r.useMemo)((()=>{const e=i?c[i][0].unlockTime:o;return l<e+30*t*Ce&&l?"Must be less than the expiration time.":""}),[t,l,o,c,i]);return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",children:"Distribute in"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Select,{className:"select-vesting-data",value:t,onChange:s,placement:"bottomRight",children:Ue.map((e=>{let{label:t,value:s}=e;return(0,x.jsx)(a.Select.Option,{value:s,children:t},s)}))})}),d&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:d})})]})};let Fe;!function(e){e[e.seven=7]="seven",e[e.fourteen=14]="fourteen",e[e.thirty=30]="thirty"}(Fe||(Fe={}));const Le=[{label:"7 days",value:Fe.seven},{label:"14 days",value:Fe.fourteen},{label:"30 days",value:Fe.thirty}],Ye=e=>{let{frequency:t,onChange:s}=e;return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",children:"Distribution frequency"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Select,{className:"select-vesting-data",value:t,onChange:s,placement:"bottomRight",children:Le.map((e=>{let{label:t,value:s}=e;return(0,x.jsx)(a.Select.Option,{value:s,children:t},s)}))})})]})},He="recipients",_e={recipientInfos:{},expirationTime:0,globalUnlockTime:0,globalConfigs:{frequency:Fe.seven,distributeIn:ze.three}},Pe=(0,he.createAsyncThunk)("recipients/setExpiration",(async e=>({expirationTime:e}))),Ke=(0,he.createAsyncThunk)("recipients/setGlobalUnlockTime",(async e=>({globalUnlockTime:e}))),We=(0,he.createAsyncThunk)("recipients/addRecipients",(async e=>{let{recipientInfos:t}=e;return{recipientInfos:t}})),$e=(0,he.createAsyncThunk)("recipients/setGlobalConfigs",(async(e,t)=>{let{configs:s}=e,{getState:n}=t;const{recipients:{globalConfigs:i}}=n();return{globalConfigs:{...i,...s}}})),Ve=(0,he.createAsyncThunk)("recipients/setRecipient",(async(e,t)=>{let{walletAddress:s,nextRecipients:n}=e,{getState:i}=t;const{recipients:{recipientInfos:r}}=i(),l={...r};return l[s]=n,{recipientInfos:l}})),Je=(0,he.createAsyncThunk)("recipients/removeRecipient",(async e=>e)),qe=(0,he.createAsyncThunk)("recipients/editRecipient",(async(e,t)=>{let{walletAddress:s,configs:n,unlockTime:i}=e,{getState:r}=t;const{recipients:l}=r(),{distributeIn:a,frequency:o}=n;let c={...l.recipientInfos};const d=c[s],u=[];let p=0;for(const{amount:m}of d)p+=Number(m);const h=Math.floor(30*a/o),x=Number(p)/h;for(let m=0;m<h;m++){let e=0,t=x;if(0===m&&(e=i),0!==m&&(e=o*Ce+u[m-1].unlockTime),m===h-1){let e=0;for(const{amount:t}of u)e+=Number(t);t=Number(p)-e}const r={address:s,amount:t.toString(),unlockTime:e,configs:n};u[m]=r}return c[s]=u,{recipientInfos:c}})),Ge=(0,he.createAsyncThunk)("recipients/removeRecipients",(async()=>({recipientInfos:{}}))),Qe=(0,he.createAsyncThunk)("recipients/addAmountAndTime",(async(e,t)=>{let{walletAddress:s,nextRecipientInfos:n}=e,{getState:i}=t;const{recipients:{recipientInfos:r}}=i(),l={...r};return l[s]=n,{recipientInfos:l}})),Xe=(0,he.createSlice)({name:He,initialState:_e,reducers:{},extraReducers:e=>{e.addCase(Ve.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ge.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Pe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ke.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase($e.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Je.fulfilled,((e,t)=>{let{payload:s}=t;delete e.recipientInfos[s]})).addCase(qe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(We.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Qe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var et=s(98463);const tt=[{label:"Dashboard",key:ye.Dashboard,icon:(0,x.jsx)(o.Z,{name:"grid-outline",style:{fontSize:24}})},{label:"Airdrop",key:ye.Airdrop,icon:(0,x.jsx)(o.Z,{name:"cloud-download-outline",style:{fontSize:24}})},{label:"Vesting",key:ye.Vesting,icon:(0,x.jsx)(o.Z,{name:"receipt-outline",style:{fontSize:24}})}],st=()=>{const[e,t]=(0,r.useState)(ye.Dashboard),{pathname:s}=(0,l.useLocation)(),{appRoute:i,pushHistory:c}=se(),d=(0,n.useDispatch)(),{Content:u,Footer:p}=a.Layout,h=(0,r.useCallback)((()=>{const e=s.replace(`${i}/`,""),n=e.indexOf("/");return t(-1===n?e:e.slice(0,n))}),[i,s]),m=(0,r.useCallback)((()=>{if(e!==ye.Dashboard)return d(Me(e))}),[d,e]);return(0,r.useEffect)((()=>{h()}),[h]),(0,r.useEffect)((()=>{m()}),[m]),(0,x.jsxs)(a.Layout,{className:"sidebar-layout",children:[(0,x.jsx)(u,{children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{span:24,style:{padding:"24px 16px"},children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Avatar,{size:24,src:et.default,shape:"square"}),(0,x.jsx)(a.Typography.Title,{level:5,children:"Lightning tunnel"})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Menu,{selectedKeys:[e],onClick:async e=>(await d(Ee(me.SelectMethod)),await d(Te(xe.manual)),await d(Ge()),await d(Ke(0)),await d(Pe(0)),c(`/${e.key}`)),className:"sidebar-content",items:tt})})]})}),(0,x.jsx)(p,{className:"sidebar_footer",children:(0,x.jsxs)(a.Space,{size:12,style:{cursor:"pointer"},onClick:()=>window.open("https://academy.sentre.io/#/blogs/123246296205?category=dev","_blank"),children:[(0,x.jsx)(o.Z,{style:{fontSize:24},name:"information-circle-outline"}),(0,x.jsx)(a.Typography.Title,{level:5,children:"Guidelines"})]})})]})},nt=e=>{let{label:t,icon:s,value:n,unit:r="$",loading:l=!1,cardStyles:o={}}=e;return(0,x.jsx)(a.Card,{bordered:!1,className:"card-lightning",bodyStyle:o,loading:l,style:{height:"100%"},children:(0,x.jsxs)(a.Row,{align:"middle",children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{direction:"vertical",children:[(0,x.jsx)(a.Typography.Text,{type:"secondary",children:t}),(0,x.jsxs)(a.Typography.Title,{level:4,children:[r,i.util.numeric(n).format("0,0.[000]")]})]})}),(0,x.jsx)(a.Col,{children:s})]})})};var it=s(36645);const rt=()=>{const{tokenProvider:e,getDecimals:t}=(0,i.useMint)();return{getTotalBalance:(0,r.useCallback)((async s=>{const n=[],i=[];for(const{mint:t,amount:o}of s){var r;const s=new(p())(o.toString()),l=await e.findByAddress(t),a=null===l||void 0===l||null===(r=l.extensions)||void 0===r?void 0:r.coingeckoId;a&&!s.isZero()&&(i.push(a),n.push({mint:t,amount:s,ticket:a}))}const l=await b(i);let a=0;for(const{mint:e,amount:o,ticket:c}of n){const s=await t(e);a+=Number(h.utilsBN.undecimalize(o,s))*(l[c]||0)}return a}),[t,e])}},lt=()=>{const[e,t]=(0,r.useState)(0),[s,n]=(0,r.useState)(!0),{accounts:l}=(0,i.useAccount)(),{getTotalBalance:a}=rt(),o=(0,r.useCallback)((async()=>{try{n(!0);const e=await a(Object.values(l));return t(e)}catch(e){}finally{n(!1)}}),[l,a]);return(0,r.useEffect)((()=>{o()}),[o]),{loading:s,totalUSD:e}};var at,ot,ct,dt,ut;function pt(){return pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},pt.apply(this,arguments)}function ht(e,t){let{title:s,titleId:n,...i}=e;return r.createElement("svg",pt({width:32,height:32,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,at||(at=r.createElement("path",{d:"M17.173 20.7446H15.0745C13.5898 20.7446 12.373 19.4944 12.373 17.9539C12.373 17.4963 12.7526 17.1167 13.2103 17.1167C13.6679 17.1167 14.0475 17.4963 14.0475 17.9539C14.0475 18.5679 14.5052 19.0702 15.0745 19.0702H17.173C17.6084 19.0702 17.9544 18.6795 17.9544 18.1995C17.9544 17.5967 17.787 17.5074 17.4075 17.3735L14.0475 16.2014C13.333 15.9558 12.373 15.4312 12.373 13.7902C12.373 12.3949 13.4782 11.2451 14.8289 11.2451H16.9275C18.4121 11.2451 19.6289 12.4953 19.6289 14.0358C19.6289 14.4935 19.2493 14.873 18.7917 14.873C18.334 14.873 17.9544 14.4935 17.9544 14.0358C17.9544 13.4219 17.4968 12.9195 16.9275 12.9195H14.8289C14.3935 12.9195 14.0475 13.3102 14.0475 13.7902C14.0475 14.393 14.2149 14.4823 14.5944 14.6163L17.9544 15.7884C18.6689 16.0339 19.6289 16.5586 19.6289 18.1995C19.6289 19.606 18.5237 20.7446 17.173 20.7446Z",stroke:"currentColor"})),ot||(ot=r.createElement("path",{d:"M15.9993 21.8606C15.5416 21.8606 15.1621 21.481 15.1621 21.0234V10.9769C15.1621 10.5192 15.5416 10.1396 15.9993 10.1396C16.457 10.1396 16.8365 10.5192 16.8365 10.9769V21.0234C16.8365 21.481 16.457 21.8606 15.9993 21.8606Z",stroke:"currentColor"})),ct||(ct=r.createElement("path",{d:"M16 28C9.38047 28 4 22.6195 4 16C4 9.38047 9.38047 4 16 4C16.4577 4 16.8372 4.37953 16.8372 4.83721C16.8372 5.29488 16.4577 5.67442 16 5.67442C10.307 5.67442 5.67442 10.307 5.67442 16C5.67442 21.693 10.307 26.3256 16 26.3256C21.693 26.3256 26.3256 21.693 26.3256 16C26.3256 15.5423 26.7051 15.1628 27.1628 15.1628C27.6205 15.1628 28 15.5423 28 16C28 22.6195 22.6195 28 16 28Z",stroke:"currentColor"})),dt||(dt=r.createElement("path",{d:"M26.0465 11.2557H21.5813C21.1237 11.2557 20.7441 10.8762 20.7441 10.4185V5.95342C20.7441 5.49575 21.1237 5.11621 21.5813 5.11621C22.039 5.11621 22.4186 5.49575 22.4186 5.95342V9.58133H26.0465C26.5041 9.58133 26.8837 9.96086 26.8837 10.4185C26.8837 10.8762 26.5041 11.2557 26.0465 11.2557Z",stroke:"currentColor"})),ut||(ut=r.createElement("path",{d:"M21.5805 11.256C21.3684 11.256 21.1563 11.1778 20.9889 11.0104C20.6652 10.6866 20.6652 10.1508 20.9889 9.82712L26.5703 4.24572C26.894 3.922 27.4298 3.922 27.7535 4.24572C28.0773 4.56944 28.0773 5.10525 27.7535 5.42897L22.1721 11.0104C22.0047 11.1778 21.7926 11.256 21.5805 11.256Z",stroke:"currentColor"})))}const xt=r.forwardRef(ht);s.p;var mt,jt,gt,yt,ft;function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Ct.apply(this,arguments)}function bt(e,t){let{title:s,titleId:n,...i}=e;return r.createElement("svg",Ct({width:32,height:32,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,mt||(mt=r.createElement("path",{d:"M17.173 20.7446H15.0745C13.5898 20.7446 12.373 19.4944 12.373 17.9539C12.373 17.4963 12.7526 17.1167 13.2103 17.1167C13.6679 17.1167 14.0475 17.4963 14.0475 17.9539C14.0475 18.5679 14.5052 19.0702 15.0745 19.0702H17.173C17.6084 19.0702 17.9544 18.6795 17.9544 18.1995C17.9544 17.5967 17.787 17.5074 17.4075 17.3735L14.0475 16.2014C13.333 15.9446 12.373 15.4312 12.373 13.7902C12.373 12.3949 13.4782 11.2451 14.8289 11.2451H16.9275C18.4121 11.2451 19.6289 12.4953 19.6289 14.0358C19.6289 14.4935 19.2493 14.873 18.7917 14.873C18.334 14.873 17.9544 14.4935 17.9544 14.0358C17.9544 13.4219 17.4968 12.9195 16.9275 12.9195H14.8289C14.3935 12.9195 14.0475 13.3102 14.0475 13.7902C14.0475 14.393 14.2149 14.4823 14.5944 14.6163L17.9544 15.7884C18.6689 16.0451 19.6289 16.5586 19.6289 18.1995C19.6289 19.606 18.5237 20.7446 17.173 20.7446Z",stroke:"currentColor"})),jt||(jt=r.createElement("path",{d:"M15.9993 21.8606C15.5416 21.8606 15.1621 21.481 15.1621 21.0234V10.9769C15.1621 10.5192 15.5416 10.1396 15.9993 10.1396C16.457 10.1396 16.8365 10.5192 16.8365 10.9769V21.0234C16.8365 21.481 16.457 21.8606 15.9993 21.8606Z",stroke:"currentColor"})),gt||(gt=r.createElement("path",{d:"M16 28C9.38047 28 4 22.6195 4 16C4 9.38047 9.38047 4 16 4C16.4577 4 16.8372 4.37953 16.8372 4.83721C16.8372 5.29488 16.4577 5.67442 16 5.67442C10.307 5.67442 5.67442 10.307 5.67442 16C5.67442 21.693 10.307 26.3256 16 26.3256C21.693 26.3256 26.3256 21.693 26.3256 16C26.3256 15.5423 26.7051 15.1628 27.1628 15.1628C27.6205 15.1628 28 15.5423 28 16C28 22.6195 22.6195 28 16 28Z",stroke:"currentColor"})),yt||(yt=r.createElement("path",{d:"M27.1637 10.1395C26.706 10.1395 26.3264 9.76 26.3264 9.30233V5.67442H22.6985C22.2409 5.67442 21.8613 5.29488 21.8613 4.83721C21.8613 4.37953 22.2409 4 22.6985 4H27.1637C27.6213 4 28.0009 4.37953 28.0009 4.83721V9.30233C28.0009 9.76 27.6213 10.1395 27.1637 10.1395Z",stroke:"currentColor"})),ft||(ft=r.createElement("path",{d:"M21.5805 11.256C21.3684 11.256 21.1563 11.1778 20.9889 11.0104C20.6652 10.6866 20.6652 10.1508 20.9889 9.82712L26.5703 4.24572C26.894 3.922 27.4298 3.922 27.7535 4.24572C28.0773 4.56944 28.0773 5.10525 27.7535 5.42897L22.1721 11.0104C22.0047 11.1778 21.7926 11.256 21.5805 11.256Z",stroke:"currentColor"})))}const wt=r.forwardRef(bt),vt=(s.p,()=>{const[e,t]=(0,r.useState)(0),[s,l]=(0,r.useState)(0),{totalUSD:c}=lt(),d=(0,n.useSelector)((e=>e.receipts)),u=(0,n.useSelector)((e=>e.distributors)),{getTotalBalance:p}=rt(),{wallet:{address:h}}=(0,i.useWallet)(),m=(0,r.useCallback)((async()=>{const e=Object.values(d),s=[];if(!e.length)return t(0);for(const{amount:t,distributor:i}of e){const e=i.toBase58();if(!u[e])continue;const{mint:n}=u[e],r={mint:n.toBase58(),amount:t};s.push(r)}const n=await p(s);return t(n)}),[u,p,d]),j=(0,r.useCallback)((async()=>{const e=Object.values(u),t=[];if(!e.length)return l(0);for(const{total:n,mint:i,authority:r}of e){if(h!==r.toBase58())continue;const e={mint:i.toBase58(),amount:n};t.push(e)}const s=await p(t);return l(s)}),[u,p,h]);return(0,r.useEffect)((()=>{m()}),[m]),(0,r.useEffect)((()=>{j()}),[j]),(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{lg:8,md:12,xs:24,children:(0,x.jsx)(nt,{label:"Total balance",icon:(0,x.jsx)(o.Z,{className:"card-hero-icon",name:"wallet-outline"}),value:c,cardStyles:{padding:"16px 24px"}})}),(0,x.jsx)(a.Col,{lg:8,md:12,xs:24,children:(0,x.jsx)(nt,{label:"Total distribution",icon:(0,x.jsx)(it.Z,{className:"card-hero-icon",style:{fontSize:32},component:wt}),value:s,cardStyles:{padding:"16px 24px"}})}),(0,x.jsx)(a.Col,{lg:8,md:12,xs:24,children:(0,x.jsx)(nt,{label:"Total received",icon:(0,x.jsx)(it.Z,{className:"card-hero-icon",style:{fontSize:32},component:xt}),value:e,cardStyles:{padding:"16px 24px"}})})]})}),St=e=>{let{mintAddresses:t,onChange:s,style:n}=e;return(0,x.jsxs)(a.Select,{className:"select-existed-token",style:{minWidth:150,...n},defaultValue:we,onChange:s,size:"large",children:[(0,x.jsx)(a.Select.Option,{value:we,children:"All token"}),t.map(((e,t)=>(0,x.jsx)(a.Select.Option,{value:e,children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(v,{mintAddress:e}),(0,x.jsx)(A,{mintAddress:e})]})},t)))]})},kt=e=>{let{label:t,value:s,selected:n,onSelected:i}=e;return(0,x.jsxs)(a.Row,{gutter:[4,4],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:t})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Radio.Group,{onChange:e=>i(e.target.value),value:n,className:"filter-lighning-radio-btn",children:(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:8,children:(0,x.jsx)(a.Radio.Button,{value:we,children:"All time"})}),s.map(((e,t)=>(0,x.jsx)(a.Col,{span:8,children:(0,x.jsx)(a.Radio.Button,{value:e,children:e})},t)))]})})})]})},Tt=[ge.ready,ge.waiting,ge.claimed,ge.expired],At=e=>{let{onChange:t,value:s=we}=e;const{ui:{infix:n}}=(0,i.useUI)();return"xs"===n?(0,x.jsx)(kt,{label:"Filter by status",onSelected:t,value:Tt,selected:s}):(0,x.jsxs)(a.Select,{className:"select-existed-token",style:{minWidth:150},defaultValue:we,onChange:t,size:"large",children:[(0,x.jsx)(a.Select.Option,{value:we,children:"All status"}),Tt.map(((e,t)=>(0,x.jsx)(a.Select.Option,{value:e,children:e},t)))]})},Rt=e=>{const t=(0,n.useSelector)((e=>e.distributors)),[s,i]=(0,r.useState)(),l=(0,n.useSelector)((e=>e.receipts)),a=(0,r.useCallback)((async e=>{const s=Date.now(),{receipt:n,startedAt:i,distributor:r}=e,a=l[n],o=t[r].endedAt;return a?ge.claimed:1e3*o.toNumber()<s&&o.toNumber()?ge.expired:1e3*i>s&&i?ge.waiting:ge.ready}),[t,l]),o=(0,r.useCallback)((async e=>{const t=await a(e);return i(t)}),[a]);return(0,r.useEffect)((()=>{e&&o(e)}),[o,e]),{status:s,fetchAirdropStatus:a}},Nt=e=>{let{mintAddresses:t,onConfirm:s}=e;const[n,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(we),[d,u]=(0,r.useState)(we);return(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(a.Button,{type:"text",icon:(0,x.jsx)(o.Z,{name:"funnel-outline"}),onClick:()=>i(!0)}),(0,x.jsx)(a.Modal,{visible:n,onCancel:()=>i(!1),closable:!1,footer:!1,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:8,direction:"vertical",style:{width:"100%"},children:[(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Filter by token"}),(0,x.jsx)(St,{mintAddresses:t,onChange:c,style:{width:"100%"}})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(At,{onChange:u,value:d})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Button,{type:"primary",onClick:()=>{s({mintKey:l,statusKey:d}),i(!1)},block:!0,children:"Confirm"})})]})})]})},Mt=e=>{let{listReceive:t,onFilter:s}=e;const[n,l]=(0,r.useState)(we),[o,d]=(0,r.useState)(we),{fetchAirdropStatus:u}=Rt(),{ui:{infix:p}}=(0,i.useUI)(),h="xs"===p,m=(0,r.useMemo)((()=>{if(!t.length)return[];let e=[];for(const s of t){const{mintAddress:t}=s;e.includes(t)||e.push(t)}return e}),[t]),j=(0,r.useCallback)((async e=>{const{recipientData:{startedAt:t},receiptAddress:s,distributorAddress:i,mintAddress:r}=e,l=!c.account.isAddress(r)||n===we||[n].includes(r),a=await u({distributor:i,receipt:s,startedAt:t.toNumber()}),d=!a||o===we||[o].includes(a);return l&&d}),[u,n,o]),g=(0,r.useCallback)((async()=>{let e=[];for(const s of t){await j(s)&&e.push(s)}return e.length||s([]),s(e)}),[j,t,s]);return(0,r.useEffect)((()=>{g()}),[g]),h?(0,x.jsx)(Nt,{mintAddresses:m,onConfirm:e=>{let{mintKey:t,statusKey:s}=e;l(t),d(s)}}):(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(St,{mintAddresses:m,onChange:l}),(0,x.jsx)(At,{onChange:d})]})};var Dt=s(40349),Bt=s.n(Dt),It=s(95960);const Et=e=>{let{cardId:t,children:s=(0,x.jsx)(r.Fragment,{}),cardHeader:n=(0,x.jsx)(r.Fragment,{}),style:i}=e;const[l,c]=(0,r.useState)(),d=l?"chevron-up-outline":"chevron-down-outline";return(0,x.jsx)(a.Card,{bordered:!1,bodyStyle:{padding:"16px 0"},style:{...i,background:"unset",borderRadius:0},children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:24,children:n}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{justify:"center",children:[(0,x.jsx)(a.Col,{span:24,className:"expand-card-collapse",children:(0,x.jsx)(a.Collapse,{activeKey:l,bordered:!1,children:(0,x.jsx)(a.Collapse.Panel,{header:!1,showArrow:!1,children:s},t)})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{type:"text",size:"small",icon:(0,x.jsx)(o.Z,{name:d}),onClick:()=>c(l?void 0:t)})})]})})]})})},Ot=e=>{let{title:t,children:s}=e;return(0,x.jsxs)(a.Row,{align:"middle",gutter:[24,24],children:[(0,x.jsx)(a.Col,{flex:"auto",children:t}),(0,x.jsx)(a.Col,{children:s})]})},zt=e=>{let{label:t="",value:s=""}=e;return(0,x.jsxs)(a.Row,{align:"middle",gutter:[24,24],children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Text,{className:"caption",type:"secondary",children:t})}),(0,x.jsx)(a.Col,{children:s})]})};var Ut=s(97429).Buffer;const{sol:{utility:Zt,taxman:Ft,fee:Lt}}=ee,Yt=e=>{let{distributorAddress:t,recipientData:s,receiptAddress:i}=e;const[l,o]=(0,r.useState)(),c=(0,n.useSelector)((e=>e.distributors)),{metadata:p}=c[t],[h,m]=(0,r.useState)(!1),j=s.startedAt.toNumber(),{status:C}=Rt({receipt:i,startedAt:j,distributor:t}),b=(0,r.useCallback)((async()=>{if(!t)return;const e=new ie;try{const t=await f(p),s=await e.get(t),n=d.MerkleDistributor.fromBuffer(Ut.from(s));return o(n)}catch(s){y(s)}}),[t,p]);return(0,r.useEffect)((()=>{b()}),[b]),C&&C===ge.ready?(0,x.jsx)(a.Button,{onClick:async()=>{if(!l)return;const e=l.deriveProof(s);if(l.verifyProof(e,s))try{m(!0);const n={fee:new u.BN(Lt),feeCollectorAddress:Ft},{txId:i}=await Zt.claim({distributorAddress:t,proof:e,data:s,feeOptions:n});g("Redeem",i)}catch(n){y(n)}finally{m(!1)}},loading:h,type:"text",className:"btn-claim",style:{color:"#42E6EB"},children:"claim"}):(0,x.jsx)(r.Fragment,{})},Ht=e=>{let{distributorAddress:t}=e;const s=(0,n.useSelector)((e=>e.distributors[t].endedAt));return(0,x.jsx)(a.Typography.Text,{children:s.toNumber()?Bt()(1e3*s.toNumber()).format("MMM DD, YYYY HH:mm"):"Unlimited"})},_t=e=>{const[t,s]=(0,r.useState)(void 0),{getDecimals:n}=(0,i.useMint)(),l=(0,r.useCallback)((async()=>{try{const t=await n(e);return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,r.useEffect)((()=>{l()}),[l]),t},Pt=e=>{let{amount:t,mintAddress:s}=e;const n=_t(s)||0;return(0,x.jsx)(a.Typography.Text,{children:i.util.numeric(c.utils.undecimalize(BigInt(t.toString()),n)).format("0,0.[0000]")})},Kt={Waiting:"#D4B106",Ready:"#03A326",Claimed:"#40A9FF",Expired:"#F9575E",Loading:"#F4F5F5"},Wt=e=>{let{state:t}=e;const s=(0,r.useMemo)((()=>t?Kt[t]:Kt[ge.loading]),[t]);return(0,x.jsx)(a.Tag,{style:{margin:0,borderRadius:4,border:`solid 1px ${s}`,textTransform:"capitalize",background:"transparent",color:s},children:t||ge.loading})},$t=e=>{let{receiptAddress:t,startedAt:s,distributorAddress:n}=e;const{status:i}=Rt({receipt:t,startedAt:s,distributor:n});return(0,x.jsx)(Wt,{state:i})},Vt=e=>{let{listReceive:t}=e;return t.length?(0,x.jsx)(r.Fragment,{children:t.map(((e,t)=>{const{mintAddress:s,receiptAddress:n,recipientData:i,distributorAddress:r,sender:l}=e;return(0,x.jsx)(Et,{style:{border:"1px solid transparent",borderImageSlice:"0 0 1 0",borderImageWidth:1,borderImageSource:"linear-gradient(90deg,transparent, #4F5B5C, transparent)"},cardId:n,cardHeader:(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ot,{title:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(v,{mintAddress:s}),(0,x.jsxs)(a.Space,{size:6,children:[(0,x.jsx)(Pt,{amount:i.amount,mintAddress:s}),(0,x.jsx)(A,{mintAddress:s})]})]}),children:(0,x.jsx)($t,{receiptAddress:n,startedAt:i.startedAt.toNumber(),distributorAddress:r})})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(zt,{label:`Sender: ${It.util.shortenAddress(l,4)}`,value:(0,x.jsx)(Yt,{distributorAddress:r,receiptAddress:n,recipientData:i})})})]}),children:(0,x.jsxs)(a.Row,{gutter:[4,4],children:[(0,x.jsx)(a.Col,{flex:"auto",children:"Unlock time:"}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Typography.Text,{children:i.startedAt.toNumber()?Bt()(1e3*i.startedAt.toNumber()).format("MMM DD, YYYY HH:mm"):"Immediately"})}),(0,x.jsx)(a.Col,{span:24}),(0,x.jsx)(a.Col,{flex:"auto",children:"Expiration time:"}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(Ht,{distributorAddress:r})})]})},t)}))}):(0,x.jsx)(a.Empty,{})},Jt=[{title:"UNLOCK DATE",dataIndex:"recipientData",render:e=>{let{startedAt:t}=e;return(0,x.jsx)(a.Typography.Text,{children:t.toNumber()?Bt()(1e3*t.toNumber()).format("MMM DD, YYYY HH:mm"):"Immediately"})}},{title:"EXPIRATION TIME",dataIndex:"distributorAddress",render:e=>(0,x.jsx)(Ht,{distributorAddress:e})},{title:"SENDER",dataIndex:"sender",render:e=>(0,x.jsx)(a.Typography.Text,{style:{cursor:"pointer"},underline:!0,onClick:()=>window.open(i.util.explorer(e),"_blank"),children:i.util.shortenAddress(e)})},{title:"TOKEN",dataIndex:"mintAddress",render:e=>(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(v,{mintAddress:e}),(0,x.jsx)(A,{mintAddress:e})]})},{title:"AMOUNT",dataIndex:"recipientData",render:(e,t)=>{let{amount:s}=e,{mintAddress:n}=t;return(0,x.jsx)(Pt,{amount:s,mintAddress:n})}},{title:"STATUS",dataIndex:"recipientData",render:(e,t)=>{let{startedAt:s}=e,{receiptAddress:n,distributorAddress:i}=t;return(0,x.jsx)($t,{startedAt:s.toNumber(),receiptAddress:n,distributorAddress:i})}},{title:"ACTION",dataIndex:"distributorAddress",render:(e,t)=>{let{receiptAddress:s,recipientData:n}=t;return(0,x.jsx)(Yt,{distributorAddress:e,recipientData:n,receiptAddress:s})}}];var qt=s(97429).Buffer;const{manifest:{appId:Gt}}=ee,Qt=()=>{const[e,t]=(0,r.useState)(4),[s,l]=(0,r.useState)([]),{listReceived:c}=(0,n.useSelector)((e=>e.listReceived)),[u,p]=(0,r.useState)([]),{ui:{width:h}}=(0,i.useUI)(),{fetchAirdropStatus:m}=Rt(),j=h<768,g=(0,r.useMemo)((()=>void 0===c),[c]),y=(0,r.useMemo)((()=>{const e=[];for(const t in c){const{recipientData:s,index:n}=c[t],{salt:i}=s,r=d.MerkleDistributor.salt(`${Gt}/${ve.Airdrop}/${n}`),l=d.MerkleDistributor.salt(n.toString());0!==qt.compare(r,i)&&0!==qt.compare(l,i)||e.push(c[t])}return e}),[c]),f=(0,r.useCallback)((async()=>{if(!y.length)return l([]);let e=[];const t=[],s=[];for(const n of y){const{receiptAddress:e,distributorAddress:i,recipientData:r}=n,{startedAt:l}=r;await m({distributor:i,receipt:e,startedAt:l.toNumber()})!==ge.ready?s.push(n):t.push(n)}return t.sort(((e,t)=>Number(t.recipientData.startedAt)-Number(e.recipientData.startedAt))),e=t.concat(s),l(e)}),[y,m]);return(0,r.useEffect)((()=>{f()}),[f]),(0,x.jsx)(a.Card,{loading:g,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:5,children:"Airdrop receive"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(Mt,{listReceive:s,onFilter:p})})]})}),(0,x.jsx)(a.Col,{span:24,children:j?(0,x.jsx)(Vt,{listReceive:u.slice(0,e)}):(0,x.jsx)(a.Table,{dataSource:u.slice(0,e),pagination:!1,columns:Jt,rowKey:e=>e.receiptAddress})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"center"},children:(0,x.jsx)(a.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,x.jsx)(o.Z,{name:"arrow-down-outline"}),disabled:e>=u.length,children:"VIEW MORE"})})]})})};var Xt=s(21111),es=s.n(Xt),ts=s(97429).Buffer;const{manifest:{appId:ss}}=ee,ns=()=>{const[e,t]=(0,r.useState)(4),[s,l]=(0,r.useState)([]),{listReceived:c}=(0,n.useSelector)((e=>e.listReceived)),[u,p]=(0,r.useState)([]),{ui:{width:h}}=(0,i.useUI)(),{fetchAirdropStatus:m}=Rt(),j=h<768,g=(0,r.useMemo)((()=>void 0===c),[c]),y=(0,r.useMemo)((()=>{let e=[];for(const t in c){const{index:s,recipientData:n,children:i}=c[t],{salt:r}=n,l=d.MerkleDistributor.salt(`${ss}/${ve.Vesting}/${s}`);0===ts.compare(l,r)&&(i&&(e=e.concat(i)))}return e}),[c]),f=(0,r.useCallback)((async e=>{const t=[];for(const s of e){const{receiptAddress:e,distributorAddress:n,recipientData:i}=s,{startedAt:r}=i,l=await m({receipt:e,startedAt:r.toNumber(),distributor:n});t.push(l)}return-1!==t.indexOf(ge.ready)?t.indexOf(ge.ready):-1!==t.indexOf(ge.waiting)?t.indexOf(ge.waiting):-1!==t.indexOf(ge.claimed)?t.indexOf(ge.claimed):-1!==t.indexOf(ge.expired)?t.indexOf(ge.expired):0}),[m]),C=(0,r.useCallback)((async()=>{if(!y.length)return l([]);const e={};let t=[];const s=[],n=[];for(const i of y){const{distributorAddress:t}=i;if(e[t]){const s=[...e[t]];s.push(i),e[t]=s}else e[t]=[i]}for(const i in e){const r=e[i];if(1===r.length)t.push(r[0]);else{let e=r[await f(r)];const t=[];for(const s of r)es()(s,e)||t.push(s);e={...e,children:t};const{distributorAddress:i,recipientData:l,receiptAddress:a}=e,{startedAt:o}=l;if(await m({distributor:i,receipt:a,startedAt:o.toNumber()})===ge.ready){s.push(e);continue}n.push(e)}}return s.sort(((e,t)=>Number(t.recipientData.startedAt)-Number(e.recipientData.startedAt))),t=s.concat(n),l(t)}),[m,f,y]);return(0,r.useEffect)((()=>{C()}),[C]),(0,x.jsx)(a.Card,{loading:g,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:5,children:"Vesting receive"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(Mt,{listReceive:s,onFilter:p})})]})}),(0,x.jsx)(a.Col,{span:24,children:j?(0,x.jsx)(Vt,{listReceive:u.slice(0,e)}):(0,x.jsx)(a.Table,{dataSource:u.slice(0,e),pagination:!1,columns:Jt,rowKey:e=>e.receiptAddress})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"center"},children:(0,x.jsx)(a.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,x.jsx)(o.Z,{name:"arrow-down-outline"}),disabled:e>=u.length,children:"VIEW MORE"})})]})})},is=()=>(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:2,children:"Dashboard"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(vt,{})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Qt,{})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ns,{})})]}),rs=[7,30,90],ls=e=>{let{onChange:t,value:s}=e;const{ui:{infix:n}}=(0,i.useUI)();return"xs"===n?(0,x.jsx)(kt,{label:"Filter by time",onSelected:t,value:rs,selected:s}):(0,x.jsxs)(a.Select,{className:"select-existed-token",style:{minWidth:150},defaultValue:we,onChange:t,size:"large",children:[(0,x.jsx)(a.Select.Option,{value:we,children:"All time"}),rs.map(((e,t)=>(0,x.jsxs)(a.Select.Option,{value:e,children:["Past ",e," days"]},t)))]})},as=e=>{let{mintAddressess:t,onConfirm:s}=e;const[n,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(we),[d,u]=(0,r.useState)(we);return(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(a.Button,{type:"text",icon:(0,x.jsx)(o.Z,{name:"funnel-outline"}),onClick:()=>i(!0)}),(0,x.jsx)(a.Modal,{visible:n,onCancel:()=>i(!1),closable:!1,footer:!1,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:8,direction:"vertical",style:{width:"100%"},children:[(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Filter by token"}),(0,x.jsx)(St,{mintAddresses:t,onChange:c,style:{width:"100%"}})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ls,{onChange:u,value:d})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Button,{type:"primary",onClick:()=>{s({mintKey:l,timeKey:d}),i(!1)},block:!0,children:"Confirm"})})]})})]})},os=e=>{let{listSent:t,onFilter:s}=e;const[n,l]=(0,r.useState)(we),[o,d]=(0,r.useState)(we),{ui:{infix:u}}=(0,i.useUI)(),p="xs"===u,h=(0,r.useMemo)((()=>{if(!t.length)return[];let e=[];for(const s of t){const{mint:t}=s;e.includes(t)||e.push(t)}return e}),[t]),m=(0,r.useCallback)((e=>{const{time:t,mint:s}=e,i=Number(new Date(t)),r=!c.account.isAddress(s)||n===we||[n].includes(s),l=!i||o===we||Date.now()-i<Number(o)*Ce;return r&&l}),[n,o]),j=(0,r.useMemo)((()=>{const e=t.filter((e=>m(e)));return e.length?e:[]}),[m,t]);return(0,r.useEffect)((()=>{s(j)}),[j,s]),p?(0,x.jsx)(as,{mintAddressess:h,onConfirm:e=>{let{mintKey:t,timeKey:s}=e;l(t),d(s)}}):(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(St,{mintAddresses:h,onChange:l}),(0,x.jsx)(ls,{onChange:d})]})},cs=e=>{let{total:t,mint:s}=e;const n=_t(s)||0;return(0,x.jsx)(a.Typography.Text,{children:i.util.numeric(c.utils.undecimalize(BigInt(t),n)).format("0,0.[0000]")})};var ds=s(51518),us=s.n(ds);const ps=s.p+"static/media/twitter.9cbdafef0605b5c84ec56b271a60a6e8.svg",hs=e=>{let{visible:t,redeemLink:s,onClose:n=(()=>{})}=e;const[l,c]=(0,r.useState)(!1);return(0,x.jsx)(a.Modal,{visible:t,closeIcon:(0,x.jsx)(o.Z,{name:"close-outline"}),onCancel:n,footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,x.jsxs)(a.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Image,{src:ps,preview:!1})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{direction:"vertical",size:4,children:[(0,x.jsx)(a.Typography.Title,{level:3,children:"Share on Twitter!"}),(0,x.jsx)(a.Space,{size:4,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Share this link so your recipients can get their tokens"})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:8,justify:"space-between",children:[(0,x.jsx)(a.Col,{className:"share-link",span:20,children:(0,x.jsx)(a.Typography.Text,{children:(e=>e.substring(0,40)+"...")(s)})}),(0,x.jsx)(a.Col,{span:4,children:(0,x.jsx)(a.Tooltip,{title:"Copied",visible:l,children:(0,x.jsx)(us(),{text:s,children:(0,x.jsx)(a.Button,{size:"large",type:"ghost",onClick:async()=>{c(!0),await i.util.asyncWait(1500),c(!1)},children:"copy"})})})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Button,{size:"large",type:"primary",block:!0,onClick:()=>{let e="http://twitter.com/intent/tweet?";const t={url:s,text:"Your prize has arrived! Redeem now at Sen Hub: "};for(const s in t)e+="&"+s+"="+encodeURIComponent(t[s]||"");window.open(e,"_blank")},children:"Share now"})})]})})},xs=(e,t)=>{const[s,i]=(0,r.useState)(!1),[l,a]=(0,r.useState)(!1),o=(0,n.useSelector)((t=>t.distributors[e].endedAt)),c=(0,r.useCallback)((async()=>{const e=Date.now(),s=1e3*o.toNumber();return s?(0===t&&a(!0),i(s<e)):i(!1)}),[o,t]);return(0,r.useEffect)((()=>{c()}),[c]),{isRevoke:s,disabled:l,setDisabled:a}},{manifest:{appId:ms},sol:{utility:js,fee:gs,taxman:ys}}=ee,fs=e=>{let{distributorAddress:t,remaining:s}=e;const[n,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),{disabled:d,isRevoke:u,setDisabled:h}=xs(t,s),{ui:{width:m}}=(0,i.useUI)(),j=m<768,f={fee:new(p())(gs),feeCollectorAddress:ys},C=`${window.location.origin}/app/${ms}/redeem/${t}?autoInstall=true`;return(0,x.jsxs)(a.Space,{size:j?16:24,children:[(0,x.jsx)(a.Button,{onClick:()=>l(!0),type:"text",style:{color:"#42E6EB",padding:0},children:"share"}),u&&(0,x.jsx)(a.Button,{onClick:async()=>{if(u){c(!0);try{const{txId:e}=await js.revoke({distributorAddress:t,feeOptions:f});return h(!0),g("Revoked token",e)}catch(e){y(e)}finally{c(!1)}}},type:"text",loading:o,disabled:d,style:{color:"#42E6EB"},children:"revoke"}),(0,x.jsx)(hs,{visible:n,onClose:()=>l(!1),redeemLink:C})]})};var Cs=s(97429).Buffer;const bs=e=>{let{treeData:t}=e;const s=(0,r.useMemo)((()=>{if(!t)return 0;const e=JSON.parse(JSON.stringify(t)).data;return d.MerkleDistributor.fromBuffer(Cs.from(e||t)).receipients[0].startedAt.toNumber()}),[t]);return(0,x.jsx)(a.Typography.Text,{children:s?Bt()(1e3*s).format("MMM DD, YYYY HH:mm"):"Immediately"})},ws=e=>{let{listSent:t}=e;return t.length?(0,x.jsx)(r.Fragment,{children:t.map(((e,t)=>{const{distributorAddress:s,mint:n,time:i,total:r,treeData:l,remaining:o}=e;return(0,x.jsx)(Et,{style:{border:"1px solid transparent",borderImageSlice:"0 0 1 0",borderImageWidth:1,borderImageSource:"linear-gradient(90deg,transparent, #4F5B5C, transparent)"},cardId:`card_airdrop_${s}`,cardHeader:(0,x.jsx)(a.Row,{gutter:[12,12],children:(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ot,{title:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(v,{mintAddress:n}),(0,x.jsxs)(a.Space,{size:6,children:[(0,x.jsx)(cs,{total:r.toString(),mint:n}),(0,x.jsx)(A,{mintAddress:n})]})]}),children:(0,x.jsx)(fs,{remaining:o,distributorAddress:s})})})}),children:(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(zt,{label:"Created time",value:(0,x.jsx)(a.Typography.Text,{children:Bt()(i).format("MMM DD, YYYY HH:mm")})})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(zt,{label:"Unlock time",value:(0,x.jsx)(bs,{treeData:l})})})]})},s)}))}):(0,x.jsx)(a.Empty,{})},{sol:{utility:vs}}=ee,Ss=new G.Connection(i.rpc),ks=()=>{const[e,t]=(0,r.useState)({}),[s,i]=(0,r.useState)({}),l=(0,n.useSelector)((e=>e.distributors)),a=(0,r.useCallback)((async()=>{const{splt:e}=window.sentre,s={};for(const t in l){if(!l[t])continue;const{mint:n}=l[t],i=await vs.deriveTreasurerAddress(t),r=await e.deriveAssociatedAddress(i,n.toBase58());s[i]=c.account.fromAddress(r)}return t(s)}),[l]),o=(0,r.useCallback)((async()=>{if(!Object.values(e).length)return;const{splt:t}=window.sentre,s={},n=await Ss.getMultipleAccountsInfo(Object.values(e));for(const e of n){if(!e)continue;const{amount:n,owner:i}=await t.parseAccountData(e.data);s[i]=Number(n)}return i(s)}),[e]);return(0,r.useEffect)((()=>{a()}),[a]),(0,r.useEffect)((()=>{o()}),[o]),{listRemaining:s}};var Ts=s(97429).Buffer;const{manifest:{appId:As},sol:{utility:Rs}}=ee,Ns=Date.now(),Ms=e=>{let{type:t}=e;const[s,i]=(0,r.useState)([]),[l,a]=(0,r.useState)(0),o=(0,n.useSelector)((e=>e.distributors)),{listHistory:c}=(0,n.useSelector)((e=>e.history)),{listRemaining:u}=ks(),p=(0,r.useMemo)((()=>void 0===c),[c]),h=(0,r.useCallback)((async()=>{const e=[];let s=0;const n=[];try{const r=d.MerkleDistributor.salt("0"),l=d.MerkleDistributor.salt(`${As}/${t}/0`);if(!c)return;for(const t of c){const{treeData:i,distributorAddress:a}=t;if(!i||!o[a])continue;const c=JSON.parse(JSON.stringify(i)).data,p=d.MerkleDistributor.fromBuffer(Ts.from(c||i)),h=p.receipients[0].salt,x=Ts.compare(r,h),m=Ts.compare(l,h);if(0!==x&&0!==m)continue;for(const{authority:e}of p.receipients)n.includes(e.toBase58())||n.push(e.toBase58());s=n.length;const j=1e3*o[a].endedAt.toNumber(),g=await Rs.deriveTreasurerAddress(a),y=u[g],f={...t,remaining:y};j<Ns&&j&&u[g]?e.unshift(f):e.push(f)}}catch(r){}finally{return a(s),i(e)}}),[o,c,u,t]);return(0,r.useEffect)((()=>{h()}),[h]),{listHistory:s,loading:p,numberOfRecipient:l}};var Ds=s(97429).Buffer;const Bs=e=>{let{treeData:t}=e;const s=(0,r.useMemo)((()=>{if(!t)return 0;const e=JSON.parse(JSON.stringify(t)).data;return d.MerkleDistributor.fromBuffer(Ds.from(e||t)).receipients[0].startedAt.toNumber()}),[t]);return(0,x.jsx)(a.Typography.Text,{children:s?Bt()(1e3*s).format("MMM DD, YYYY HH:mm"):"Immediately"})},Is=e=>{let{total:t,mint:s}=e;const n=_t(s)||0;return(0,x.jsx)(a.Typography.Text,{children:i.util.numeric(c.utils.undecimalize(BigInt(t),n)).format("0,0.[0000]")})},{manifest:{appId:Es},sol:{utility:Os,fee:zs,taxman:Us}}=ee,Zs=e=>{let{distributorAddress:t,remaining:s}=e;const[n,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),{disabled:d,isRevoke:u,setDisabled:h}=xs(t,s),{ui:{width:m}}=(0,i.useUI)(),j=m<768,f={fee:new(p())(zs),feeCollectorAddress:Us},C=`${window.location.origin}/app/${Es}/redeem/${t}?autoInstall=true`;return(0,x.jsxs)(a.Space,{size:j?16:24,children:[(0,x.jsx)(a.Button,{onClick:()=>l(!0),type:"text",style:{color:"#42E6EB",padding:0},children:"share"}),u&&(0,x.jsx)(a.Button,{onClick:async()=>{if(u){c(!0);try{const{txId:e}=await Os.revoke({distributorAddress:t,feeOptions:f});return h(!0),g("Revoked token",e)}catch(e){y(e)}finally{c(!1)}}},type:"text",loading:o,disabled:d,style:{color:"#42E6EB"},children:"revoke"}),(0,x.jsx)(hs,{visible:n,onClose:()=>l(!1),redeemLink:C})]})},Fs=[{title:"CREATED DATE",dataIndex:"time",render:e=>(0,x.jsx)(a.Typography.Text,{children:e?Bt()(e).format("MMM DD, YYYY HH:mm"):"--"})},{title:"UNLOCK DATE",dataIndex:"treeData",render:e=>(0,x.jsx)(Bs,{treeData:e})},{title:"TOKEN",dataIndex:"mint",render:e=>(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(v,{mintAddress:e}),(0,x.jsx)(A,{mintAddress:e})]})},{title:"AMOUNT",dataIndex:"total",render:(e,t)=>{let{mint:s}=t;return(0,x.jsx)(Is,{total:e,mint:s})}},{title:"ACTION",dataIndex:"distributorAddress",render:(e,t)=>{let{remaining:s}=t;return(0,x.jsx)(Zs,{remaining:s,distributorAddress:e})}}],Ls=()=>{const[e,t]=(0,r.useState)(4),{loading:s,listHistory:n}=Ms({type:ve.Vesting}),[l,c]=(0,r.useState)([]),{ui:{width:d}}=(0,i.useUI)(),u=d<768;return(0,x.jsx)(a.Card,{loading:s,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:5,children:"History"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(os,{listSent:n,onFilter:c})})]})}),u?(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ws,{listSent:l.slice(0,e)})}):(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Table,{dataSource:l.slice(0,e),pagination:!1,columns:Fs,rowKey:e=>e.distributorAddress})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"center"},children:(0,x.jsx)(a.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,x.jsx)(o.Z,{name:"arrow-down-outline"}),disabled:e>=l.length,children:"VIEW MORE"})})]})})},Ys=e=>{let{valueInUSD:t,numberOfCampaign:s,recipientList:n,loading:i}=e;return(0,x.jsxs)(a.Row,{gutter:[24,24],style:{height:"100%"},children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(nt,{loading:!t&&i,label:"Total vesting",icon:(0,x.jsx)(o.Z,{className:"card-hero-icon",name:"receipt-outline"}),value:t})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(nt,{loading:!s&&i,label:"Total campaigns",icon:(0,x.jsx)(o.Z,{className:"card-hero-icon",name:"paper-plane-outline"}),value:s,unit:""})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(nt,{loading:!n&&i,label:"Total recipients",icon:(0,x.jsx)(o.Z,{className:"card-hero-icon",name:"people-outline"}),value:n,unit:""})})]})};var Hs=s(37014),_s=s(44521),Ps=s(40426),Ks=s(54179),Ws=s(45198),$s=s(90404),Vs=s(54132),Js=s(72870),qs=s(8399);_s.D([Ws.N,$s.N,Ks.N,qs.N,Vs.N,Js.N]);const Gs=e=>{let{data:t,bgTooltip:s="#233333"}=e;return{tooltip:{trigger:"item",backgroundColor:s,extraCssText:"border-radius: 0px",formatter:function(e){return`<div style="width: 200px; font-weight: 400"><span style="display: flex; justify-content: space-between"><span style="font-size: 14px, font-weight: 400">Value</span> <span style="font-size: 16px; font-weight: 700">${i.util.numeric(e.data.value).format("0,0.[0000]")}</span></span> <span style="display: flex; justify-content: space-between;"><span style="font-size: 14px; font-weight: 400">Token amount</span> <span style="font-size: 16px; font-weight: 700">${i.util.numeric(e.data.tokenAmount).format("0,0.[0000]")}</span></span></div>`},textStyle:{color:"#F4F5F5"}},legend:{show:!1,height:"100%",width:"100%"},series:[{width:"300",center:[110,"50%"],name:"Sentre chart",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold",color:"#F4F5F5",overflow:"hidden"}},itemStyle:{color:e=>i.util.randomColor(e.name)},labelLine:{show:!1},data:Object.values(t).map((e=>({value:e.usdValue,name:`${e.symbol}`,tokenAmount:e.amountToken,percentRatio:e.ratio})))}],media:[{query:{maxWidth:300},option:{series:[{center:[100,"50%"],radius:["35%","60%"]}]}},{query:{maxWidth:200},option:{series:[{center:[70,"50%"],radius:["25%","45%"]}]}}]}},Qs=e=>{let{data:t}=e;return(0,x.jsx)(Ps.Z,{echarts:Hs,option:Gs({data:t,bgTooltip:"#123432"}),notMerge:!0,lazyUpdate:!0})},Xs=e=>{let{data:t}=e;const s=(0,r.useMemo)((()=>Object.values(t).sort(((e,t)=>t.ratio-e.ratio))),[t]);return(0,x.jsx)(a.Row,{gutter:[12,12],children:s.map(((e,t)=>(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{align:"middle",wrap:!1,gutter:[16,16],children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Avatar,{style:{background:i.util.randomColor(e.symbol)},shape:"square",size:16}),(0,x.jsxs)(a.Typography.Text,{ellipsis:!0,type:"secondary",children:[e.symbol," (",e.name,")"]})]})}),(0,x.jsx)(a.Col,{children:(0,x.jsxs)(a.Typography.Text,{children:[i.util.numeric(e.ratio).format("0,0.[00]"),"%"]})})]})},t)))})},en=e=>{let{vestingAllocation:t,loading:s}=e;return(0,x.jsx)(a.Card,{className:"card-lightning",bodyStyle:{paddingBottom:0},style:{height:"100%"},loading:s,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:5,children:"Vesting allocation"})}),(0,x.jsx)(a.Col,{span:24,children:Object.keys(t).length?(0,x.jsxs)(a.Row,{gutter:[8,8],align:"middle",children:[(0,x.jsx)(a.Col,{xs:14,sm:10,children:(0,x.jsx)(Qs,{data:t})}),(0,x.jsx)(a.Col,{xs:10,sm:14,children:(0,x.jsx)(Xs,{data:t})})]}):(0,x.jsx)(a.Empty,{})})]})})},tn=e=>{const[t,s]=(0,r.useState)({}),[n,l]=(0,r.useState)(0),{getDecimals:a,tokenProvider:o}=(0,i.useMint)(),{listHistory:c,numberOfRecipient:d,loading:u}=Ms({type:e}),{getTotalBalance:x}=rt(),m=(0,r.useMemo)((()=>{const e={};for(const{mint:t,total:s}of c)if(e[t]){const n=e[t];e[t]=n.add(new(p())(s))}else e[t]=new(p())(s);return e}),[c]),j=(0,r.useCallback)((async()=>{const e=[];for(const s in m)e.push({mint:s,amount:m[s]});const t=await x(e);return l(t)}),[x,m]),g=(0,r.useCallback)((async()=>{const e=[];for(const s in m){var t;const n=await o.findByAddress(s),i=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId;i&&e.push(i)}return await b(e)}),[m,o]),f=(0,r.useCallback)((async()=>{try{const t={};if(!n)return s(t);const i=await g();for(const s in m){var e;const r=await o.findByAddress(s),l=null===r||void 0===r||null===(e=r.extensions)||void 0===e?void 0:e.coingeckoId;if(!l)continue;const c=await a(s),d=h.utilsBN.undecimalize(m[s],c),u=i[l]*Number(d),p=u/n*100;if(p<2){let e=d,s=u,n=p;if(t.other){const{amountToken:i,usdValue:r,ratio:l}=t.other;e+=i,s+=r,n+=l}t.other={name:"Other",symbol:"",amountToken:e,usdValue:s,ratio:n}}else t[s]={name:`${null===r||void 0===r?void 0:r.name}`,symbol:`${null===r||void 0===r?void 0:r.symbol}`,amountToken:d,usdValue:u,ratio:p}}return s(t)}catch(t){y(t)}}),[g,a,m,o,n]);return(0,r.useEffect)((()=>{j()}),[j]),(0,r.useEffect)((()=>{f()}),[f]),{allocation:t,totalUSD:n,numberOfRecipient:d,numberOfCampaigns:c.length,loading:u}},sn=()=>{const{pushHistory:e}=se(),t=(0,n.useDispatch)(),{allocation:s,totalUSD:i,numberOfRecipient:r,numberOfCampaigns:l,loading:c}=tn(ve.Vesting);return(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:2,children:"Vesting"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{icon:(0,x.jsx)(o.Z,{name:"add-outline"}),type:"primary",size:"large",onClick:()=>(e("/vesting/add-new"),t(Me("vesting"))),children:"ADD NEW"})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,lg:8,children:(0,x.jsx)(Ys,{loading:c,valueInUSD:i,numberOfCampaign:l,recipientList:r})}),(0,x.jsx)(a.Col,{span:24,lg:16,children:(0,x.jsx)(en,{vestingAllocation:s,loading:c})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ls,{})})]})},nn=e=>{let{airdropAllocation:t,loading:s}=e;return(0,x.jsx)(a.Card,{loading:s,className:"card-lightning",style:{height:"100%"},bodyStyle:{paddingBottom:0},children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:5,children:"Airdrop allocation"})}),(0,x.jsx)(a.Col,{span:24,children:Object.keys(t).length?(0,x.jsxs)(a.Row,{gutter:[8,8],align:"middle",children:[(0,x.jsx)(a.Col,{xs:14,sm:10,children:(0,x.jsx)(Qs,{data:t})}),(0,x.jsx)(a.Col,{xs:10,sm:14,children:(0,x.jsx)(Xs,{data:t})})]}):(0,x.jsx)(a.Empty,{})})]})})},rn=[{title:"CREATED DATE",dataIndex:"time",render:e=>(0,x.jsx)(a.Typography.Text,{children:e?Bt()(e).format("MMM DD, YYYY HH:mm"):"--"})},{title:"UNLOCK DATE",dataIndex:"treeData",render:e=>(0,x.jsx)(bs,{treeData:e})},{title:"TOKEN",dataIndex:"mint",render:e=>(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(v,{mintAddress:e}),(0,x.jsx)(A,{mintAddress:e})]})},{title:"AMOUNT",dataIndex:"total",render:(e,t)=>{let{mint:s}=t;return(0,x.jsx)(cs,{total:e,mint:s})}},{title:"ACTION",dataIndex:"distributorAddress",render:(e,t)=>{let{remaining:s}=t;return(0,x.jsx)(fs,{distributorAddress:e,remaining:s})}}],ln=()=>{const[e,t]=(0,r.useState)(4),{loading:s,listHistory:n}=Ms({type:ve.Airdrop}),[l,c]=(0,r.useState)([]),{ui:{width:d}}=(0,i.useUI)(),u=d<768;return(0,x.jsx)(a.Card,{loading:s,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:5,children:"History"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(os,{listSent:n,onFilter:c})})]})}),u?(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ws,{listSent:l.slice(0,e)})}):(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Table,{dataSource:l.slice(0,e),pagination:!1,columns:rn,rowKey:e=>e.distributorAddress})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"center"},children:(0,x.jsx)(a.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,x.jsx)(o.Z,{name:"arrow-down-outline"}),disabled:e>=l.length,children:"VIEW MORE"})})]})})},an=e=>{let{valueInUSD:t,numberOfCampaign:s,recipientList:n,loading:i}=e;return(0,x.jsxs)(a.Row,{gutter:[24,24],style:{height:"100%"},children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(nt,{label:"Total airdrop",icon:(0,x.jsx)(o.Z,{className:"card-hero-icon",name:"cloud-download-outline"}),value:t,loading:!t&&i})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(nt,{label:"Total campaigns",icon:(0,x.jsx)(o.Z,{className:"card-hero-icon",name:"paper-plane-outline"}),value:s,unit:"",loading:!s&&i})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(nt,{loading:!n&&i,label:"Total recipients",icon:(0,x.jsx)(o.Z,{className:"card-hero-icon",name:"people-outline"}),value:n,unit:""})})]})},on=()=>{const{pushHistory:e}=se(),t=(0,n.useDispatch)(),{allocation:s,totalUSD:i,numberOfRecipient:r,numberOfCampaigns:l,loading:c}=tn(ve.Airdrop);return(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:2,children:"Airdrop"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{icon:(0,x.jsx)(o.Z,{name:"add-outline"}),type:"primary",size:"large",onClick:()=>(e("/airdrop/add-new"),t(Me("airdrop"))),children:"ADD NEW"})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,lg:8,children:(0,x.jsx)(an,{valueInUSD:i,numberOfCampaign:l,recipientList:r,loading:c})}),(0,x.jsx)(a.Col,{span:24,lg:16,children:(0,x.jsx)(nn,{airdropAllocation:s,loading:c})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ln,{})})]})},cn="empty",dn=e=>{let{activeMintAddress:t,onSelect:s}=e;const[n,i]=(0,r.useState)(!1),l=(0,r.useCallback)((e=>{s(e),i(!1)}),[s]);return(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(a.Button,{className:"select-token",type:"text",onClick:()=>i(!0),children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(v,{mintAddress:t}),(0,x.jsx)(A,{mintAddress:t}),(0,x.jsx)(o.Z,{name:"chevron-down-outline"})]})}),(0,x.jsx)(a.Modal,{visible:n,onCancel:()=>i(!1),footer:null,closable:!1,centered:!0,className:"card-lightning mint-select-modal",destroyOnClose:!0,children:(0,x.jsx)(V,{onChange:l})})]})},un="setting",pn=(0,he.createAsyncThunk)("setting/setDecimal",(async e=>({decimal:e}))),hn=(0,he.createAsyncThunk)("setting/setEncryption",(async e=>({encryption:e}))),xn=(0,he.createAsyncThunk)("setting/setDisabled",(async e=>({disabled:e}))),mn=(0,he.createSlice)({name:un,initialState:{decimal:!0,encryption:!1,disabled:!1},reducers:{},extraReducers:e=>{e.addCase(pn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(hn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(xn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,jn=()=>{const e=(0,n.useDispatch)(),{main:{mintSelected:t},setting:{decimal:s,disabled:i}}=(0,n.useSelector)((e=>e)),r=_t(t)||0;return(0,x.jsx)(a.Switch,{className:"decimal-switch",onChange:t=>{e(pn(t))},checkedChildren:r,unCheckedChildren:r,disabled:i,checked:s})},gn=()=>{const e=(0,n.useDispatch)();return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:24,children:[(0,x.jsx)(jn,{}),(0,x.jsx)(a.Typography.Text,{children:"Decimals"})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:24,children:[(0,x.jsx)(a.Switch,{disabled:!0,onChange:t=>e(hn(t))}),(0,x.jsx)(a.Typography.Text,{children:"Encrypt confidential information"})]})})]})},yn=()=>(0,x.jsx)(a.Popover,{trigger:"click",placement:"bottom",title:null,content:(0,x.jsx)(gn,{}),children:(0,x.jsx)(a.Button,{type:"text",icon:(0,x.jsx)(o.Z,{name:"cog-outline"})})}),fn=e=>{let{label:t=""}=e;const{step:s}=(0,n.useSelector)((e=>e.steps)),i=(0,r.useMemo)((()=>s===me.AddRecipient?me.AddRecipient:s===me.ConfirmTransfer?me.ConfirmTransfer:me.SelectMethod),[s]),l=(0,r.useMemo)((()=>s===me.ConfirmTransfer?me.ConfirmTransfer:me.AddRecipient),[s]);return(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{direction:"vertical",size:12,children:[(0,x.jsx)(a.Radio.Group,{value:s,className:"steps",buttonStyle:"solid",children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Radio.Button,{className:"rate-btn",value:i}),(0,x.jsx)(a.Radio.Button,{className:"rate-btn",value:l}),(0,x.jsx)(a.Radio.Button,{className:"rate-btn",value:me.ConfirmTransfer})]})}),(0,x.jsx)(a.Typography.Title,{level:5,children:t})]})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(yn,{})})]})},Cn=()=>{const e=(0,n.useSelector)((e=>e.setting.decimal)),t=(0,n.useSelector)((e=>e.recipients.recipientInfos));return{amountError:(0,r.useMemo)((()=>{let s=[];for(const e in t)s=s.concat(t[e]);for(const{amount:t}of s)if(!e&&Number(t)%1!==0)return!0;return!1}),[e,t])}},bn=(e,t,s)=>c.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(c.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},wn=e=>{const{wallet:{address:t,lamports:s}}=(0,i.useWallet)(),{accounts:n}=(0,i.useAccount)(),{amount:r,mint:l}=n[e]||{},a=_t(l)||0;return c.account.isAddress(t)&&c.account.isAddress(e)?e===t?bn(c.DEFAULT_EMPTY_ADDRESS,s,9):bn(l,r,a):bn()},vn=e=>{const[t,s]=(0,r.useState)(""),{wallet:{address:n}}=(0,i.useWallet)(),l=wn(t);return(0,r.useEffect)((()=>{(async()=>{if(!c.account.isAddress(n)||!c.account.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const i=await t.deriveAssociatedAddress(n,e);s(i)}catch(i){return s("")}})()})),l},Sn=()=>{const{main:{mintSelected:e},recipients:{recipientInfos:t,expirationTime:s},setting:{decimal:i}}=(0,n.useSelector)((e=>e)),l=_t(e)||0,a=(0,r.useCallback)((e=>{if(!s)return!0;for(const{unlockTime:t}of e)if(t>s)return!1;return!0}),[s]),o=(0,r.useMemo)((()=>{if(!t||!l)return new(p())(0);let e=new(p())(0),s=[];for(const n in t){const e=a(t[n]);c.account.isAddress(n)&&e&&(s=s.concat(t[n]))}for(const{amount:t}of s)i?e=e.add(h.utilsBN.decimalize(t,l)):Number(t)%1===0&&(e=e.add(new(p())(t)));return e}),[a,i,l,t]),d=(0,r.useMemo)((()=>Object.keys(t).length),[t]);return{total:h.utilsBN.undecimalize(o,l).toString(),quantity:d}},kn=e=>{const{balance:t}=vn(e),{total:s}=Sn();return(0,r.useMemo)((()=>t?t-Number(s):0),[t,s])},Tn=e=>{let{type:t}=e;const s=(0,n.useSelector)((e=>e.recipients.recipientInfos));return(0,r.useMemo)((()=>{let e=[];for(const n in s)(c.account.isAddress(n)||t!==fe.valid)&&(c.account.isAddress(n)&&t===fe.invalid||(e=e.concat(s[n])));return e}),[s,t])},An=()=>{const e=(0,n.useDispatch)(),{main:{isTyping:t,mintSelected:s}}=(0,n.useSelector)((e=>e)),{amountError:i}=Cn(),l=kn(s),o=Tn({type:fe.invalid}),c=!Tn({type:fe.valid}).length||!!o.length||t||l<0||i,d=(0,r.useCallback)((async()=>{await e(Ee(me.SelectMethod)),await e(Te(xe.manual)),await e(Ge())}),[e]);return(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{type:"ghost",size:"large",onClick:d,block:!0,children:"Back"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>e(Ee(me.ConfirmTransfer)),type:"primary",disabled:c,block:!0,children:"Continue"})})]})};var Rn=s(24656),Nn=s.n(Rn),Mn=s(18268),Dn=s.n(Mn),Bn=s(84354);const In=e=>{let{visible:t,setVisible:s,title:n,description:i,onConfirm:r,onCancel:l,btnText:c}=e;return(0,x.jsx)(a.Modal,{visible:t,closeIcon:(0,x.jsx)(o.Z,{name:"close-outline"}),onCancel:()=>s(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:15,align:"baseline",children:[(0,x.jsx)(o.Z,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,x.jsxs)(a.Space,{size:4,direction:"vertical",children:[(0,x.jsx)(a.Typography.Text,{children:n}),(0,x.jsx)(a.Typography.Text,{type:"secondary",children:i})]})]})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{onClick:l,type:"ghost",children:"cancel"}),(0,x.jsx)(a.Button,{onClick:r,type:"primary",children:c})]})})]})})},En=e=>{let{label:t,value:s}=e;return(0,x.jsxs)(a.Space,{size:4,children:[(0,x.jsx)(a.Typography.Text,{className:"caption",type:"secondary",children:t}),(0,x.jsx)(a.Typography.Text,{children:s})]})},On=e=>{let{configs:t,unlockTime:s}=e;return(0,x.jsxs)(a.Row,{gutter:[32,32],align:"middle",children:[(0,x.jsx)(a.Col,{children:(0,x.jsx)(En,{label:"Unlock time:",value:Bt()(s).format("DD-MM-YYYY HH:mm")})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(En,{label:"Distribution frequency:",value:`${t.frequency} days`})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(En,{label:"Distribute in:",value:`${t.distributeIn} months`})})]})},zn=e=>{let{walletAddress:t,addNewRecipient:s,remove:n,isEdit:i=!1,setIsEdit:l=(()=>{}),disabled:c}=e;return(0,x.jsx)(r.Fragment,{children:t?(0,x.jsx)(r.Fragment,{children:i?(0,x.jsx)(a.Button,{style:{padding:0,color:"#42E6EB"},type:"text",onClick:s,size:"small",disabled:c,children:"Save"}):(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{type:"text",size:"small",style:{padding:0},onClick:n,icon:(0,x.jsx)(o.Z,{style:{fonSize:20},name:"trash-outline"})}),(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>l(!0),style:{padding:0},icon:(0,x.jsx)(o.Z,{style:{fonSize:20},name:"create-outline"})})]})}):(0,x.jsx)(a.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:s,children:"OK"})})},Un=e=>{let{unlockTime:t,onChange:s}=e;const i=(0,n.useSelector)((e=>e.recipients.expirationTime)),l=(0,r.useMemo)((()=>i<t&&i?"Must be less than the expiration time.":""),[i,t]);return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",children:"Unlock time"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.DatePicker,{placeholder:"Select time",suffixIcon:(0,x.jsx)(o.Z,{name:"time-outline"}),className:"date-option",onChange:e=>s((null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,value:t?Bt()(t):null,showTime:{showSecond:!1},placement:"bottomRight"})}),l&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:l})})]})},Zn=()=>({calcListAmount:(0,r.useCallback)(((e,t)=>{const s=[],n=t-1,i=e.div(new(p())(t));let r=new(p())(0);for(let l=0;l<t;l++)if(l!==n)r=r.add(i),s.push(i);else{const t=e.sub(r);s.push(t)}return s}),[])}),Fn={walletAddress:"",amount:""},Ln=864e5,Yn=e=>{let{walletAddress:t,amount:s,index:i}=e;const[l,d]=(0,r.useState)(Fn),[u,m]=(0,r.useState)(""),[j,g]=(0,r.useState)(""),[y,f]=(0,r.useState)(!1),[C,b]=(0,r.useState)(!1),[w,v]=(0,r.useState)(Fe.seven),[S,k]=(0,r.useState)(ze.three),[T,A]=(0,r.useState)(0),{main:{mintSelected:R,typeDistribute:N},recipients:M,setting:{decimal:D}}=(0,n.useSelector)((e=>e)),B=(0,n.useDispatch)(),I=_t(R)||0,{calcListAmount:E}=Zn(),O=(0,r.useMemo)((()=>({distributeIn:S,frequency:w})),[S,w]),z=(0,r.useCallback)((async()=>c.account.isAddress(t)&&s?d({walletAddress:t,amount:s}):d(Fn)),[t,s]),U=(0,r.useCallback)((()=>(!s&&!t||C)&&(l.walletAddress||l.amount||C)?B(Ne(!0)):B(Ne(!1))),[s,B,l.amount,l.walletAddress,C,t]),Z=(0,r.useCallback)((()=>{if(s)return D?m(""):Number(s)%1!==0?m("Should be natural numbers"):void 0}),[s,D]),F=(0,r.useCallback)((()=>{const{globalUnlockTime:e,recipientInfos:s}=M;return c.account.isAddress(t)?A(s[t][0].unlockTime):A(e)}),[M,t]),L=(0,r.useCallback)((()=>{const{globalConfigs:e,recipientInfos:s}=M;if(!c.account.isAddress(t))return k(e.distributeIn),v(e.frequency);const n=s[t][0].configs;return n?(k(n.distributeIn),v(n.frequency)):void 0}),[M,t]),Y=(0,r.useMemo)((()=>t&&void 0!==i?i+1:Object.keys(M.recipientInfos).length+1),[i,M.recipientInfos,t]),H=!(!t||C),_=(0,r.useMemo)((()=>{const e=T+30*S*Ln,t=M.expirationTime;return!!t&&((T>t||e>t)&&N===ve.Vesting)}),[S,T,M.expirationTime,N]);return(0,r.useEffect)((()=>{z()}),[z]),(0,r.useEffect)((()=>{Z()}),[Z]),(0,r.useEffect)((()=>{U()}),[U]),(0,r.useEffect)((()=>{L(),F()}),[L,F]),(0,x.jsxs)(a.Row,{gutter:[8,8],align:"middle",justify:"space-between",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsxs)(a.Col,{flex:"auto",children:["Wallet address #",Y]}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(zn,{addNewRecipient:async()=>{const{walletAddress:e,amount:t}=l;if(!c.account.isAddress(e))return g("Wrong wallet address");if(!t)return m("Amount cannot be empty");if(!D&&Number(t)%1!==0)return m("Should be natural numbers");const s=[],{recipientInfos:n}=M;if(n[e]&&!C)return f(!0);if("airdrop"===N){const n={address:e,amount:t,unlockTime:T};s.push(n)}if("vesting"===N){const n=Math.floor(30*S/w),i=h.utilsBN.decimalize(t,I),r=E(i,n);for(let t=0;t<n;t++){let n=0;0===t&&(n=T),0!==t&&(n=w*Ln+s[t-1].unlockTime);const i={address:e,amount:h.utilsBN.undecimalize(r[t],I),unlockTime:n,configs:O};s.push(i)}}return g(""),m(""),b(!1),C||d(Fn),B(Ve({walletAddress:e,nextRecipients:s}))},walletAddress:t,remove:()=>{if(c.account.isAddress(t))return B(Je(t))},isEdit:C,setIsEdit:b,disabled:_})})]})}),(0,x.jsx)(a.Col,{span:19,children:(0,x.jsx)(a.Input,{disabled:!!t,value:l.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:e=>{d({...l,[e.target.name]:e.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,x.jsx)(a.Col,{span:5,children:(0,x.jsx)(Bn.Z,{disabled:H,value:s||l.amount,name:"amount",placeholder:"Amount",onChange:e=>d({...l,amount:e}),className:u?"recipient-input-error":"recipient-input",autoComplete:"off"})}),(j||u)&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(o.Z,{style:{color:"#f2323f"},name:"warning-outline"}),(0,x.jsx)(a.Typography.Text,{type:"danger",children:j||u})]})}),N===ve.Vesting&&(0,x.jsx)(r.Fragment,{children:C?(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{xs:12,md:7,children:(0,x.jsx)(Un,{unlockTime:T,onChange:A})}),(0,x.jsx)(a.Col,{xs:12,md:7,children:(0,x.jsx)(Ye,{frequency:w,onChange:v})}),(0,x.jsx)(a.Col,{xs:12,md:7,children:(0,x.jsx)(Ze,{distributeIn:S,onChange:k})})]})}):(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(On,{configs:O,unlockTime:T})})}),(0,x.jsx)(In,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",btnText:"merge",onConfirm:async()=>{const{walletAddress:e,amount:t}=l,{recipientInfos:s}=M,n=s[e],i=n.length;let r=new(p())(0);for(const{amount:l}of n)r=r.add(h.utilsBN.decimalize(l,I));const a=r.add(h.utilsBN.decimalize(t,I)),o=E(a,i),c=s[e].map(((e,t)=>({...e,amount:h.utilsBN.undecimalize(o[t],I)})));return await B(Ve({walletAddress:e,nextRecipients:c})),await f(!1),(u||j)&&(m(""),g("")),d(Fn)},visible:y,setVisible:f,onCancel:()=>f(!1)})]})},Hn=e=>{let{label:t,value:s}=e;const{ui:{width:n}}=(0,i.useUI)(),r=n<1200;return(0,x.jsxs)(a.Row,{gutter:[4,4],children:[(0,x.jsx)(a.Col,{flex:r?"auto":void 0,span:r?void 0:24,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:t})}),(0,x.jsx)(a.Col,{span:r?void 0:24,children:s})]})},_n=e=>{let{isConfirm:t=!1}=e;const{main:{mintSelected:s,typeDistribute:r},recipients:{expirationTime:l,globalUnlockTime:o}}=(0,n.useSelector)((e=>e)),{total:c,quantity:d}=Sn(),{balance:u}=vn(s),p=kn(s);return(0,x.jsxs)(a.Row,{justify:t?"space-between":void 0,gutter:[8,8],children:[(0,x.jsx)(a.Col,{xs:24,xl:12,children:(0,x.jsxs)(a.Row,{gutter:[{xs:16,sm:16,md:16,xl:48},{xs:16,sm:16,md:16,xl:48}],children:[(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(Hn,{label:"Recipients",value:(0,x.jsx)(a.Typography.Text,{children:d})})}),r===ve.Airdrop&&(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(Hn,{label:"Unlock time",value:(0,x.jsx)(a.Typography.Text,{children:o?Bt()(o).format(be):"Immediately"})})}),(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(Hn,{label:"Expiration time",value:(0,x.jsx)(a.Typography.Text,{children:l?Bt()(l).format(be):"Unlimited"})})})]})}),(0,x.jsx)(a.Col,{xs:24,xl:12,className:"overview-data",children:(0,x.jsxs)(a.Row,{gutter:[{xs:16,sm:16,md:16,xl:48},{xs:16,sm:16,md:16,xl:48}],children:[(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(Hn,{label:"Your balance",value:(0,x.jsxs)(a.Space,{size:4,children:[(0,x.jsx)(a.Typography.Text,{children:i.util.numeric(u).format("0,0.00[0000]")}),(0,x.jsx)(a.Typography.Text,{children:(0,x.jsx)(A,{mintAddress:s})})]})})}),!t&&(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(Hn,{label:"Total",value:(0,x.jsxs)(a.Space,{size:4,children:[(0,x.jsx)(a.Typography.Title,{level:5,children:c}),(0,x.jsx)(a.Typography.Title,{level:5,children:(0,x.jsx)(A,{mintAddress:s})})]})})}),(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(Hn,{label:"Remaining",value:(0,x.jsxs)(a.Space,{size:4,children:[(0,x.jsx)(a.Typography.Text,{children:i.util.numeric(p).format("0,0.00[0000]")}),(0,x.jsx)(a.Typography.Text,{children:(0,x.jsx)(A,{mintAddress:s})})]})})})]})})]})},Pn=()=>(0,x.jsx)(a.Card,{bordered:!1,style:{borderRadius:8,boxShadow:"unset"},bodyStyle:{padding:"12px 16px"},className:"card-total",children:(0,x.jsx)(_n,{})}),Kn=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;return(0,x.jsxs)(a.Row,{gutter:[16,8],align:"middle",children:[(0,x.jsx)(a.Col,{span:2,children:(0,x.jsxs)(a.Space,{children:[t&&(0,x.jsx)(a.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"No."})]})}),(0,x.jsx)(a.Col,{span:14,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,x.jsx)(a.Col,{span:4,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Amount"})})]})},Wn=e=>{let{accountAddress:t="",amount:s=0,selected:l=!1,onChecked:d=(()=>{}),index:u}=e;const[p,h]=(0,r.useState)(!1),[m,j]=(0,r.useState)(s),g=(0,n.useSelector)((e=>e.file.selectedFile)),y=(0,n.useSelector)((e=>e.setting.decimal)),f=(0,n.useSelector)((e=>e.recipients.globalUnlockTime)),C=(0,n.useDispatch)(),b=c.account.isAddress(t),w=(0,r.useMemo)((()=>!!s&&(!y&&Number(s)%1!==0)),[s,y]),v=(0,r.useCallback)((()=>C(Ne(!!p))),[C,p]);return(0,r.useEffect)((()=>{j(s)}),[s]),(0,r.useEffect)((()=>{v()}),[v]),(0,x.jsxs)(a.Row,{gutter:[16,8],align:"middle",className:"vesting-item",children:[(0,x.jsx)(a.Col,{span:2,children:(0,x.jsxs)(a.Space,{children:[l&&(0,x.jsx)(a.Checkbox,{checked:null===g||void 0===g?void 0:g.includes(t),onChange:e=>d(e.target.checked,t),className:"lightning-checkbox"}),(0,x.jsxs)(a.Typography.Text,{type:"secondary",children:["#",u+1]})]})}),(0,x.jsx)(a.Col,{span:14,children:p?(0,x.jsx)(a.Input,{value:t,name:"accountAddress",className:"recipient-input",autoComplete:"off",disabled:!0}):(0,x.jsx)(a.Tooltip,{title:t,children:(0,x.jsx)(a.Typography.Text,{style:{color:b?"":"#F9575E"},children:i.util.shortenAddress(t)})})}),(0,x.jsx)(a.Col,{span:4,children:(0,x.jsx)(Bn.Z,{value:m,bordered:!1,disabled:!p,style:{padding:0},onChange:e=>{j(e)},className:w?"recipient-input-error":"recipient-input"})}),(0,x.jsx)(a.Col,{span:4,className:p?"":"vesting-action",children:p?(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{onClick:()=>h(!1),type:"text",children:"cancel"}),(0,x.jsx)(a.Button,{style:{padding:0,color:"#42E6EB"},onClick:()=>{if(!b)return;const e=[{address:t,amount:m.toString(),unlockTime:f}];return C(Qe({walletAddress:t,nextRecipientInfos:e})),h(!1)},type:"text",children:"save"})]}):(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{onClick:()=>C(Je(t)),icon:(0,x.jsx)(o.Z,{name:"trash-outline"}),type:"text"}),b&&(0,x.jsx)(a.Button,{onClick:()=>h(!0),icon:(0,x.jsx)(o.Z,{name:"create-outline"}),type:"text"})]})})]})},$n="file",Vn=(0,he.createAsyncThunk)("file/setFileName",(async e=>({fileName:e}))),Jn=(0,he.createAsyncThunk)("file/selectRecipient",(async(e,t)=>{let{checked:s,walletAddress:n}=e,{getState:i}=t;const r=[...i().file.selectedFile];if(!s){const e=r.indexOf(n);r.splice(e,1)}return s&&r.push(n),{selectedFile:r}})),qn=(0,he.createAsyncThunk)("file/removeSelectedFile",(async()=>({selectedFile:[]}))),Gn=(0,he.createAsyncThunk)("file/selectAll",(async e=>({selectedFile:e}))),Qn=(0,he.createSlice)({name:$n,initialState:{fileName:"",selectedFile:[]},reducers:{},extraReducers:e=>{e.addCase(Vn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Jn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(qn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Gn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Xn=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,x.jsxs)(a.Space,{size:24,children:[(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>i(je.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},ei=e=>{let{remove:t=(()=>{})}=e;const[s,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(),[d,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),m=(0,n.useDispatch)(),{file:{fileName:j,selectedFile:g},recipients:{recipientInfos:y}}=(0,n.useSelector)((e=>e)),f=Tn({type:fe.invalid}),C=Tn({type:fe.valid}),b=(e,t)=>m(Jn({checked:e,walletAddress:t})),w=(0,r.useCallback)((()=>{if(null===g||void 0===g||!g.length)return;u(!0);const e={...y};for(const t of g)delete e[t];m(We({recipientInfos:e})),m(qn()),u(!1),i(!1)}),[m,y,g]),{amountError:v}=Cn();return(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,x.jsxs)(a.Row,{gutter:8,children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(o.Z,{name:"document-attach-outline"}),(0,x.jsx)(a.Typography.Text,{style:{color:"inherit"},children:j})]})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,x.jsx)(o.Z,{name:"close-outline"}),onClick:()=>h(!0)})})]})})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{flex:"auto",children:s&&(0,x.jsx)(a.Space,{children:(0,x.jsx)(a.Button,{type:"text",size:"small",icon:(0,x.jsx)(o.Z,{name:"trash-outline"}),onClick:w,disabled:!(null!==g&&void 0!==g&&g.length),children:"Delete"})})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(Xn,{activeKey:l,selected:s,onSelect:i,onCollapsed:c})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Collapse,{activeKey:l,bordered:!1,className:"auto-add-new",children:(0,x.jsx)(a.Collapse.Panel,{header:void 0,children:(0,x.jsx)(Yn,{})},je.activeKey)})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Spin,{spinning:d,children:(0,x.jsx)(a.Card,{bordered:!1,className:"card-content",children:(0,x.jsxs)(a.Row,{gutter:[8,13],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Kn,{selected:s,onChecked:e=>{if(e){const e=f.concat(C).map((e=>{let{address:t}=e;return t}));m(Gn(e))}else m(qn())}})}),f.map(((e,t)=>{let{address:n,amount:i}=e;return(0,x.jsx)(a.Col,{span:24,className:t+1===f.length?"last-item-error-data":"",children:(0,x.jsx)(Wn,{accountAddress:n,amount:i,selected:s,onChecked:b,index:C.length+t})},n+t)})),C.map(((e,t)=>{let{address:n,amount:i}=e;return(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Wn,{accountAddress:n,amount:i,selected:s,onChecked:b,index:t})},n+t)}))]})})})}),v&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:12,children:[(0,x.jsx)(o.Z,{style:{color:"#F9575E"},name:"warning-outline"}),(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(_n,{})})]})}),(0,x.jsx)(In,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:p,setVisible:h,onConfirm:t,onCancel:()=>h(!1),btnText:"delete"})]})};const ti=s.p+"static/media/icon-upload.a3c69638b092ea112d393cdc3d63d2c4.svg",si=s.p+"static/media/example.5ac7e1383bf101857b35.csv",ni=()=>{const e=(0,n.useDispatch)(),[t,s]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)({}),{recipients:{recipientInfos:u,globalUnlockTime:p},main:{mintSelected:m}}=(0,n.useSelector)((e=>e)),j=_t(m)||0,g=(0,r.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>Nn().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;t(s)}}))))(t);if(!j)return;const i={};let r=!1;for(const[e,s]of n)if(i[e]){r=!0;const t=[...i[e]],n=h.utilsBN.decimalize(t[0].amount,j).add(h.utilsBN.decimalize(s,j));i[e]=[{address:e,amount:h.utilsBN.undecimalize(n,j),unlockTime:p}]}else i[e]=[{address:e,amount:s,unlockTime:p}];return r?(d(i),s(!1),l(!0),e(Vn(t.name)),!0):(e(Vn(t.name)),e(We({recipientInfos:i})),s(!1),l(!1),!1)}),[e,p,j]),y=async()=>(e(Ge()),d({}),!0);return Object.values(u).length?(0,x.jsx)(ei,{remove:y}):(0,x.jsxs)(a.Row,{gutter:[8,8],justify:"end",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Spin,{spinning:t,children:(0,x.jsx)(a.Upload.Dragger,{accept:".csv,.txt",beforeUpload:g,onRemove:y,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,x.jsxs)(a.Space,{direction:"vertical",size:24,align:"center",children:[(0,x.jsx)(a.Image,{src:ti,preview:!1}),(0,x.jsxs)(a.Space,{direction:"vertical",size:4,align:"center",children:[(0,x.jsx)(a.Typography.Text,{children:"Click or Drop file to upload"}),(0,x.jsxs)(a.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,x.jsx)("code",{children:".csv"}),","," ",(0,x.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,x.jsx)(o.Z,{name:"download-outline"}),onClick:async()=>{if(!si)return;const e=await C(si)||"";Dn()(e,"example.csv")},children:"Download sample"})}),(0,x.jsx)(In,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",visible:i,setVisible:l,onConfirm:()=>(e(We({recipientInfos:c})),l(!1)),onCancel:()=>{l(!1),e(Vn("")),d({})},btnText:"merge"})]})},ii=()=>(0,x.jsx)(a.Card,{bordered:!1,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(fn,{label:"Fill in recipient information"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ni,{})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(An,{})})]})}),ri=()=>{const e=(0,n.useDispatch)(),{recipients:{recipientInfos:t},main:{mintSelected:s,isTyping:i}}=(0,n.useSelector)((e=>e)),{quantity:l}=Sn(),o=kn(s),c=(0,r.useMemo)((()=>{const e=[];for(const s in t)e.push(t[s][0]);return e}),[t]),{amountError:d}=Cn(),u=(0,r.useCallback)((async()=>{await e(Ee(me.SelectMethod)),await e(Te(xe.manual)),await e(Ge())}),[e]),p=l<=0||d||o<0||i;return(0,x.jsx)(a.Card,{className:"card-lightning",bordered:!1,children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(fn,{label:"Fill in recipient information"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[8,8],children:[c&&c.map(((e,t)=>{let{address:s,amount:n}=e;return(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Yn,{amount:n,walletAddress:s,index:t})},s+t)})),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Yn,{})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Pn,{})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{onClick:u,size:"large",type:"ghost",block:!0,children:"Back"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",type:"primary",onClick:()=>e(Ee(me.ConfirmTransfer)),block:!0,disabled:p,children:"Continue"})})]})})]})})},{manifest:{appId:li}}=ee;const ai=class{constructor(e,t){if(this.db=void 0,this.key=void 0,this.set=async e=>await this.db.setItem(this.key,e),this.get=async()=>await this.db.getItem(this.key)||[],this.update=async e=>{const t=await this.get(),s=t.findIndex((t=>t.distributorAddress===e.distributorAddress));return t[s]=e,this.set(t)},this.append=async e=>{const t=[e,...await this.get()];return this.set(t)},!e)throw new Error("Invalid key");if(this.key=e,!c.account.isAddress(t))throw new Error("Invalid wallet address");const s=new i.PDB(t).createInstance(li);if(!s)throw new Error("Invalid storage");this.db=s}},oi="history",ci={listHistory:void 0},di=(0,he.createAsyncThunk)("history/getHistory",(async e=>{let t,{walletAddress:s,distributors:n}=e;if(!c.account.isAddress(s))throw new Error("Wallet is not connected");const i=new ai("history",s),r=await i.get();if(r&&r.length)return{listHistory:r};const l=Object.keys(n).map((e=>({address:e,...n[e]}))),a=new ie;return await Promise.all(l.map((async e=>{try{var n;t=null!==(n=t)&&void 0!==n&&n.length?[...t]:[];const{address:i,mint:r,total:l,metadata:o,authority:c}=e;if(c.toBase58()!==s)return;const d=await f(o),u=await a.get(d),p={distributorAddress:i,mint:r.toBase58(),total:l.toString(),time:"",treeData:u};t.push(p)}catch(i){}}))),t&&i.set(t),{listHistory:t}})),ui=(0,he.createSlice)({name:oi,initialState:ci,reducers:{},extraReducers:e=>{e.addCase(di.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,pi="advancedMode",hi=(0,he.createAsyncThunk)("advancedMode/setAdvancedMode",(async e=>({isAdvancedMode:e}))),xi=(0,he.createAsyncThunk)("advancedMode/setListUnlockTime",(async e=>({listUnlockTime:e}))),mi=(0,he.createSlice)({name:pi,initialState:{listUnlockTime:[],isAdvancedMode:!1},reducers:{},extraReducers:e=>{e.addCase(hi.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(xi.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var ji=s(97429).Buffer;const{sol:{utility:gi,fee:yi,taxman:fi},manifest:{appId:Ci}}=ee,bi=()=>{const[e,t]=(0,r.useState)(!1),[s,l]=(0,r.useState)(""),[o,p]=(0,r.useState)(!1),{main:{mintSelected:h,typeDistribute:y},setting:{decimal:f},recipients:{recipientInfos:C,expirationTime:b},distributors:w}=(0,n.useSelector)((e=>e)),{wallet:{address:v}}=(0,i.useWallet)(),S=(0,n.useDispatch)(),k=_t(h)||0,{total:T}=Sn(),R=kn(h),{pushHistory:N}=se(),M=(0,r.useMemo)((()=>{if(!C||!k)return;let e=[];for(const s in C)e=e.concat(C[s]);const t=e.map(((e,t)=>{let{amount:s,address:n,unlockTime:i}=e;const r=f?c.utils.decimalize(s,k).toString():s;return{authority:c.account.fromAddress(n),amount:new u.BN(r),startedAt:new u.BN(i/1e3),salt:d.MerkleDistributor.salt(`${Ci}/${y}/${t.toString()}`)}}));return new d.MerkleDistributor(t).toBuffer()}),[C,k,f,y]),D={fee:new u.BN(yi),feeCollectorAddress:fi},B=(0,r.useCallback)((async()=>(await S(Ee(me.SelectMethod)),await S(Ge()),await S(Ee(me.SelectMethod)),await S(Ke(0)),await S(Pe(0)),await S(hi(!1)),await S(xi([])),N(`/${y}`))),[S,N,y]);return(0,x.jsxs)(a.Card,{bordered:!1,className:"card-lightning",children:[(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(fn,{label:"Confirm transfer"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],justify:"center",children:[(0,x.jsx)(a.Col,{children:(0,x.jsxs)(a.Space,{direction:"vertical",size:12,align:"center",children:[(0,x.jsx)(a.Typography.Text,{children:"Total transfer"}),(0,x.jsx)(a.Typography.Title,{level:1,children:T}),(0,x.jsx)(a.Tag,{style:{margin:0,borderRadius:4,color:"rgb(66, 230, 235)",background:"rgba(66, 230, 235, 0.1)",border:"unset"},children:(0,x.jsx)(A,{mintAddress:h})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Card,{bordered:!1,className:"card-total",children:(0,x.jsx)(_n,{isConfirm:!0})})})]})}),(0,x.jsx)(a.Col,{span:24,children:o?(0,x.jsx)(m,{onBack:B}):(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>S(Ee(me.AddRecipient)),block:!0,type:"ghost",children:"BACK"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:async()=>{try{if(!M)throw new Error("Invalid Merkle Data");t(!0);const e=d.MerkleDistributor.fromBuffer(M),s=new ie,n=await s.set(M.toJSON().data),{multihash:{digest:i}}=j.CID.parse(n),r=ji.from(i),{txId:a,distributorAddress:o}=await gi.initializeDistributor({tokenAddress:h,total:e.getTotal(),merkleRoot:e.deriveMerkleRoot(),metadata:r,endedAt:b/1e3,feeOptions:D}),c={total:e.getTotal().toString(),time:(new Date).toString(),mint:h,distributorAddress:o,treeData:M},u=new ai("history",v);return await u.append(c),await S(di({walletAddress:v,distributors:w})),p(!0),g("Airdrop",a),l(`${window.location.origin}/app/${Ci}/redeem/${o}?autoInstall=true`)}catch(e){window.notify({type:"error",description:e.message})}finally{t(!1)}},type:"primary",loading:e,disabled:R<0,block:!0,children:"TRANSFER"})})]})})]}),(0,x.jsx)(hs,{visible:Boolean(s),onClose:()=>l(""),redeemLink:s})]})},wi=e=>{let{placeholder:t,switchText:s,onChange:n,onSwitch:i,label:r,value:l,error:c,checked:d}=e;return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Text,{className:"caption",children:r})}),(0,x.jsx)(a.Col,{children:(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{xs:{order:2},lg:{order:1},children:(0,x.jsx)(a.Typography.Text,{children:s})}),(0,x.jsx)(a.Col,{xs:{order:1},lg:{order:2},children:(0,x.jsx)(a.Switch,{checked:d,onChange:e=>{n(0),i(e)}})})]})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.DatePicker,{placeholder:t,suffixIcon:(0,x.jsx)(o.Z,{name:"time-outline"}),className:"date-option",onChange:e=>n((null===e||void 0===e?void 0:e.valueOf())||0),disabled:d,clearIcon:null,value:l?Bt()(l):null,showTime:{showSecond:!1},placement:"bottomRight"})}),c&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",style:{color:"#F9575E"},children:c})})]})},vi=e=>{let{label:t,description:s,active:n}=e;return(0,x.jsxs)(r.Fragment,{children:[n?(0,x.jsx)(o.Z,{name:"checkbox-sharp",style:{position:"absolute",top:0,right:0,color:"#42E6EB",fontSize:20}}):null,(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:5,children:t})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:s})})]})]})},Si=()=>{const e=(0,n.useDispatch)(),{expirationTime:t,globalUnlockTime:s}=(0,n.useSelector)((e=>e.recipients)),[i,l]=(0,r.useState)(xe.manual),[o,c]=(0,r.useState)(cn),[d,u]=(0,r.useState)(s),[p,h]=(0,r.useState)(t),[m,j]=(0,r.useState)(!0),[g,y]=(0,r.useState)(!0),{pushHistory:f}=se(),C=(0,r.useMemo)((()=>m?0:d),[m,d]),b=(0,r.useMemo)((()=>g?0:p),[p,g]),w=(0,r.useMemo)((()=>p<s&&!m&&p?"Must be less than the expiration time.":""),[p,s,m]),v=(0,r.useMemo)((()=>p<Date.now()&&!g&&p?"Must be greater than current time.":""),[p,g]),S=o===cn||!i||!d&&!m||!p&&!g||p<s&&!g||p<Date.now()&&!g;return(0,r.useEffect)((()=>{e(Ke(C)),e(Pe(b))}),[e,b,C]),(0,x.jsx)(a.Card,{className:"card-lightning",bordered:!1,children:(0,x.jsxs)(a.Row,{gutter:[32,32],align:"middle",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(fn,{label:"Select token type and input method"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(dn,{activeMintAddress:o,onSelect:t=>{c(t),e(Ae(t))}})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:12,direction:"vertical",style:{width:"100%"},children:[(0,x.jsx)(a.Typography.Text,{children:"Choose transfer info input method"}),(0,x.jsx)(a.Radio.Group,{onChange:e=>l(e.target.value),style:{width:"100%"},className:"select-card",children:(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{xs:24,sm:12,md:12,lg:12,children:(0,x.jsx)(a.Radio.Button,{value:xe.manual,children:(0,x.jsx)(vi,{label:"Manual",description:"With a small number of recipients.",active:i===xe.manual})})}),(0,x.jsx)(a.Col,{xs:24,sm:12,md:12,lg:12,children:(0,x.jsx)(a.Radio.Button,{value:xe.auto,children:(0,x.jsx)(vi,{label:"Automatic",description:"Support bulk import with a CSV file.",active:i===xe.auto})})})]})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{xs:24,lg:12,children:(0,x.jsx)(wi,{label:"Unlock time",onSwitch:j,switchText:"Send immediately",onChange:u,placeholder:"Select unlock time",value:d,error:w,checked:m})}),(0,x.jsx)(a.Col,{xs:24,lg:12,children:(0,x.jsx)(wi,{label:"Expiration time",onSwitch:y,switchText:"Unlimited",onChange:h,placeholder:"Select time",value:p,error:v,checked:g})})]})})]})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>f("/airdrop"),block:!0,type:"ghost",children:"Cancel"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>{e(Te(i)),e(Ee(me.AddRecipient))},block:!0,type:"primary",disabled:S,children:"Continue"})})]})})},ki=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,n.useSelector)((e=>e));return t===me.SelectMethod?(0,x.jsx)(Si,{}):t===me.AddRecipient?e===xe.auto?(0,x.jsx)(ii,{}):(0,x.jsx)(ri,{}):(0,x.jsx)(bi,{})},Ti=()=>(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:2,children:"Add new Airdrop"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ki,{})})]}),Ai=e=>{let{type:t}=e;const s=(0,n.useSelector)((e=>e.recipients.recipientInfos)),i=(0,n.useSelector)((e=>e.recipients.expirationTime)),l=(0,r.useCallback)((e=>{if(!i)return!0;for(const{unlockTime:t}of e)if(t>i)return!1;return!0}),[i]);return(0,r.useMemo)((()=>{let e=[];const n=[];for(const i in s){const n=l(s[i]);c.account.isAddress(i)&&n&&t===fe.invalid||(c.account.isAddress(i)&&n||t!==fe.valid)&&(e=e.concat(s[i]))}for(const{address:t,amount:s,unlockTime:i}of e){const e=n.findIndex((e=>{let{address:s}=e;return s===t}));if(-1===e)n.push({address:t,config:[{unlockTime:i,amount:s}]});else{const t={...n[e]};t.config.push({unlockTime:i,amount:s}),n[e]=t}}return n}),[l,s,t])},Ri=()=>{const e=(0,n.useDispatch)(),{main:{isTyping:t,mintSelected:s}}=(0,n.useSelector)((e=>e)),{amountError:i}=Cn(),l=kn(s),o=!!Ai({type:fe.invalid}).length||t||l<0||i,c=(0,r.useCallback)((async()=>{e(Ee(me.SelectMethod))}),[e]);return(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{type:"ghost",size:"large",onClick:c,block:!0,children:"Back"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>e(Ee(me.ConfirmTransfer)),type:"primary",disabled:o,block:!0,children:"Continue"})})]})},Ni=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;return(0,x.jsxs)(a.Row,{gutter:[16,8],align:"middle",wrap:!1,style:{padding:8},children:[(0,x.jsx)(a.Col,{span:2,children:(0,x.jsxs)(a.Space,{children:[t&&(0,x.jsx)(a.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"No."})]})}),(0,x.jsx)(a.Col,{span:5,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Amount & Unlock time"})}),(0,x.jsx)(a.Col,{span:5})]})},Mi=e=>{let{walletAddress:t}=e;const s=(0,n.useSelector)((e=>e.recipients.expirationTime));return(0,x.jsx)(a.Card,{className:"card-overview",bodyStyle:{padding:"13px 16px"},children:(0,x.jsxs)(a.Row,{gutter:[10,10],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(zt,{label:"Wallet Address",value:i.util.shortenAddress(t)})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(zt,{label:"Expiration Time",value:s?Bt()(s).format("DD/MM/YYYY HH:mm"):"Unlimited"})})]})})},Di=e=>{let{walletAddress:t}=e;const s=(0,n.useSelector)((e=>e.recipients.recipientInfos[t])),i=(0,n.useSelector)((e=>e.recipients.expirationTime)),l=(0,n.useSelector)((e=>e.setting.decimal)),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(s),h=(0,n.useDispatch)(),m={unlockTime:0,amount:"",address:t},j=(0,r.useMemo)((()=>{for(const{amount:e,unlockTime:t}of u){if(!t||!e)return!0;if(t>i)return!0;if(!l&&Number(e)%1!==0)return!0}return!1}),[l,i,u]);return(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(a.Button,{onClick:()=>d(!0),icon:(0,x.jsx)(o.Z,{name:"create-outline"}),type:"text"}),(0,x.jsx)(a.Modal,{footer:null,className:"card-lightning",style:{paddingBottom:0},closeIcon:(0,x.jsx)(o.Z,{name:"close-outline"}),visible:c,onCancel:()=>d(!1),children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:4,children:"Edit amount & unlock time"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[u.map(((e,t)=>{let{amount:s,unlockTime:n}=e;return(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:11,children:(0,x.jsx)(a.Input,{name:"amount",className:"recipient-input",placeholder:"Input amount",value:s,onChange:e=>((e,t)=>{const s=[...u];return s[t]={...s[t],amount:e.target.value},p(s)})(e,t)})}),(0,x.jsx)(a.Col,{span:11,children:(0,x.jsx)(a.DatePicker,{placeholder:"Select unlock time",suffixIcon:(0,x.jsx)(o.Z,{name:"time-outline"}),className:n>i&&i?"date-option error":"date-option",onChange:e=>((e,t)=>{const s=[...u];return s[t]={...s[t],unlockTime:e},p(s)})((null===e||void 0===e?void 0:e.valueOf())||0,t),clearIcon:null,showTime:{showSecond:!1},placement:"bottomRight",value:n?Bt()(n):null,format:"MM-DD-YYYY HH:mm"})}),(0,x.jsx)(a.Col,{span:2,children:(0,x.jsx)(a.Button,{onClick:()=>(e=>{const t=[...u];return t.splice(e,1),p(t)})(t),type:"text",icon:(0,x.jsx)(o.Z,{name:"remove-circle-outline"})})}),!l&&Number(s)%1!==0&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:12,children:[(0,x.jsx)(o.Z,{style:{color:"#F9575E"},name:"warning-outline"}),(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})})]})},t)})),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Button,{icon:(0,x.jsx)(o.Z,{name:"add-outline"}),size:"large",type:"dashed",block:!0,style:{background:"transparent"},onClick:()=>{const e=[...u];return e.push(m),p(e)},children:"Add more"})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Mi,{walletAddress:t})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{onClick:()=>d(!1),type:"ghost",children:"Cancel"}),(0,x.jsx)(a.Button,{disabled:j,onClick:()=>(h(Qe({walletAddress:t,nextRecipientInfos:u})),d(!1)),type:"primary",children:"update"})]})})]})})]})},Bi=e=>{let{vestingItem:t,selected:s=!1,onChecked:l=(()=>{}),index:d}=e;const u=(0,n.useSelector)((e=>e.file.selectedFile)),p=(0,n.useSelector)((e=>e.setting.decimal)),h=(0,n.useSelector)((e=>e.recipients.expirationTime)),m=(0,n.useDispatch)(),j=!c.account.isAddress(t.address),g=(0,r.useMemo)((()=>{for(const{amount:e}of t.config)if(!p&&Number(e)%1!==0)return!0;return!1}),[p,t.config]);return(0,x.jsxs)(a.Row,{gutter:[16,8],align:"middle",wrap:!1,className:"vesting-item",children:[(0,x.jsx)(a.Col,{span:2,children:(0,x.jsxs)(a.Space,{children:[s&&(0,x.jsx)(a.Checkbox,{checked:null===u||void 0===u?void 0:u.includes(t.address),onChange:e=>l(e.target.checked,t.address),className:"lightning-checkbox"}),(0,x.jsxs)(a.Typography.Text,{type:"secondary",children:["#",d+1]})]})}),(0,x.jsx)(a.Col,{span:5,children:(0,x.jsx)(a.Tooltip,{title:t.address,children:(0,x.jsx)(a.Typography.Text,{style:{color:j?"#F9575E":""},children:i.util.shortenAddress(t.address)})})}),(0,x.jsx)(a.Col,{span:12,className:g?"recipient-input-error":"",children:(0,x.jsx)(a.Row,{gutter:[16,8],children:t.config.map(((e,t)=>{let{amount:s,unlockTime:n}=e;const i=n>h&&h;return(0,x.jsx)(a.Col,{className:i?"vesting-config-error":"vesting-config",children:(0,x.jsxs)(a.Typography.Text,{className:"caption",children:[s," / ",Bt()(n).format(be)]})},t)}))})}),(0,x.jsx)(a.Col,{span:5,className:"vesting-action",children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{onClick:()=>m(Je(t.address)),icon:(0,x.jsx)(o.Z,{name:"trash-outline"}),type:"text"}),(0,x.jsx)(Di,{walletAddress:t.address})]})})]})},Ii=e=>{let{listUnlockTime:t,setListUnlockTime:s}=e;const i=(0,n.useSelector)((e=>e.recipients.expirationTime)),l=(0,r.useCallback)((e=>!i||!(e>i)),[i]);return(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{md:12,xl:6,children:(0,x.jsx)(a.Button,{onClick:()=>{const e=[...t];return e.push(0),s(e)},icon:(0,x.jsx)(o.Z,{name:"add-outline"}),type:"dashed",block:!0,size:"large",children:"Add unlock time"})}),t.map(((e,n)=>(0,x.jsx)(a.Col,{md:12,xl:6,children:(0,x.jsxs)(a.Row,{gutter:[8,8],justify:"space-between",align:"middle",children:[(0,x.jsx)(a.Col,{span:22,children:(0,x.jsx)(a.DatePicker,{className:"date-option",suffixIcon:(0,x.jsx)(o.Z,{name:"time-outline"}),clearIcon:null,placeholder:"Select time",value:e?Bt()(e):null,onChange:e=>((e,n)=>{const i=[...t];return i[n]=e,s(i)})((null===e||void 0===e?void 0:e.valueOf())||0,n),showTime:{showSecond:!1}})}),(0,x.jsx)(a.Col,{span:2,children:(0,x.jsx)(a.Button,{onClick:()=>(e=>{const n=[...t];return n.splice(e,1),s(n)})(n),type:"text",icon:(0,x.jsx)(o.Z,{name:"remove-circle-outline"})})}),!l(e)&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",style:{color:"#F9575E"},children:"Must be less than expiration time."})})]})},n+e)))]})},Ei=e=>{let{listUnlockTime:t}=e;return(0,x.jsxs)(a.Row,{gutter:[8,8],align:"middle",children:[(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Typography.Text,{className:"caption",type:"secondary",children:"Unlock time"})}),t.map(((e,t)=>(0,x.jsx)(a.Col,{className:"unlock-time-item ",children:(0,x.jsx)(a.Typography.Text,{className:"caption",children:Bt()(e).format("DD-MM-YYYY HH:mm")})},e+t)))]})},Oi=e=>{let{setIsEdit:t,isEdit:s,onSave:n}=e;return s?(0,x.jsx)(a.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:n,children:"Save"}):(0,x.jsx)(a.Button,{onClick:()=>t(!0),icon:(0,x.jsx)(o.Z,{name:"create-outline"}),type:"text",size:"small"})},zi={walletAddress:"",amount:""},Ui=e=>{let{walletAddress:t,amount:s,index:i}=e;const[l,o]=(0,r.useState)(zi),[d,u]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[j,g]=(0,r.useState)([]),[y,f]=(0,r.useState)([]),C=(0,n.useSelector)((e=>e.setting.decimal)),b=(0,n.useSelector)((e=>e.main.mintSelected)),w=(0,n.useSelector)((e=>e.advancedMode.listUnlockTime)),v=(0,n.useSelector)((e=>e.advancedMode.isAdvancedMode)),S=(0,n.useSelector)((e=>e.recipients.recipientInfos)),k=(0,n.useSelector)((e=>e.recipients.expirationTime)),T=_t(b)||0,A=(0,n.useDispatch)(),{calcListAmount:R}=Zn(),N=(0,r.useMemo)((()=>!C&&Number(l.amount)%1!==0),[l,C]),M=(0,r.useMemo)((()=>{const{walletAddress:e,amount:t}=l;if(!c.account.isAddress(e)||!t||N)return!1;if(!y.length)return!1;for(const s of y){if(!s)return!1;if(s>k&&k)return!1}return!0}),[N,k,l,y]),D=()=>{if(!M)return;const{walletAddress:e,amount:s}=l,n=[],i=h.utilsBN.decimalize(s,T),r=R(i,y.length);for(let t=0;t<y.length;t++){const s=y[t];n.push({address:e,amount:h.utilsBN.undecimalize(r[t],T),unlockTime:s})}return S[e]&&!d?(g(n),m(!0)):(t||o(zi),f([]),u(!1),A(Ve({walletAddress:e,nextRecipients:n})))},B=(0,r.useCallback)((()=>{if(!c.account.isAddress(t)||!t)return f(w);const e=S[t],s=[];for(const{unlockTime:t}of e)s.push(t);return f(s)}),[w,S,t]),I=(0,r.useCallback)((()=>c.account.isAddress(t)&&s&&t?o({walletAddress:t,amount:s}):o(zi)),[s,t]),E=(0,r.useMemo)((()=>t&&void 0!==i?i+1:Object.keys(S).length+1),[i,S,t]),O=(0,r.useCallback)((()=>(!s&&!t||d)&&(l.walletAddress||l.amount||d)?A(Ne(!0)):A(Ne(!1))),[s,A,l.amount,l.walletAddress,d,t]);return(0,r.useEffect)((()=>{B()}),[B]),(0,r.useEffect)((()=>{I()}),[I]),(0,r.useEffect)((()=>{O()}),[O]),(0,x.jsxs)(a.Row,{gutter:[16,16],align:"middle",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsxs)(a.Col,{flex:"auto",children:["Wallet address #",E]}),(0,x.jsx)(a.Col,{children:t?(0,x.jsx)(Oi,{isEdit:d,setIsEdit:u,onSave:D}):(0,x.jsx)(a.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:D,disabled:!M,children:"OK"})})]})}),(0,x.jsx)(a.Col,{span:19,children:(0,x.jsx)(a.Input,{value:l.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:e=>{o({...l,[e.target.name]:e.target.value})},className:"recipient-input",autoComplete:"off",disabled:!d&&!!t})}),(0,x.jsx)(a.Col,{span:5,children:(0,x.jsx)(Bn.Z,{value:l.amount,name:"amount",placeholder:"Amount",onChange:e=>o({...l,amount:e}),autoComplete:"off",className:N?"recipient-input-error":"recipient-input",disabled:!d&&!!t})}),(0,x.jsx)(a.Col,{span:24,children:!d&&v?(0,x.jsx)(Ei,{listUnlockTime:y}):(0,x.jsx)(Ii,{listUnlockTime:y,setListUnlockTime:f})}),(0,x.jsx)(In,{btnText:"Replace",description:"Do you want replace this recipient",title:"Recipient existed",onCancel:()=>m(!1),onConfirm:()=>(f([]),u(!1),m(!1),t||o(zi),A(Ve({walletAddress:l.walletAddress,nextRecipients:j}))),setVisible:m,visible:p})]})},Zi=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,x.jsxs)(a.Space,{size:24,children:[(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>i(je.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},Fi=e=>{let{remove:t=(()=>{})}=e;const[s,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(),[d,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),m=(0,n.useDispatch)(),{file:{fileName:j,selectedFile:g},recipients:{recipientInfos:y}}=(0,n.useSelector)((e=>e)),f=Ai({type:fe.valid}),C=Ai({type:fe.invalid}),b=(e,t)=>m(Jn({checked:e,walletAddress:t})),w=(0,r.useCallback)((()=>{if(null===g||void 0===g||!g.length)return;u(!0);const e={...y};for(const t of g)delete e[t];m(We({recipientInfos:e})),m(qn()),u(!1),i(!1)}),[m,y,g]),{amountError:v}=Cn();return(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,x.jsxs)(a.Row,{gutter:8,children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(o.Z,{name:"document-attach-outline"}),(0,x.jsx)(a.Typography.Text,{style:{color:"inherit"},children:j})]})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,x.jsx)(o.Z,{name:"close-outline"}),onClick:()=>h(!0)})})]})})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{flex:"auto",children:s&&(0,x.jsx)(a.Space,{children:(0,x.jsx)(a.Button,{type:"text",size:"small",icon:(0,x.jsx)(o.Z,{name:"trash-outline"}),onClick:w,disabled:!(null!==g&&void 0!==g&&g.length),children:"Delete"})})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(Zi,{activeKey:l,selected:s,onSelect:i,onCollapsed:c})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Collapse,{activeKey:l,bordered:!1,className:"auto-add-new",children:(0,x.jsx)(a.Collapse.Panel,{header:void 0,children:(0,x.jsx)(Ui,{})},je.activeKey)})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Spin,{spinning:d,children:(0,x.jsx)(a.Card,{bordered:!1,className:"card-content",children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ni,{selected:s,onChecked:e=>{if(e){const e=C.concat(f).map((e=>{let{address:t}=e;return t}));m(Gn(e))}else m(qn())}})}),C.map(((e,t)=>(0,x.jsx)(a.Col,{span:24,className:t+1===C.length?"last-item-error-data":"",children:(0,x.jsx)(Bi,{vestingItem:e,selected:s,onChecked:b,index:f.length+t})},e.address+t))),f.map(((e,t)=>(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Bi,{vestingItem:e,selected:s,onChecked:b,index:t})},e.address+t)))]})})})}),v&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:12,children:[(0,x.jsx)(o.Z,{style:{color:"#F9575E"},name:"warning-outline"}),(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(_n,{})})]})}),(0,x.jsx)(In,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:p,setVisible:h,onConfirm:t,onCancel:()=>h(!1),btnText:"delete"})]})},Li=s.p+"static/media/example-vesting.bbcabd65516f37fd30f7.csv",Yi=e=>{let{visible:t,description:s,onClose:n,addresses:i}=e;return(0,x.jsx)(a.Modal,{visible:t,closeIcon:(0,x.jsx)(o.Z,{name:"close-outline"}),onCancel:n,footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:15,align:"baseline",children:[(0,x.jsx)(o.Z,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,x.jsxs)(a.Space,{size:4,direction:"vertical",children:[(0,x.jsx)(a.Typography.Title,{level:4,children:"Can't import file!"}),s,i&&i.map((e=>(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(o.Z,{style:{color:"#F9575E"},name:"close-circle-outline"}),(0,x.jsx)(a.Typography.Text,{children:e})]},e)))]})]})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,x.jsx)(a.Button,{onClick:n,type:"primary",children:"try again"})})]})})},Hi=()=>{const e=(0,n.useDispatch)(),[t,s]=(0,r.useState)(!1),[i,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),{calcListAmount:m}=Zn(),{recipients:{recipientInfos:j},main:{mintSelected:g}}=(0,n.useSelector)((e=>e)),y=_t(g)||0,f=(0,r.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>Nn().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;t(s)}}))))(t),i={},r=[];let a=!1;for(const e of n){if(e.length<=2)return s(!1),p(!0);const t=e[0],n=h.utilsBN.decimalize(e[1],y);if(i[t]){r.push(t),a=!0;continue}const l=[],o=e.length-2,c=m(n,o);for(let i=2;i<e.length;i++){const n=new Date(e[i]).getTime();if(!n)return d(!0),s(!1),p(!0);const r=c[i-2];l.push({address:t,amount:h.utilsBN.undecimalize(r,y),unlockTime:n})}i[t]=l}return a?(l(r),s(!1),p(!0)):(e(Vn(t.name)),e(We({recipientInfos:i})),s(!1),!1)}),[m,e,y]),b=async()=>(e(Ge()),!0),w=(0,r.useMemo)((()=>c?(0,x.jsxs)(a.Typography.Text,{children:["Wrong date format. It\u2019s should be"," ",(0,x.jsx)("span",{style:{color:"#42E6EB"},children:"MM-DD-YYYY HH:mm."})]}):i.length?(0,x.jsx)(a.Typography.Text,{children:"There are some wrong wallet addresses:"}):(0,x.jsx)(a.Typography.Text,{children:"Wrong format file"})),[c,i]);return Object.values(j).length?(0,x.jsx)(Fi,{remove:b}):(0,x.jsxs)(a.Row,{gutter:[8,8],justify:"end",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Spin,{spinning:t,children:(0,x.jsx)(a.Upload.Dragger,{accept:".csv,.txt",beforeUpload:f,onRemove:b,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,x.jsxs)(a.Space,{direction:"vertical",size:24,align:"center",children:[(0,x.jsx)(a.Image,{src:ti,preview:!1}),(0,x.jsxs)(a.Space,{direction:"vertical",size:4,align:"center",children:[(0,x.jsx)(a.Typography.Text,{children:"Click or Drop file to upload"}),(0,x.jsxs)(a.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,x.jsx)("code",{children:".csv"}),","," ",(0,x.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,x.jsx)(o.Z,{name:"download-outline"}),onClick:async()=>{if(!Li)return;const e=await C(Li)||"";Dn()(e,"example.csv")},children:"Download sample"})}),(0,x.jsx)(Yi,{visible:u,onClose:()=>(l([]),d(!1),p(!1)),addresses:i,description:w})]})},_i=()=>(0,x.jsx)(a.Card,{bordered:!1,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(fn,{label:"Fill in recipient information"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Hi,{})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ri,{})})]})}),Pi=e=>{let{walletAddress:t,amount:s,index:i}=e;return(0,n.useSelector)((e=>e.advancedMode.isAdvancedMode))?(0,x.jsx)(Ui,{index:i,amount:s,walletAddress:t}):(0,x.jsx)(Yn,{amount:s,walletAddress:t,index:i})},Ki=()=>{const{recipients:{recipientInfos:e},main:{mintSelected:t,isTyping:s}}=(0,n.useSelector)((e=>e)),{quantity:i}=Sn(),l=kn(t),o=_t(t)||0,{amountError:c}=Cn(),d=(0,n.useDispatch)(),u=(0,r.useMemo)((()=>{const t=[];if(!o)return t;for(const s in e){const n=e[s];let i=new(p())(0);for(const{amount:e}of n){const t=h.utilsBN.decimalize(e,o);i=i.add(t)}const r={address:s,amount:h.utilsBN.undecimalize(i,o),unlockTime:0};t.push(r)}return t}),[o,e]),m=(0,r.useCallback)((async()=>{await d(Ge()),await d(hi(!1)),await d(xi([])),await d(Ke(0)),d(Ee(me.SelectMethod)),d(Te(xe.manual))}),[d]),j=i<=0||c||l<0||s;return(0,x.jsx)(a.Card,{className:"card-lightning",bordered:!1,children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(fn,{label:"Fill in recipient information"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[u&&u.map(((e,t)=>{let{address:s,amount:n}=e;return(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Pi,{walletAddress:s,amount:n,index:t})},s+t)})),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Pi,{})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Pn,{})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{onClick:m,size:"large",type:"ghost",block:!0,children:"Back"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",type:"primary",onClick:()=>d(Ee(me.ConfirmTransfer)),block:!0,disabled:j,children:"Continue"})})]})})]})})},Wi=()=>{const[e,t]=(0,r.useState)(!0),[s,i]=(0,r.useState)(cn),l=(0,n.useSelector)((e=>e.main.methodSelected)),o=(0,n.useSelector)((e=>e.advancedMode.isAdvancedMode)),c=(0,n.useSelector)((e=>e.advancedMode.listUnlockTime)),d=(0,n.useSelector)((e=>e.recipients.expirationTime)),u=(0,n.useSelector)((e=>e.recipients.globalUnlockTime)),p=(0,n.useSelector)((e=>e.recipients.globalConfigs.frequency)),h=(0,n.useSelector)((e=>e.recipients.globalConfigs.distributeIn)),m=(0,n.useDispatch)(),{pushHistory:j}=se(),g=e=>m($e({configs:e})),y=(0,r.useMemo)((()=>{if(e||!d)return"";if(d<Date.now())return"Must be greater than current time.";return d<u+30*h*Ce&&l===xe.manual?"Must be greater than the total vesting time.":""}),[h,d,e,l,u]),f=(0,r.useMemo)((()=>s===cn||!l||(o?!d&&!e||!c.length||c.includes(0):l===xe.manual?!u||d<u&&!e||d-u<30*h*Ce&&!e:!d&&!e)),[s,o,h,d,e,l,u,c]);return(0,x.jsx)(a.Card,{className:"card-lightning",bordered:!1,children:(0,x.jsxs)(a.Row,{gutter:[32,32],align:"middle",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(fn,{label:"Select token type and input method"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(dn,{activeMintAddress:s,onSelect:e=>{i(e),m(Ae(e))}})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Text,{children:"Choose transfer info input method"})}),(0,x.jsx)(a.Col,{children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Typography.Text,{children:"Advanced mode"}),(0,x.jsx)(a.Switch,{checked:o,onChange:e=>(e&&m(Te(xe.manual)),m(hi(e)))})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Radio.Group,{onChange:e=>m(Te(e.target.value)),style:{width:"100%"},className:"select-card",value:l,children:(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{xs:24,sm:12,md:12,lg:12,children:(0,x.jsx)(a.Radio.Button,{value:xe.manual,children:(0,x.jsx)(vi,{label:"Manual",description:"With a small number of recipients.",active:l===xe.manual})})}),(0,x.jsx)(a.Col,{xs:24,sm:12,md:12,lg:12,children:(0,x.jsx)(a.Radio.Button,{disabled:o,value:xe.auto,children:(0,x.jsx)(vi,{label:"Automatic",description:"Support bulk import with a CSV file.",active:l===xe.auto})})})]})})})]})}),o&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ii,{listUnlockTime:c,setListUnlockTime:e=>m(xi(e))})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[l===xe.manual&&!o&&(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(a.Col,{xs:24,md:12,xl:6,children:(0,x.jsx)(Un,{unlockTime:u,onChange:e=>m(Ke(e))})}),(0,x.jsx)(a.Col,{xs:24,md:12,xl:6,children:(0,x.jsx)(Ye,{frequency:p,onChange:e=>g({frequency:e})})}),(0,x.jsx)(a.Col,{xs:24,md:12,xl:6,children:(0,x.jsx)(Ze,{distributeIn:h,onChange:e=>g({distributeIn:e})})})]}),(0,x.jsx)(a.Col,{xs:24,md:12,xl:6,children:(0,x.jsx)(wi,{label:"Expiration time",onSwitch:t,switchText:"Unlimited",onChange:t=>m(Pe(e?0:t)),placeholder:"Select time",value:d,error:y,checked:e})})]})})]})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>j("/vesting"),block:!0,type:"ghost",children:"Cancel"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>{m(Te(l)),m(Ee(me.AddRecipient))},block:!0,type:"primary",disabled:f,children:"Continue"})})]})})},$i=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,n.useSelector)((e=>e));return t===me.SelectMethod?(0,x.jsx)(Wi,{}):t===me.AddRecipient?e===xe.auto?(0,x.jsx)(_i,{}):(0,x.jsx)(Ki,{}):(0,x.jsx)(bi,{})},Vi=()=>(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:2,children:"Add new Vesting"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)($i,{})})]}),Ji=()=>{const e=(0,n.useSelector)((e=>e.distributors)),t=(0,n.useDispatch)(),{wallet:{address:s}}=(0,i.useWallet)();return(0,r.useEffect)((()=>{t(di({walletAddress:s,distributors:e}))}),[t,s,e]),(0,x.jsx)(r.Fragment,{})},{sol:{utility:qi}}=ee,Gi="distributor",Qi=(0,he.createAsyncThunk)("distributor/getDistributors",(async()=>{const{account:e}=qi.program;let t={};const s=await e.distributor.all();for(const{publicKey:n,account:i}of s){t[n.toBase58()]=i}return t})),Xi=(0,he.createAsyncThunk)("distributor/upsetDistributor",(e=>{let{address:t,distributorData:s}=e;return{[t]:s}})),er=(0,he.createSlice)({name:Gi,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Qi.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Xi.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{utility:tr}}=ee;let sr=0;const nr=()=>{const e=(0,n.useDispatch)(),t=(0,r.useCallback)((async()=>{sr=tr.program.provider.connection.onProgramAccountChange(tr.program.programId,(t=>{const s=tr.parseDistributorData(t.accountInfo.data);e(Xi({address:t.accountId.toBase58(),distributorData:s}))}),"confirmed",[{dataSize:160}])}),[e]);return(0,r.useEffect)((()=>(e(Qi()),t(),()=>{(async()=>{await tr.removeListener(sr),sr=0})()})),[e,t]),(0,x.jsx)(r.Fragment,{})},{sol:{utility:ir}}=ee,rr="Receipts",lr=(0,he.createAsyncThunk)("Receipts/getReceipts",(async e=>{let{authorityAddress:t}=e;if(!c.account.isAddress(t))throw new Error("Invalid address");const s=await ir.program.account.receipt.all([{memcmp:{offset:8,bytes:t}}]);let n={};for(const i of s)n[i.publicKey.toBase58()]=i.account;return n})),ar=(0,he.createAsyncThunk)("Receipts/upsetReceipt",(e=>{let{address:t,receipt:s}=e;return{[t]:s}})),or=(0,he.createSlice)({name:rr,initialState:{},reducers:{},extraReducers:e=>{e.addCase(lr.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ar.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{utility:cr}}=ee;let dr=0;const ur=()=>{const e=(0,n.useDispatch)(),{wallet:{address:t}}=(0,i.useWallet)(),s=(0,r.useCallback)((async()=>{try{if(!c.account.isAddress(t))return;await e(lr({authorityAddress:t})).unwrap()}catch(s){return window.notify({type:"error",description:"Cannot fetch data of receipts"})}}),[e,t]),l=(0,r.useCallback)((async()=>{dr=cr.program.provider.connection.onProgramAccountChange(cr.program.programId,(t=>{const s=cr.parseReceiptData(t.accountInfo.data);e(ar({address:t.accountId.toBase58(),receipt:s}))}),"confirmed",[{dataSize:128},{memcmp:{offset:8,bytes:t}}])}),[e,t]);return(0,r.useEffect)((()=>(l(),s(),()=>{(async()=>{await cr.removeListener(dr),dr=0})()})),[s,l]),(0,x.jsx)(r.Fragment,{})};var pr=s(97429).Buffer;const{sol:{utility:hr}}=ee,xr="listReceived",mr={listReceived:void 0},jr=(0,he.createAsyncThunk)("listReceived/fetchListReceived",(async e=>{let t,{distributors:s}=e;const n=Object.keys(s).map((e=>({address:e,...s[e]}))),i=new ie,r=await window.sentre.wallet.getAddress();if(!r)throw new Error("Please connect wallet first!");return await Promise.all(n.map((async e=>{let{metadata:s,mint:n,authority:l,address:a}=e;try{const e=await f(s),c=await i.get(e),u=d.MerkleDistributor.fromBuffer(pr.from(c)).receipients,p=n.toBase58(),h=l.toBase58();for(let s=0;s<u.length;s++){t=t?{...t}:{};const{authority:e,salt:n}=u[s];if(r===e.toBase58()){var o;const e={mintAddress:p,sender:h,distributorAddress:a,receiptAddress:await hr.deriveReceiptAddress(n,a),recipientData:u[s],index:s};if(null!==(o=t)&&void 0!==o&&o[a]){const{children:s}=t[a];let n=[];s||(n=[{...t[a]}]),s&&(n=[...s]),n.push(e),t[a].children=n;continue}t[a]=e}}}catch(c){}}))),{listReceived:t}})),gr=(0,he.createSlice)({name:xr,initialState:mr,reducers:{},extraReducers:e=>{e.addCase(jr.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,yr=()=>{const e=(0,n.useSelector)((e=>e.distributors)),t=(0,n.useDispatch)(),s=(0,r.useCallback)((()=>t(jr({distributors:e}))),[t,e]);return(0,r.useEffect)((()=>{s()}),[s]),(0,x.jsx)(r.Fragment,{})},fr=s.p+"static/media/background-LT.4c9e016f719ffe61dc63.png",{Content:Cr}=a.Layout,br=()=>{const[e,t]=(0,r.useState)(!1),{appRoute:s}=se(),{setBackground:n}=(0,i.useUI)(),{ui:{width:c}}=(0,i.useUI)(),d=c<992,u=!d||e,p=d?"sidebar mobile":"sidebar",h=d?350:231;return(0,r.useEffect)((()=>{n({light:fr,dark:fr})}),[n]),(0,x.jsxs)(a.Layout,{className:"main-layout",children:[(0,x.jsx)(a.Drawer,{placement:"left",className:p,width:h,mask:d,visible:u,onClose:()=>t(!1),forceRender:!0,children:(0,x.jsx)(st,{})}),(0,x.jsxs)(a.Layout,{children:[(0,x.jsxs)(Cr,{children:[(0,x.jsx)(a.Row,{justify:"center",children:(0,x.jsx)(a.Col,{xs:24,xxl:16,children:(0,x.jsxs)(l.Switch,{children:[(0,x.jsx)(l.Route,{exact:!0,path:`${s}/dashboard`,component:is}),(0,x.jsx)(l.Route,{exact:!0,path:`${s}/vesting`,component:sn}),(0,x.jsx)(l.Route,{exact:!0,path:`${s}/vesting/add-new`,component:Vi}),(0,x.jsx)(l.Route,{exact:!0,path:`${s}/airdrop/add-new`,component:Ti}),(0,x.jsx)(l.Route,{exact:!0,path:`${s}/airdrop`,component:on}),(0,x.jsx)(l.Route,{exact:!0,path:`${s}/redeem/:distributorAddress`,component:pe}),(0,x.jsx)(l.Redirect,{from:s,to:`${s}/dashboard`})]})})}),d&&(0,x.jsx)(a.Button,{shape:"circle",className:"btn-sidebar",icon:(0,x.jsx)(o.Z,{name:e?"close-outline":"menu-outline"}),onClick:()=>t(!e)})]}),(0,x.jsx)(nr,{}),(0,x.jsx)(ur,{}),(0,x.jsx)(Ji,{}),(0,x.jsx)(yr,{})]})]})},wr=e=>{let{children:t}=e;return(0,x.jsxs)("div",{className:"background-container",children:[t,Array.apply(null,Array(20)).map(((e,t)=>(0,x.jsx)("div",{className:"circle-container",children:(0,x.jsx)("div",{className:"circle"})},t)))]})};var vr=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const Sr={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof G.PublicKey||e instanceof p()||vr.isBuffer(e)}},kr=(0,he.configureStore)({middleware:e=>e(Sr),devTools:!1,reducer:{main:De,steps:Oe,setting:mn,file:Qn,history:ui,distributors:er,recipients:Xe,advancedMode:mi,receipts:or,listReceived:gr}});var Tr=s(45597);const{manifest:{appId:Ar}}=ee,Rr=()=>(0,x.jsx)(i.UIProvider,{appId:Ar,antd:{prefixCls:Ar},children:(0,x.jsx)(i.MintProvider,{children:(0,x.jsx)(i.PoolProvider,{children:(0,x.jsx)(i.AccountProvider,{children:(0,x.jsx)(i.WalletProvider,{children:(0,x.jsx)(n.Provider,{store:kr,children:(0,x.jsx)(wr,{children:(0,x.jsx)(br,{})})})})})})})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.9c9c3fa1792c813f11b8.md"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.d264a78c5dbcc2a84eed.png"},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.93b6273e28ab503d8029.png"},43094:()=>{},69159:()=>{},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},89408:()=>{},47956:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx-src_static_base_example-vesting_csv-src_static_base_example_csv-src_sta-f3a93c.7ccfb3f3.chunk.js.map