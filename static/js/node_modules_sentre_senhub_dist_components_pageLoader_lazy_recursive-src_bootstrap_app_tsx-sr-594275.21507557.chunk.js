(globalThis.webpackChunklightning_tunnel=globalThis.webpackChunklightning_tunnel||[]).push([["node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx-sr-594275","node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive"],{90571:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=90571,e.exports=t},98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>c,default:()=>d});var n,i,l,r=s(92950);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a.apply(this,arguments)}function o(e,t){let{title:s,titleId:o,...c}=e;return r.createElement("svg",a({width:96,height:96,viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},c),s?r.createElement("title",{id:o},s):null,n||(n=r.createElement("rect",{width:96,height:96,rx:24,fill:"#42E6EB"})),i||(i=r.createElement("path",{d:"M35.528 47.6849L67.0423 15.9004L67.9877 15L52.1855 40.4816L61.1896 39.0409L48.809 54.2128L57.4079 53.9427L29 81L41.3356 61.4161L33.9523 61.7763L44.1719 46.9195L35.528 47.6849Z",fill:"#233333"})),l||(l=r.createElement("path",{opacity:.5,fillRule:"evenodd",clipRule:"evenodd",d:"M48 74C62.3594 74 74 62.3594 74 48C74 40.004 70.3905 32.851 64.7119 28.0816L66.8996 24.7006C73.6723 30.2011 78 38.5951 78 48C78 64.5685 64.5685 78 48 78C44.7357 78 41.5931 77.4786 38.6511 76.5146L42.0603 73.3184C43.968 73.7642 45.9565 74 48 74ZM32.8095 69.1033C26.262 64.382 22 56.6887 22 48C22 33.6406 33.6406 22 48 22C50.4385 22 52.7986 22.3357 55.0366 22.9634L58.2158 19.7842C55.0272 18.6296 51.5871 18 48 18C31.4315 18 18 31.4315 18 48C18 58.0387 22.9307 66.9258 30.5025 72.3715L32.8095 69.1033Z",fill:"#233333"})))}const c=r.forwardRef(o),d=s.p+"static/media/logo.edd6e68b96629106774ae0fdbf3926d7.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return l.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return r.default}});var n=a(s(70854)),i=a(s(27803)),l=a(s(98463)),r=a(s(83272));function a(e){return e&&e.__esModule?e:{default:e}}const o=[n.default,i.default];t.h0=o},66283:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>al,__esModule:()=>ll.X$,logo:()=>ll.jY,panels:()=>ll.h0,readme:()=>ll.ng});var n=s(55754),i=s(77147),l=s(92950),r=s(45055),a=s(32659),o=s(43785),c=s(95418),d=s(97425),u=s(48744),p=s.n(u),h=s(46029),x=s(45263);const m=e=>{let{onBack:t}=e;return(0,x.jsx)(a.Button,{size:"large",type:"primary",block:!0,onClick:t,children:"Home"})};var j=s(32743);const y=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(i.util.explorer(t),"_blank")}),f=e=>window.notify({type:"error",description:e.message}),g=e=>{const t=new Uint8Array([18,32]),s=new Uint8Array(t.length+(null===e||void 0===e?void 0:e.length));s.set(t),s.set(e,t.length);return j.CID.decode(s).toString()},C=async e=>fetch(e).then((function(e){var t;let s=null===(t=e.body)||void 0===t?void 0:t.getReader(),n=new TextDecoder("utf-8");return null===s||void 0===s?void 0:s.read().then((function(e){return n.decode(e.value)}))})),b=async e=>{const t=e.join(",");let s=`https://api.coingecko.com/api/v3/simple/price?ids=${t}&vs_currencies=usd`;const n=await i.DataLoader.load("fetchMulCGK"+t,(()=>fetch(s).then((e=>e.json())))),l={};for(const i in n)l[i]=n[i].usd;return l};var w=s(66073);const v={appId:"lightning_tunnel",url:"https://descartesnetwork.github.io/lightning-tunnel/index.js"},S={development:{...v},production:{...v}};var T=s(71256);const A=class{constructor(){this._wallet=window.sentre.wallet,this._publicKey=new T.PublicKey("GuestAccount11111111111111111111111111111111"),this._init=async()=>{const e=await this._wallet.getAddress();this._publicKey=new T.PublicKey(e)},this.signTransaction=async e=>this._wallet.signTransaction(e),this.signAllTransactions=async e=>{let t=[];for(const s of e){const e=await this.signTransaction(s);t.push(e)}return t},this._init()}get publicKey(){return console.warn("This is an async getter for interface consistency. Please do not fully rely on this function."),this._publicKey}},k={devnet:{node:i.rpc,utility:new d.Utility(new A,i.rpc,"AKTU61s8NJ8zJATQiceREdhXbedRnKrd1BVgnCuxmD2F"),fee:1e6,taxman:"8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"},testnet:{node:i.rpc,utility:new d.Utility(new A,i.rpc),fee:1e6,taxman:"8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"},mainnet:{node:i.rpc,utility:new d.Utility(new A,i.rpc),fee:1e6,taxman:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}},R={manifest:S[i.env],sol:k[i.net]},{manifest:{appId:N}}=R,D=()=>{const e=(0,r.useLocation)(),t=(0,r.useHistory)(),s=(0,l.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),n=(0,l.useCallback)((e=>s.get(e)),[s]),i=(0,l.useCallback)((e=>{const t=new URLSearchParams;for(const s in e)t.set(s,e[s]);return t.toString()}),[]),a=(0,l.useMemo)((()=>`/app/${N}`),[]);return{getQuery:n,generateQuery:i,pushHistory:(0,l.useCallback)((e=>t.push(`${a}${e}`)),[a,t]),appRoute:a}};var B=s(76026);const E=class{constructor(){this.provider=void 0,this.set=async e=>{const t=new File([JSON.stringify(e)],"file",{type:"application/json"});return await this.provider.put([t])},this._wrapGet=async e=>new Promise((async(t,s)=>{setTimeout((()=>{t(null)}),3e4);const n=await this.provider.get(e);t(n)})),this.get=async e=>i.DataLoader.load(`ipfs^${e}`,(async()=>{const t=await this._wrapGet(e),s=(await(null===t||void 0===t?void 0:t.files())||[])[0],n=new FileReader;return new Promise(((e,t)=>{try{if(!s)throw new Error("Cannot read empty file");n.onload=()=>{var t;const s=null===(t=n.result)||void 0===t?void 0:t.toString();if(!s)throw new Error("Cannot read empty file");return e(JSON.parse(s))},n.readAsText(s)}catch(i){return t(i.message)}}))})),this.provider=new B.xk({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDg4MzdCZUI2ODM5MTcwODZjQUI3OTU0MzI3ZTgwOWU1ZTlCZTc2NTEiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTU0NTU5NzI5MjAsIm5hbWUiOiJTZW50cmUifQ.Jf7oQOKMrBxp5morvs7DR_As4EU9Y5WybyuvY1teFN8",endpoint:new URL("https://api.web3.storage")})}};const I=s.p+"static/media/redeem.7e0fa96ccc80d536f7730bb34ab5753b.svg";const M=s.p+"static/media/redeem_success.8bde41be38896c8e01a5d6ec87a1e40e.svg";const O=s.p+"static/media/not_member.27313d62e5aba95e40f44df8f5f39d28.svg";var z=s(97429).Buffer;const{sol:{utility:F,taxman:U,fee:L}}=R,_=()=>{const[e,t]=(0,l.useState)(!1),[s,p]=(0,l.useState)(!1),[j,C]=(0,l.useState)(),[b,v]=(0,l.useState)(0),[S,T]=(0,l.useState)(),[A,k]=(0,l.useState)(!0),[R,N]=(0,l.useState)(!0),[B,_]=(0,l.useState)(""),H=(0,n.useSelector)((e=>e.receipts)),W=(0,i.useGetMintDecimals)(),Y=(0,i.useWalletAddress)(),{pushHistory:P}=D(),Z=(0,r.useParams)().distributorAddress,V={fee:new u.BN(L),feeCollectorAddress:U},K=(0,l.useCallback)((async()=>{if(!Z)return;const e=new E;p(!0);try{const t=await F.program.account.distributor.fetch(Z);T(t);const s=await g(t.metadata),n=await e.get(s),i=d.MerkleDistributor.fromBuffer(z.from(n));return C(i)}catch(t){f(t)}finally{p(!1)}}),[Z]),$=(0,l.useMemo)((()=>{if(!j)return;const e=j.receipients;for(const t of e)if(Y===t.authority.toBase58())return t;return N(!1),k(!1)}),[j,Y]),G=(0,l.useCallback)((async()=>{if(S&&$&&j)try{const{salt:e}=$,t=await F.deriveReceiptAddress(e,Z),s=H[t];if(!s)return;const{amount:n}=s;return _(h.utilsBN.undecimalize(n,b)),k(!1)}catch(e){}}),[b,S,Z,j,H,$]),J=(0,l.useCallback)((async()=>{if(!S)return;const e=S.mint.toBase58();try{const t=await W({mintAddress:e})||0;return v(t)}catch(t){return v(0)}}),[S,W]);(0,l.useEffect)((()=>{J()}),[J]),(0,l.useEffect)((()=>{K()}),[K]),(0,l.useEffect)((()=>{G()}),[G]);const q=(0,l.useMemo)((()=>R?B?M:I:O),[B,R]);return(0,x.jsx)(a.Row,{gutter:[24,24],justify:"center",className:"lightning-container",children:(0,x.jsx)(a.Col,{xs:24,md:16,lg:14,children:(0,x.jsx)(a.Card,{style:{minHeight:430},loading:s,className:"card-lightning",bordered:!1,children:(0,x.jsxs)(a.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,x.jsx)(a.Col,{span:24,style:{textAlign:"left"},children:(0,x.jsx)(a.Button,{type:"text",icon:(0,x.jsx)(o.default,{name:"arrow-back-outline"}),onClick:()=>P(""),style:{margin:-12},children:"Back"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Image,{src:q,preview:!1})}),(0,x.jsx)(a.Col,{span:24,children:R?(0,x.jsxs)(a.Space,{direction:"vertical",size:4,children:[(0,x.jsxs)(a.Typography.Title,{level:3,children:["Redemption ",B&&"successfully","!"]}),(0,x.jsxs)(a.Space,{size:4,children:[(0,x.jsx)(a.Typography.Text,{type:"secondary",children:B?"You took":"Let's take"}),(0,x.jsxs)(a.Typography.Title,{level:5,style:{color:"#42E6EB"},children:[c.utils.undecimalize(BigInt((null===$||void 0===$?void 0:$.amount.toString())||0),b)," ",(0,x.jsx)(w.MintSymbol,{mintAddress:(null===S||void 0===S?void 0:S.mint.toBase58())||""})]})]})]}):(0,x.jsx)(a.Typography.Title,{level:3,children:"You are not in the list!"})}),(0,x.jsx)(a.Col,{span:24,children:A?(0,x.jsx)(a.Button,{type:"primary",onClick:async()=>{if(!$||!j)return;const e=j.deriveProof($);if(j.verifyProof(e,$))try{t(!0);const{txId:s}=await F.claim({distributorAddress:Z,proof:e,data:$,feeOptions:V});return y("Redeem",s),k(!1)}catch(s){f(s)}finally{t(!1)}},loading:e,children:"Redeem"}):(0,x.jsx)(m,{onBack:()=>P("")})})]})})})})};var H=s(19289);const W="empty",Y=e=>{let{activeMintAddress:t,onSelect:s}=e;const[n,i]=(0,l.useState)(!1),r=(0,l.useCallback)((e=>{s(e),i(!1)}),[s]);return(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)(a.Button,{className:"select-token",type:"text",onClick:()=>i(!0),children:t!==W?(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(w.MintAvatar,{mintAddress:t}),(0,x.jsx)(w.MintSymbol,{mintAddress:t}),(0,x.jsx)(o.default,{name:"chevron-down-outline"})]}):(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(w.MintAvatar,{mintAddress:t}),(0,x.jsx)(a.Typography.Text,{children:"Select a token"})]})}),(0,x.jsx)(a.Modal,{visible:n,onCancel:()=>i(!1),footer:null,closable:!1,centered:!0,className:"card-lightning mint-select-modal",destroyOnClose:!0,children:(0,x.jsx)(w.ListMint,{onChange:r})})]})};let P,Z,V,K,$,G;!function(e){e[e.auto=1]="auto",e[e.manual=2]="manual"}(P||(P={})),function(e){e[e.SelectMethod=1]="SelectMethod",e[e.AddRecipient=2]="AddRecipient",e[e.ConfirmTransfer=3]="ConfirmTransfer"}(Z||(Z={})),function(e){e.activeKey="collapse-upload-csv"}(V||(V={})),function(e){e.waiting="Waiting",e.ready="Ready",e.claimed="Claimed",e.expired="Expired",e.loading="Loading"}(K||(K={})),function(e){e.Vesting="vesting",e.Dashboard="dashboard",e.Airdrop="airdrop"}($||($={})),function(e){e.valid="valid",e.invalid="invalid"}(G||(G={}));const J="MMM DD, YYYY HH:mm",q="all";let Q;!function(e){e.Vesting="vesting",e.Airdrop="airdrop"}(Q||(Q={}));const X="main",ee={methodSelected:P.manual,mintSelected:W,visible:!1,isTyping:!1,typeDistribute:Q.Airdrop,TGE:"",TGETime:0},te=(0,H.createAsyncThunk)("main/onSelectMethod",(async e=>({methodSelected:e}))),se=(0,H.createAsyncThunk)("main/onSelectedMint",(async e=>({mintSelected:e}))),ne=(0,H.createAsyncThunk)("main/setVisible",(async e=>({visible:e}))),ie=(0,H.createAsyncThunk)("main/setIsTyping",(async e=>({isTyping:e}))),le=(0,H.createAsyncThunk)("main/setTypeDistribute",(async e=>({typeDistribute:e}))),re=(0,H.createAsyncThunk)("main/setTGE",(async e=>({TGE:e}))),ae=(0,H.createAsyncThunk)("main/setTGETime",(async e=>({TGETime:e}))),oe=(0,H.createSlice)({name:X,initialState:ee,reducers:{},extraReducers:e=>{e.addCase(te.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(se.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ne.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ie.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(le.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(re.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ae.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ce="steps",de={step:Z.SelectMethod},ue=(0,H.createAsyncThunk)("steps/onSelectStep",(async e=>({step:e}))),pe=(0,H.createSlice)({name:ce,initialState:de,reducers:{},extraReducers:e=>{e.addCase(ue.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var he=s(73620);let xe;!function(e){e.six_months="6months",e.one_year="1y",e.tow_years="2y",e.four_years="4y"}(xe||(xe={}));const me=[{label:"6 months",value:xe.six_months},{label:"1 year",value:xe.one_year},{label:"2 years",value:xe.tow_years},{label:"4 years",value:xe.four_years}],je=()=>{const[e,t]=(0,l.useState)(""),[s,i]=(0,l.useState)(me),r=(0,n.useSelector)((e=>e.recipients.expirationTime)),o=(0,n.useSelector)((e=>e.recipients.globalUnlockTime)),c=(0,n.useSelector)((e=>e.recipients.configs.distributeIn)),d=(0,n.useSelector)((e=>e.recipients.configs.frequency)),u=(0,n.useDispatch)(),p=e=>{t(e.target.value)},h=n=>{if(n)return u(Re({configs:{distributeIn:n}}));if(!(0,he.Z)(e))return;const l=[...s];return-1===l.findIndex((t=>t.value===e))&&l.push({label:e,value:e}),i(l),t(""),u(Re({configs:{distributeIn:e}}))},m=(0,l.useMemo)((()=>{const e=o+(0,he.Z)(c);return r<e&&r?"Must be less than the expiration time.":(0,he.Z)(c)<(0,he.Z)(d)?"Must be greater than the distribution frequency.":""}),[c,r,d,o]);return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",children:"Distribute in"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Select,{className:"select-vesting-data",value:c,onChange:h,placement:"bottomRight",dropdownRender:t=>(0,x.jsxs)(x.Fragment,{children:[t,!(0,he.Z)(e)&&e&&(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:"Wrong format"}),(0,x.jsx)(a.Input,{onChange:p,placeholder:"E.g: 1d, 1months, 1y,...",value:e,suffix:(0,x.jsx)(a.Button,{style:{color:"#42E6EB"},onClick:()=>h(),type:"text",children:"Add"})})]}),children:s.map(((e,t)=>{let{label:s,value:n}=e;return(0,x.jsx)(a.Select.Option,{value:n,children:s},t)}))})}),m&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:m})})]})};let ye;!function(e){e.one="1months",e.three="3months",e.six="6months",e.twelve="12months"}(ye||(ye={}));const fe=[{label:"1 months",value:ye.one},{label:"3 months",value:ye.three},{label:"6 months",value:ye.six},{label:"12 months",value:ye.twelve}],ge=()=>{const[e,t]=(0,l.useState)(""),[s,i]=(0,l.useState)(fe),r=(0,n.useSelector)((e=>e.recipients.configs.frequency)),o=(0,n.useDispatch)(),c=e=>{t(e.target.value)};return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",children:"Distribution frequency"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Select,{value:r,className:"select-vesting-data",placement:"bottomRight",onChange:e=>o(Re({configs:{frequency:e}})),dropdownRender:n=>(0,x.jsxs)(x.Fragment,{children:[n,!(0,he.Z)(e)&&e&&(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:"Wrong format"}),(0,x.jsx)(a.Input,{onChange:c,placeholder:"E.g: 1d, 1months, 1y,...",value:e,suffix:(0,x.jsx)(a.Button,{style:{color:"#42E6EB"},onClick:()=>(n=>{if(n)return o(Re({configs:{frequency:n}}));if(!(0,he.Z)(e))return;const l=[...s];return-1===l.findIndex((t=>t.value===e))&&l.push({label:e,value:e}),i(l),t(""),o(Re({configs:{frequency:e}}))})(),type:"text",children:"Add"})})]}),children:s.map((e=>{let{label:t,value:s}=e;return(0,x.jsx)(a.Select.Option,{value:s,children:t},s)}))})})]})};let Ce;!function(e){e.one_months="1months",e.three_months="3months",e.six_months="6months",e.twelve="12months"}(Ce||(Ce={}));const be=[{label:"1 month",value:Ce.one_months},{label:"3 months",value:Ce.three_months},{label:"6 months",value:Ce.six_months},{label:"12 months",value:Ce.twelve}],we=()=>{const[e,t]=(0,l.useState)(""),[s,i]=(0,l.useState)(be),r=(0,n.useSelector)((e=>e.recipients.configs.cliff)),o=(0,n.useDispatch)(),c=e=>{t(e.target.value)},d=n=>{if(n)return o(Re({configs:{cliff:n}}));if(!(0,he.Z)(e))return"Wrong format!";const l=[...s];return-1===l.findIndex((t=>t.value===e))&&l.push({label:e,value:e}),i(l),t(""),o(Re({configs:{cliff:e}}))};return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",children:"Cliff"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Select,{className:"select-vesting-data",placement:"bottomRight",value:r,onChange:d,dropdownRender:t=>(0,x.jsxs)(x.Fragment,{children:[t,!(0,he.Z)(e)&&e&&(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},className:"caption",children:"Wrong format"}),(0,x.jsx)(a.Input,{onChange:c,placeholder:"E.g: 1d, 1months, 1y,...",value:e,suffix:(0,x.jsx)(a.Button,{style:{color:"#42E6EB"},onClick:()=>d(),type:"text",children:"Add"})})]}),children:s.map((e=>{let{label:t,value:s}=e;return(0,x.jsx)(a.Select.Option,{value:s,children:t},s)}))})})]})},ve="recipients",Se={recipientInfos:{},expirationTime:0,globalUnlockTime:0,configs:{frequency:ye.one,distributeIn:xe.six_months,cliff:Ce.one_months}},Te=(0,H.createAsyncThunk)("recipients/setExpiration",(async e=>({expirationTime:e}))),Ae=(0,H.createAsyncThunk)("recipients/setGlobalUnlockTime",(async e=>({globalUnlockTime:e}))),ke=(0,H.createAsyncThunk)("recipients/addRecipients",(async e=>{let{recipientInfos:t}=e;return{recipientInfos:t}})),Re=(0,H.createAsyncThunk)("recipients/setGlobalConfigs",(async(e,t)=>{let{configs:s}=e,{getState:n}=t;const{recipients:{configs:i}}=n();return{configs:{...i,...s}}})),Ne=(0,H.createAsyncThunk)("recipients/setRecipient",(async(e,t)=>{let{walletAddress:s,nextRecipients:n}=e,{getState:i}=t;const{recipients:{recipientInfos:l}}=i(),r={...l};return r[s]=n,{recipientInfos:r}})),De=(0,H.createAsyncThunk)("recipients/removeRecipient",(async e=>e)),Be=(0,H.createAsyncThunk)("recipients/editRecipient",(async(e,t)=>{let{walletAddress:s,configs:n,unlockTime:i}=e,{getState:l}=t;const{recipients:r}=l(),{distributeIn:a,frequency:o}=n;let c={...r.recipientInfos};const d=c[s],u=[];let p=0;for(const{amount:m}of d)p+=Number(m);const h=Math.floor((0,he.Z)(a)/(0,he.Z)(o)),x=Number(p)/h;for(let m=0;m<h;m++){let e=0,t=x;if(0===m&&(e=i),0!==m&&(e=(0,he.Z)(o)+u[m-1].unlockTime),m===h-1){let e=0;for(const{amount:t}of u)e+=Number(t);t=Number(p)-e}const n={address:s,amount:t.toString(),unlockTime:e};u[m]=n}return c[s]=u,{recipientInfos:c}})),Ee=(0,H.createAsyncThunk)("recipients/removeRecipients",(async()=>({recipientInfos:{}}))),Ie=(0,H.createAsyncThunk)("recipients/addAmountAndTime",(async(e,t)=>{let{walletAddress:s,nextRecipientInfos:n}=e,{getState:i}=t;const{recipients:{recipientInfos:l}}=i(),r={...l};return r[s]=n,{recipientInfos:r}})),Me=(0,H.createSlice)({name:ve,initialState:Se,reducers:{},extraReducers:e=>{e.addCase(Ne.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ee.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Te.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ae.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Re.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(De.fulfilled,((e,t)=>{let{payload:s}=t;delete e.recipientInfos[s]})).addCase(Be.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ke.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ie.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var Oe=s(98463);const ze=[{label:"Dashboard",key:$.Dashboard,icon:(0,x.jsx)(o.default,{name:"grid-outline",style:{fontSize:24}})},{label:"Airdrop",key:$.Airdrop,icon:(0,x.jsx)(o.default,{name:"cloud-download-outline",style:{fontSize:24}})},{label:"Vesting",key:$.Vesting,icon:(0,x.jsx)(o.default,{name:"receipt-outline",style:{fontSize:24}})}],Fe=()=>{const[e,t]=(0,l.useState)($.Dashboard),{pathname:s}=(0,r.useLocation)(),{appRoute:i,pushHistory:c}=D(),d=(0,n.useDispatch)(),{Content:u,Footer:p}=a.Layout,h=(0,l.useCallback)((()=>{const e=s.replace(`${i}/`,""),n=e.indexOf("/");return t(-1===n?e:e.slice(0,n))}),[i,s]),m=(0,l.useCallback)((()=>{if(e!==$.Dashboard)return d(le(e))}),[d,e]);return(0,l.useEffect)((()=>{h()}),[h]),(0,l.useEffect)((()=>{m()}),[m]),(0,x.jsxs)(a.Layout,{className:"sidebar-layout",children:[(0,x.jsx)(u,{children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{span:24,style:{padding:"24px 16px"},children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Avatar,{size:24,src:Oe.default,shape:"square"}),(0,x.jsx)(a.Typography.Title,{level:5,children:"Lightning tunnel"})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Menu,{selectedKeys:[e],onClick:async e=>(await d(ue(Z.SelectMethod)),await d(te(P.manual)),await d(Ee()),await d(Ae(0)),await d(Te(0)),await d(re("")),await d(se(W)),c(`/${e.key}`)),className:"sidebar-content",items:ze})})]})}),(0,x.jsx)(p,{className:"sidebar_footer",children:(0,x.jsxs)(a.Space,{size:12,style:{cursor:"pointer"},onClick:()=>window.open("https://academy.sentre.io/#/blogs/123246296205?category=dev","_blank"),children:[(0,x.jsx)(o.default,{style:{fontSize:24},name:"information-circle-outline"}),(0,x.jsx)(a.Typography.Title,{level:5,children:"Guidelines"})]})})]})},Ue=e=>{let{label:t,icon:s,value:n,unit:l="$",loading:r=!1,cardStyles:o={}}=e;return(0,x.jsx)(a.Card,{bordered:!1,className:"card-lightning",bodyStyle:o,loading:r,style:{height:"100%"},children:(0,x.jsxs)(a.Row,{align:"middle",children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{direction:"vertical",children:[(0,x.jsx)(a.Typography.Text,{type:"secondary",children:t}),(0,x.jsxs)(a.Typography.Title,{level:4,children:[l,i.util.numeric(n).format("0,0.[000]")]})]})}),(0,x.jsx)(a.Col,{children:s})]})})};var Le=s(36645);const _e=()=>{const e=(0,i.useGetMintDecimals)();return{getTotalBalance:(0,l.useCallback)((async t=>{const s=[],n=[];for(const{mint:e,amount:o}of t){var l;const t=new(p())(o.toString()),r=await i.tokenProvider.findByAddress(e),a=null===r||void 0===r||null===(l=r.extensions)||void 0===l?void 0:l.coingeckoId;a&&!t.isZero()&&(n.push(a),s.push({mint:e,amount:t,ticket:a}))}const r=await b(n);let a=0;for(const{mint:i,amount:o,ticket:c}of s){const t=await e({mintAddress:i})||0;a+=Number(h.utilsBN.undecimalize(o,t))*(r[c]||0)}return a}),[e])}},He=()=>{const[e,t]=(0,l.useState)(0),[s,n]=(0,l.useState)(!0),r=(0,i.useAccounts)(),{getTotalBalance:a}=_e(),o=(0,l.useCallback)((async()=>{try{n(!0);const e=await a(Object.values(r));return t(e)}catch(e){}finally{n(!1)}}),[r,a]);return(0,l.useEffect)((()=>{o()}),[o]),{loading:s,totalUSD:e}};var We,Ye,Pe,Ze,Ve;function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Ke.apply(this,arguments)}function $e(e,t){let{title:s,titleId:n,...i}=e;return l.createElement("svg",Ke({width:32,height:32,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},i),s?l.createElement("title",{id:n},s):null,We||(We=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.8469 13.0356C14.5183 13.0356 14.1639 13.3376 14.1639 13.8073C14.1639 14.1846 14.2447 14.303 14.27 14.3352C14.3041 14.3785 14.3845 14.4501 14.6444 14.5429L17.9811 15.7069C18.3785 15.8483 18.8437 16.074 19.1925 16.5207C19.5495 16.9779 19.6913 17.5441 19.6913 18.1827C19.6913 19.5891 18.6018 20.8005 17.162 20.8005H15.0796C13.5125 20.8005 12.3066 19.4842 12.3066 17.939C12.3066 17.4292 12.7199 17.0159 13.2297 17.0159C13.7395 17.0159 14.1528 17.4292 14.1528 17.939C14.1528 18.5427 14.6085 18.9544 15.0796 18.9544H17.162C17.4945 18.9544 17.8451 18.6594 17.8451 18.1827C17.8451 17.8132 17.7653 17.6927 17.7374 17.657C17.7014 17.6109 17.6187 17.5378 17.3646 17.4471L14.0279 16.2831C13.6363 16.1437 13.1688 15.9221 12.8181 15.4754C12.4584 15.0175 12.3177 14.4491 12.3177 13.8073C12.3177 12.4161 13.4033 11.1895 14.8469 11.1895H16.9294C18.4965 11.1895 19.7023 12.5058 19.7023 14.051C19.7023 14.5608 19.2891 14.9741 18.7793 14.9741C18.2695 14.9741 17.8562 14.5608 17.8562 14.051C17.8562 13.4472 17.4005 13.0356 16.9294 13.0356H14.8469Z",fill:"currentColor"})),Ye||(Ye=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9992 10.0923C16.5091 10.0923 16.9223 10.5056 16.9223 11.0154V20.9846C16.9223 21.4944 16.5091 21.9077 15.9992 21.9077C15.4894 21.9077 15.0762 21.4944 15.0762 20.9846V11.0154C15.0762 10.5056 15.4894 10.0923 15.9992 10.0923Z",fill:"currentColor"})),Pe||(Pe=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 5.84615C10.3953 5.84615 5.84615 10.3953 5.84615 16C5.84615 21.6047 10.3953 26.1538 16 26.1538C21.6047 26.1538 26.1538 21.6047 26.1538 16C26.1538 15.4902 26.5671 15.0769 27.0769 15.0769C27.5867 15.0769 28 15.4902 28 16C28 22.6243 22.6243 28 16 28C9.37574 28 4 22.6243 4 16C4 9.37574 9.37574 4 16 4C16.5098 4 16.9231 4.41328 16.9231 4.92308C16.9231 5.43288 16.5098 5.84615 16 5.84615Z",fill:"currentColor"})),Ze||(Ze=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5383 5.10791C22.0481 5.10791 22.4614 5.52119 22.4614 6.03099V9.53868H25.9691C26.4789 9.53868 26.8922 9.95196 26.8922 10.4618C26.8922 10.9716 26.4789 11.3848 25.9691 11.3848H21.5383C21.0285 11.3848 20.6152 10.9716 20.6152 10.4618V6.03099C20.6152 5.52119 21.0285 5.10791 21.5383 5.10791Z",fill:"currentColor"})),Ve||(Ve=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.7295 4.27036C28.09 4.63085 28.09 5.21531 27.7295 5.57579L22.191 11.1143C21.8305 11.4747 21.2461 11.4747 20.8856 11.1143C20.5251 10.7538 20.5251 10.1693 20.8856 9.80882L26.4241 4.27036C26.7845 3.90988 27.369 3.90988 27.7295 4.27036Z",fill:"currentColor"})))}const Ge=l.forwardRef($e);s.p;var Je,qe,Qe,Xe,et;function tt(){return tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},tt.apply(this,arguments)}function st(e,t){let{title:s,titleId:n,...i}=e;return l.createElement("svg",tt({width:32,height:32,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},i),s?l.createElement("title",{id:n},s):null,Je||(Je=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.8469 13.0356C14.5183 13.0356 14.1639 13.3376 14.1639 13.8073C14.1639 14.1846 14.2447 14.303 14.27 14.3352C14.3041 14.3785 14.3845 14.4501 14.6444 14.5429L17.9811 15.7069C18.3785 15.8483 18.8437 16.074 19.1925 16.5207C19.5495 16.9779 19.6913 17.5441 19.6913 18.1827C19.6913 19.5891 18.6018 20.8005 17.162 20.8005H15.0796C13.5125 20.8005 12.3066 19.4842 12.3066 17.939C12.3066 17.4292 12.7199 17.0159 13.2297 17.0159C13.7395 17.0159 14.1528 17.4292 14.1528 17.939C14.1528 18.5427 14.6085 18.9544 15.0796 18.9544H17.162C17.4945 18.9544 17.8451 18.6594 17.8451 18.1827C17.8451 17.8132 17.7653 17.6927 17.7374 17.657C17.7014 17.6109 17.6187 17.5378 17.3646 17.4471L14.0279 16.2831C13.6363 16.1437 13.1688 15.9221 12.8181 15.4754C12.4584 15.0175 12.3177 14.4491 12.3177 13.8073C12.3177 12.4161 13.4033 11.1895 14.8469 11.1895H16.9294C18.4965 11.1895 19.7023 12.5058 19.7023 14.051C19.7023 14.5608 19.2891 14.9741 18.7793 14.9741C18.2695 14.9741 17.8562 14.5608 17.8562 14.051C17.8562 13.4472 17.4005 13.0356 16.9294 13.0356H14.8469Z",fill:"currentColor"})),qe||(qe=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9992 10.0923C16.5091 10.0923 16.9223 10.5056 16.9223 11.0154V20.9846C16.9223 21.4944 16.5091 21.9077 15.9992 21.9077C15.4894 21.9077 15.0762 21.4944 15.0762 20.9846V11.0154C15.0762 10.5056 15.4894 10.0923 15.9992 10.0923Z",fill:"currentColor"})),Qe||(Qe=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 5.84615C10.3953 5.84615 5.84615 10.3953 5.84615 16C5.84615 21.6047 10.3953 26.1538 16 26.1538C21.6047 26.1538 26.1538 21.6047 26.1538 16C26.1538 15.4902 26.5671 15.0769 27.0769 15.0769C27.5867 15.0769 28 15.4902 28 16C28 22.6243 22.6243 28 16 28C9.37574 28 4 22.6243 4 16C4 9.37574 9.37574 4 16 4C16.5098 4 16.9231 4.41328 16.9231 4.92308C16.9231 5.43288 16.5098 5.84615 16 5.84615Z",fill:"currentColor"})),Xe||(Xe=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7227 4.92308C21.7227 4.41328 22.1359 4 22.6457 4H27.0765C27.5863 4 27.9996 4.41328 27.9996 4.92308V9.35385C27.9996 9.86365 27.5863 10.2769 27.0765 10.2769C26.5667 10.2769 26.1534 9.86365 26.1534 9.35385V5.84615H22.6457C22.1359 5.84615 21.7227 5.43288 21.7227 4.92308Z",fill:"currentColor"})),et||(et=l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.7295 4.27036C28.09 4.63085 28.09 5.21531 27.7295 5.57579L22.191 11.1143C21.8305 11.4747 21.2461 11.4747 20.8856 11.1143C20.5251 10.7538 20.5251 10.1693 20.8856 9.80882L26.4241 4.27036C26.7845 3.90988 27.369 3.90988 27.7295 4.27036Z",fill:"currentColor"})))}const nt=l.forwardRef(st),it=(s.p,()=>{const[e,t]=(0,l.useState)(0),[s,r]=(0,l.useState)(0),{totalUSD:c}=He(),d=(0,n.useSelector)((e=>e.receipts)),u=(0,n.useSelector)((e=>e.distributors)),{getTotalBalance:p}=_e(),h=(0,i.useWalletAddress)(),m=(0,l.useCallback)((async()=>{const e=Object.values(d),s=[];if(!e.length)return t(0);for(const{amount:t,distributor:i}of e){const e=i.toBase58();if(!u[e])continue;const{mint:n}=u[e],l={mint:n.toBase58(),amount:t};s.push(l)}const n=await p(s);return t(n)}),[u,p,d]),j=(0,l.useCallback)((async()=>{const e=Object.values(u),t=[];if(!e.length)return r(0);for(const{total:n,mint:i,authority:l}of e){if(h!==l.toBase58())continue;const e={mint:i.toBase58(),amount:n};t.push(e)}const s=await p(t);return r(s)}),[u,p,h]);return(0,l.useEffect)((()=>{m()}),[m]),(0,l.useEffect)((()=>{j()}),[j]),(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{lg:8,md:12,xs:24,children:(0,x.jsx)(Ue,{label:"Total balance",icon:(0,x.jsx)(o.default,{className:"card-hero-icon",name:"wallet-outline"}),value:c,cardStyles:{padding:"16px 24px"}})}),(0,x.jsx)(a.Col,{lg:8,md:12,xs:24,children:(0,x.jsx)(Ue,{label:"Total distribution",icon:(0,x.jsx)(Le.Z,{className:"card-hero-icon",style:{fontSize:32},component:nt}),value:s,cardStyles:{padding:"16px 24px"}})}),(0,x.jsx)(a.Col,{lg:8,md:12,xs:24,children:(0,x.jsx)(Ue,{label:"Total received",icon:(0,x.jsx)(Le.Z,{className:"card-hero-icon",style:{fontSize:32},component:Ge}),value:e,cardStyles:{padding:"16px 24px"}})})]})}),lt=e=>{let{mintAddresses:t,onChange:s,style:n}=e;return(0,x.jsxs)(a.Select,{className:"select-existed-token",style:{minWidth:150,...n},defaultValue:q,onChange:s,size:"large",children:[(0,x.jsx)(a.Select.Option,{value:q,children:"All token"}),t.map(((e,t)=>(0,x.jsx)(a.Select.Option,{value:e,children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(w.MintAvatar,{mintAddress:e}),(0,x.jsx)(w.MintSymbol,{mintAddress:e})]})},t)))]})},rt=e=>{let{label:t,value:s,selected:n,onSelected:i}=e;return(0,x.jsxs)(a.Row,{gutter:[4,4],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:t})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Radio.Group,{onChange:e=>i(e.target.value),value:n,className:"filter-lighning-radio-btn",children:(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:8,children:(0,x.jsx)(a.Radio.Button,{value:q,children:"All time"})}),s.map(((e,t)=>(0,x.jsx)(a.Col,{span:8,children:(0,x.jsx)(a.Radio.Button,{value:e,children:e})},t)))]})})})]})},at=[K.ready,K.waiting,K.claimed,K.expired],ot=e=>{let{onChange:t,value:s=q}=e;const{ui:{infix:n}}=(0,i.useUI)();return"xs"===n?(0,x.jsx)(rt,{label:"Filter by status",onSelected:t,value:at,selected:s}):(0,x.jsxs)(a.Select,{className:"select-existed-token",style:{minWidth:150},defaultValue:q,onChange:t,size:"large",children:[(0,x.jsx)(a.Select.Option,{value:q,children:"All status"}),at.map(((e,t)=>(0,x.jsx)(a.Select.Option,{value:e,children:e},t)))]})},ct=e=>{const t=(0,n.useSelector)((e=>e.distributors)),[s,i]=(0,l.useState)(),r=(0,n.useSelector)((e=>e.receipts)),a=(0,l.useCallback)((async e=>{const s=Date.now(),{receipt:n,startedAt:i,distributor:l}=e,a=r[n],o=t[l].endedAt;return a?K.claimed:1e3*o.toNumber()<s&&o.toNumber()?K.expired:1e3*i>s&&i?K.waiting:K.ready}),[t,r]),o=(0,l.useCallback)((async e=>{const t=await a(e);return i(t)}),[a]);return(0,l.useEffect)((()=>{e&&o(e)}),[o,e]),{status:s,fetchAirdropStatus:a}},dt=e=>{let{mintAddresses:t,onConfirm:s}=e;const[n,i]=(0,l.useState)(!1),[r,c]=(0,l.useState)(q),[d,u]=(0,l.useState)(q);return(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)(a.Button,{type:"text",icon:(0,x.jsx)(o.default,{name:"funnel-outline"}),onClick:()=>i(!0)}),(0,x.jsx)(a.Modal,{visible:n,onCancel:()=>i(!1),closable:!1,footer:!1,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:8,direction:"vertical",style:{width:"100%"},children:[(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Filter by token"}),(0,x.jsx)(lt,{mintAddresses:t,onChange:c,style:{width:"100%"}})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ot,{onChange:u,value:d})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Button,{type:"primary",onClick:()=>{s({mintKey:r,statusKey:d}),i(!1)},block:!0,children:"Confirm"})})]})})]})},ut=e=>{let{listReceive:t,onFilter:s}=e;const[n,r]=(0,l.useState)(q),[o,d]=(0,l.useState)(q),{fetchAirdropStatus:u}=ct(),{ui:{infix:p}}=(0,i.useUI)(),h="xs"===p,m=(0,l.useMemo)((()=>{if(!t.length)return[];let e=[];for(const s of t){const{mintAddress:t}=s;e.includes(t)||e.push(t)}return e}),[t]),j=(0,l.useCallback)((async e=>{const{recipientData:{startedAt:t},receiptAddress:s,distributorAddress:i,mintAddress:l}=e,r=!c.account.isAddress(l)||n===q||[n].includes(l),a=await u({distributor:i,receipt:s,startedAt:t.toNumber()}),d=!a||o===q||[o].includes(a);return r&&d}),[u,n,o]),y=(0,l.useCallback)((async()=>{let e=[];for(const s of t){await j(s)&&e.push(s)}return e.length||s([]),s(e)}),[j,t,s]);return(0,l.useEffect)((()=>{y()}),[y]),h?(0,x.jsx)(dt,{mintAddresses:m,onConfirm:e=>{let{mintKey:t,statusKey:s}=e;r(t),d(s)}}):(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(lt,{mintAddresses:m,onChange:r}),(0,x.jsx)(ot,{onChange:d})]})};var pt=s(40349),ht=s.n(pt),xt=s(74191);const mt=e=>{let{cardId:t,children:s=(0,x.jsx)(l.Fragment,{}),cardHeader:n=(0,x.jsx)(l.Fragment,{}),style:i}=e;const[r,c]=(0,l.useState)(),d=r?"chevron-up-outline":"chevron-down-outline";return(0,x.jsx)(a.Card,{bordered:!1,bodyStyle:{padding:"16px 0"},style:{...i,background:"unset",borderRadius:0},children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:24,children:n}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{justify:"center",children:[(0,x.jsx)(a.Col,{span:24,className:"expand-card-collapse",children:(0,x.jsx)(a.Collapse,{activeKey:r,bordered:!1,children:(0,x.jsx)(a.Collapse.Panel,{header:!1,showArrow:!1,children:s},t)})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{type:"text",size:"small",icon:(0,x.jsx)(o.default,{name:d}),onClick:()=>c(r?void 0:t)})})]})})]})})},jt=e=>{let{title:t,children:s}=e;return(0,x.jsxs)(a.Row,{align:"middle",gutter:[24,24],children:[(0,x.jsx)(a.Col,{flex:"auto",children:t}),(0,x.jsx)(a.Col,{children:s})]})},yt=e=>{let{label:t="",value:s=""}=e;return(0,x.jsxs)(a.Row,{align:"middle",gutter:[24,24],children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Text,{className:"caption",type:"secondary",children:t})}),(0,x.jsx)(a.Col,{children:s})]})};var ft=s(97429).Buffer;const{sol:{utility:gt,taxman:Ct,fee:bt}}=R,wt=e=>{let{distributorAddress:t,recipientData:s,receiptAddress:i}=e;const[r,o]=(0,l.useState)(),c=(0,n.useSelector)((e=>e.distributors)),{metadata:p}=c[t],[h,m]=(0,l.useState)(!1),j=s.startedAt.toNumber(),{status:C}=ct({receipt:i,startedAt:j,distributor:t}),b=(0,l.useCallback)((async()=>{if(!t)return;const e=new E;try{const t=await g(p),s=await e.get(t),n=d.MerkleDistributor.fromBuffer(ft.from(s));return o(n)}catch(s){f(s)}}),[t,p]);return(0,l.useEffect)((()=>{b()}),[b]),C&&C===K.ready?(0,x.jsx)(a.Button,{onClick:async()=>{if(!r)return;const e=r.deriveProof(s);if(r.verifyProof(e,s))try{m(!0);const n={fee:new u.BN(bt),feeCollectorAddress:Ct},{txId:i}=await gt.claim({distributorAddress:t,proof:e,data:s,feeOptions:n});y("Redeem",i)}catch(n){f(n)}finally{m(!1)}},loading:h,type:"text",className:"btn-claim",style:{color:"#42E6EB"},children:"claim"}):(0,x.jsx)(l.Fragment,{})},vt=e=>{let{distributorAddress:t}=e;const s=(0,n.useSelector)((e=>e.distributors[t].endedAt));return(0,x.jsx)(a.Typography.Text,{children:s.toNumber()?ht()(1e3*s.toNumber()).format("MMM DD, YYYY HH:mm"):"Unlimited"})},St=e=>{const[t,s]=(0,l.useState)(void 0),n=(0,i.useGetMintDecimals)(),r=(0,l.useCallback)((async()=>{try{const t=await n({mintAddress:e})||0;return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,l.useEffect)((()=>{r()}),[r]),t},Tt=e=>{let{amount:t,mintAddress:s}=e;const n=St(s)||0;return(0,x.jsx)(a.Typography.Text,{children:i.util.numeric(c.utils.undecimalize(BigInt(t.toString()),n)).format("0,0.[0000]")})},At={Waiting:"#D4B106",Ready:"#03A326",Claimed:"#40A9FF",Expired:"#F9575E",Loading:"#F4F5F5"},kt=e=>{let{state:t}=e;const s=(0,l.useMemo)((()=>t?At[t]:At[K.loading]),[t]);return(0,x.jsx)(a.Tag,{style:{margin:0,borderRadius:4,border:`solid 1px ${s}`,textTransform:"capitalize",background:"transparent",color:s},children:t||K.loading})},Rt=e=>{let{receiptAddress:t,startedAt:s,distributorAddress:n}=e;const{status:i}=ct({receipt:t,startedAt:s,distributor:n});return(0,x.jsx)(kt,{state:i})},Nt=e=>{let{listReceive:t}=e;return t.length?(0,x.jsx)(l.Fragment,{children:t.map(((e,t)=>{const{mintAddress:s,receiptAddress:n,recipientData:i,distributorAddress:l,sender:r}=e;return(0,x.jsx)(mt,{style:{border:"1px solid transparent",borderImageSlice:"0 0 1 0",borderImageWidth:1,borderImageSource:"linear-gradient(90deg,transparent, #4F5B5C, transparent)"},cardId:n,cardHeader:(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(jt,{title:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(w.MintAvatar,{mintAddress:s}),(0,x.jsxs)(a.Space,{size:6,children:[(0,x.jsx)(Tt,{amount:i.amount,mintAddress:s}),(0,x.jsx)(w.MintSymbol,{mintAddress:s})]})]}),children:(0,x.jsx)(Rt,{receiptAddress:n,startedAt:i.startedAt.toNumber(),distributorAddress:l})})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(yt,{label:`Sender: ${xt.util.shortenAddress(r,4)}`,value:(0,x.jsx)(wt,{distributorAddress:l,receiptAddress:n,recipientData:i})})})]}),children:(0,x.jsxs)(a.Row,{gutter:[4,4],children:[(0,x.jsx)(a.Col,{flex:"auto",children:"Unlock time:"}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Typography.Text,{children:i.startedAt.toNumber()?ht()(1e3*i.startedAt.toNumber()).format("MMM DD, YYYY HH:mm"):"Immediately"})}),(0,x.jsx)(a.Col,{span:24}),(0,x.jsx)(a.Col,{flex:"auto",children:"Expiration time:"}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(vt,{distributorAddress:l})})]})},t)}))}):(0,x.jsx)(a.Empty,{})},Dt=[{title:"UNLOCK DATE",dataIndex:"recipientData",render:e=>{let{startedAt:t}=e;return(0,x.jsx)(a.Typography.Text,{children:t.toNumber()?ht()(1e3*t.toNumber()).format("MMM DD, YYYY HH:mm"):"Immediately"})}},{title:"EXPIRATION TIME",dataIndex:"distributorAddress",render:e=>(0,x.jsx)(vt,{distributorAddress:e})},{title:"SENDER",dataIndex:"sender",render:e=>(0,x.jsx)(a.Typography.Text,{style:{cursor:"pointer"},underline:!0,onClick:()=>window.open(i.util.explorer(e),"_blank"),children:i.util.shortenAddress(e)})},{title:"TOKEN",dataIndex:"mintAddress",render:e=>(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(w.MintAvatar,{mintAddress:e}),(0,x.jsx)(w.MintSymbol,{mintAddress:e})]})},{title:"AMOUNT",dataIndex:"recipientData",render:(e,t)=>{let{amount:s}=e,{mintAddress:n}=t;return(0,x.jsx)(Tt,{amount:s,mintAddress:n})}},{title:"STATUS",dataIndex:"recipientData",render:(e,t)=>{let{startedAt:s}=e,{receiptAddress:n,distributorAddress:i}=t;return(0,x.jsx)(Rt,{startedAt:s.toNumber(),receiptAddress:n,distributorAddress:i})}},{title:"ACTION",dataIndex:"distributorAddress",render:(e,t)=>{let{receiptAddress:s,recipientData:n}=t;return(0,x.jsx)(wt,{distributorAddress:e,recipientData:n,receiptAddress:s})}}];var Bt=s(97429).Buffer;const{manifest:{appId:Et}}=R,It=()=>{const[e,t]=(0,l.useState)(4),[s,r]=(0,l.useState)([]),{listReceived:c}=(0,n.useSelector)((e=>e.listReceived)),[u,p]=(0,l.useState)([]),{ui:{width:h}}=(0,i.useUI)(),{fetchAirdropStatus:m}=ct(),j=h<768,y=(0,l.useMemo)((()=>void 0===c),[c]),f=(0,l.useMemo)((()=>{const e=[];for(const t in c){const{recipientData:s,index:n}=c[t],{salt:i}=s,l=d.MerkleDistributor.salt(`${Et}/${Q.Airdrop}/${n}`),r=d.MerkleDistributor.salt(n.toString());0!==Bt.compare(l,i)&&0!==Bt.compare(r,i)||e.push(c[t])}return e}),[c]),g=(0,l.useCallback)((async()=>{if(!f.length)return r([]);let e=[];const t=[],s=[];for(const n of f){const{receiptAddress:e,distributorAddress:i,recipientData:l}=n,{startedAt:r}=l;await m({distributor:i,receipt:e,startedAt:r.toNumber()})!==K.ready?s.push(n):t.push(n)}return t.sort(((e,t)=>Number(t.recipientData.startedAt)-Number(e.recipientData.startedAt))),e=t.concat(s),r(e)}),[f,m]);return(0,l.useEffect)((()=>{g()}),[g]),(0,x.jsx)(a.Card,{loading:y,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:5,children:"Airdrop receive"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(ut,{listReceive:s,onFilter:p})})]})}),(0,x.jsx)(a.Col,{span:24,children:j?(0,x.jsx)(Nt,{listReceive:u.slice(0,e)}):(0,x.jsx)(a.Table,{dataSource:u.slice(0,e),pagination:!1,columns:Dt,rowKey:e=>e.receiptAddress})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"center"},children:(0,x.jsx)(a.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,x.jsx)(o.default,{name:"arrow-down-outline"}),disabled:e>=u.length,children:"VIEW MORE"})})]})})};var Mt=s(21111),Ot=s.n(Mt),zt=s(97429).Buffer;const{manifest:{appId:Ft}}=R,Ut=()=>{const[e,t]=(0,l.useState)(4),[s,r]=(0,l.useState)([]),{listReceived:c}=(0,n.useSelector)((e=>e.listReceived)),[u,p]=(0,l.useState)([]),{ui:{width:h}}=(0,i.useUI)(),{fetchAirdropStatus:m}=ct(),j=h<768,y=(0,l.useMemo)((()=>void 0===c),[c]),f=(0,l.useMemo)((()=>{let e=[];for(const t in c){const{index:s,recipientData:n,children:i}=c[t],{salt:l}=n,r=d.MerkleDistributor.salt(`${Ft}/${Q.Vesting}/${s}`);0===zt.compare(r,l)&&(i&&(e=e.concat(i)))}return e}),[c]),g=(0,l.useCallback)((async e=>{const t=[];for(const s of e){const{receiptAddress:e,distributorAddress:n,recipientData:i}=s,{startedAt:l}=i,r=await m({receipt:e,startedAt:l.toNumber(),distributor:n});t.push(r)}return-1!==t.indexOf(K.ready)?t.indexOf(K.ready):-1!==t.indexOf(K.waiting)?t.indexOf(K.waiting):-1!==t.indexOf(K.claimed)?t.indexOf(K.claimed):-1!==t.indexOf(K.expired)?t.indexOf(K.expired):0}),[m]),C=(0,l.useCallback)((async()=>{if(!f.length)return r([]);const e={};let t=[];const s=[],n=[];for(const i of f){const{distributorAddress:t}=i;if(e[t]){const s=[...e[t]];s.push(i),e[t]=s}else e[t]=[i]}for(const i in e){const l=e[i];if(1===l.length)t.push(l[0]);else{let e=l[await g(l)];const t=[];for(const s of l)Ot()(s,e)||t.push(s);e={...e,children:t};const{distributorAddress:i,recipientData:r,receiptAddress:a}=e,{startedAt:o}=r;if(await m({distributor:i,receipt:a,startedAt:o.toNumber()})===K.ready){s.push(e);continue}n.push(e)}}return s.sort(((e,t)=>Number(t.recipientData.startedAt)-Number(e.recipientData.startedAt))),t=s.concat(n),r(t)}),[m,g,f]);return(0,l.useEffect)((()=>{C()}),[C]),(0,x.jsx)(a.Card,{loading:y,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:5,children:"Vesting receive"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(ut,{listReceive:s,onFilter:p})})]})}),(0,x.jsx)(a.Col,{span:24,children:j?(0,x.jsx)(Nt,{listReceive:u.slice(0,e)}):(0,x.jsx)(a.Table,{dataSource:u.slice(0,e),pagination:!1,columns:Dt,rowKey:e=>e.receiptAddress})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"center"},children:(0,x.jsx)(a.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,x.jsx)(o.default,{name:"arrow-down-outline"}),disabled:e>=u.length,children:"VIEW MORE"})})]})})},Lt=()=>(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:2,children:"Dashboard"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(it,{})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(It,{})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ut,{})})]}),_t=[7,30,90],Ht=e=>{let{onChange:t,value:s}=e;const{ui:{infix:n}}=(0,i.useUI)();return"xs"===n?(0,x.jsx)(rt,{label:"Filter by time",onSelected:t,value:_t,selected:s}):(0,x.jsxs)(a.Select,{className:"select-existed-token",style:{minWidth:150},defaultValue:q,onChange:t,size:"large",children:[(0,x.jsx)(a.Select.Option,{value:q,children:"All time"}),_t.map(((e,t)=>(0,x.jsxs)(a.Select.Option,{value:e,children:["Past ",e," days"]},t)))]})},Wt=e=>{let{mintAddressess:t,onConfirm:s}=e;const[n,i]=(0,l.useState)(!1),[r,c]=(0,l.useState)(q),[d,u]=(0,l.useState)(q);return(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)(a.Button,{type:"text",icon:(0,x.jsx)(o.default,{name:"funnel-outline"}),onClick:()=>i(!0)}),(0,x.jsx)(a.Modal,{visible:n,onCancel:()=>i(!1),closable:!1,footer:!1,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:8,direction:"vertical",style:{width:"100%"},children:[(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Filter by token"}),(0,x.jsx)(lt,{mintAddresses:t,onChange:c,style:{width:"100%"}})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ht,{onChange:u,value:d})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Button,{type:"primary",onClick:()=>{s({mintKey:r,timeKey:d}),i(!1)},block:!0,children:"Confirm"})})]})})]})},Yt=e=>{let{listSent:t,onFilter:s}=e;const[n,r]=(0,l.useState)(q),[o,d]=(0,l.useState)(q),{ui:{infix:u}}=(0,i.useUI)(),p="xs"===u,h=(0,l.useMemo)((()=>{if(!t.length)return[];let e=[];for(const s of t){const{mint:t}=s;e.includes(t)||e.push(t)}return e}),[t]),m=(0,l.useCallback)((e=>{const{time:t,mint:s}=e,i=Number(new Date(t)),l=!c.account.isAddress(s)||n===q||[n].includes(s),r=!i||o===q||Date.now()-i<864e5*Number(o);return l&&r}),[n,o]),j=(0,l.useMemo)((()=>{const e=t.filter((e=>m(e)));return e.length?e:[]}),[m,t]);return(0,l.useEffect)((()=>{s(j)}),[j,s]),p?(0,x.jsx)(Wt,{mintAddressess:h,onConfirm:e=>{let{mintKey:t,timeKey:s}=e;r(t),d(s)}}):(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(lt,{mintAddresses:h,onChange:r}),(0,x.jsx)(Ht,{onChange:d})]})},Pt=e=>{let{total:t,mint:s}=e;const n=St(s)||0;return(0,x.jsx)(a.Typography.Text,{children:i.util.numeric(c.utils.undecimalize(BigInt(t),n)).format("0,0.[0000]")})};var Zt=s(51518),Vt=s.n(Zt);const Kt=s.p+"static/media/twitter.9cbdafef0605b5c84ec56b271a60a6e8.svg",$t=e=>{let{visible:t,redeemLink:s,onClose:n=(()=>{})}=e;const[r,c]=(0,l.useState)(!1);return(0,x.jsx)(a.Modal,{visible:t,closeIcon:(0,x.jsx)(o.default,{name:"close-outline"}),onCancel:n,footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,x.jsxs)(a.Row,{gutter:[32,32],style:{textAlign:"center"},children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Image,{src:Kt,preview:!1})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{direction:"vertical",size:4,children:[(0,x.jsx)(a.Typography.Title,{level:3,children:"Share on Twitter!"}),(0,x.jsx)(a.Space,{size:4,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Share this link so your recipients can get their tokens"})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:8,justify:"space-between",children:[(0,x.jsx)(a.Col,{className:"share-link",span:20,children:(0,x.jsx)(a.Typography.Text,{children:(e=>e.substring(0,40)+"...")(s)})}),(0,x.jsx)(a.Col,{span:4,children:(0,x.jsx)(a.Tooltip,{title:"Copied",visible:r,children:(0,x.jsx)(Vt(),{text:s,children:(0,x.jsx)(a.Button,{size:"large",type:"ghost",onClick:async()=>{c(!0),await i.util.asyncWait(1500),c(!1)},children:"copy"})})})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Button,{size:"large",type:"primary",block:!0,onClick:()=>{let e="http://twitter.com/intent/tweet?";const t={url:s,text:"Your prize has arrived! Redeem now at Sen Hub: "};for(const s in t)e+="&"+s+"="+encodeURIComponent(t[s]||"");window.open(e,"_blank")},children:"Share now"})})]})})};var Gt=s(95414),Jt=s(55080);const{sol:{utility:qt}}=R,Qt=e=>{let{distributorAddress:t}=e;const[s,n]=(0,l.useState)({}),i=(0,l.useCallback)((async()=>{const e=await qt.program.account.receipt.all([{memcmp:{offset:40,bytes:t}}]);let s={};for(const t of e)s[t.account.authority.toBase58()]=t.account;return n(s)}),[t]);return(0,l.useEffect)((()=>{i()}),[i]),s};var Xt=s(97429).Buffer;const{sol:{utility:es,fee:ts,taxman:ss}}=R,ns=[{label:"Wallet address",key:"authority"},{label:"Amount",key:"amount"}],is=e=>{let{amount:t,mintAddress:s}=e;const n=St(s)||0;return(0,x.jsx)(a.Typography.Text,{children:i.util.numeric(h.utilsBN.undecimalize(t,n)).format("0,0.[0000]")})},ls=[{title:"WALLET ADDRESS",dataIndex:"authority",render:e=>(0,x.jsx)(a.Typography.Text,{children:(0,Gt.shortenAddress)(e)})},{title:"AMOUNT",dataIndex:"amount",render:(e,t)=>{let{mintAddress:s}=t;return(0,x.jsx)(is,{amount:e,mintAddress:s})}}],rs=e=>{let{distributorAddress:t,treeData:s,disabled:i,setDisabled:r}=e;const[c,u]=(0,l.useState)([]),[m,j]=(0,l.useState)(!1),[g,C]=(0,l.useState)(!1),b=Qt({distributorAddress:t}),w=(0,n.useSelector)((e=>e.distributors[t].mint)),v=St(w.toBase58())||0,S=(0,l.useCallback)((()=>{if(!s)return 0;const e=JSON.parse(JSON.stringify(s)).data,t=[],n=d.MerkleDistributor.fromBuffer(Xt.from(e||s)).receipients;for(const{authority:s,amount:i,salt:l}of n){if(!b[s.toBase58()]){t.push({authority:s.toBase58(),amount:i,mintAddress:w.toBase58()});continue}const e=Xt.from(b[s.toBase58()].salt);0!==Xt.compare(e,l)&&t.push({authority:s.toBase58(),amount:i,mintAddress:w.toBase58()})}return u(t)}),[w,b,s]),T=(0,l.useMemo)((()=>{const e={};for(const t of c){const{authority:s,amount:n}=t;if(e[s]){const s=e[t.authority];e[t.authority]={...s,amount:s.amount.add(n)}}else e[s]=t}return e}),[c]),A=(0,l.useMemo)((()=>{const e=Object.values(T).map((e=>{const{amount:t,authority:s}=e;return{authority:s,amount:h.utilsBN.undecimalize(t,v)}}),[]);return e}),[v,T]);return(0,l.useEffect)((()=>{S()}),[S]),(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)(a.Button,{onClick:()=>j(!0),type:"text",disabled:i,style:{color:"#42E6EB"},children:"revoke"}),(0,x.jsx)(a.Modal,{visible:m,onCancel:()=>j(!1),footer:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{type:"ghost",onClick:()=>j(!1),children:"Cancel"}),(0,x.jsx)(a.Button,{onClick:async()=>{const e={fee:new(p())(ts),feeCollectorAddress:ss};C(!0);try{const{txId:s}=await es.revoke({distributorAddress:t,feeOptions:e});return y("Revoked token",s),r(!0)}catch(s){f(s)}finally{C(!1),j(!1)}},loading:g,type:"primary",children:"confirm"})]}),closeIcon:(0,x.jsx)(o.default,{name:"close-outline"}),className:"card-lightning",style:{paddingBottom:0},children:(0,x.jsxs)(a.Row,{gutter:[32,32],style:{maxHeight:400},className:"scrollbar",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Typography.Title,{level:5,children:"Revoke"}),(0,x.jsx)(Jt.CSVLink,{filename:"unclaimed_list",headers:ns,data:A,children:(0,x.jsx)(a.Tooltip,{title:"Download unclaimed list",children:(0,x.jsx)(o.default,{style:{fontSize:20},name:"download-outline"})})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Table,{dataSource:Object.values(T),pagination:!1,columns:ls,rowKey:e=>e.authority})})]})})]})},as=(e,t)=>{const[s,i]=(0,l.useState)(!1),[r,a]=(0,l.useState)(!1),o=(0,n.useSelector)((t=>t.distributors[e].endedAt)),c=(0,l.useCallback)((async()=>{const e=Date.now(),s=1e3*o.toNumber();return s?(0===t&&a(!0),i(s<e)):i(!1)}),[o,t]);return(0,l.useEffect)((()=>{c()}),[c]),{isRevoke:s,disabled:r,setDisabled:a}},{manifest:{appId:os}}=R,cs=e=>{let{distributorAddress:t,treeData:s,remaining:n}=e;const[r,o]=(0,l.useState)(!1),{isRevoke:c,disabled:d,setDisabled:u}=as(t,n),{ui:{width:p}}=(0,i.useUI)(),h=p<768,m=`${window.location.origin}/app/${os}/redeem/${t}?autoInstall=true`;return(0,x.jsxs)(a.Space,{size:h?16:24,children:[(0,x.jsx)(a.Button,{onClick:()=>o(!0),type:"text",style:{color:"#42E6EB",padding:0},children:"share"}),c&&(0,x.jsx)(rs,{disabled:d,setDisabled:u,treeData:s,distributorAddress:t}),(0,x.jsx)($t,{visible:r,onClose:()=>o(!1),redeemLink:m})]})};var ds=s(97429).Buffer;const us=e=>{let{treeData:t}=e;const s=(0,l.useMemo)((()=>{if(!t)return 0;const e=JSON.parse(JSON.stringify(t)).data;return d.MerkleDistributor.fromBuffer(ds.from(e||t)).receipients[0].startedAt.toNumber()}),[t]);return(0,x.jsx)(a.Typography.Text,{children:s?ht()(1e3*s).format("MMM DD, YYYY HH:mm"):"Immediately"})},ps=e=>{let{listSent:t}=e;return t.length?(0,x.jsx)(l.Fragment,{children:t.map(((e,t)=>{const{distributorAddress:s,mint:n,time:i,total:l,treeData:r,remaining:o}=e;return(0,x.jsx)(mt,{style:{border:"1px solid transparent",borderImageSlice:"0 0 1 0",borderImageWidth:1,borderImageSource:"linear-gradient(90deg,transparent, #4F5B5C, transparent)"},cardId:`card_airdrop_${s}`,cardHeader:(0,x.jsx)(a.Row,{gutter:[12,12],children:(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(jt,{title:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(w.MintAvatar,{mintAddress:n}),(0,x.jsxs)(a.Space,{size:6,children:[(0,x.jsx)(Pt,{total:l.toString(),mint:n}),(0,x.jsx)(w.MintSymbol,{mintAddress:n})]})]}),children:(0,x.jsx)(cs,{treeData:r,remaining:o,distributorAddress:s})})})}),children:(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(yt,{label:"Created time",value:(0,x.jsx)(a.Typography.Text,{children:ht()(i).format("MMM DD, YYYY HH:mm")})})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(yt,{label:"Unlock time",value:(0,x.jsx)(us,{treeData:r})})})]})},s)}))}):(0,x.jsx)(a.Empty,{})};var hs=s(4065);const{sol:{utility:xs}}=R,ms=new T.Connection(i.rpc),js=()=>{const[e,t]=(0,l.useState)({}),[s,i]=(0,l.useState)({}),r=(0,n.useSelector)((e=>e.distributors)),a=(0,l.useCallback)((async()=>{const{splt:e}=window.sentre,s={};for(const t in r){if(!r[t])continue;const{mint:n}=r[t],i=await xs.deriveTreasurerAddress(t),l=await e.deriveAssociatedAddress(i,n.toBase58());s[i]=c.account.fromAddress(l)}return t(s)}),[r]),o=(0,l.useCallback)((async()=>{if(!Object.values(e).length)return;const{splt:t}=window.sentre,s={},n=await(0,hs.getMultipleAccounts)(ms,Object.values(e));for(const e of n){if(!e)continue;const{amount:n,owner:i}=await t.parseAccountData(e.account.data);s[i]=Number(n)}return i(s)}),[e]);return(0,l.useEffect)((()=>{a()}),[a]),(0,l.useEffect)((()=>{o()}),[o]),{listRemaining:s}};var ys=s(97429).Buffer;const{manifest:{appId:fs},sol:{utility:gs}}=R,Cs=Date.now(),bs=e=>{let{type:t}=e;const[s,i]=(0,l.useState)([]),[r,a]=(0,l.useState)(0),o=(0,n.useSelector)((e=>e.distributors)),{listHistory:c}=(0,n.useSelector)((e=>e.history)),{listRemaining:u}=js(),p=(0,l.useMemo)((()=>void 0===c),[c]),h=(0,l.useCallback)((async()=>{let e=[];const s=[],n=[];let l=0;const r=[];try{const p=d.MerkleDistributor.salt("0"),h=d.MerkleDistributor.salt(`${fs}/${t}/0`);if(!c)return;for(const e of c){const{treeData:t,distributorAddress:i}=e;if(!t||!o[i])continue;const a=JSON.parse(JSON.stringify(t)).data,c=d.MerkleDistributor.fromBuffer(ys.from(a||t)),x=c.receipients[0].salt,m=ys.compare(p,x),j=ys.compare(h,x);if(0!==m&&0!==j)continue;for(const{authority:e}of c.receipients)r.includes(e.toBase58())||r.push(e.toBase58());l=r.length;const y=1e3*o[i].endedAt.toNumber(),f=await gs.deriveTreasurerAddress(i),g=u[f],C={...e,remaining:g};y<Cs&&y&&u[f]?s.unshift(C):n.push(C)}}catch(p){}finally{a(l);const t=n.sort(((e,t)=>{const s=e.time?new Date(e.time).getTime():0;return(t.time?new Date(t.time).getTime():0)-s}));return e=s.concat(t),i(e)}}),[o,c,u,t]);return(0,l.useEffect)((()=>{h()}),[h]),{listHistory:s,loading:p,numberOfRecipient:r}},ws=[{title:"CREATED DATE",dataIndex:"time",render:e=>(0,x.jsx)(a.Typography.Text,{children:e?ht()(e).format("MMM DD, YYYY HH:mm"):"--"})},{title:"UNLOCK DATE",dataIndex:"treeData",render:e=>(0,x.jsx)(us,{treeData:e})},{title:"TOKEN",dataIndex:"mint",render:e=>(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(w.MintAvatar,{mintAddress:e}),(0,x.jsx)(w.MintSymbol,{mintAddress:e})]})},{title:"AMOUNT",dataIndex:"total",render:(e,t)=>{let{mint:s}=t;return(0,x.jsx)(Pt,{total:e,mint:s})}},{title:"ACTION",dataIndex:"distributorAddress",render:(e,t)=>{let{remaining:s,treeData:n}=t;return(0,x.jsx)(cs,{remaining:s,distributorAddress:e,treeData:n})}}],vs=()=>{const[e,t]=(0,l.useState)(4),{loading:s,listHistory:n}=bs({type:Q.Vesting}),[r,c]=(0,l.useState)([]),{ui:{width:d}}=(0,i.useUI)(),u=d<768;return(0,x.jsx)(a.Card,{loading:s,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:5,children:"History"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(Yt,{listSent:n,onFilter:c})})]})}),u?(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ps,{listSent:r.slice(0,e)})}):(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Table,{dataSource:r.slice(0,e),pagination:!1,columns:ws,rowKey:e=>e.distributorAddress})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"center"},children:(0,x.jsx)(a.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,x.jsx)(o.default,{name:"arrow-down-outline"}),disabled:e>=r.length,children:"VIEW MORE"})})]})})},Ss=e=>{let{valueInUSD:t,numberOfCampaign:s,recipientList:n,loading:i}=e;return(0,x.jsxs)(a.Row,{gutter:[24,24],style:{height:"100%"},children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ue,{loading:!t&&i,label:"Total vesting",icon:(0,x.jsx)(o.default,{className:"card-hero-icon",name:"receipt-outline"}),value:t})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ue,{loading:!s&&i,label:"Total campaigns",icon:(0,x.jsx)(o.default,{className:"card-hero-icon",name:"paper-plane-outline"}),value:s,unit:""})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ue,{loading:!n&&i,label:"Total recipients",icon:(0,x.jsx)(o.default,{className:"card-hero-icon",name:"people-outline"}),value:n,unit:""})})]})};var Ts=s(37014),As=s(44521),ks=s(40426),Rs=s(54179),Ns=s(45198),Ds=s(90404),Bs=s(54132),Es=s(72870),Is=s(8399);As.D([Ns.N,Ds.N,Rs.N,Is.N,Bs.N,Es.N]);const Ms=e=>{let{data:t,bgTooltip:s="#233333"}=e;return{tooltip:{trigger:"item",backgroundColor:s,extraCssText:"border-radius: 0px",formatter:function(e){return`<div style="width: 200px; font-weight: 400"><span style="display: flex; justify-content: space-between"><span style="font-size: 14px, font-weight: 400">Value</span> <span style="font-size: 16px; font-weight: 700">${i.util.numeric(e.data.value).format("0,0.[0000]")}</span></span> <span style="display: flex; justify-content: space-between;"><span style="font-size: 14px; font-weight: 400">Token amount</span> <span style="font-size: 16px; font-weight: 700">${i.util.numeric(e.data.tokenAmount).format("0,0.[0000]")}</span></span></div>`},textStyle:{color:"#F4F5F5"}},legend:{show:!1,height:"100%",width:"100%"},series:[{width:"300",center:[110,"50%"],name:"Sentre chart",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold",color:"#F4F5F5",overflow:"hidden"}},itemStyle:{color:e=>i.util.randomColor(e.name)},labelLine:{show:!1},data:Object.values(t).map((e=>({value:e.usdValue,name:`${e.symbol}`,tokenAmount:e.amountToken,percentRatio:e.ratio})))}],media:[{query:{maxWidth:300},option:{series:[{center:[100,"50%"],radius:["35%","60%"]}]}},{query:{maxWidth:200},option:{series:[{center:[70,"50%"],radius:["25%","45%"]}]}}]}},Os=e=>{let{data:t}=e;return(0,x.jsx)(ks.Z,{echarts:Ts,option:Ms({data:t,bgTooltip:"#123432"}),notMerge:!0,lazyUpdate:!0})},zs=e=>{let{data:t}=e;const s=(0,l.useMemo)((()=>Object.values(t).sort(((e,t)=>t.ratio-e.ratio))),[t]);return(0,x.jsx)(a.Row,{gutter:[12,12],children:s.map(((e,t)=>(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{align:"middle",wrap:!1,gutter:[16,16],children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Avatar,{style:{background:i.util.randomColor(e.symbol)},shape:"square",size:16}),(0,x.jsxs)(a.Typography.Text,{ellipsis:!0,type:"secondary",children:[e.symbol," (",e.name,")"]})]})}),(0,x.jsx)(a.Col,{children:(0,x.jsxs)(a.Typography.Text,{children:[i.util.numeric(e.ratio).format("0,0.[00]"),"%"]})})]})},t)))})},Fs=e=>{let{vestingAllocation:t,loading:s}=e;return(0,x.jsx)(a.Card,{className:"card-lightning",bodyStyle:{paddingBottom:0},style:{height:"100%"},loading:s,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:5,children:"Vesting allocation"})}),(0,x.jsx)(a.Col,{span:24,children:Object.keys(t).length?(0,x.jsxs)(a.Row,{gutter:[8,8],align:"middle",children:[(0,x.jsx)(a.Col,{xs:14,sm:10,children:(0,x.jsx)(Os,{data:t})}),(0,x.jsx)(a.Col,{xs:10,sm:14,children:(0,x.jsx)(zs,{data:t})})]}):(0,x.jsx)(a.Empty,{})})]})})},Us=e=>{const[t,s]=(0,l.useState)({}),[n,r]=(0,l.useState)(0),a=(0,i.useGetMintDecimals)(),{listHistory:o,numberOfRecipient:c,loading:d}=bs({type:e}),{getTotalBalance:u}=_e(),x=(0,l.useMemo)((()=>{const e={};for(const{mint:t,total:s}of o)if(e[t]){const n=e[t];e[t]=n.add(new(p())(s))}else e[t]=new(p())(s);return e}),[o]),m=(0,l.useCallback)((async()=>{const e=[];for(const s in x)e.push({mint:s,amount:x[s]});const t=await u(e);return r(t)}),[u,x]),j=(0,l.useCallback)((async()=>{const e=[];for(const s in x){var t;const n=await i.tokenProvider.findByAddress(s),l=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId;l&&e.push(l)}return await b(e)}),[x]),y=(0,l.useCallback)((async()=>{try{const t={};if(!n)return s(t);const l=await j();for(const s in x){var e;const r=await i.tokenProvider.findByAddress(s),o=null===r||void 0===r||null===(e=r.extensions)||void 0===e?void 0:e.coingeckoId;if(!o)continue;const c=await a({mintAddress:s})||0,d=h.utilsBN.undecimalize(x[s],c),u=l[o]*Number(d),p=u/n*100;if(p<2){let e=d,s=u,n=p;if(t.other){const{amountToken:i,usdValue:l,ratio:r}=t.other;e+=i,s+=l,n+=r}t.other={name:"Other",symbol:"",amountToken:e,usdValue:s,ratio:n}}else t[s]={name:`${null===r||void 0===r?void 0:r.name}`,symbol:`${null===r||void 0===r?void 0:r.symbol}`,amountToken:d,usdValue:u,ratio:p}}return s(t)}catch(t){f(t)}}),[j,a,x,n]);return(0,l.useEffect)((()=>{m()}),[m]),(0,l.useEffect)((()=>{y()}),[y]),{allocation:t,totalUSD:n,numberOfRecipient:c,numberOfCampaigns:o.length,loading:d}},Ls=()=>{const{pushHistory:e}=D(),t=(0,n.useDispatch)(),{allocation:s,totalUSD:i,numberOfRecipient:l,numberOfCampaigns:r,loading:c}=Us(Q.Vesting);return(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:2,children:"Vesting"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{icon:(0,x.jsx)(o.default,{name:"add-outline"}),type:"primary",size:"large",onClick:()=>(e("/vesting/add-new"),t(le("vesting"))),children:"ADD NEW"})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,lg:8,children:(0,x.jsx)(Ss,{loading:c,valueInUSD:i,numberOfCampaign:r,recipientList:l})}),(0,x.jsx)(a.Col,{span:24,lg:16,children:(0,x.jsx)(Fs,{vestingAllocation:s,loading:c})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(vs,{})})]})},_s=e=>{let{airdropAllocation:t,loading:s}=e;return(0,x.jsx)(a.Card,{loading:s,className:"card-lightning",style:{height:"100%"},bodyStyle:{paddingBottom:0},children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:5,children:"Airdrop allocation"})}),(0,x.jsx)(a.Col,{span:24,children:Object.keys(t).length?(0,x.jsxs)(a.Row,{gutter:[8,8],align:"middle",children:[(0,x.jsx)(a.Col,{xs:14,sm:10,children:(0,x.jsx)(Os,{data:t})}),(0,x.jsx)(a.Col,{xs:10,sm:14,children:(0,x.jsx)(zs,{data:t})})]}):(0,x.jsx)(a.Empty,{})})]})})},Hs=()=>{const[e,t]=(0,l.useState)(4),{loading:s,listHistory:n}=bs({type:Q.Airdrop}),[r,c]=(0,l.useState)([]),{ui:{width:d}}=(0,i.useUI)(),u=d<768;return(0,x.jsx)(a.Card,{loading:s,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:5,children:"History"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(Yt,{listSent:n,onFilter:c})})]})}),u?(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ps,{listSent:r.slice(0,e)})}):(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Table,{dataSource:r.slice(0,e),pagination:!1,columns:ws,rowKey:e=>e.distributorAddress})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"center"},children:(0,x.jsx)(a.Button,{onClick:()=>t(e+4),type:"ghost",icon:(0,x.jsx)(o.default,{name:"arrow-down-outline"}),disabled:e>=r.length,children:"VIEW MORE"})})]})})},Ws=e=>{let{valueInUSD:t,numberOfCampaign:s,recipientList:n,loading:i}=e;return(0,x.jsxs)(a.Row,{gutter:[24,24],style:{height:"100%"},children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ue,{label:"Total airdrop",icon:(0,x.jsx)(o.default,{className:"card-hero-icon",name:"cloud-download-outline"}),value:t,loading:!t&&i})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ue,{label:"Total campaigns",icon:(0,x.jsx)(o.default,{className:"card-hero-icon",name:"paper-plane-outline"}),value:s,unit:"",loading:!s&&i})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ue,{loading:!n&&i,label:"Total recipients",icon:(0,x.jsx)(o.default,{className:"card-hero-icon",name:"people-outline"}),value:n,unit:""})})]})},Ys=()=>{const{pushHistory:e}=D(),t=(0,n.useDispatch)(),{allocation:s,totalUSD:i,numberOfRecipient:l,numberOfCampaigns:r,loading:c}=Us(Q.Airdrop);return(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsx)(a.Typography.Title,{level:2,children:"Airdrop"})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{icon:(0,x.jsx)(o.default,{name:"add-outline"}),type:"primary",size:"large",onClick:()=>(e("/airdrop/add-new"),t(le("airdrop"))),children:"ADD NEW"})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,lg:8,children:(0,x.jsx)(Ws,{valueInUSD:i,numberOfCampaign:r,recipientList:l,loading:c})}),(0,x.jsx)(a.Col,{span:24,lg:16,children:(0,x.jsx)(_s,{airdropAllocation:s,loading:c})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Hs,{})})]})},Ps="setting",Zs=(0,H.createAsyncThunk)("setting/setDecimal",(async e=>({decimal:e}))),Vs=(0,H.createAsyncThunk)("setting/setEncryption",(async e=>({encryption:e}))),Ks=(0,H.createAsyncThunk)("setting/setDisabled",(async e=>({disabled:e}))),$s=(0,H.createSlice)({name:Ps,initialState:{decimal:!0,encryption:!1,disabled:!1},reducers:{},extraReducers:e=>{e.addCase(Zs.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Vs.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ks.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Gs=()=>{const e=(0,n.useDispatch)(),{main:{mintSelected:t},setting:{decimal:s,disabled:i}}=(0,n.useSelector)((e=>e)),l=St(t)||0;return(0,x.jsx)(a.Switch,{className:"decimal-switch",onChange:t=>{e(Zs(t))},checkedChildren:l,unCheckedChildren:l,disabled:i,checked:s,size:"small"})},Js=()=>{const e=(0,n.useDispatch)();return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:24,children:[(0,x.jsx)(Gs,{}),(0,x.jsx)(a.Typography.Text,{children:"Decimals"})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:24,children:[(0,x.jsx)(a.Switch,{disabled:!0,onChange:t=>e(Vs(t)),size:"small"}),(0,x.jsx)(a.Typography.Text,{children:"Encrypt confidential information"})]})})]})},qs=()=>(0,x.jsx)(a.Popover,{trigger:"click",placement:"bottom",title:null,content:(0,x.jsx)(Js,{}),children:(0,x.jsx)(a.Button,{type:"text",icon:(0,x.jsx)(o.default,{name:"cog-outline"})})}),Qs=e=>{let{label:t=""}=e;const{step:s}=(0,n.useSelector)((e=>e.steps)),i=(0,l.useMemo)((()=>s===Z.AddRecipient?Z.AddRecipient:s===Z.ConfirmTransfer?Z.ConfirmTransfer:Z.SelectMethod),[s]),r=(0,l.useMemo)((()=>s===Z.ConfirmTransfer?Z.ConfirmTransfer:Z.AddRecipient),[s]);return(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{direction:"vertical",size:12,children:[(0,x.jsx)(a.Radio.Group,{value:s,className:"steps",buttonStyle:"solid",children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Radio.Button,{className:"rate-btn",value:i}),(0,x.jsx)(a.Radio.Button,{className:"rate-btn",value:r}),(0,x.jsx)(a.Radio.Button,{className:"rate-btn",value:Z.ConfirmTransfer})]})}),(0,x.jsx)(a.Typography.Title,{level:5,children:t})]})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(qs,{})})]})},Xs=e=>{let{visible:t,setVisible:s,title:n,description:i,onConfirm:l,onCancel:r,btnText:c}=e;return(0,x.jsx)(a.Modal,{visible:t,closeIcon:(0,x.jsx)(o.default,{name:"close-outline"}),onCancel:()=>s(!1),footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:15,align:"baseline",children:[(0,x.jsx)(o.default,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,x.jsxs)(a.Space,{size:4,direction:"vertical",children:[(0,x.jsx)(a.Typography.Text,{children:n}),(0,x.jsx)(a.Typography.Text,{type:"secondary",children:i})]})]})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{onClick:r,type:"ghost",children:"cancel"}),(0,x.jsx)(a.Button,{onClick:l,type:"primary",children:c})]})})]})})},en=()=>{const e=(0,n.useSelector)((e=>e.setting.decimal)),t=(0,n.useSelector)((e=>e.recipients.recipientInfos));return{amountError:(0,l.useMemo)((()=>{let s=[];for(const e in t)s=s.concat(t[e]);for(const{amount:t}of s)if(!e&&Number(t)%1!==0)return!0;return!1}),[e,t])}},tn=(e,t,s)=>c.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(c.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},sn=e=>{const t=(0,i.useAccounts)(),s=(0,i.useWalletAddress)(),n=(0,i.useWalletBalance)(),{amount:l,mint:r}=t[e]||{},a=St(r)||0;return c.account.isAddress(s)&&c.account.isAddress(e)?e===s?tn(c.DEFAULT_EMPTY_ADDRESS,n,9):tn(r,l,a):tn()},nn=e=>{const[t,s]=(0,l.useState)(""),n=(0,i.useWalletAddress)(),r=sn(t);return(0,l.useEffect)((()=>{(async()=>{if(!c.account.isAddress(n)||!c.account.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const i=await t.deriveAssociatedAddress(n,e);s(i)}catch(i){return s("")}})()})),r},ln=()=>{const{main:{mintSelected:e},recipients:{recipientInfos:t,expirationTime:s},setting:{decimal:i}}=(0,n.useSelector)((e=>e)),r=St(e)||0,a=(0,l.useCallback)((e=>{if(!s)return!0;for(const{unlockTime:t}of e)if(t>s)return!1;return!0}),[s]),o=(0,l.useMemo)((()=>{if(!t||!r)return new(p())(0);let e=new(p())(0),s=[];for(const n in t){const e=a(t[n]);c.account.isAddress(n)&&e&&(s=s.concat(t[n]))}for(const{amount:t}of s)i?e=e.add(h.utilsBN.decimalize(t,r)):Number(t)%1===0&&(e=e.add(new(p())(t)));return e}),[a,i,r,t]),d=(0,l.useMemo)((()=>Object.keys(t).length),[t]);return{total:h.utilsBN.undecimalize(o,r).toString(),quantity:d}},rn=e=>{const{balance:t}=nn(e),{total:s}=ln();return(0,l.useMemo)((()=>t?t-Number(s):0),[t,s])},an=e=>{let{type:t}=e;const s=(0,n.useSelector)((e=>e.recipients.recipientInfos));return(0,l.useMemo)((()=>{let e=[];for(const n in s)(c.account.isAddress(n)||t!==G.valid)&&(c.account.isAddress(n)&&t===G.invalid||(e=e.concat(s[n])));return e}),[s,t])},on=()=>{const[e,t]=(0,l.useState)(!1),s=(0,n.useDispatch)(),{main:{isTyping:i,mintSelected:r}}=(0,n.useSelector)((e=>e)),{amountError:o}=en(),c=rn(r),d=an({type:G.invalid}),u=!an({type:G.valid}).length||!!d.length||i||c<0||o,p=(0,l.useCallback)((async()=>(await s(ue(Z.SelectMethod)),await s(te(P.manual)),await s(Ee()),t(!1))),[s]);return(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{type:"ghost",size:"large",onClick:()=>t(!0),block:!0,children:"Back"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>s(ue(Z.ConfirmTransfer)),type:"primary",disabled:u,block:!0,children:"Continue"})}),(0,x.jsx)(Xs,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:p})]})};var cn=s(24656),dn=s.n(cn),un=s(18268),pn=s.n(un),hn=s(84354);const xn=e=>{let{walletAddress:t,addNewRecipient:s,remove:n,isEdit:i=!1,setIsEdit:r=(()=>{}),disabled:c}=e;return(0,x.jsx)(l.Fragment,{children:t?(0,x.jsx)(l.Fragment,{children:i?(0,x.jsx)(a.Button,{style:{padding:0,color:"#42E6EB"},type:"text",onClick:s,size:"small",disabled:c,children:"Save"}):(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{type:"text",size:"small",style:{padding:0},onClick:n,icon:(0,x.jsx)(o.default,{style:{fonSize:20},name:"trash-outline"})}),(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>r(!0),style:{padding:0},icon:(0,x.jsx)(o.default,{style:{fonSize:20},name:"create-outline"})})]})}):(0,x.jsx)(a.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:s,children:"OK"})})},mn=()=>({calcListAmount:(0,l.useCallback)(((e,t)=>{const s=[],n=t-1,i=e.div(new(p())(t));let l=new(p())(0);for(let r=0;r<t;r++)if(r!==n)l=l.add(i),s.push(i);else{const t=e.sub(l);s.push(t)}return s}),[])}),jn={walletAddress:"",amount:""},yn=e=>{let{walletAddress:t,amount:s,index:i}=e;const[r,d]=(0,l.useState)(jn),[u,m]=(0,l.useState)(""),[j,y]=(0,l.useState)(""),[f,g]=(0,l.useState)(!1),[C,b]=(0,l.useState)(!1),{main:{mintSelected:w,typeDistribute:v},recipients:{recipientInfos:S,configs:T,globalUnlockTime:A,expirationTime:k},setting:{decimal:R}}=(0,n.useSelector)((e=>e)),N=(0,n.useDispatch)(),D=St(w)||0,{calcListAmount:B}=mn(),E=(0,l.useCallback)((async()=>c.account.isAddress(t)&&s?d({walletAddress:t,amount:s}):d(jn)),[t,s]),I=(0,l.useCallback)((()=>(!s&&!t||C)&&(r.walletAddress||r.amount||C)?N(ie(!0)):N(ie(!1))),[s,N,r.amount,r.walletAddress,C,t]),M=(0,l.useCallback)((()=>{if(s)return R?m(""):Number(s)%1!==0?m("Should be natural numbers"):void 0}),[s,R]),O=(0,l.useMemo)((()=>t&&void 0!==i?i+1:Object.keys(S).length+1),[i,S,t]),z=!(!t||C),F=(0,l.useMemo)((()=>{const{distributeIn:e}=T,t=A+(0,he.Z)(e);return!!k&&((A>k||t>k)&&v===Q.Vesting)}),[k,T,A,v]);return(0,l.useEffect)((()=>{E()}),[E]),(0,l.useEffect)((()=>{M()}),[M]),(0,l.useEffect)((()=>{I()}),[I]),(0,x.jsxs)(a.Row,{gutter:[8,8],align:"middle",justify:"space-between",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsxs)(a.Col,{flex:"auto",children:["Wallet address #",O]}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(xn,{addNewRecipient:async()=>{const{walletAddress:e,amount:t}=r;if(!c.account.isAddress(e))return y("Wrong wallet address");if(!t)return m("Amount cannot be empty");if(!R&&Number(t)%1!==0)return m("Should be natural numbers");const s=[];if(S[e]&&!C)return g(!0);const n={address:e,amount:t,unlockTime:A};return s.push(n),y(""),m(""),b(!1),C||d(jn),N(Ne({walletAddress:e,nextRecipients:s}))},walletAddress:t,remove:()=>{if(c.account.isAddress(t))return N(De(t))},isEdit:C,setIsEdit:b,disabled:F})})]})}),(0,x.jsx)(a.Col,{span:19,children:(0,x.jsx)(a.Input,{disabled:!!t,value:r.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:e=>{d({...r,[e.target.name]:e.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,x.jsx)(a.Col,{span:5,children:(0,x.jsx)(hn.Z,{disabled:z,value:s||r.amount,name:"amount",placeholder:"Amount",onChange:e=>d({...r,amount:e}),className:u?"recipient-input-error":"recipient-input",autoComplete:"off"})}),(j||u)&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(o.default,{style:{color:"#f2323f"},name:"warning-outline"}),(0,x.jsx)(a.Typography.Text,{type:"danger",children:j||u})]})}),(0,x.jsx)(Xs,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",btnText:"merge",onConfirm:async()=>{const{walletAddress:e,amount:t}=r,s=S[e],n=s.length;let i=new(p())(0);for(const{amount:r}of s)i=i.add(h.utilsBN.decimalize(r,D));const l=i.add(h.utilsBN.decimalize(t,D)),a=B(l,n),o=S[e].map(((e,t)=>({...e,amount:h.utilsBN.undecimalize(a[t],D)})));return await N(Ne({walletAddress:e,nextRecipients:o})),await g(!1),(u||j)&&(m(""),y("")),d(jn)},visible:f,setVisible:g,onCancel:()=>g(!1)})]})},fn=e=>{let{label:t,value:s}=e;const{ui:{width:n}}=(0,i.useUI)(),l=n<1200;return(0,x.jsxs)(a.Row,{gutter:[4,4],children:[(0,x.jsx)(a.Col,{flex:l?"auto":void 0,span:l?void 0:24,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:t})}),(0,x.jsx)(a.Col,{span:l?void 0:24,children:s})]})},gn=e=>{let{isConfirm:t=!1}=e;const{main:{mintSelected:s,typeDistribute:l},recipients:{expirationTime:r,globalUnlockTime:o}}=(0,n.useSelector)((e=>e)),{total:c,quantity:d}=ln(),{balance:u}=nn(s),p=rn(s);return(0,x.jsxs)(a.Row,{justify:t?"space-between":void 0,gutter:[8,8],children:[(0,x.jsx)(a.Col,{xs:24,xl:12,children:(0,x.jsxs)(a.Row,{gutter:[{xs:16,sm:16,md:16,xl:48},{xs:16,sm:16,md:16,xl:48}],children:[(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(fn,{label:"Recipients",value:(0,x.jsx)(a.Typography.Text,{children:d})})}),l===Q.Airdrop&&(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(fn,{label:"Unlock time",value:(0,x.jsx)(a.Typography.Text,{children:o?ht()(o).format(J):"Immediately"})})}),(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(fn,{label:"Expiration time",value:(0,x.jsx)(a.Typography.Text,{children:r?ht()(r).format(J):"Unlimited"})})})]})}),(0,x.jsx)(a.Col,{xs:24,xl:12,className:"overview-data",children:(0,x.jsxs)(a.Row,{gutter:[{xs:16,sm:16,md:16,xl:48},{xs:16,sm:16,md:16,xl:48}],children:[(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(fn,{label:"Your balance",value:(0,x.jsxs)(a.Space,{size:4,children:[(0,x.jsx)(a.Typography.Text,{children:i.util.numeric(u).format("0,0.00[0000]")}),(0,x.jsx)(a.Typography.Text,{children:(0,x.jsx)(w.MintSymbol,{mintAddress:s})})]})})}),!t&&(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(fn,{label:"Total",value:(0,x.jsxs)(a.Space,{size:4,children:[(0,x.jsx)(a.Typography.Title,{level:5,children:c}),(0,x.jsx)(a.Typography.Title,{level:5,children:(0,x.jsx)(w.MintSymbol,{mintAddress:s})})]})})}),(0,x.jsx)(a.Col,{xs:24,xl:8,children:(0,x.jsx)(fn,{label:"Remaining",value:(0,x.jsxs)(a.Space,{size:4,children:[(0,x.jsx)(a.Typography.Text,{children:i.util.numeric(p).format("0,0.00[0000]")}),(0,x.jsx)(a.Typography.Text,{children:(0,x.jsx)(w.MintSymbol,{mintAddress:s})})]})})})]})})]})},Cn=()=>(0,x.jsx)(a.Card,{bordered:!1,style:{borderRadius:8,boxShadow:"unset"},bodyStyle:{padding:"12px 16px"},className:"card-total",children:(0,x.jsx)(gn,{})}),bn=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;return(0,x.jsxs)(a.Row,{gutter:[16,8],align:"middle",children:[(0,x.jsx)(a.Col,{span:2,children:(0,x.jsxs)(a.Space,{children:[t&&(0,x.jsx)(a.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"No."})]})}),(0,x.jsx)(a.Col,{span:14,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,x.jsx)(a.Col,{span:4,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Amount"})})]})},wn=e=>{let{accountAddress:t="",amount:s=0,selected:r=!1,onChecked:d=(()=>{}),index:u}=e;const[p,h]=(0,l.useState)(!1),[m,j]=(0,l.useState)(s),y=(0,n.useSelector)((e=>e.file.selectedFile)),f=(0,n.useSelector)((e=>e.setting.decimal)),g=(0,n.useSelector)((e=>e.recipients.globalUnlockTime)),C=(0,n.useDispatch)(),b=c.account.isAddress(t),w=(0,l.useMemo)((()=>!!s&&(!f&&Number(s)%1!==0)),[s,f]),v=(0,l.useCallback)((()=>C(ie(!!p))),[C,p]);return(0,l.useEffect)((()=>{j(s)}),[s]),(0,l.useEffect)((()=>{v()}),[v]),(0,x.jsxs)(a.Row,{gutter:[16,8],align:"middle",className:"vesting-item",children:[(0,x.jsx)(a.Col,{span:2,children:(0,x.jsxs)(a.Space,{children:[r&&(0,x.jsx)(a.Checkbox,{checked:null===y||void 0===y?void 0:y.includes(t),onChange:e=>d(e.target.checked,t),className:"lightning-checkbox"}),(0,x.jsxs)(a.Typography.Text,{type:"secondary",children:["#",u+1]})]})}),(0,x.jsx)(a.Col,{span:14,children:p?(0,x.jsx)(a.Input,{value:t,name:"accountAddress",className:"recipient-input",autoComplete:"off",disabled:!0}):(0,x.jsx)(a.Tooltip,{title:t,children:(0,x.jsx)(a.Typography.Text,{style:{color:b?"":"#F9575E"},children:i.util.shortenAddress(t)})})}),(0,x.jsx)(a.Col,{span:4,children:(0,x.jsx)(hn.Z,{value:m,bordered:!1,disabled:!p,style:{padding:0},onChange:e=>{j(e)},className:w?"recipient-input-error":"recipient-input"})}),(0,x.jsx)(a.Col,{span:4,className:p?"":"vesting-action",children:p?(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{onClick:()=>h(!1),type:"text",children:"cancel"}),(0,x.jsx)(a.Button,{style:{padding:0,color:"#42E6EB"},onClick:()=>{if(!b)return;const e=[{address:t,amount:m.toString(),unlockTime:g}];return C(Ie({walletAddress:t,nextRecipientInfos:e})),h(!1)},type:"text",children:"save"})]}):(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{onClick:()=>C(De(t)),icon:(0,x.jsx)(o.default,{name:"trash-outline"}),type:"text"}),b&&(0,x.jsx)(a.Button,{onClick:()=>h(!0),icon:(0,x.jsx)(o.default,{name:"create-outline"}),type:"text"})]})})]})},vn="file",Sn=(0,H.createAsyncThunk)("file/setFileName",(async e=>({fileName:e}))),Tn=(0,H.createAsyncThunk)("file/selectRecipient",(async(e,t)=>{let{checked:s,walletAddress:n}=e,{getState:i}=t;const l=[...i().file.selectedFile];if(!s){const e=l.indexOf(n);l.splice(e,1)}return s&&l.push(n),{selectedFile:l}})),An=(0,H.createAsyncThunk)("file/removeSelectedFile",(async()=>({selectedFile:[]}))),kn=(0,H.createAsyncThunk)("file/selectAll",(async e=>({selectedFile:e}))),Rn=(0,H.createSlice)({name:vn,initialState:{fileName:"",selectedFile:[]},reducers:{},extraReducers:e=>{e.addCase(Sn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Tn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(An.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(kn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Nn=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,x.jsxs)(a.Space,{size:24,children:[(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>i(V.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},Dn=e=>{let{remove:t=(()=>{})}=e;const[s,i]=(0,l.useState)(!1),[r,c]=(0,l.useState)(),[d,u]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),m=(0,n.useDispatch)(),{file:{fileName:j,selectedFile:y},recipients:{recipientInfos:f}}=(0,n.useSelector)((e=>e)),g=an({type:G.invalid}),C=an({type:G.valid}),b=(e,t)=>m(Tn({checked:e,walletAddress:t})),w=(0,l.useCallback)((()=>{if(null===y||void 0===y||!y.length)return;u(!0);const e={...f};for(const t of y)delete e[t];m(ke({recipientInfos:e})),m(An()),u(!1),i(!1)}),[m,f,y]),{amountError:v}=en();return(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,x.jsxs)(a.Row,{gutter:8,children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(o.default,{name:"document-attach-outline"}),(0,x.jsx)(a.Typography.Text,{style:{color:"inherit"},children:j})]})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,x.jsx)(o.default,{name:"close-outline"}),onClick:()=>h(!0)})})]})})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{flex:"auto",children:s&&(0,x.jsx)(a.Space,{children:(0,x.jsx)(a.Button,{type:"text",size:"small",icon:(0,x.jsx)(o.default,{name:"trash-outline"}),onClick:w,disabled:!(null!==y&&void 0!==y&&y.length),children:"Delete"})})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(Nn,{activeKey:r,selected:s,onSelect:i,onCollapsed:c})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Collapse,{activeKey:r,bordered:!1,className:"auto-add-new",children:(0,x.jsx)(a.Collapse.Panel,{header:void 0,children:(0,x.jsx)(yn,{})},V.activeKey)})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Spin,{spinning:d,children:(0,x.jsx)(a.Card,{bordered:!1,className:"card-content",children:(0,x.jsxs)(a.Row,{gutter:[8,13],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(bn,{selected:s,onChecked:e=>{if(e){const e=g.concat(C).map((e=>{let{address:t}=e;return t}));m(kn(e))}else m(An())}})}),g.map(((e,t)=>{let{address:n,amount:i}=e;return(0,x.jsx)(a.Col,{span:24,className:t+1===g.length?"last-item-error-data":"",children:(0,x.jsx)(wn,{accountAddress:n,amount:i,selected:s,onChecked:b,index:C.length+t})},n+t)})),C.map(((e,t)=>{let{address:n,amount:i}=e;return(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(wn,{accountAddress:n,amount:i,selected:s,onChecked:b,index:t})},n+t)}))]})})})}),v&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:12,children:[(0,x.jsx)(o.default,{style:{color:"#F9575E"},name:"warning-outline"}),(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(gn,{})})]})}),(0,x.jsx)(Xs,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:p,setVisible:h,onConfirm:t,onCancel:()=>h(!1),btnText:"delete"})]})};const Bn=s.p+"static/media/icon-upload.a3c69638b092ea112d393cdc3d63d2c4.svg",En=s.p+"static/media/example.5ac7e1383bf101857b35.csv",In=()=>{const e=(0,n.useDispatch)(),[t,s]=(0,l.useState)(!1),[i,r]=(0,l.useState)(!1),[c,d]=(0,l.useState)({}),{recipients:{recipientInfos:u,globalUnlockTime:p},main:{mintSelected:m}}=(0,n.useSelector)((e=>e)),j=St(m)||0,y=(0,l.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>dn().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;t(s)}}))))(t);if(!j)return;const i={};let l=!1;for(const[e,s]of n)if(i[e]){l=!0;const t=[...i[e]],n=h.utilsBN.decimalize(t[0].amount,j).add(h.utilsBN.decimalize(s,j));i[e]=[{address:e,amount:h.utilsBN.undecimalize(n,j),unlockTime:p}]}else i[e]=[{address:e,amount:s,unlockTime:p}];return l?(d(i),s(!1),r(!0),e(Sn(t.name)),!0):(e(Sn(t.name)),e(ke({recipientInfos:i})),s(!1),r(!1),!1)}),[e,p,j]),f=async()=>(e(Ee()),d({}),!0);return Object.values(u).length?(0,x.jsx)(Dn,{remove:f}):(0,x.jsxs)(a.Row,{gutter:[8,8],justify:"end",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Spin,{spinning:t,children:(0,x.jsx)(a.Upload.Dragger,{accept:".csv,.txt",beforeUpload:y,onRemove:f,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,x.jsxs)(a.Space,{direction:"vertical",size:24,align:"center",children:[(0,x.jsx)(a.Image,{src:Bn,preview:!1}),(0,x.jsxs)(a.Space,{direction:"vertical",size:4,align:"center",children:[(0,x.jsx)(a.Typography.Text,{children:"Click or Drop file to upload"}),(0,x.jsxs)(a.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,x.jsx)("code",{children:".csv"}),","," ",(0,x.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,x.jsx)(o.default,{name:"download-outline"}),onClick:async()=>{if(!En)return;const e=await C(En)||"";pn()(e,"example.csv")},children:"Download sample"})}),(0,x.jsx)(Xs,{title:"Do you want to merge wallet addresses?",description:"There are some wallet addresses that are the same.",visible:i,setVisible:r,onConfirm:()=>(e(ke({recipientInfos:c})),r(!1)),onCancel:()=>{r(!1),e(Sn("")),d({})},btnText:"merge"})]})},Mn=()=>(0,x.jsx)(a.Card,{bordered:!1,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Qs,{label:"Fill in recipient information"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(In,{})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(on,{})})]})}),On=()=>{const[e,t]=(0,l.useState)(!1),s=(0,n.useDispatch)(),{recipients:{recipientInfos:i},main:{mintSelected:r,isTyping:o}}=(0,n.useSelector)((e=>e)),{quantity:c}=ln(),d=rn(r),u=(0,l.useMemo)((()=>{const e=[];for(const t in i)e.push(i[t][0]);return e}),[i]),{amountError:p}=en(),h=(0,l.useCallback)((async()=>{await s(Ae(0)),await s(Te(0)),await s(ue(Z.SelectMethod)),await s(te(P.manual)),await s(Ee())}),[s]),m=c<=0||p||d<0||o;return(0,x.jsxs)(a.Card,{className:"card-lightning",bordered:!1,children:[(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Qs,{label:"Fill in recipient information"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[8,8],children:[u&&u.map(((e,t)=>{let{address:s,amount:n}=e;return(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(yn,{amount:n,walletAddress:s,index:t})},s+t)})),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(yn,{})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Cn,{})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{onClick:()=>t(!0),size:"large",type:"ghost",block:!0,children:"Back"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",type:"primary",onClick:()=>s(ue(Z.ConfirmTransfer)),block:!0,disabled:m,children:"Continue"})})]})})]}),(0,x.jsx)(Xs,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:h})]})};var zn=s(61454);const{manifest:{appId:Fn}}=R;const Un=class{constructor(e){if(this.db=void 0,this.set=async(e,t)=>await this.db.setItem(e,t),this.get=async e=>await this.db.getItem(e),this.clear=async()=>await this.db.clear(),!c.account.isAddress(e))throw new Error("Invalid wallet address");const t=new i.PDB(e).createInstance(Fn);if(!t)throw new Error("Invalid storage");this.db=t}},Ln="history",_n={listHistory:void 0},Hn=(0,H.createAsyncThunk)("history/getHistory",(async e=>{let t,{walletAddress:s,distributors:n}=e;if(!c.account.isAddress(s))throw new Error("Wallet is not connected");const i=new Un(s);await i.get("history")&&i.clear();const l=Object.keys(n).map((e=>({address:e,...n[e]}))),r=new E;return await Promise.all(l.map((async e=>{try{var n;t=null!==(n=t)&&void 0!==n&&n.length?[...t]:[];const{address:l,mint:a,total:o,metadata:c,authority:d}=e;if(d.toBase58()!==s)return;const u=await i.get(l);if(!(0,zn.isEmpty)(u))return void t.push(u);const p=await g(c),h=await r.get(p),x={distributorAddress:l,mint:a.toBase58(),total:o.toString(),time:"",treeData:h};i.set(l,x),t.push(x)}catch(l){}}))),{listHistory:t}})),Wn=(0,H.createAsyncThunk)("history/setHistory",(async(e,t)=>{let{historyRecord:s}=e,{getState:n}=t;const{history:{listHistory:i}}=n(),l=[...i];return l.unshift(s),{listHistory:l}})),Yn=(0,H.createSlice)({name:Ln,initialState:_n,reducers:{},extraReducers:e=>{e.addCase(Hn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Wn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;var Pn=s(97429).Buffer;const{sol:{utility:Zn,fee:Vn,taxman:Kn},manifest:{appId:$n}}=R,Gn=()=>{const[e,t]=(0,l.useState)(!1),[s,r]=(0,l.useState)(""),[o,p]=(0,l.useState)(!1),{main:{mintSelected:h,typeDistribute:f},setting:{decimal:g},recipients:{recipientInfos:C,expirationTime:b}}=(0,n.useSelector)((e=>e)),v=(0,i.useWalletAddress)(),S=(0,n.useDispatch)(),T=St(h)||0,{total:A}=ln(),k=rn(h),{pushHistory:R}=D(),N=(0,l.useMemo)((()=>{if(!C||!T)return;let e=[];for(const s in C)e=e.concat(C[s]);const t=e.map(((e,t)=>{let{amount:s,address:n,unlockTime:i}=e;const l=(e=>{const t=new Date(e).toUTCString();return new Date(t).getTime()})(i),r=g?c.utils.decimalize(s,T).toString():s;return{authority:c.account.fromAddress(n),amount:new u.BN(r),startedAt:new u.BN(l/1e3),salt:d.MerkleDistributor.salt(`${$n}/${f}/${t.toString()}`)}}));return new d.MerkleDistributor(t).toBuffer()}),[C,T,g,f]),B={fee:new u.BN(Vn),feeCollectorAddress:Kn},I=(0,l.useCallback)((async()=>(await S(ue(Z.SelectMethod)),await S(Ee()),await S(ue(Z.SelectMethod)),await S(Ae(0)),await S(Te(0)),await S(re("")),await S(ae(0)),await S(se(W)),R(`/${f}`))),[S,R,f]);return(0,x.jsxs)(a.Card,{bordered:!1,className:"card-lightning",children:[(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Qs,{label:"Confirm transfer"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],justify:"center",children:[(0,x.jsx)(a.Col,{children:(0,x.jsxs)(a.Space,{direction:"vertical",size:12,align:"center",children:[(0,x.jsx)(a.Typography.Text,{children:"Total transfer"}),(0,x.jsx)(a.Typography.Title,{level:1,children:A}),(0,x.jsx)(a.Tag,{style:{margin:0,borderRadius:4,color:"rgb(66, 230, 235)",background:"rgba(66, 230, 235, 0.1)",border:"unset"},children:(0,x.jsx)(w.MintSymbol,{mintAddress:h})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Card,{bordered:!1,className:"card-total",children:(0,x.jsx)(gn,{isConfirm:!0})})})]})}),(0,x.jsx)(a.Col,{span:24,children:o?(0,x.jsx)(m,{onBack:I}):(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>S(ue(Z.AddRecipient)),block:!0,type:"ghost",children:"BACK"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:async()=>{try{if(!N)throw new Error("Invalid Merkle Data");t(!0);const e=d.MerkleDistributor.fromBuffer(N),s=new E,n=await s.set(N.toJSON().data),{multihash:{digest:i}}=j.CID.parse(n),l=Pn.from(i),{txId:a,distributorAddress:o}=await Zn.initializeDistributor({tokenAddress:h,total:e.getTotal(),merkleRoot:e.deriveMerkleRoot(),metadata:l,endedAt:b/1e3,feeOptions:B}),c={total:e.getTotal().toString(),time:(new Date).toString(),mint:h,distributorAddress:o,treeData:N},u=new Un(v);return await u.set(o,c),await S(Wn({historyRecord:c})),p(!0),y("Airdrop",a),r(`${window.location.origin}/app/${$n}/redeem/${o}?autoInstall=true`)}catch(e){window.notify({type:"error",description:e.message})}finally{t(!1)}},type:"primary",loading:e,disabled:k<0,block:!0,children:"TRANSFER"})})]})})]}),(0,x.jsx)($t,{visible:Boolean(s),onClose:()=>r(""),redeemLink:s})]})},Jn=e=>{let{placeholder:t,switchText:s,onChange:n,onSwitch:i,label:l,value:r,error:c,checked:d,explain:u}=e;return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{align:"baseline",children:[(0,x.jsx)(a.Typography.Text,{className:"caption",children:l}),u]})}),(0,x.jsx)(a.Col,{children:(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{xs:{order:2},lg:{order:1},children:(0,x.jsx)(a.Typography.Text,{children:s})}),(0,x.jsx)(a.Col,{xs:{order:1},lg:{order:2},children:(0,x.jsx)(a.Switch,{size:"small",checked:d,onChange:e=>{n(0),i(e)}})})]})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.DatePicker,{placeholder:t,suffixIcon:(0,x.jsx)(o.default,{name:"time-outline"}),className:"date-option",onChange:e=>n((null===e||void 0===e?void 0:e.valueOf())||0),disabled:d,clearIcon:null,value:r?ht()(r):null,showTime:{showSecond:!1},placement:"bottomRight",format:J})}),c&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",style:{color:"#F9575E"},children:c})})]})},qn=e=>{let{label:t,description:s,active:n}=e;return(0,x.jsxs)(l.Fragment,{children:[n?(0,x.jsx)(o.default,{name:"checkbox-sharp",style:{position:"absolute",top:0,right:0,color:"#42E6EB",fontSize:20}}):null,(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:5,children:t})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:s})})]})]})},Qn=e=>{let{mintAddress:t}=e;const[s,n]=(0,l.useState)(!1),{balance:r}=nn(t);return(0,x.jsxs)(a.Row,{gutter:[8,8],style:{background:"#233333",height:70,padding:"12px 16px"},children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsxs)(a.Space,{size:4,direction:"vertical",children:[(0,x.jsx)(a.Typography.Text,{className:"caption",type:"secondary",children:"Balance"}),r?(0,x.jsxs)(a.Typography.Text,{children:[(0,Gt.numeric)(r).format("0.0,[0000]")," ",(0,x.jsx)(w.MintSymbol,{mintAddress:t})]}):0]})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsxs)(a.Space,{size:0,direction:"vertical",children:[(0,x.jsx)(a.Typography.Text,{className:"caption",type:"secondary",children:"Mint address"}),t!==W?(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Typography.Text,{children:(0,Gt.shortenAddress)(t)}),(0,x.jsx)(a.Tooltip,{title:"Copied",visible:s,children:(0,x.jsx)(Vt(),{text:t,children:(0,x.jsx)(a.Button,{type:"text",onClick:async()=>{n(!0),await i.util.asyncWait(1500),n(!1)},icon:(0,x.jsx)(o.default,{name:"copy-outline"})})})})]}):"--"]})})]})},Xn=()=>{const e=(0,n.useDispatch)(),{expirationTime:t,globalUnlockTime:s}=(0,n.useSelector)((e=>e.recipients)),i=(0,n.useSelector)((e=>e.main.mintSelected)),[r,c]=(0,l.useState)(P.manual),[d,u]=(0,l.useState)(s),[p,h]=(0,l.useState)(t),[m,j]=(0,l.useState)(!0),[y,f]=(0,l.useState)(!0),{pushHistory:g}=D(),C=(0,l.useMemo)((()=>m?0:d),[m,d]),b=(0,l.useMemo)((()=>y?0:p),[p,y]),w=(0,l.useMemo)((()=>p<s&&!m&&p?"Must be less than the expiration time.":""),[p,s,m]),v=(0,l.useMemo)((()=>p<Date.now()&&!y&&p?"Must be greater than current time.":""),[p,y]),S=i===W||!r||!d&&!m||!p&&!y||p<s&&!y||p<Date.now()&&!y;return(0,l.useEffect)((()=>{e(Ae(C)),e(Te(b))}),[e,b,C]),(0,x.jsx)(a.Card,{className:"card-lightning",bordered:!1,children:(0,x.jsxs)(a.Row,{gutter:[32,32],align:"middle",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Qs,{label:"Select token type and input method"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{xs:24,md:24,xl:12,children:(0,x.jsx)(Y,{activeMintAddress:i,onSelect:t=>{e(se(t))}})}),(0,x.jsx)(a.Col,{xs:24,md:24,xl:12,children:(0,x.jsx)(Qn,{mintAddress:i})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:12,direction:"vertical",style:{width:"100%"},children:[(0,x.jsx)(a.Typography.Text,{children:"Choose transfer info input method"}),(0,x.jsx)(a.Radio.Group,{onChange:e=>c(e.target.value),style:{width:"100%"},className:"select-card",children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{xs:24,sm:12,md:12,lg:12,children:(0,x.jsx)(a.Radio.Button,{value:P.manual,children:(0,x.jsx)(qn,{label:"Manual",description:"Input each wallet address and airdrop amount by hand.",active:r===P.manual})})}),(0,x.jsx)(a.Col,{xs:24,sm:12,md:12,lg:12,children:(0,x.jsx)(a.Radio.Button,{value:P.auto,children:(0,x.jsx)(qn,{label:"Automatic",description:"Upload a CSV or TXT file containing wallet addresses and airdrop amount.",active:r===P.auto})})})]})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{xs:24,lg:12,children:(0,x.jsx)(Jn,{label:"Unlock time",onSwitch:j,switchText:"Send immediately",onChange:u,placeholder:"Select unlock time",value:d,error:w,checked:m})}),(0,x.jsx)(a.Col,{xs:24,lg:12,children:(0,x.jsx)(Jn,{label:"Expiration time",onSwitch:f,switchText:"Unlimited",onChange:h,placeholder:"Select time",value:p,error:v,checked:y,explain:(0,x.jsx)(a.Tooltip,{title:"Vesting expiration time, after this time users will not be able to claim the token and you can get it back.",children:(0,x.jsx)(o.default,{name:"information-circle-outline"})})})})]})})]})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>g("/airdrop"),block:!0,type:"ghost",children:"Cancel"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>{e(te(r)),e(ue(Z.AddRecipient))},block:!0,type:"primary",disabled:S,children:"Continue"})})]})})},ei=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,n.useSelector)((e=>e));return t===Z.SelectMethod?(0,x.jsx)(Xn,{}):t===Z.AddRecipient?e===P.auto?(0,x.jsx)(Mn,{}):(0,x.jsx)(On,{}):(0,x.jsx)(Gn,{})},ti=()=>(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:2,children:"Add new Airdrop"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ei,{})})]}),si=e=>{let{type:t}=e;const s=(0,n.useSelector)((e=>e.recipients.recipientInfos)),i=(0,n.useSelector)((e=>e.recipients.expirationTime)),r=(0,l.useCallback)((e=>{if(!i)return!0;for(const{unlockTime:t}of e)if(t>i)return!1;return!0}),[i]);return(0,l.useMemo)((()=>{let e=[];const n=[];for(const i in s){const n=r(s[i]);c.account.isAddress(i)&&n&&t===G.invalid||(c.account.isAddress(i)&&n||t!==G.valid)&&(e=e.concat(s[i]))}for(const{address:t,amount:s,unlockTime:i}of e){const e=n.findIndex((e=>{let{address:s}=e;return s===t}));if(-1===e)n.push({address:t,config:[{unlockTime:i,amount:s}]});else{const t={...n[e]};t.config.push({unlockTime:i,amount:s}),n[e]=t}}return n}),[r,s,t])},ni=()=>{const[e,t]=(0,l.useState)(!1),s=(0,n.useDispatch)(),{main:{isTyping:i,mintSelected:r}}=(0,n.useSelector)((e=>e)),{amountError:o}=en(),c=rn(r),d=!!si({type:G.invalid}).length||i||c<0||o,u=(0,l.useCallback)((async()=>{s(ue(Z.SelectMethod)),s(re("")),s(Te(0)),s(Ee())}),[s]);return(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{type:"ghost",size:"large",onClick:()=>t(!0),block:!0,children:"Back"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>s(ue(Z.ConfirmTransfer)),type:"primary",disabled:d,block:!0,children:"Continue"})}),(0,x.jsx)(Xs,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:u})]})},ii=e=>{let{selected:t=!1,onChecked:s=(()=>{})}=e;return(0,x.jsxs)(a.Row,{gutter:[16,8],align:"middle",wrap:!1,style:{padding:8},children:[(0,x.jsx)(a.Col,{span:2,children:(0,x.jsxs)(a.Space,{children:[t&&(0,x.jsx)(a.Checkbox,{className:"lightning-checkbox",onChange:e=>s(e.target.checked)}),(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"No."})]})}),(0,x.jsx)(a.Col,{span:4,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,x.jsx)(a.Col,{span:16,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Amount & Unlock time"})}),(0,x.jsx)(a.Col,{span:2})]})},li=e=>{let{walletAddress:t}=e;const s=(0,n.useSelector)((e=>e.recipients.expirationTime));return(0,x.jsx)(a.Card,{className:"card-overview",bodyStyle:{padding:"13px 16px"},children:(0,x.jsxs)(a.Row,{gutter:[10,10],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(yt,{label:"Wallet Address",value:i.util.shortenAddress(t)})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(yt,{label:"Expiration Time",value:s?ht()(s).format("DD/MM/YYYY HH:mm"):"Unlimited"})})]})})},ri=e=>{let{walletAddress:t,setVisible:s,visible:i}=e;const[r,c]=(0,l.useState)([]),d=(0,n.useSelector)((e=>e.recipients.recipientInfos[t])),u=(0,n.useSelector)((e=>e.recipients.expirationTime)),p=(0,n.useSelector)((e=>e.setting.decimal)),h=(0,n.useDispatch)(),m={unlockTime:0,amount:"",address:t},j=(0,l.useMemo)((()=>{for(const{amount:e,unlockTime:t}of r){if(!t||!e)return!0;if(t>u&&u)return!0;if(!p&&Number(e)%1!==0)return!0}return!1}),[p,u,r]);return(0,l.useEffect)((()=>{c(d)}),[d]),(0,x.jsx)(a.Modal,{footer:null,className:"card-lightning",style:{paddingBottom:0},closeIcon:(0,x.jsx)(o.default,{name:"close-outline"}),visible:i,onCancel:e=>(e.stopPropagation(),s(!1)),children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:4,children:"Edit amount & unlock time"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[r.map(((e,t)=>{let{amount:s,unlockTime:n}=e;return(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:11,children:(0,x.jsx)(a.Input,{name:"amount",className:"recipient-input",placeholder:"Input amount",value:s,onChange:e=>((e,t)=>{const s=[...r];return s[t]={...s[t],amount:e.target.value},c(s)})(e,t)})}),(0,x.jsx)(a.Col,{span:11,children:(0,x.jsx)(a.DatePicker,{placeholder:"Select unlock time",suffixIcon:(0,x.jsx)(o.default,{name:"time-outline"}),className:n>u&&u?"date-option error":"date-option",onChange:e=>((e,t)=>{const s=[...r];return s[t]={...s[t],unlockTime:e},c(s)})((null===e||void 0===e?void 0:e.valueOf())||0,t),clearIcon:null,showTime:{showSecond:!1},placement:"bottomRight",value:n?ht()(n):null,format:J})}),(0,x.jsx)(a.Col,{span:2,children:(0,x.jsx)(a.Button,{onClick:()=>(e=>{const t=[...r];return t.splice(e,1),c(t)})(t),type:"text",icon:(0,x.jsx)(o.default,{name:"remove-circle-outline"})})}),!p&&Number(s)%1!==0&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:12,children:[(0,x.jsx)(o.default,{style:{color:"#F9575E"},name:"warning-outline"}),(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})})]})},t)})),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Button,{icon:(0,x.jsx)(o.default,{name:"add-outline"}),size:"large",type:"dashed",block:!0,style:{background:"transparent"},onClick:()=>{const e=[...r];return e.push(m),c(e)},children:"Add more"})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(li,{walletAddress:t})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(a.Button,{onClick:e=>(e.stopPropagation(),s(!1)),type:"ghost",children:"Cancel"}),(0,x.jsx)(a.Button,{disabled:j,onClick:e=>(e.stopPropagation(),h(Ie({walletAddress:t,nextRecipientInfos:r})),s(!1)),type:"primary",children:"update"})]})})]})})},ai=e=>{let{vestingItem:t,selected:s=!1,onChecked:r=(()=>{}),index:d}=e;const[u,p]=(0,l.useState)(!1),h=(0,n.useSelector)((e=>e.file.selectedFile)),m=(0,n.useSelector)((e=>e.setting.decimal)),j=(0,n.useSelector)((e=>e.recipients.expirationTime)),y=(0,n.useDispatch)(),f=!c.account.isAddress(t.address),g=(0,l.useMemo)((()=>{for(const{amount:e}of t.config)if(!m&&Number(e)%1!==0)return!0;return!1}),[m,t.config]);return(0,x.jsxs)(a.Row,{onClick:()=>p(!0),gutter:[16,8],align:"middle",wrap:!1,className:"vesting-item",children:[(0,x.jsx)(a.Col,{span:2,children:(0,x.jsxs)(a.Space,{children:[s&&(0,x.jsx)(a.Checkbox,{checked:null===h||void 0===h?void 0:h.includes(t.address),onChange:e=>r(e.target.checked,t.address),className:"lightning-checkbox",onClick:e=>e.stopPropagation()}),(0,x.jsxs)(a.Typography.Text,{type:"secondary",children:["#",d+1]})]})}),(0,x.jsx)(a.Col,{span:4,children:(0,x.jsx)(a.Tooltip,{title:t.address,children:(0,x.jsx)(a.Typography.Text,{style:{color:f?"#F9575E":""},children:i.util.shortenAddress(t.address)})})}),(0,x.jsx)(a.Col,{span:16,className:g?"recipient-input-error":"",children:(0,x.jsx)(a.Row,{gutter:[16,8],children:t.config.map(((e,t)=>{let{amount:s,unlockTime:n}=e;const i=n>j&&j;return(0,x.jsx)(a.Col,{className:i?"vesting-config-error":"vesting-config",children:(0,x.jsxs)(a.Typography.Text,{className:"caption",children:[s," / ",ht()(n).format(J)]})},t)}))})}),(0,x.jsx)(a.Col,{span:2,className:"vesting-action",children:(0,x.jsx)(a.Button,{onClick:()=>y(De(t.address)),icon:(0,x.jsx)(o.default,{name:"trash-outline"}),type:"text"})}),(0,x.jsx)(ri,{setVisible:p,visible:u,walletAddress:t.address})]})},oi={walletAddress:"",amount:""},ci=()=>{const[e,t]=(0,l.useState)(oi),[s,i]=(0,l.useState)(0),[r,d]=(0,l.useState)(""),[u,p]=(0,l.useState)(""),h=(0,n.useSelector)((e=>e.setting.decimal)),m=(0,n.useSelector)((e=>e.recipients.recipientInfos)),j=(0,n.useSelector)((e=>e.recipients.expirationTime)),y=(0,n.useDispatch)(),f=(0,l.useCallback)((()=>e.walletAddress||e.amount?y(ie(!0)):y(ie(!1))),[y,e.amount,e.walletAddress]),g=(0,l.useMemo)((()=>s>j&&j?"Unlock time must be less than the expiration time.":""),[j,s]);return(0,l.useEffect)((()=>{f()}),[f]),(0,x.jsxs)(a.Row,{gutter:[16,16],align:"middle",style:{padding:"12px 16px",background:"#394747"},children:[(0,x.jsx)(a.Col,{xs:24,md:12,xl:15,children:(0,x.jsx)(a.Input,{value:e.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:s=>{t({...e,[s.target.name]:s.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,x.jsx)(a.Col,{xs:24,md:5,xl:4,children:(0,x.jsx)(a.DatePicker,{placeholder:"Select time",suffixIcon:(0,x.jsx)(o.default,{name:"time-outline"}),className:"date-option",onChange:e=>i((null===e||void 0===e?void 0:e.valueOf())||0),clearIcon:null,showTime:{showSecond:!1},value:s?ht()(s):null,placement:"bottomRight",format:J})}),(0,x.jsx)(a.Col,{xs:24,md:5,xl:4,children:(0,x.jsx)(hn.Z,{value:e.amount,name:"amount",placeholder:"Amount",onChange:s=>t({...e,amount:s}),autoComplete:"off",className:"recipient-input"})}),(0,x.jsx)(a.Col,{xs:24,md:2,xl:1,children:(0,x.jsx)(a.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:()=>{const{walletAddress:n,amount:l}=e;if(!c.account.isAddress(n))return p("Wrong wallet address");if(!l)return d("Amount cannot be empty");if(!h&&Number(l)%1!==0)return d("Should be natural numbers");let r=[];const a={address:n,amount:l,unlockTime:s};if(r.push(a),m[n]){r=[...m[n]].concat(r)}return t(oi),p(""),d(""),i(0),y(Ne({walletAddress:n,nextRecipients:r}))},disabled:!!g||!s,children:"ok"})}),(u||r||g)&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(o.default,{style:{color:"#f2323f"},name:"warning-outline"}),(0,x.jsx)(a.Typography.Text,{type:"danger",children:u||r||g})]})})]})},di=e=>{let{activeKey:t="",selected:s=!1,onSelect:n,onCollapsed:i}=e;return s?(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>n(!1),children:"Cancel"}):t?(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>i(""),children:"Close"}):(0,x.jsxs)(a.Space,{size:24,children:[(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>n(!0),children:"SELECT"}),(0,x.jsx)(a.Button,{type:"text",size:"small",onClick:()=>i(V.activeKey),style:{color:"#42E6EB"},children:"ADD MORE"})]})},ui=e=>{let{remove:t=(()=>{})}=e;const[s,i]=(0,l.useState)(!1),[r,c]=(0,l.useState)(),[d,u]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),m=(0,n.useDispatch)(),{file:{fileName:j,selectedFile:y},recipients:{recipientInfos:f}}=(0,n.useSelector)((e=>e)),g=si({type:G.valid}),C=si({type:G.invalid}),b=(e,t)=>m(Tn({checked:e,walletAddress:t})),w=(0,l.useCallback)((()=>{if(null===y||void 0===y||!y.length)return;u(!0);const e={...f};for(const t of y)delete e[t];m(ke({recipientInfos:e})),m(An()),u(!1),i(!1)}),[m,f,y]),{amountError:v}=en();return(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Card,{className:"file-uploaded",bodyStyle:{padding:"8px 16px"},children:(0,x.jsxs)(a.Row,{gutter:8,children:[(0,x.jsx)(a.Col,{flex:"auto",children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(o.default,{name:"document-attach-outline"}),(0,x.jsx)(a.Typography.Text,{style:{color:"inherit"},children:j})]})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{type:"text",size:"small",style:{color:"inherit"},icon:(0,x.jsx)(o.default,{name:"close-outline"}),onClick:()=>h(!0)})})]})})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[12,12],children:[(0,x.jsx)(a.Col,{flex:"auto",children:s&&(0,x.jsx)(a.Space,{children:(0,x.jsx)(a.Button,{type:"text",size:"small",icon:(0,x.jsx)(o.default,{name:"trash-outline"}),onClick:w,disabled:!(null!==y&&void 0!==y&&y.length),children:"Delete"})})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(di,{activeKey:r,selected:s,onSelect:i,onCollapsed:c})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Collapse,{activeKey:r,bordered:!1,className:"auto-add-new",children:(0,x.jsx)(a.Collapse.Panel,{header:void 0,children:(0,x.jsx)(ci,{})},V.activeKey)})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Spin,{spinning:d,children:(0,x.jsx)(a.Card,{bordered:!1,className:"card-content",children:(0,x.jsxs)(a.Row,{children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ii,{selected:s,onChecked:e=>{if(e){const e=C.concat(g).map((e=>{let{address:t}=e;return t}));m(kn(e))}else m(An())}})}),C.map(((e,t)=>(0,x.jsx)(a.Col,{span:24,className:t+1===C.length?"last-item-error-data":"",children:(0,x.jsx)(ai,{vestingItem:e,selected:s,onChecked:b,index:g.length+t})},e.address+t))),g.map(((e,t)=>(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ai,{vestingItem:e,selected:s,onChecked:b,index:t})},e.address+t)))]})})})}),v&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:12,children:[(0,x.jsx)(o.default,{style:{color:"#F9575E"},name:"warning-outline"}),(0,x.jsx)(a.Typography.Text,{style:{color:"#F9575E"},children:"Should be natural numbers"})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(gn,{})})]})}),(0,x.jsx)(Xs,{title:"Do you want to delete this file? ",description:"Data will not be saved.",visible:p,setVisible:h,onConfirm:t,onCancel:()=>h(!1),btnText:"delete"})]})},pi=s.p+"static/media/example-vesting.8d5ef68a6964745a19b8.csv",hi=e=>{let{visible:t,description:s,onClose:n}=e;return(0,x.jsx)(a.Modal,{visible:t,closeIcon:(0,x.jsx)(o.default,{name:"close-outline"}),onCancel:n,footer:null,className:"card-lightning",style:{paddingBottom:0},children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{size:15,align:"baseline",children:[(0,x.jsx)(o.default,{name:"alert-circle-outline",style:{color:"#FA8C16",fontSize:18}}),(0,x.jsxs)(a.Space,{size:4,direction:"vertical",children:[(0,x.jsx)(a.Typography.Title,{level:4,children:"Can't import file!"}),s]})]})}),(0,x.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,x.jsx)(a.Button,{onClick:n,type:"primary",children:"try again"})})]})})},xi=()=>{const e=(0,n.useDispatch)(),[t,s]=(0,l.useState)(!1),[i,r]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1),{recipients:{recipientInfos:u}}=(0,n.useSelector)((e=>e)),p=(0,l.useCallback)((async t=>{s(!0);const n=await(e=>new Promise(((t,s)=>dn().parse(e,{skipEmptyLines:!0,complete:e=>{let{data:s}=e;t(s)}}))))(t),i={};for(const e of n){if(e.length<=2)return s(!1),d(!0);const[t,n,l]=e,r={address:t,amount:n,unlockTime:new Date(l).getTime()};if(i[t]){let e=[...i[t]];e.push(r),i[t]=e}else i[t]=[r]}return e(Sn(t.name)),e(ke({recipientInfos:i})),s(!1),!1}),[e]),h=async()=>(e(Ee()),!0),m=(0,l.useMemo)((()=>i?(0,x.jsxs)(a.Typography.Text,{children:["Wrong date format. It\u2019s should be"," ",(0,x.jsx)("span",{style:{color:"#42E6EB"},children:"MM-DD-YYYY HH:mm."})]}):(0,x.jsx)(a.Typography.Text,{children:"Wrong format file"})),[i]);return Object.values(u).length?(0,x.jsx)(ui,{remove:h}):(0,x.jsxs)(a.Row,{gutter:[8,8],justify:"end",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Spin,{spinning:t,children:(0,x.jsx)(a.Upload.Dragger,{accept:".csv,.txt",beforeUpload:p,onRemove:h,maxCount:1,className:"upload-file",showUploadList:!0,progress:{strokeWidth:2,showInfo:!0},fileList:[],children:(0,x.jsxs)(a.Space,{direction:"vertical",size:24,align:"center",children:[(0,x.jsx)(a.Image,{src:Bn,preview:!1}),(0,x.jsxs)(a.Space,{direction:"vertical",size:4,align:"center",children:[(0,x.jsx)(a.Typography.Text,{children:"Click or Drop file to upload"}),(0,x.jsxs)(a.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,x.jsx)("code",{children:".csv"}),","," ",(0,x.jsx)("code",{children:".txt"}),"."]})]})]})})})}),(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Button,{type:"text",style:{padding:0,background:"transparent",fontWeight:700},icon:(0,x.jsx)(o.default,{name:"download-outline"}),onClick:async()=>{if(!pi)return;const e=await C(pi)||"";pn()(e,"example.csv")},children:"Download sample"})}),(0,x.jsx)(hi,{visible:c,onClose:()=>(r(!1),d(!1)),description:m})]})},mi=()=>(0,x.jsx)(a.Card,{bordered:!1,className:"card-lightning",children:(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Qs,{label:"Fill in recipient information"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(xi,{})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(ni,{})})]})}),ji={walletAddress:"",amount:""},yi=()=>{const[e,t]=(0,l.useState)(ji),[s,i]=(0,l.useState)(!1),[r,d]=(0,l.useState)(""),[u,m]=(0,l.useState)(""),[j,y]=(0,l.useState)([]),f=(0,n.useSelector)((e=>e.recipients.configs)),g=(0,n.useSelector)((e=>e.main.TGE)),C=(0,n.useSelector)((e=>e.main.TGETime)),b=(0,n.useSelector)((e=>e.main.mintSelected)),w=(0,n.useSelector)((e=>e.recipients.recipientInfos)),v=(0,n.useSelector)((e=>e.recipients.configs.cliff)),S=(0,n.useSelector)((e=>e.setting.decimal)),T=St(b)||0,A=(0,n.useDispatch)(),{calcListAmount:k}=mn(),R=(0,l.useCallback)((()=>e.walletAddress||e.amount?A(ie(!0)):A(ie(!1))),[A,e.amount,e.walletAddress]);return(0,l.useEffect)((()=>{R()}),[R]),(0,x.jsxs)(a.Row,{gutter:[16,16],align:"middle",style:{padding:"12px 16px",background:"#394747"},children:[(0,x.jsx)(a.Col,{xs:10,md:14,xl:19,children:(0,x.jsx)(a.Input,{value:e.walletAddress,name:"walletAddress",placeholder:"Wallet address",onChange:s=>{t({...e,[s.target.name]:s.target.value})},className:"recipient-input",autoComplete:"off"})}),(0,x.jsx)(a.Col,{xs:10,md:8,xl:4,children:(0,x.jsx)(hn.Z,{value:e.amount,name:"amount",placeholder:"Amount",onChange:s=>t({...e,amount:s}),autoComplete:"off",className:"recipient-input"})}),(0,x.jsx)(a.Col,{xs:4,md:2,xl:1,children:(0,x.jsx)(a.Button,{type:"text",size:"small",style:{padding:0,color:"#42E6EB"},onClick:()=>{const{walletAddress:s,amount:n}=e;if(!c.account.isAddress(s))return m("Wrong wallet address");if(!n)return d("Amount cannot be empty");if(!S&&Number(n)%1!==0)return d("Should be natural numbers");const{distributeIn:l,frequency:r}=f;let a=h.utilsBN.decimalize(n,T);const o=Math.floor((0,he.Z)(l)/(0,he.Z)(r)),u=[],x=g?a.mul(new(p())(g)).div(new(p())(100)):new(p())(0);a=a.sub(x);const j={address:s,amount:h.utilsBN.undecimalize(x,T),unlockTime:C};u.push(j);const b=k(a,o);for(let e=1;e<=o;e++){let t=0;1===e&&(t=C+(0,he.Z)(v)),e>1&&(t=(0,he.Z)(r)+u[e-1].unlockTime);const n={address:s,amount:h.utilsBN.undecimalize(b[e-1],T),unlockTime:t};u.push(n)}return w[s]?(y(u),i(!0)):(m(""),d(""),t(ji),A(Ne({walletAddress:s,nextRecipients:u})))},children:"ok"})}),(u||r)&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{children:[(0,x.jsx)(o.default,{style:{color:"#f2323f"},name:"warning-outline"}),(0,x.jsx)(a.Typography.Text,{type:"danger",children:u||r})]})}),(0,x.jsx)(Xs,{btnText:"Replace",description:"Do you want replace this recipient",title:"Recipient existed",onCancel:()=>i(!1),onConfirm:()=>{i(!1);const{walletAddress:s}=e;return t(ji),m(""),d(""),A(Ne({walletAddress:s,nextRecipients:j}))},setVisible:i,visible:s})]})},fi=e=>{let{vestingItem:t,index:s}=e;const[r,d]=(0,l.useState)(!1),u=(0,n.useSelector)((e=>e.setting.decimal)),p=(0,n.useSelector)((e=>e.recipients.expirationTime)),h=(0,n.useDispatch)(),m=!c.account.isAddress(t.address),j=(0,l.useMemo)((()=>{for(const{amount:e}of t.config)if(!u&&Number(e)%1!==0)return!0;return!1}),[u,t.config]);return(0,x.jsxs)(a.Row,{onClick:()=>d(!0),gutter:[16,8],align:"middle",wrap:!1,className:"vesting-item",children:[(0,x.jsx)(a.Col,{span:2,children:(0,x.jsxs)(a.Typography.Text,{type:"secondary",children:["#",s+1]})}),(0,x.jsx)(a.Col,{span:4,children:(0,x.jsx)(a.Tooltip,{title:t.address,children:(0,x.jsx)(a.Typography.Text,{style:{color:m?"#F9575E":""},children:i.util.shortenAddress(t.address)})})}),(0,x.jsx)(a.Col,{span:16,className:j?"recipient-input-error":"",children:(0,x.jsx)(a.Row,{gutter:[16,8],children:t.config.map(((e,t)=>{let{amount:s,unlockTime:n}=e;const i=n>p&&p;return(0,x.jsx)(a.Col,{className:i?"vesting-config-error":"vesting-config",children:(0,x.jsxs)(a.Typography.Text,{className:"caption",children:[s," / ",ht()(n).format(J)]})},t)}))})}),(0,x.jsx)(a.Col,{span:2,className:"vesting-action",children:(0,x.jsx)(a.Button,{onClick:()=>h(De(t.address)),icon:(0,x.jsx)(o.default,{name:"trash-outline"}),type:"text"})}),(0,x.jsx)(ri,{setVisible:d,visible:r,walletAddress:t.address})]})},gi=()=>(0,x.jsxs)(a.Row,{gutter:[16,8],align:"middle",wrap:!1,style:{padding:8},children:[(0,x.jsx)(a.Col,{span:2,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"No."})}),(0,x.jsx)(a.Col,{span:4,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Wallet address"})}),(0,x.jsx)(a.Col,{span:16,children:(0,x.jsx)(a.Typography.Text,{type:"secondary",children:"Amount & Unlock time"})}),(0,x.jsx)(a.Col,{span:2})]}),Ci=()=>{const e=si({type:G.valid});return(0,x.jsx)(a.Row,{className:"display-recipient",justify:"center",children:e.length?(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(gi,{})}),e.map(((e,t)=>(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(fi,{vestingItem:e,index:t})},e.address)))]}):(0,x.jsx)(a.Col,{children:(0,x.jsx)(a.Typography.Text,{children:"Please input recipient information"})})})},bi=()=>{const[e,t]=(0,l.useState)(!1),{main:{mintSelected:s,isTyping:i}}=(0,n.useSelector)((e=>e)),{quantity:r}=ln(),o=rn(s),{amountError:c}=en(),d=(0,n.useDispatch)(),u=(0,l.useCallback)((async()=>{await d(Ee()),await d(Ae(0)),await d(Te(0)),await d(ue(Z.SelectMethod)),await d(te(P.manual))}),[d]),p=r<=0||c||o<0||i;return(0,x.jsxs)(a.Card,{className:"card-lightning",bordered:!1,children:[(0,x.jsxs)(a.Row,{gutter:[32,32],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Qs,{label:"Fill in recipient information"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(yi,{})}),(0,x.jsx)(Ci,{}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Cn,{})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{onClick:()=>t(!0),size:"large",type:"ghost",block:!0,children:"Back"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",type:"primary",onClick:()=>d(ue(Z.ConfirmTransfer)),block:!0,disabled:p,children:"Continue"})})]})})]}),(0,x.jsx)(Xs,{visible:e,setVisible:t,onCancel:()=>t(!1),title:"Are you sure you want to go back?",description:"Your data will not be saved.",btnText:"go back",onConfirm:u})]})},wi=()=>{const e=(0,n.useSelector)((e=>e.main.TGETime)),t=(0,n.useSelector)((e=>e.recipients.expirationTime)),s=(0,n.useDispatch)(),i=(0,l.useMemo)((()=>t&&e>t?"Must be less than the expiration time.":""),[e,t]);return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",children:"TGE Time"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.DatePicker,{placeholder:"Select time",suffixIcon:(0,x.jsx)(o.default,{name:"time-outline"}),className:"date-option",onChange:e=>{return t=(null===e||void 0===e?void 0:e.valueOf())||0,s(ae(t));var t},clearIcon:null,value:e?ht()(e):null,showTime:{showSecond:!1},placement:"bottomRight",format:J})}),i&&(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{className:"caption",style:{color:"#F9575E"},children:i})})]})},vi=()=>{const e=(0,n.useSelector)((e=>e.main.TGE)),t=(0,n.useDispatch)();return(0,x.jsxs)(a.Row,{gutter:[8,8],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Space,{align:"baseline",children:[(0,x.jsx)(a.Typography.Text,{className:"caption",children:"TGE Percentage"}),(0,x.jsx)(a.Tooltip,{title:"Percent of token allocation for the first time",children:(0,x.jsx)(o.default,{name:"information-circle-outline"})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.InputNumber,{onChange:e=>t(re(e)),value:e,className:"TGE-input",placeholder:"Input %",type:"number",max:"100",min:"0"})})]})},Si=()=>{const[e,t]=(0,l.useState)(!0),s=(0,n.useSelector)((e=>e.main.methodSelected)),i=(0,n.useSelector)((e=>e.main.TGETime)),r=(0,n.useSelector)((e=>e.recipients.configs.cliff)),c=(0,n.useSelector)((e=>e.recipients.expirationTime)),d=(0,n.useSelector)((e=>e.main.mintSelected)),u=(0,n.useSelector)((e=>e.recipients.configs.distributeIn)),p=(0,n.useSelector)((e=>e.recipients.configs.frequency)),h=(0,n.useDispatch)(),{pushHistory:m}=D(),j=(0,l.useMemo)((()=>{if(e||!c)return"";if(c<Date.now())return"Must be greater than current time.";const t=i+(0,he.Z)(r)+(0,he.Z)(u);return c<t&&s===P.manual?"Must be greater than the total vesting time.":""}),[i,r,u,c,e,s]),y=(0,l.useMemo)((()=>{if(d===W||!s)return!0;const t=i+(0,he.Z)(r);return s===P.manual?!i||c<t&&!e||c-t<(0,he.Z)(u)&&!e||(0,he.Z)(u)<(0,he.Z)(p):!c&&!e}),[i,r,u,c,p,e,s,d]);return(0,x.jsx)(a.Card,{className:"card-lightning",bordered:!1,children:(0,x.jsxs)(a.Row,{gutter:[32,32],align:"middle",children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Qs,{label:"Select token type and input method"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{xs:24,md:24,xl:12,children:(0,x.jsx)(Y,{activeMintAddress:d,onSelect:e=>h(se(e))})}),(0,x.jsx)(a.Col,{xs:24,md:24,xl:12,children:(0,x.jsx)(Qn,{mintAddress:d})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Text,{children:"Choose vesting schedule calculation mode"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Radio.Group,{onChange:e=>h(te(e.target.value)),style:{width:"100%"},className:"select-card",value:s,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[(0,x.jsx)(a.Col,{xs:24,sm:12,md:12,lg:12,children:(0,x.jsx)(a.Radio.Button,{value:P.manual,children:(0,x.jsx)(qn,{label:"Automatic",description:"Input your vesting campaign details. Lightning Tunnel will do the calculation!",active:s===P.manual})})}),(0,x.jsx)(a.Col,{xs:24,sm:12,md:12,lg:12,children:(0,x.jsx)(a.Radio.Button,{value:P.auto,children:(0,x.jsx)(qn,{label:"Manual",description:"Upload a CSV or TXT file containing wallet addresses and self-calculated vesting schedule.",active:s===P.auto})})})]})})})]})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsxs)(a.Row,{gutter:[16,16],children:[s===P.manual&&(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)(a.Col,{xs:24,md:12,xl:8,children:(0,x.jsx)(vi,{})}),(0,x.jsx)(a.Col,{xs:24,md:12,xl:8,children:(0,x.jsx)(wi,{})}),(0,x.jsx)(a.Col,{xs:24,md:12,xl:8,children:(0,x.jsx)(we,{})}),(0,x.jsx)(a.Col,{xs:24,md:12,xl:8,children:(0,x.jsx)(ge,{})}),(0,x.jsx)(a.Col,{xs:24,md:12,xl:8,children:(0,x.jsx)(je,{})})]}),(0,x.jsx)(a.Col,{xs:24,md:12,xl:8,children:(0,x.jsx)(Jn,{label:"Expiration time",onSwitch:t,switchText:"Unlimited",onChange:t=>h(Te(e?0:t)),placeholder:"Select time",value:c,error:j,checked:e,explain:(0,x.jsx)(a.Tooltip,{title:"Vesting expiration time, after this time users will not be able to claim the token and you can get it back.",children:(0,x.jsx)(o.default,{name:"information-circle-outline"})})})})]})})]})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>m("/vesting"),block:!0,type:"ghost",children:"Cancel"})}),(0,x.jsx)(a.Col,{span:12,children:(0,x.jsx)(a.Button,{size:"large",onClick:()=>{h(te(s)),h(ue(Z.AddRecipient))},block:!0,type:"primary",disabled:y,children:"Continue"})})]})})},Ti=()=>{const{main:{methodSelected:e},steps:{step:t}}=(0,n.useSelector)((e=>e));return t===Z.SelectMethod?(0,x.jsx)(Si,{}):t===Z.AddRecipient?e===P.auto?(0,x.jsx)(mi,{}):(0,x.jsx)(bi,{}):(0,x.jsx)(Gn,{})},Ai=()=>(0,x.jsxs)(a.Row,{gutter:[24,24],children:[(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(a.Typography.Title,{level:2,children:"Add new Vesting"})}),(0,x.jsx)(a.Col,{span:24,children:(0,x.jsx)(Ti,{})})]}),ki=()=>{const e=(0,n.useSelector)((e=>e.distributors)),t=(0,n.useDispatch)(),s=(0,i.useWalletAddress)();return(0,l.useEffect)((()=>{t(Hn({walletAddress:s,distributors:e}))}),[t,s,e]),(0,x.jsx)(l.Fragment,{})},{sol:{utility:Ri}}=R,Ni="distributor",Di=(0,H.createAsyncThunk)("distributor/getDistributors",(async()=>{const{account:e}=Ri.program;let t={};const s=await e.distributor.all();for(const{publicKey:n,account:i}of s){t[n.toBase58()]=i}return t})),Bi=(0,H.createAsyncThunk)("distributor/upsetDistributor",(e=>{let{address:t,distributorData:s}=e;return{[t]:s}})),Ei=(0,H.createSlice)({name:Ni,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Di.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Bi.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{utility:Ii}}=R;let Mi=0;const Oi=()=>{const e=(0,n.useDispatch)(),t=(0,l.useCallback)((async()=>{Mi=Ii.program.provider.connection.onProgramAccountChange(Ii.program.programId,(t=>{const s=Ii.parseDistributorData(t.accountInfo.data);e(Bi({address:t.accountId.toBase58(),distributorData:s}))}),"confirmed",[{dataSize:160}])}),[e]);return(0,l.useEffect)((()=>(e(Di()),t(),()=>{(async()=>{await Ii.removeListener(Mi),Mi=0})()})),[e,t]),(0,x.jsx)(l.Fragment,{})},{sol:{utility:zi}}=R,Fi="Receipts",Ui=(0,H.createAsyncThunk)("Receipts/getReceipts",(async e=>{let{authorityAddress:t}=e;if(!c.account.isAddress(t))throw new Error("Invalid address");const s=await zi.program.account.receipt.all([{memcmp:{offset:8,bytes:t}}]);let n={};for(const i of s)n[i.publicKey.toBase58()]=i.account;return n})),Li=(0,H.createAsyncThunk)("Receipts/upsetReceipt",(e=>{let{address:t,receipt:s}=e;return{[t]:s}})),_i=(0,H.createSlice)({name:Fi,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ui.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Li.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{utility:Hi}}=R;let Wi=0;const Yi=()=>{const e=(0,n.useDispatch)(),t=(0,i.useWalletAddress)(),s=(0,l.useCallback)((async()=>{try{if(!c.account.isAddress(t))return;await e(Ui({authorityAddress:t})).unwrap()}catch(s){return window.notify({type:"error",description:"Cannot fetch data of receipts"})}}),[e,t]),r=(0,l.useCallback)((async()=>{Wi=Hi.program.provider.connection.onProgramAccountChange(Hi.program.programId,(t=>{const s=Hi.parseReceiptData(t.accountInfo.data);e(Li({address:t.accountId.toBase58(),receipt:s}))}),"confirmed",[{dataSize:128},{memcmp:{offset:8,bytes:t}}])}),[e,t]);return(0,l.useEffect)((()=>(r(),s(),()=>{(async()=>{await Hi.removeListener(Wi),Wi=0})()})),[s,r]),(0,x.jsx)(l.Fragment,{})};var Pi=s(97429).Buffer;const{sol:{utility:Zi}}=R,Vi="listReceived",Ki={listReceived:void 0},$i=(0,H.createAsyncThunk)("listReceived/fetchListReceived",(async e=>{let t,{distributors:s}=e;const n=Object.keys(s).map((e=>({address:e,...s[e]}))),i=new E,l=await window.sentre.wallet.getAddress();if(!l)throw new Error("Please connect wallet first!");return await Promise.all(n.map((async e=>{let{metadata:s,mint:n,authority:r,address:a}=e;try{const e=await g(s),c=await i.get(e),u=d.MerkleDistributor.fromBuffer(Pi.from(c)).receipients,p=n.toBase58(),h=r.toBase58();for(let s=0;s<u.length;s++){t=t?{...t}:{};const{authority:e,salt:n}=u[s];if(l===e.toBase58()){var o;const e={mintAddress:p,sender:h,distributorAddress:a,receiptAddress:await Zi.deriveReceiptAddress(n,a),recipientData:u[s],index:s};if(null!==(o=t)&&void 0!==o&&o[a]){const{children:s}=t[a];let n=[];s||(n=[{...t[a]}]),s&&(n=[...s]),n.push(e),t[a].children=n;continue}t[a]=e}}}catch(c){}}))),{listReceived:t}})),Gi=(0,H.createSlice)({name:Vi,initialState:Ki,reducers:{},extraReducers:e=>{e.addCase($i.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Ji=()=>{const e=(0,n.useSelector)((e=>e.distributors)),t=(0,n.useDispatch)(),s=(0,l.useCallback)((()=>t($i({distributors:e}))),[t,e]);return(0,l.useEffect)((()=>{s()}),[s]),(0,x.jsx)(l.Fragment,{})},qi=s.p+"static/media/background-LT.4c9e016f719ffe61dc63.png",{Content:Qi}=a.Layout,Xi=()=>{const[e,t]=(0,l.useState)(!1),{appRoute:s}=D(),{setBackground:n}=(0,i.useUI)(),{ui:{width:c}}=(0,i.useUI)(),d=c<992,u=!d||e,p=d?"sidebar mobile":"sidebar",h=d?350:231;return(0,l.useEffect)((()=>{n({light:qi,dark:qi})}),[n]),(0,x.jsxs)(a.Layout,{className:"main-layout",children:[(0,x.jsx)(a.Drawer,{placement:"left",className:p,width:h,mask:d,visible:u,onClose:()=>t(!1),forceRender:!0,children:(0,x.jsx)(Fe,{})}),(0,x.jsxs)(a.Layout,{children:[(0,x.jsxs)(Qi,{children:[(0,x.jsx)(a.Row,{justify:"center",children:(0,x.jsx)(a.Col,{xs:24,xxl:16,children:(0,x.jsxs)(r.Switch,{children:[(0,x.jsx)(r.Route,{exact:!0,path:`${s}/dashboard`,component:Lt}),(0,x.jsx)(r.Route,{exact:!0,path:`${s}/vesting`,component:Ls}),(0,x.jsx)(r.Route,{exact:!0,path:`${s}/vesting/add-new`,component:Ai}),(0,x.jsx)(r.Route,{exact:!0,path:`${s}/airdrop/add-new`,component:ti}),(0,x.jsx)(r.Route,{exact:!0,path:`${s}/airdrop`,component:Ys}),(0,x.jsx)(r.Route,{exact:!0,path:`${s}/redeem/:distributorAddress`,component:_}),(0,x.jsx)(r.Redirect,{from:s,to:`${s}/dashboard`})]})})}),d&&(0,x.jsx)(a.Button,{shape:"circle",className:"btn-sidebar",icon:(0,x.jsx)(o.default,{name:e?"close-outline":"menu-outline"}),onClick:()=>t(!e)})]}),(0,x.jsx)(Oi,{}),(0,x.jsx)(Yi,{}),(0,x.jsx)(ki,{}),(0,x.jsx)(Ji,{})]})]})},el=e=>{let{children:t}=e;return(0,x.jsxs)("div",{className:"background-container",children:[t,Array.apply(null,Array(20)).map(((e,t)=>(0,x.jsx)("div",{className:"circle-container",children:(0,x.jsx)("div",{className:"circle"})},t)))]})};var tl=s(50794),sl=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const nl={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof tl.web3.PublicKey||e instanceof tl.BN||sl.isBuffer(e)}},il=(0,H.configureStore)({middleware:e=>e(nl),devTools:!1,reducer:{main:oe,steps:pe,setting:$s,file:Rn,history:Yn,distributors:Ei,recipients:Me,receipts:_i,listReceived:Gi}});var ll=s(45597);const{manifest:{appId:rl}}=R,al=()=>(0,x.jsx)(i.UIProvider,{appId:rl,antd:{prefixCls:rl},children:(0,x.jsx)(n.Provider,{store:il,children:(0,x.jsx)(el,{children:(0,x.jsx)(Xi,{})})})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.9c9c3fa1792c813f11b8.md"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.fea1f5708dfa87c097e9.png"},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.0a7aebcb98e7fae58a57.png"},43094:()=>{},69159:()=>{},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},89408:()=>{},47956:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx-sr-594275.21507557.chunk.js.map